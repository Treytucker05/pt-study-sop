import{c as we,r as c,j as e,b as P,R as Is,d as Ds,e as k,f as Ts,P as We,g as Es,u as He,X as le}from"./index-LmqyhMoS.js";import{h as Ps,i as Rs,j as Fs,u as L,a as K,g,L as Ms,k as Ls,B as b,T as J,S as Ne,P as ce,C as ie,f as _s,l as je,D as Ee,c as Pe,d as Re,e as Fe,m as Me,I as Le,n as Y,o as _e}from"./layout-c-mp-zQD.js";import{C as te,a as de,b as me,c as ae}from"./card-CzNqWgRj.js";import{e as qs,B as xe,S as qe,a as ze,b as $e,c as Be,d as E}from"./select-DAum_DyR.js";import{c as Ue,R as zs,T as $s,C as Bs,a as ye}from"./index-CbDnnxY0.js";import{T as Ks,A as Gs,a as Ws,b as Hs,c as Us,d as Ys,e as Vs,f as Js,g as Qs}from"./alert-dialog-DcQi2pqx.js";import{F as Xs,a as Ke}from"./folder--hkyeMaf.js";import{F as Zs}from"./file-text-v9-Dk7ZW.js";import{R as Ge}from"./refresh-cw-CY7Wf6rg.js";import{i as et,f as st}from"./format-D7m0hUtg.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],at=we("database",tt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],rt=we("file",nt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],lt=we("layers",ot),Ye=c.forwardRef(({className:t,...n},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:P("w-full caption-bottom text-sm",t),...n})}));Ye.displayName="Table";const Ve=c.forwardRef(({className:t,...n},a)=>e.jsx("thead",{ref:a,className:P("[&_tr]:border-b",t),...n}));Ve.displayName="TableHeader";const Je=c.forwardRef(({className:t,...n},a)=>e.jsx("tbody",{ref:a,className:P("[&_tr:last-child]:border-0",t),...n}));Je.displayName="TableBody";const ct=c.forwardRef(({className:t,...n},a)=>e.jsx("tfoot",{ref:a,className:P("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...n}));ct.displayName="TableFooter";const ve=c.forwardRef(({className:t,...n},a)=>e.jsx("tr",{ref:a,className:P("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...n}));ve.displayName="TableRow";const $=c.forwardRef(({className:t,...n},a)=>e.jsx("th",{ref:a,className:P("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n}));$.displayName="TableHead";const B=c.forwardRef(({className:t,...n},a)=>e.jsx("td",{ref:a,className:P("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...n}));B.displayName="TableCell";const it=c.forwardRef(({className:t,...n},a)=>e.jsx("caption",{ref:a,className:P("mt-4 text-sm text-muted-foreground",t),...n}));it.displayName="TableCaption";function dt(t,n,{checkForDefaultPrevented:a=!0}={}){return function(d){if(t?.(d),a===!1||!d.defaultPrevented)return n?.(d)}}var mt=Is[" useInsertionEffect ".trim().toString()]||Ds;function Qe({prop:t,defaultProp:n,onChange:a=()=>{},caller:i}){const[d,l,f]=xt({defaultProp:n,onChange:a}),x=t!==void 0,y=x?t:d;{const m=c.useRef(t!==void 0);c.useEffect(()=>{const p=m.current;p!==x&&console.warn(`${i} is changing from ${p?"controlled":"uncontrolled"} to ${x?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),m.current=x},[x,i])}const v=c.useCallback(m=>{if(x){const p=ut(m)?m(t):m;p!==t&&f.current?.(p)}else l(m)},[x,t,l,f]);return[y,v]}function xt({defaultProp:t,onChange:n}){const[a,i]=c.useState(t),d=c.useRef(a),l=c.useRef(n);return mt(()=>{l.current=n},[n]),c.useEffect(()=>{d.current!==a&&(l.current?.(a),d.current=a)},[a,d]),[a,i,l]}function ut(t){return typeof t=="function"}var R="Accordion",ht=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ke,pt,ft]=qs(R),[he]=Ts(R,[ft,Ue]),Ae=Ue(),Xe=k.forwardRef((t,n)=>{const{type:a,...i}=t,d=i,l=i;return e.jsx(ke.Provider,{scope:t.__scopeAccordion,children:a==="multiple"?e.jsx(jt,{...l,ref:n}):e.jsx(Nt,{...d,ref:n})})});Xe.displayName=R;var[Ze,gt]=he(R),[es,bt]=he(R,{collapsible:!1}),Nt=k.forwardRef((t,n)=>{const{value:a,defaultValue:i,onValueChange:d=()=>{},collapsible:l=!1,...f}=t,[x,y]=Qe({prop:a,defaultProp:i??"",onChange:d,caller:R});return e.jsx(Ze,{scope:t.__scopeAccordion,value:k.useMemo(()=>x?[x]:[],[x]),onItemOpen:y,onItemClose:k.useCallback(()=>l&&y(""),[l,y]),children:e.jsx(es,{scope:t.__scopeAccordion,collapsible:l,children:e.jsx(ss,{...f,ref:n})})})}),jt=k.forwardRef((t,n)=>{const{value:a,defaultValue:i,onValueChange:d=()=>{},...l}=t,[f,x]=Qe({prop:a,defaultProp:i??[],onChange:d,caller:R}),y=k.useCallback(m=>x((p=[])=>[...p,m]),[x]),v=k.useCallback(m=>x((p=[])=>p.filter(A=>A!==m)),[x]);return e.jsx(Ze,{scope:t.__scopeAccordion,value:f,onItemOpen:y,onItemClose:v,children:e.jsx(es,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(ss,{...l,ref:n})})})}),[yt,pe]=he(R),ss=k.forwardRef((t,n)=>{const{__scopeAccordion:a,disabled:i,dir:d,orientation:l="vertical",...f}=t,x=k.useRef(null),y=Es(x,n),v=pt(a),p=Rs(d)==="ltr",A=dt(t.onKeyDown,N=>{if(!ht.includes(N.key))return;const I=N.target,O=v().filter(G=>!G.ref.current?.disabled),u=O.findIndex(G=>G.ref.current===I),S=O.length;if(u===-1)return;N.preventDefault();let h=u;const _=0,w=S-1,D=()=>{h=u+1,h>w&&(h=_)},q=()=>{h=u-1,h<_&&(h=w)};switch(N.key){case"Home":h=_;break;case"End":h=w;break;case"ArrowRight":l==="horizontal"&&(p?D():q());break;case"ArrowDown":l==="vertical"&&D();break;case"ArrowLeft":l==="horizontal"&&(p?q():D());break;case"ArrowUp":l==="vertical"&&q();break}const F=h%S;O[F].ref.current?.focus()});return e.jsx(yt,{scope:a,disabled:i,direction:d,orientation:l,children:e.jsx(ke.Slot,{scope:a,children:e.jsx(We.div,{...f,"data-orientation":l,ref:y,onKeyDown:i?void 0:A})})})}),ue="AccordionItem",[vt,Oe]=he(ue),ts=k.forwardRef((t,n)=>{const{__scopeAccordion:a,value:i,...d}=t,l=pe(ue,a),f=gt(ue,a),x=Ae(a),y=Ps(),v=i&&f.value.includes(i)||!1,m=l.disabled||t.disabled;return e.jsx(vt,{scope:a,open:v,disabled:m,triggerId:y,children:e.jsx(zs,{"data-orientation":l.orientation,"data-state":cs(v),...x,...d,ref:n,disabled:m,open:v,onOpenChange:p=>{p?f.onItemOpen(i):f.onItemClose(i)}})})});ts.displayName=ue;var as="AccordionHeader",ns=k.forwardRef((t,n)=>{const{__scopeAccordion:a,...i}=t,d=pe(R,a),l=Oe(as,a);return e.jsx(We.h3,{"data-orientation":d.orientation,"data-state":cs(l.open),"data-disabled":l.disabled?"":void 0,...i,ref:n})});ns.displayName=as;var Se="AccordionTrigger",rs=k.forwardRef((t,n)=>{const{__scopeAccordion:a,...i}=t,d=pe(R,a),l=Oe(Se,a),f=bt(Se,a),x=Ae(a);return e.jsx(ke.ItemSlot,{scope:a,children:e.jsx($s,{"aria-disabled":l.open&&!f.collapsible||void 0,"data-orientation":d.orientation,id:l.triggerId,...x,...i,ref:n})})});rs.displayName=Se;var os="AccordionContent",ls=k.forwardRef((t,n)=>{const{__scopeAccordion:a,...i}=t,d=pe(R,a),l=Oe(os,a),f=Ae(a);return e.jsx(Bs,{role:"region","aria-labelledby":l.triggerId,"data-orientation":d.orientation,...f,...i,ref:n,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});ls.displayName=os;function cs(t){return t?"open":"closed"}var St=Xe,Ct=ts,wt=ns,is=rs,ds=ls;const Ce=St,Q=c.forwardRef(({className:t,...n},a)=>e.jsx(Ct,{ref:a,className:P("border-b",t),...n}));Q.displayName="AccordionItem";const X=c.forwardRef(({className:t,children:n,...a},i)=>e.jsx(wt,{className:"flex",children:e.jsxs(is,{ref:i,className:P("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",t),...a,children:[n,e.jsx(Fs,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));X.displayName=is.displayName;const Z=c.forwardRef(({className:t,children:n,...a},i)=>e.jsx(ds,{ref:i,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e.jsx("div",{className:P("pb-4 pt-0",t),children:n})}));Z.displayName=ds.displayName;const kt=`I need you to extract schedule events from my course syllabus.

Return ONLY a valid JSON array with NO additional text, NO markdown code blocks, NO explanation.

Structure for each item:
{
  "type": "chapter" | "quiz" | "assignment" | "exam",
  "title": "string",
  "dueDate": "YYYY-MM-DD",
  "notes": "optional string or null"
}

Rules:
1. type must be EXACTLY one of: "chapter", "quiz", "assignment", "exam"
2. dueDate must be ISO format (YYYY-MM-DD) - if no date given, use null
3. Return ONLY the JSON array, nothing else

Here's my syllabus:

[PASTE YOUR SYLLABUS BELOW]`,At=`I need you to extract learning objectives from my course material.

Return ONLY a valid JSON array with NO additional text, NO markdown code blocks, NO explanation.

Structure for each item:
{
  "loCode": "string",
  "title": "string"
}

Rules:
1. loCode: Preserve original numbering if present, or create sequential "1", "2", "3"...
2. title: Keep the objective text exactly as written
3. Return ONLY the JSON array, nothing else

Here are my learning objectives:

[PASTE YOUR LOs BELOW]`,Ot=`I need you to convert my study session notes into WRAP format.

WRAP format has 4 sections:

Section A: Obsidian Notes
- Main concepts and insights from the session
- Key points to remember

Section B: Anki Cards
- Format: "front: [question]" on one line, "back: [answer]" on next line
- Create cards for important facts and concepts

Section C: Spaced Schedule
- R1=tomorrow
- R2=3d
- R3=1w
- R4=2w

Section D: JSON Logs
\`\`\`json
{
  "merged": {
    "topic": "[main topic]",
    "mode": "Core",
    "duration_minutes": [number],
    "understanding": [1-5],
    "retention": [1-5]
  }
}
\`\`\`

Return ONLY the WRAP formatted content, NO additional text or explanation.

Here are my study notes:

[PASTE YOUR NOTES BELOW]`;function It(){const t=He(),[n,a]=c.useState(null),[i,d]=c.useState(null),[l,f]=c.useState(""),[x,y]=c.useState(""),[v,m]=c.useState(null),[p,A]=c.useState(""),[N,I]=c.useState(null),[O,u]=c.useState(null),{data:S=[]}=L({queryKey:["courses"],queryFn:()=>g.courses.getActive()}),{data:h=[]}=L({queryKey:["modules",n],queryFn:()=>n?g.modules.getByCourse(n):Promise.resolve([]),enabled:!!n}),{data:_=[]}=L({queryKey:["learningObjectives",n],queryFn:()=>n?g.learningObjectives.getByCourse(n):Promise.resolve([]),enabled:!!n}),w=K({mutationFn:async r=>{if(!n)throw new Error("Select a course first");const C=JSON.parse(r);return g.scheduleEvents.createBulk(n,C)},onSuccess:()=>{t.invalidateQueries({queryKey:["scheduleEvents"]}),f(""),m(null)},onError:r=>{m(r.message||"Failed to import schedule")}}),D=K({mutationFn:async r=>{if(!n)throw new Error("Select a course first");const C=JSON.parse(r);return g.learningObjectives.createBulk(n,i,C)},onSuccess:()=>{t.invalidateQueries({queryKey:["learningObjectives"]}),y(""),m(null)},onError:r=>{m(r.message||"Failed to import LOs")}}),q=K({mutationFn:({id:r,data:C})=>g.modules.update(r,C),onSuccess:()=>{t.invalidateQueries({queryKey:["modules"]})}}),F=r=>{navigator.clipboard.writeText(r)},G=async()=>{try{u(null);const r=N?await N.text():p,C=N?.name||"pasted_wrap.md",M=await g.brain.ingest(r,C);M.sessionSaved?(u({type:"success",message:`âœ“ Session saved! ID: ${M.sessionId}, Cards: ${M.cardsCreated||0}`}),A(""),I(null)):u({type:"error",message:M.errors?.join(", ")||M.message})}catch(r){u({type:"error",message:r.message||"Failed to ingest"})}};return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"border-2 border-primary rounded-none p-4 bg-primary/5",children:[e.jsx("h2",{className:"text-xl font-arcade text-primary mb-4",children:"WRAP SESSION INGESTION"}),O&&e.jsx("div",{className:`mb-4 p-3 rounded-none font-terminal text-sm ${O.type==="success"?"bg-green-900/30 border border-green-500 text-green-400":"bg-red-900/30 border border-red-500 text-red-400"}`,children:O.message}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>F(Ot),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Use ChatGPT to convert your notes to WRAP format, then paste or upload below:"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2 font-terminal text-muted-foreground",children:"Upload WRAP File (.md, .txt)"}),e.jsx("input",{type:"file",accept:".md,.txt",onChange:r=>{I(r.target.files?.[0]||null),A(""),u(null)},className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal text-sm"}),N&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 font-terminal",children:["Selected: ",N.name]})]}),e.jsx("div",{className:"text-center font-terminal text-xs text-muted-foreground",children:"- OR -"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2 font-terminal text-muted-foreground",children:"Paste WRAP Content"}),e.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-48 font-terminal text-sm",placeholder:"Paste your WRAP session here...",value:p,onChange:r=>{A(r.target.value),I(null),u(null)}})]}),e.jsx("button",{onClick:G,disabled:!p&&!N,className:"bg-primary hover:bg-primary/80 disabled:opacity-50 px-6 py-3 rounded-none font-arcade text-sm w-full",type:"button",children:"INGEST WRAP SESSION"})]})]}),e.jsx("h2",{className:"text-xl font-arcade text-primary",children:"MATERIAL INGESTION"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 font-terminal text-muted-foreground",children:"Select Course"}),e.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:n||"",onChange:r=>{a(r.target.value?parseInt(r.target.value):null),d(null)},children:[e.jsx("option",{value:"",children:"-- Select Course --"}),S.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),v&&e.jsx("div",{className:"bg-destructive/20 border border-destructive rounded-none p-3 text-destructive font-terminal",children:v}),n&&e.jsxs(Ce,{type:"multiple",className:"border border-secondary/40 rounded-none divide-y divide-secondary/40",children:[e.jsxs(Q,{value:"schedule",className:"border-secondary/40",children:[e.jsx(X,{className:"font-arcade text-xs text-primary px-3 hover:no-underline",children:"SCHEDULE IMPORT"}),e.jsxs(Z,{className:"px-3",children:[e.jsx("button",{onClick:()=>F(kt),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Paste the ChatGPT response (JSON array) below:"}),e.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-32 font-terminal text-sm",placeholder:'[{"type": "exam", "title": "...", "dueDate": "2026-01-20", "notes": null}]',value:l,onChange:r=>f(r.target.value)}),e.jsx("button",{onClick:()=>w.mutate(l),disabled:!l||w.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none mt-2 font-terminal text-xs",type:"button",children:w.isPending?"Importing...":"Import Schedule"})]})]}),e.jsxs(Q,{value:"modules",className:"border-secondary/40",children:[e.jsx(X,{className:"font-arcade text-xs text-primary px-3 hover:no-underline",children:"MODULES"}),e.jsx(Z,{className:"px-3",children:h.length===0?e.jsx("p",{className:"text-xs text-muted-foreground font-terminal",children:"No modules yet. Add modules manually or import."}):e.jsxs("table",{className:"w-full text-sm font-terminal",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-secondary/50",children:[e.jsx("th",{className:"text-left p-2",children:"Module"}),e.jsx("th",{className:"text-center p-2",children:"Files"}),e.jsx("th",{className:"text-center p-2",children:"NotebookLM"}),e.jsx("th",{className:"text-center p-2",children:"Status"})]})}),e.jsx("tbody",{children:h.map(r=>e.jsxs("tr",{className:"border-b border-secondary/30",children:[e.jsx("td",{className:"p-2",children:r.name}),e.jsx("td",{className:"text-center p-2",children:e.jsx("input",{type:"checkbox",checked:r.filesDownloaded,onChange:C=>q.mutate({id:r.id,data:{filesDownloaded:C.target.checked}})})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("input",{type:"checkbox",checked:r.notebooklmLoaded,onChange:C=>q.mutate({id:r.id,data:{notebooklmLoaded:C.target.checked}})})}),e.jsx("td",{className:"text-center p-2",children:r.filesDownloaded&&r.notebooklmLoaded?e.jsx("span",{className:"text-green-400",children:"Ready"}):e.jsx("span",{className:"text-yellow-400",children:"Pending"})})]},r.id))})]})})]}),e.jsxs(Q,{value:"learning-objectives",className:"border-secondary/40",children:[e.jsx(X,{className:"font-arcade text-xs text-primary px-3 hover:no-underline",children:"LEARNING OBJECTIVES IMPORT"}),e.jsxs(Z,{className:"px-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-xs mb-1 font-terminal text-muted-foreground",children:"Target Module (optional)"}),e.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:i||"",onChange:r=>d(r.target.value?parseInt(r.target.value):null),children:[e.jsx("option",{value:"",children:"-- No Module (Course-level) --"}),h.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsx("button",{onClick:()=>F(At),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Paste the ChatGPT response (JSON array) below:"}),e.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-32 font-terminal text-sm",placeholder:'[{"loCode": "1.1", "title": "Define..."}]',value:x,onChange:r=>y(r.target.value)}),e.jsx("button",{onClick:()=>D.mutate(x),disabled:!x||D.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none mt-2 font-terminal text-xs",type:"button",children:D.isPending?"Importing...":"Import LOs"}),_.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-terminal text-xs mb-2",children:["Current LOs (",_.length,")"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:_.map(r=>e.jsxs("div",{className:"text-xs py-1 border-b border-secondary/30 font-terminal",children:[e.jsx("span",{className:"text-primary",children:r.loCode}),": ",r.title,e.jsx("span",{className:`ml-2 text-[10px] px-1 rounded ${r.status==="solid"?"bg-green-600":r.status==="in_progress"?"bg-yellow-600":r.status==="need_review"?"bg-orange-600":"bg-gray-600"}`,children:r.status})]},r.id))})]})]})]})]})]})}const Dt=(t,n="MM/dd")=>{if(!t)return"-";try{const a=t instanceof Date?t:new Date(t);return et(a)?st(a,n):"-"}catch{return"-"}},ne=t=>{if(Array.isArray(t))return t.filter(n=>typeof n=="string");if(typeof t=="string"){const n=t.trim();if(!n)return[];try{const a=JSON.parse(n);if(Array.isArray(a))return a.filter(i=>typeof i=="string")}catch{}return n.split(",").map(a=>a.trim()).filter(Boolean)}return[]};function Bt(){const[t,n]=c.useState(new Set),[a,i]=c.useState(null),[d,l]=c.useState(!1),[f,x]=c.useState([]),[y,v]=c.useState(!1),[m,p]=c.useState(new Set),[A,N]=c.useState(null),[I,O]=c.useState({front:"",back:"",deckName:""}),[u,S]=c.useState({mode:"",minutes:"",cards:"",confusions:"",weakAnchors:"",concepts:"",issues:"",notes:""}),[h,_]=c.useState("School"),[w,D]=c.useState(null),[q,F]=c.useState(""),[G,r]=c.useState(!1),[C,M]=c.useState(!1),ms=[{name:"EBP",path:"School/Evidence Based Practice"},{name:"ExPhys",path:"School/Exercise Physiology"},{name:"MS1",path:"School/Movement Science 1"},{name:"Neuro",path:"School/Neuroscience"},{name:"TI",path:"School/Theraputic Intervention"}],{data:W=[],isLoading:xs}=L({queryKey:["sessions"],queryFn:g.sessions.getAll}),{data:re}=L({queryKey:["brain","metrics"],queryFn:g.brain.getMetrics}),ee=He(),fe=K({mutationFn:s=>g.sessions.deleteMany(s),onSuccess:()=>{ee.invalidateQueries({queryKey:["sessions"]}),ee.invalidateQueries({queryKey:["brain","metrics"]}),n(new Set)}}),us=K({mutationFn:({id:s,updates:o})=>g.sessions.update(s,o),onSuccess:()=>{ee.invalidateQueries({queryKey:["sessions"]}),ee.invalidateQueries({queryKey:["brain","metrics"]}),i(null)}}),hs=s=>{n(o=>{const j=new Set(o);return j.has(s)?j.delete(s):j.add(s),j})},ps=()=>{t.size===W.length?n(new Set):n(new Set(W.map(s=>s.id)))},fs=()=>{t.size!==0&&(x(Array.from(t)),l(!0))},gs=s=>{x([s]),l(!0)},bs=()=>{fe.mutate(f),l(!1),x([])};c.useEffect(()=>{if(a!==null){const s=W.find(o=>o.id===a);s&&S({mode:s.mode||"",minutes:s.minutes?.toString()||"",cards:s.cards?.toString()||"",confusions:ne(s.confusions).join(", "),weakAnchors:ne(s.weakAnchors).join(", "),concepts:ne(s.concepts).join(", "),issues:ne(s.issues).join(", "),notes:s.notes||""})}},[a,W]);const Ns=()=>{if(a===null)return;const s=T=>T?T.split(",").map(V=>V.trim()).filter(Boolean):[],o=T=>T.length?JSON.stringify(T):null,j={mode:u.mode||"study",minutes:parseInt(u.minutes)||0,cards:parseInt(u.cards)||0,confusions:o(s(u.confusions)),weakAnchors:o(s(u.weakAnchors)),concepts:o(s(u.concepts)),issues:o(s(u.issues)),notes:u.notes||null};us.mutate({id:a,updates:j})},{data:H}=L({queryKey:["obsidian","status"],queryFn:g.obsidian.getStatus,refetchInterval:3e4}),{data:js,refetch:Tt}=L({queryKey:["obsidian","files",h],queryFn:()=>g.obsidian.getFiles(h),enabled:H?.connected===!0}),ys=async s=>{try{const o=await g.obsidian.getFile(s);o.success&&o.content!==void 0&&(D(s),F(o.content),M(!1))}catch(o){console.error("Failed to load file:",o)}},vs=async()=>{if(w){r(!0);try{(await g.obsidian.saveFile(w,q)).success&&M(!1)}catch(s){console.error("Failed to save file:",s)}finally{r(!1)}}},se=s=>{_(s),D(null),F("")},Ss=()=>{const s=new Date().toISOString().split("T")[0],o=h?`${h}/Session-${s}.md`:`Session-${s}.md`,j=`# Study Session - ${s}

## Summary


## Concepts Covered
- 

## Strengths
- 

## Areas to Review
- 

## Notes

`;D(o),F(j),M(!0)},{data:z,isLoading:Cs,refetch:Ie}=L({queryKey:["anki","status"],queryFn:g.anki.getStatus,refetchInterval:3e4}),{data:ws}=L({queryKey:["anki","due"],queryFn:g.anki.getDue,enabled:z?.connected===!0}),{data:ks=[],refetch:oe}=L({queryKey:["anki","drafts"],queryFn:g.anki.getDrafts}),U=ks.filter(s=>s.status==="pending"),ge=K({mutationFn:g.anki.sync,onSuccess:()=>{ee.invalidateQueries({queryKey:["anki"]}),oe()}}),De=K({mutationFn:s=>g.anki.approveDraft(s),onSuccess:()=>{oe()}}),Te=K({mutationFn:s=>g.anki.deleteDraft(s),onSuccess:()=>{oe()}}),be=K({mutationFn:({id:s,data:o})=>g.anki.updateDraft(s,o),onSuccess:()=>{oe(),N(null)}}),As=s=>{N(s.id),O({front:s.front,back:s.back,deckName:s.deckName})},Os=()=>{A!==null&&be.mutate({id:A,data:I})};return e.jsxs(Ms,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h1",{className:"font-arcade text-xl text-primary flex items-center gap-2",children:[e.jsx(Ls,{className:"w-6 h-6"}),"BRAIN ANALYTICS"]})}),e.jsxs("div",{className:"space-y-6",children:["            ",e.jsxs("div",{className:"mb-6 min-w-0",children:[e.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"SESSION EVIDENCE"}),e.jsxs(te,{className:"brain-card rounded-none",children:[e.jsx(de,{className:"border-b border-secondary/60 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(me,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(at,{className:"w-4 h-4"}),"SESSION EVIDENCE TABLE"]}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Raw WRAP data. All metrics derive from these fields."})]}),t.size>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-terminal text-xs text-muted-foreground",children:[t.size," selected"]}),e.jsxs(b,{size:"sm",variant:"destructive",className:"font-terminal text-xs rounded-none",onClick:fs,disabled:fe.isPending,children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),fe.isPending?"Deleting...":"Delete"]})]})]})}),e.jsx(ae,{className:"p-0",children:xs?e.jsx("div",{className:"p-8 text-center font-terminal text-muted-foreground",children:"LOADING..."}):W.length===0?e.jsx("div",{className:"p-8 text-center font-terminal text-muted-foreground",children:"NO SESSIONS YET"}):e.jsx(Ne,{className:"h-[360px] xl:h-[420px]",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(Ye,{className:"min-w-[620px]",children:[e.jsx(Ve,{children:e.jsxs(ve,{className:"border-secondary/60 hover:bg-transparent",children:[e.jsx($,{className:"w-10 px-2 py-2",children:e.jsx(ye,{checked:t.size===W.length&&W.length>0,onCheckedChange:ps,className:"border-primary data-[state=checked]:bg-primary"})}),e.jsx($,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"DATE"}),e.jsx($,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"COURSE"}),e.jsx($,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"MODE"}),e.jsx($,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"MIN"}),e.jsx($,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"CARDS"}),e.jsx($,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"CONFUSIONS"}),e.jsx($,{className:"font-arcade text-[10px] text-primary w-10 px-2 py-2",children:"ACTIONS"})]})}),e.jsx(Je,{children:W.map(s=>e.jsxs(ve,{className:"border-secondary/50 hover:bg-primary/10 font-terminal text-xs","data-testid":`row-session-${s.id}`,children:[e.jsx(B,{className:"px-2 py-2",children:e.jsx(ye,{checked:t.has(s.id),onCheckedChange:()=>hs(s.id),className:"border-secondary data-[state=checked]:bg-primary"})}),e.jsx(B,{className:"text-muted-foreground px-2 py-2",children:Dt(s.date)}),e.jsx(B,{className:"font-bold px-2 py-2",children:s.topic||"-"}),e.jsx(B,{className:"px-2 py-2",children:e.jsx(xe,{variant:"outline",className:"rounded-none border-secondary font-normal text-[10px]",children:s.mode})}),e.jsx(B,{className:"px-2 py-2",children:s.minutes||0}),e.jsx(B,{className:"px-2 py-2",children:s.cards||0}),e.jsx(B,{className:"max-w-[150px] truncate text-[10px] text-muted-foreground px-2 py-2",children:ne(s.confusions).join(", ")||"-"}),e.jsx(B,{className:"px-2 py-2",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(b,{size:"icon",variant:"ghost",className:"h-6 w-6 rounded-none hover:bg-primary/20",onClick:()=>i(s.id),title:"Edit session",children:e.jsx(ce,{className:"w-3 h-3"})}),e.jsx(b,{size:"icon",variant:"ghost",className:"h-6 w-6 rounded-none hover:bg-destructive/20 text-destructive",onClick:()=>gs(s.id),title:"Delete session",children:e.jsx(J,{className:"w-3 h-3"})})]})})]},s.id))})]})})})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"ISSUES LOG"}),e.jsxs(te,{className:"brain-card rounded-none",children:[e.jsxs(de,{className:"border-b border-secondary p-4",children:[e.jsxs(me,{className:"font-arcade text-sm flex items-center gap-2 text-red-400",children:[e.jsx(Ks,{className:"w-4 h-4"}),"ISSUES AND FAILURES LOG"]}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Aggregated session issues: interruptions, source-lock failures, workflow problems"})]}),e.jsx(ae,{className:"p-4",children:(re?.issuesLog||[]).length===0?e.jsx("div",{className:"text-center font-terminal text-muted-foreground py-8",children:"NO ISSUES LOGGED"}):e.jsx("div",{className:"space-y-2",children:re?.issuesLog.map((s,o)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-red-500/30 bg-red-500/5 font-terminal text-sm",children:[e.jsx("span",{className:"text-red-300",children:s.issue}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:s.course}),e.jsxs(xe,{variant:"outline",className:"rounded-none border-red-500/50 text-red-400",children:["x",s.count]})]})]},o))})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"SYSTEM STATUS"}),e.jsx(te,{className:"brain-card rounded-none",children:e.jsx(ae,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 font-terminal text-xs",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${H?.connected?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-muted-foreground",children:"Obsidian"}),e.jsx("span",{className:"text-primary",children:H?.connected?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${z?.connected?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-muted-foreground",children:"Anki"}),e.jsx("span",{className:"text-primary",children:z?.connected?"Connected":"Offline"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-muted-foreground",children:[e.jsxs("span",{children:["Cards: ",e.jsx("span",{className:"text-primary",children:re?.totalCards||0})]}),e.jsxs("span",{children:["Drafts: ",e.jsx("span",{className:"text-primary",children:U.length})]})]})]})})})]}),e.jsx(Ce,{type:"single",collapsible:!0,className:"border border-secondary/40 rounded-none",children:e.jsxs(Q,{value:"ingestion",className:"border-secondary/40",children:[e.jsx(X,{className:"font-arcade text-sm text-primary px-4 hover:no-underline",children:"DATA INGESTION TOOLS"}),e.jsx(Z,{className:"px-2",children:e.jsx("div",{className:"pt-2",children:e.jsx(It,{})})})]})}),e.jsx(Ce,{type:"single",collapsible:!0,className:"border border-secondary/40 rounded-none",children:e.jsxs(Q,{value:"integrations",className:"border-secondary/40",children:[e.jsx(X,{className:"font-arcade text-sm text-primary px-4 hover:no-underline",children:"INTEGRATIONS"}),e.jsx(Z,{className:"px-2",children:e.jsxs("div",{className:"space-y-4 pt-2 min-w-0",children:[e.jsxs(te,{className:"brain-card rounded-none",children:[e.jsxs(de,{className:"border-b border-secondary/50 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(me,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Xs,{className:"w-4 h-4"}),"OBSIDIAN VAULT",H?.connected?e.jsx(ie,{className:"w-3 h-3 text-green-500"}):e.jsx(le,{className:"w-3 h-3 text-red-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(b,{size:"sm",variant:"outline",className:"h-6 px-2 rounded-none font-terminal text-xs",onClick:Ss,disabled:!H?.connected,children:[e.jsx(Zs,{className:"w-3 h-3 mr-1"}),"New Note"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:y,onChange:s=>v(s.target.checked),disabled:!H?.connected,className:"w-4 h-4 accent-primary"}),e.jsx("span",{className:"font-terminal text-xs",children:"Auto-Sync"})]})]})]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:ms.map(s=>e.jsx(b,{size:"sm",variant:h===s.path?"default":"outline",className:"h-6 px-2 rounded-none font-terminal text-xs",onClick:()=>se(s.path),children:s.name},s.path))}),h&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 font-terminal text-xs text-muted-foreground",children:[e.jsx("button",{onClick:()=>se(""),className:"hover:text-primary",children:"vault"}),h.split("/").map((s,o,j)=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(_s,{className:"w-3 h-3"}),e.jsx("button",{onClick:()=>se(j.slice(0,o+1).join("/")),className:"hover:text-primary",children:s})]},o))]})]}),e.jsx(ae,{className:"p-0",children:H?.connected?e.jsxs("div",{className:"grid md:grid-cols-2 h-[240px] md:h-[300px]",children:[e.jsx("div",{className:"border-r border-secondary/30",children:e.jsx(Ne,{className:"h-[240px] md:h-[300px]",children:e.jsxs("div",{className:"p-2 space-y-1",children:[h&&e.jsxs("button",{onClick:()=>{const s=h.split("/");s.pop(),se(s.join("/"))},className:"w-full flex items-center gap-2 p-2 hover:bg-secondary/20 font-terminal text-xs text-muted-foreground",children:[e.jsx(Ke,{className:"w-3 h-3"}),".."]}),js?.files?.map(s=>{const o=typeof s=="string"?s:s.path,j=o.endsWith("/"),T=o.replace(/\/$/,"").split("/").pop()||o;return e.jsxs("button",{onClick:()=>{if(j){const V=T.replace(/\/$/,"");se(h?`${h}/${V}`:V)}else{const V=h?`${h}/${T}`:T;ys(V)}},className:`w-full flex items-center gap-2 p-2 hover:bg-secondary/20 font-terminal text-xs ${w?.endsWith(T)?"bg-primary/20 text-primary":""}`,children:[j?e.jsx(Ke,{className:"w-3 h-3 text-yellow-500"}):e.jsx(rt,{className:"w-3 h-3 text-blue-400"}),T]},o)})]})})}),e.jsx("div",{className:"flex flex-col h-[240px] md:h-[300px]",children:w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-secondary/30",children:[e.jsxs("span",{className:"font-terminal text-xs text-primary truncate",children:[w.split("/").pop(),C&&e.jsx("span",{className:"text-yellow-500 ml-1",children:"*"})]}),e.jsxs(b,{size:"sm",variant:"ghost",onClick:vs,disabled:!C||G,className:"h-6 px-2",children:[e.jsx(je,{className:"w-3 h-3 mr-1"}),G?"Saving...":"Save"]})]}),e.jsx("textarea",{value:q,onChange:s=>{F(s.target.value),M(!0)},className:"flex-1 w-full p-3 bg-black/60 font-terminal text-sm resize-none focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"File content..."})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center font-terminal text-xs text-muted-foreground",children:"Select a file to edit"})})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"font-terminal text-xs text-red-400 mb-2",children:"Obsidian Offline"}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Open Obsidian with Local REST API plugin enabled"})]})})]}),e.jsx("div",{className:"space-y-4",children:e.jsxs(te,{className:"brain-card rounded-none",children:[e.jsx(de,{className:"border-b border-secondary/50 p-3",children:e.jsxs(me,{className:"font-arcade text-xs flex items-center gap-2 text-muted-foreground",children:[e.jsx(lt,{className:"w-3 h-3"}),"ANKI INTEGRATION",z?.connected?e.jsx(ie,{className:"w-3 h-3 text-green-500 ml-auto"}):e.jsx(le,{className:"w-3 h-3 text-red-500 ml-auto"})]})}),e.jsx(ae,{className:"p-4 space-y-3",children:Cs?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Checking Anki..."}):z?.connected?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Status:"}),e.jsx(xe,{variant:"outline",className:"bg-green-500/20 text-green-400 border-green-500",children:"Connected"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Cards Created:"}),e.jsx("span",{className:"font-arcade text-xs text-primary",children:re?.totalCards||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Due Today:"}),e.jsx("span",{className:"font-arcade text-xs text-secondary",children:ws?.dueCount||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Reviewed Today:"}),e.jsx("span",{className:"font-arcade text-xs text-muted-foreground",children:z.reviewedToday||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Decks:"}),e.jsx("span",{className:"font-arcade text-xs text-muted-foreground",children:z.decks?.length||0})]}),e.jsxs("div",{className:"pt-2 flex gap-2",children:[e.jsxs(b,{size:"sm",variant:"outline",className:"flex-1 font-terminal text-xs",onClick:()=>Ie(),children:[e.jsx(Ge,{className:"w-3 h-3 mr-1"}),"Refresh"]}),e.jsx(b,{size:"sm",className:"flex-1 font-terminal text-xs bg-secondary hover:bg-secondary/80",onClick:()=>ge.mutate(),disabled:ge.isPending,children:ge.isPending?"Syncing...":"Sync Cards"})]}),U.length>0&&e.jsxs("div",{className:"pt-3 border-t border-secondary/30",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-arcade text-[10px] text-yellow-400",children:["PENDING CARDS (",U.length,")"]}),e.jsx("div",{className:"flex gap-1",children:e.jsx(b,{size:"sm",variant:"outline",className:"h-5 px-2 text-[10px] font-terminal",onClick:()=>{m.size===U.length?p(new Set):p(new Set(U.map(s=>s.id)))},children:m.size===U.length?"None":"All"})})]}),m.size>0&&e.jsxs("div",{className:"flex gap-1 mb-2",children:[e.jsxs(b,{size:"sm",className:"h-6 px-2 text-[10px] font-terminal bg-green-600 hover:bg-green-700",onClick:()=>{m.forEach(s=>De.mutate(s)),p(new Set)},children:[e.jsx(ie,{className:"w-3 h-3 mr-1"}),"Approve (",m.size,")"]}),e.jsxs(b,{size:"sm",variant:"destructive",className:"h-6 px-2 text-[10px] font-terminal",onClick:()=>{m.forEach(s=>Te.mutate(s)),p(new Set)},children:[e.jsx(J,{className:"w-3 h-3 mr-1"}),"Delete (",m.size,")"]})]}),e.jsx(Ne,{className:"h-[200px]",children:e.jsx("div",{className:"space-y-2",children:U.map(s=>e.jsx("div",{className:`p-2 bg-black/40 border text-xs ${m.has(s.id)?"border-primary":"border-secondary/30"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ye,{checked:m.has(s.id),onCheckedChange:o=>{const j=new Set(m);o?j.add(s.id):j.delete(s.id),p(j)},className:"mt-1 border-secondary data-[state=checked]:bg-primary"}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsx("div",{className:"font-terminal text-primary truncate",children:s.front}),e.jsx("div",{className:"font-terminal text-muted-foreground mt-1 truncate",children:s.back}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(xe,{variant:"outline",className:"text-[9px] border-blue-500/50 text-blue-400 shrink-0",children:s.deckName}),e.jsx(b,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/20",onClick:()=>As(s),title:"Edit card",children:e.jsx(ce,{className:"w-3 h-3"})}),e.jsx(b,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-green-500/50 text-green-400 hover:bg-green-500/20",onClick:()=>De.mutate(s.id),title:"Approve card",children:e.jsx(ie,{className:"w-3 h-3"})}),e.jsx(b,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-red-500/50 text-red-400 hover:bg-red-500/20",onClick:()=>Te.mutate(s.id),title:"Delete card",children:e.jsx(J,{className:"w-3 h-3"})})]})]})]})},s.id))})})]})]}):e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"font-terminal text-xs text-red-400",children:z?.error||"Anki not connected"}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Open Anki with AnkiConnect plugin"}),e.jsxs(b,{size:"sm",variant:"outline",className:"font-terminal text-xs",onClick:()=>Ie(),children:[e.jsx(Ge,{className:"w-3 h-3 mr-1"}),"Retry"]})]})})]})})]})})]})})]})]}),e.jsx(Ee,{open:a!==null,onOpenChange:()=>i(null),children:e.jsxs(Pe,{className:"bg-black border-2 border-primary rounded-none max-w-2xl",children:[e.jsxs(Re,{children:[e.jsxs(Fe,{className:"font-arcade text-primary flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"EDIT SESSION #",a]}),e.jsx(Me,{className:"font-terminal text-muted-foreground",children:"Update WRAP methodology fields for this study session"})]}),e.jsxs("div",{className:"space-y-4 font-terminal",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Mode"}),e.jsxs(qe,{value:u.mode,onValueChange:s=>S(o=>({...o,mode:s})),children:[e.jsx(ze,{className:"rounded-none border-secondary",children:e.jsx($e,{placeholder:"Select mode"})}),e.jsxs(Be,{className:"rounded-none border-secondary bg-black",children:[e.jsx(E,{value:"Core",children:"Core"}),e.jsx(E,{value:"Sprint",children:"Sprint"}),e.jsx(E,{value:"Drill",children:"Drill"}),e.jsx(E,{value:"study",children:"Study"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Minutes"}),e.jsx(Le,{type:"number",value:u.minutes,onChange:s=>S(o=>({...o,minutes:s.target.value})),className:"rounded-none border-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Cards"}),e.jsx(Le,{type:"number",value:u.cards,onChange:s=>S(o=>({...o,cards:s.target.value})),className:"rounded-none border-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Confusions (comma-separated)"}),e.jsx(Y,{value:u.confusions,onChange:s=>S(o=>({...o,confusions:s.target.value})),placeholder:"e.g., muscle insertion points, nerve pathways",className:"rounded-none border-secondary min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Weak Anchors (comma-separated)"}),e.jsx(Y,{value:u.weakAnchors,onChange:s=>S(o=>({...o,weakAnchors:s.target.value})),placeholder:"e.g., brachial plexus diagram, ROM measurements",className:"rounded-none border-secondary min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Concepts (comma-separated)"}),e.jsx(Y,{value:u.concepts,onChange:s=>S(o=>({...o,concepts:s.target.value})),placeholder:"e.g., upper extremity anatomy, peripheral nerves",className:"rounded-none border-secondary min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Issues (comma-separated)"}),e.jsx(Y,{value:u.issues,onChange:s=>S(o=>({...o,issues:s.target.value})),placeholder:"e.g., interrupted by phone, lost focus after 30 min",className:"rounded-none border-secondary min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Notes"}),e.jsx(Y,{value:u.notes,onChange:s=>S(o=>({...o,notes:s.target.value})),placeholder:"Free-form observations about the session",className:"rounded-none border-secondary min-h-[80px]"})]})]}),e.jsxs(_e,{className:"gap-2",children:[e.jsxs(b,{variant:"outline",onClick:()=>i(null),className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(b,{onClick:Ns,className:"font-terminal rounded-none bg-primary hover:bg-primary/80",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx(Gs,{open:d,onOpenChange:l,children:e.jsxs(Ws,{className:"bg-black border-2 border-destructive rounded-none",children:[e.jsxs(Hs,{children:[e.jsxs(Us,{className:"font-arcade text-destructive flex items-center gap-2",children:[e.jsx(J,{className:"w-5 h-5"}),"CONFIRM DELETE"]}),e.jsxs(Ys,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",f.length," session",f.length!==1?"s":"","? This action cannot be undone."]})]}),e.jsxs(Vs,{className:"gap-2",children:[e.jsx(Js,{className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:"Cancel"}),e.jsxs(Qs,{onClick:bs,className:"font-terminal rounded-none bg-destructive hover:bg-destructive/80 text-destructive-foreground",children:[e.jsx(J,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}),e.jsx(Ee,{open:A!==null,onOpenChange:()=>N(null),children:e.jsxs(Pe,{className:"bg-black border-2 border-primary rounded-none max-w-lg",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[e.jsxs(Re,{children:[e.jsxs(Fe,{className:"font-arcade text-primary flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5"}),"EDIT CARD"]}),e.jsx(Me,{className:"font-terminal text-muted-foreground",children:"Edit card content and select target deck"})]}),e.jsxs("div",{className:"space-y-4 font-terminal",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Front (Question)"}),e.jsx(Y,{value:I.front,onChange:s=>O(o=>({...o,front:s.target.value})),placeholder:"Card front...",className:"rounded-none border-secondary min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Back (Answer)"}),e.jsx(Y,{value:I.back,onChange:s=>O(o=>({...o,back:s.target.value})),placeholder:"Card back...",className:"rounded-none border-secondary min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Target Deck"}),e.jsxs(qe,{value:I.deckName,onValueChange:s=>O(o=>({...o,deckName:s})),children:[e.jsx(ze,{className:"rounded-none border-secondary",children:e.jsx($e,{placeholder:"Select deck"})}),e.jsxs(Be,{className:"rounded-none border-secondary bg-black max-h-[200px]",children:[e.jsx(E,{value:"PT::EBP",children:"PT::EBP (Evidence Based Practice)"}),e.jsx(E,{value:"PT::ExPhys",children:"PT::ExPhys (Exercise Physiology)"}),e.jsx(E,{value:"PT::MS1",children:"PT::MS1 (Movement Science 1)"}),e.jsx(E,{value:"PT::Neuro",children:"PT::Neuro (Neuroscience)"}),e.jsx(E,{value:"PT::TI",children:"PT::TI (Therapeutic Intervention)"}),e.jsx(E,{value:"PT::General",children:"PT::General"}),z?.decks?.filter(s=>!s.startsWith("PT::")).map(s=>e.jsx(E,{value:s,children:s},s))]})]}),e.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:["Current: ",e.jsx("span",{className:"text-blue-400",children:I.deckName})]})]})]}),e.jsxs(_e,{className:"gap-2",children:[e.jsxs(b,{variant:"outline",onClick:()=>N(null),className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(b,{onClick:Os,disabled:be.isPending,className:"font-terminal rounded-none bg-primary hover:bg-primary/80",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),be.isPending?"Saving...":"Save"]})]})]})})]})}export{Bt as default};
