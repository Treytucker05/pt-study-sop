import{c as me,r as l,j as e,b as $,R as st,d as tt,e as P,f as at,P as ms,g as nt,u as xs,X as je}from"./index-4CdLH3Pz.js";import{h as rt,i as ot,j as lt,u as W,a as ee,g as f,L as ct,k as it,B as p,T as le,S as be,P as ye,C as ve,f as dt,l as De,m as ae,D as He,c as Je,d as Qe,e as Xe,n as Ze,I as es,o as ss}from"./layout-B9IQCtKD.js";import{C as k,a as D,b as E,c as A}from"./card-Cmb5RQ2i.js";import{e as mt,B as G,S as ts,a as as,b as ns,c as rs,d as _}from"./select-Cshex7Lx.js";import{c as us,R as xt,T as ut,C as ht,a as Ee}from"./index-D1hxAVf4.js";import{T as os,A as pt,a as ft,b as gt,c as Nt,d as jt,e as bt,f as yt,g as vt}from"./alert-dialog-BwztqgfJ.js";import{B as St}from"./book-open-CSIAXl0p.js";import{F as Ct,a as ls}from"./folder-DfyJFaSD.js";import{F as cs}from"./file-text-B2deWybG.js";import{R as is,S as wt}from"./send-C6t1KLbC.js";import{i as kt,f as At}from"./format-D7m0hUtg.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Ot=me("chart-column",It);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],Et=me("database",Dt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]],Tt=me("file",Pt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ds=me("layers",Rt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],Ft=me("message-circle",Mt);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],_t=me("paperclip",Lt),hs=l.forwardRef(({className:a,...r},n)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:n,className:$("w-full caption-bottom text-sm",a),...r})}));hs.displayName="Table";const ps=l.forwardRef(({className:a,...r},n)=>e.jsx("thead",{ref:n,className:$("[&_tr]:border-b",a),...r}));ps.displayName="TableHeader";const fs=l.forwardRef(({className:a,...r},n)=>e.jsx("tbody",{ref:n,className:$("[&_tr:last-child]:border-0",a),...r}));fs.displayName="TableBody";const $t=l.forwardRef(({className:a,...r},n)=>e.jsx("tfoot",{ref:n,className:$("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r}));$t.displayName="TableFooter";const Pe=l.forwardRef(({className:a,...r},n)=>e.jsx("tr",{ref:n,className:$("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r}));Pe.displayName="TableRow";const X=l.forwardRef(({className:a,...r},n)=>e.jsx("th",{ref:n,className:$("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r}));X.displayName="TableHead";const Z=l.forwardRef(({className:a,...r},n)=>e.jsx("td",{ref:n,className:$("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r}));Z.displayName="TableCell";const qt=l.forwardRef(({className:a,...r},n)=>e.jsx("caption",{ref:n,className:$("mt-4 text-sm text-muted-foreground",a),...r}));qt.displayName="TableCaption";function zt(a,r,{checkForDefaultPrevented:n=!0}={}){return function(d){if(a?.(d),n===!1||!d.defaultPrevented)return r?.(d)}}var Bt=st[" useInsertionEffect ".trim().toString()]||tt;function gs({prop:a,defaultProp:r,onChange:n=()=>{},caller:c}){const[d,i,m]=Ut({defaultProp:r,onChange:n}),x=a!==void 0,j=x?a:d;{const u=l.useRef(a!==void 0);l.useEffect(()=>{const N=u.current;N!==x&&console.warn(`${c} is changing from ${N?"controlled":"uncontrolled"} to ${x?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=x},[x,c])}const b=l.useCallback(u=>{if(x){const N=Kt(u)?u(a):u;N!==a&&m.current?.(N)}else i(u)},[x,a,i,m]);return[j,b]}function Ut({defaultProp:a,onChange:r}){const[n,c]=l.useState(a),d=l.useRef(n),i=l.useRef(r);return Bt(()=>{i.current=r},[r]),l.useEffect(()=>{d.current!==n&&(i.current?.(n),d.current=n)},[n,d]),[n,c,i]}function Kt(a){return typeof a=="function"}var q="Accordion",Gt=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Me,Wt,Vt]=mt(q),[Ce]=at(q,[Vt,us]),Fe=us(),Ns=P.forwardRef((a,r)=>{const{type:n,...c}=a,d=c,i=c;return e.jsx(Me.Provider,{scope:a.__scopeAccordion,children:n==="multiple"?e.jsx(Qt,{...i,ref:r}):e.jsx(Jt,{...d,ref:r})})});Ns.displayName=q;var[js,Yt]=Ce(q),[bs,Ht]=Ce(q,{collapsible:!1}),Jt=P.forwardRef((a,r)=>{const{value:n,defaultValue:c,onValueChange:d=()=>{},collapsible:i=!1,...m}=a,[x,j]=gs({prop:n,defaultProp:c??"",onChange:d,caller:q});return e.jsx(js,{scope:a.__scopeAccordion,value:P.useMemo(()=>x?[x]:[],[x]),onItemOpen:j,onItemClose:P.useCallback(()=>i&&j(""),[i,j]),children:e.jsx(bs,{scope:a.__scopeAccordion,collapsible:i,children:e.jsx(ys,{...m,ref:r})})})}),Qt=P.forwardRef((a,r)=>{const{value:n,defaultValue:c,onValueChange:d=()=>{},...i}=a,[m,x]=gs({prop:n,defaultProp:c??[],onChange:d,caller:q}),j=P.useCallback(u=>x((N=[])=>[...N,u]),[x]),b=P.useCallback(u=>x((N=[])=>N.filter(z=>z!==u)),[x]);return e.jsx(js,{scope:a.__scopeAccordion,value:m,onItemOpen:j,onItemClose:b,children:e.jsx(bs,{scope:a.__scopeAccordion,collapsible:!0,children:e.jsx(ys,{...i,ref:r})})})}),[Xt,we]=Ce(q),ys=P.forwardRef((a,r)=>{const{__scopeAccordion:n,disabled:c,dir:d,orientation:i="vertical",...m}=a,x=P.useRef(null),j=nt(x,r),b=Wt(n),N=ot(d)==="ltr",z=zt(a.onKeyDown,y=>{if(!Gt.includes(y.key))return;const V=y.target,F=b().filter(Y=>!Y.ref.current?.disabled),w=F.findIndex(Y=>Y.ref.current===V),ne=F.length;if(w===-1)return;y.preventDefault();let g=w;const I=0,L=ne-1,T=()=>{g=w+1,g>L&&(g=I)},R=()=>{g=w-1,g<I&&(g=L)};switch(y.key){case"Home":g=I;break;case"End":g=L;break;case"ArrowRight":i==="horizontal"&&(N?T():R());break;case"ArrowDown":i==="vertical"&&T();break;case"ArrowLeft":i==="horizontal"&&(N?R():T());break;case"ArrowUp":i==="vertical"&&R();break}const B=g%ne;F[B].ref.current?.focus()});return e.jsx(Xt,{scope:n,disabled:c,direction:d,orientation:i,children:e.jsx(Me.Slot,{scope:n,children:e.jsx(ms.div,{...m,"data-orientation":i,ref:j,onKeyDown:c?void 0:z})})})}),Se="AccordionItem",[Zt,Le]=Ce(Se),vs=P.forwardRef((a,r)=>{const{__scopeAccordion:n,value:c,...d}=a,i=we(Se,n),m=Yt(Se,n),x=Fe(n),j=rt(),b=c&&m.value.includes(c)||!1,u=i.disabled||a.disabled;return e.jsx(Zt,{scope:n,open:b,disabled:u,triggerId:j,children:e.jsx(xt,{"data-orientation":i.orientation,"data-state":Is(b),...x,...d,ref:r,disabled:u,open:b,onOpenChange:N=>{N?m.onItemOpen(c):m.onItemClose(c)}})})});vs.displayName=Se;var Ss="AccordionHeader",Cs=P.forwardRef((a,r)=>{const{__scopeAccordion:n,...c}=a,d=we(q,n),i=Le(Ss,n);return e.jsx(ms.h3,{"data-orientation":d.orientation,"data-state":Is(i.open),"data-disabled":i.disabled?"":void 0,...c,ref:r})});Cs.displayName=Ss;var Te="AccordionTrigger",ws=P.forwardRef((a,r)=>{const{__scopeAccordion:n,...c}=a,d=we(q,n),i=Le(Te,n),m=Ht(Te,n),x=Fe(n);return e.jsx(Me.ItemSlot,{scope:n,children:e.jsx(ut,{"aria-disabled":i.open&&!m.collapsible||void 0,"data-orientation":d.orientation,id:i.triggerId,...x,...c,ref:r})})});ws.displayName=Te;var ks="AccordionContent",As=P.forwardRef((a,r)=>{const{__scopeAccordion:n,...c}=a,d=we(q,n),i=Le(ks,n),m=Fe(n);return e.jsx(ht,{role:"region","aria-labelledby":i.triggerId,"data-orientation":d.orientation,...m,...c,ref:r,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...a.style}})});As.displayName=ks;function Is(a){return a?"open":"closed"}var ea=Ns,sa=vs,ta=Cs,Os=ws,Ds=As;const Re=ea,ce=l.forwardRef(({className:a,...r},n)=>e.jsx(sa,{ref:n,className:$("border-b",a),...r}));ce.displayName="AccordionItem";const ie=l.forwardRef(({className:a,children:r,...n},c)=>e.jsx(ta,{className:"flex",children:e.jsxs(Os,{ref:c,className:$("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline text-left [&[data-state=open]>svg]:rotate-180",a),...n,children:[r,e.jsx(lt,{className:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})]})}));ie.displayName=Os.displayName;const de=l.forwardRef(({className:a,children:r,...n},c)=>e.jsx(Ds,{ref:c,className:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:e.jsx("div",{className:$("pb-4 pt-0",a),children:r})}));de.displayName=Ds.displayName;const aa=`I need you to extract schedule events from my course syllabus.

Return ONLY a valid JSON array with NO additional text, NO markdown code blocks, NO explanation.

Structure for each item:
{
  "type": "chapter" | "quiz" | "assignment" | "exam",
  "title": "string",
  "dueDate": "YYYY-MM-DD",
  "notes": "optional string or null"
}

Rules:
1. type must be EXACTLY one of: "chapter", "quiz", "assignment", "exam"
2. dueDate must be ISO format (YYYY-MM-DD) - if no date given, use null
3. Return ONLY the JSON array, nothing else

Here's my syllabus:

[PASTE YOUR SYLLABUS BELOW]`,na=`I need you to extract learning objectives from my course material.

Return ONLY a valid JSON array with NO additional text, NO markdown code blocks, NO explanation.

Structure for each item:
{
  "loCode": "string",
  "title": "string"
}

Rules:
1. loCode: Preserve original numbering if present, or create sequential "1", "2", "3"...
2. title: Keep the objective text exactly as written
3. Return ONLY the JSON array, nothing else

Here are my learning objectives:

[PASTE YOUR LOs BELOW]`,ra=`I need you to convert my study session notes into WRAP format.

WRAP format has 4 sections:

Section A: Obsidian Notes
- Main concepts and insights from the session
- Key points to remember

Section B: Anki Cards
- Format: "front: [question]" on one line, "back: [answer]" on next line
- Create cards for important facts and concepts

Section C: Spaced Schedule
- R1=tomorrow
- R2=3d
- R3=1w
- R4=2w

Section D: JSON Logs
\`\`\`json
{
  "merged": {
    "topic": "[main topic]",
    "mode": "Core",
    "duration_minutes": [number],
    "understanding": [1-5],
    "retention": [1-5]
  }
}
\`\`\`

Return ONLY the WRAP formatted content, NO additional text or explanation.

Here are my study notes:

[PASTE YOUR NOTES BELOW]`;function oa(){const a=xs(),[r,n]=l.useState(null),[c,d]=l.useState(null),[i,m]=l.useState(""),[x,j]=l.useState(""),[b,u]=l.useState(null),[N,z]=l.useState(""),[y,V]=l.useState(null),[F,w]=l.useState(null),{data:ne=[]}=W({queryKey:["courses"],queryFn:()=>f.courses.getActive()}),{data:g=[]}=W({queryKey:["modules",r],queryFn:()=>r?f.modules.getByCourse(r):Promise.resolve([]),enabled:!!r}),{data:I=[]}=W({queryKey:["learningObjectives",r],queryFn:()=>r?f.learningObjectives.getByCourse(r):Promise.resolve([]),enabled:!!r}),L=ee({mutationFn:async o=>{if(!r)throw new Error("Select a course first");const M=JSON.parse(o);return f.scheduleEvents.createBulk(r,M)},onSuccess:()=>{a.invalidateQueries({queryKey:["scheduleEvents"]}),m(""),u(null)},onError:o=>{u(o.message||"Failed to import schedule")}}),T=ee({mutationFn:async o=>{if(!r)throw new Error("Select a course first");const M=JSON.parse(o);return f.learningObjectives.createBulk(r,c,M)},onSuccess:()=>{a.invalidateQueries({queryKey:["learningObjectives"]}),j(""),u(null)},onError:o=>{u(o.message||"Failed to import LOs")}}),R=ee({mutationFn:({id:o,data:M})=>f.modules.update(o,M),onSuccess:()=>{a.invalidateQueries({queryKey:["modules"]})}}),B=o=>{navigator.clipboard.writeText(o)},Y=async()=>{try{w(null);const o=y?await y.text():N,M=y?.name||"pasted_wrap.md",oe=await f.brain.ingest(o,M);oe.sessionSaved?(w({type:"success",message:`✓ Session saved! ID: ${oe.sessionId}, Cards: ${oe.cardsCreated||0}`}),z(""),V(null)):w({type:"error",message:oe.errors?.join(", ")||oe.message})}catch(o){w({type:"error",message:o.message||"Failed to ingest"})}};return e.jsxs("div",{className:"space-y-6 p-4",children:[e.jsxs("div",{className:"border-2 border-primary rounded-none p-4 bg-primary/5",children:[e.jsx("h2",{className:"text-xl font-arcade text-primary mb-4",children:"WRAP SESSION INGESTION"}),F&&e.jsx("div",{className:`mb-4 p-3 rounded-none font-terminal text-sm ${F.type==="success"?"bg-green-900/30 border border-green-500 text-green-400":"bg-red-900/30 border border-red-500 text-red-400"}`,children:F.message}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>B(ra),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Use ChatGPT to convert your notes to WRAP format, then paste or upload below:"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2 font-terminal text-muted-foreground",children:"Upload WRAP File (.md, .txt)"}),e.jsx("input",{type:"file",accept:".md,.txt",onChange:o=>{V(o.target.files?.[0]||null),z(""),w(null)},className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal text-sm"}),y&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1 font-terminal",children:["Selected: ",y.name]})]}),e.jsx("div",{className:"text-center font-terminal text-xs text-muted-foreground",children:"- OR -"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-2 font-terminal text-muted-foreground",children:"Paste WRAP Content"}),e.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-48 font-terminal text-sm",placeholder:"Paste your WRAP session here...",value:N,onChange:o=>{z(o.target.value),V(null),w(null)}})]}),e.jsx("button",{onClick:Y,disabled:!N&&!y,className:"bg-primary hover:bg-primary/80 disabled:opacity-50 px-6 py-3 rounded-none font-arcade text-sm w-full",type:"button",children:"INGEST WRAP SESSION"})]})]}),e.jsx("h2",{className:"text-xl font-arcade text-primary",children:"MATERIAL INGESTION"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm mb-1 font-terminal text-muted-foreground",children:"Select Course"}),e.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:r||"",onChange:o=>{n(o.target.value?parseInt(o.target.value):null),d(null)},children:[e.jsx("option",{value:"",children:"-- Select Course --"}),ne.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),b&&e.jsx("div",{className:"bg-destructive/20 border border-destructive rounded-none p-3 text-destructive font-terminal",children:b}),r&&e.jsxs(Re,{type:"multiple",className:"border border-secondary/40 rounded-none divide-y divide-secondary/40",children:[e.jsxs(ce,{value:"schedule",className:"border-secondary/40",children:[e.jsx(ie,{className:"font-arcade text-xs text-primary px-3 hover:no-underline",children:"SCHEDULE IMPORT"}),e.jsxs(de,{className:"px-3",children:[e.jsx("button",{onClick:()=>B(aa),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Paste the ChatGPT response (JSON array) below:"}),e.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-32 font-terminal text-sm",placeholder:'[{"type": "exam", "title": "...", "dueDate": "2026-01-20", "notes": null}]',value:i,onChange:o=>m(o.target.value)}),e.jsx("button",{onClick:()=>L.mutate(i),disabled:!i||L.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none mt-2 font-terminal text-xs",type:"button",children:L.isPending?"Importing...":"Import Schedule"})]})]}),e.jsxs(ce,{value:"modules",className:"border-secondary/40",children:[e.jsx(ie,{className:"font-arcade text-xs text-primary px-3 hover:no-underline",children:"MODULES"}),e.jsx(de,{className:"px-3",children:g.length===0?e.jsx("p",{className:"text-xs text-muted-foreground font-terminal",children:"No modules yet. Add modules manually or import."}):e.jsxs("table",{className:"w-full text-sm font-terminal",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-secondary/50",children:[e.jsx("th",{className:"text-left p-2",children:"Module"}),e.jsx("th",{className:"text-center p-2",children:"Files"}),e.jsx("th",{className:"text-center p-2",children:"NotebookLM"}),e.jsx("th",{className:"text-center p-2",children:"Status"})]})}),e.jsx("tbody",{children:g.map(o=>e.jsxs("tr",{className:"border-b border-secondary/30",children:[e.jsx("td",{className:"p-2",children:o.name}),e.jsx("td",{className:"text-center p-2",children:e.jsx("input",{type:"checkbox",checked:o.filesDownloaded,onChange:M=>R.mutate({id:o.id,data:{filesDownloaded:M.target.checked}})})}),e.jsx("td",{className:"text-center p-2",children:e.jsx("input",{type:"checkbox",checked:o.notebooklmLoaded,onChange:M=>R.mutate({id:o.id,data:{notebooklmLoaded:M.target.checked}})})}),e.jsx("td",{className:"text-center p-2",children:o.filesDownloaded&&o.notebooklmLoaded?e.jsx("span",{className:"text-green-400",children:"Ready"}):e.jsx("span",{className:"text-yellow-400",children:"Pending"})})]},o.id))})]})})]}),e.jsxs(ce,{value:"learning-objectives",className:"border-secondary/40",children:[e.jsx(ie,{className:"font-arcade text-xs text-primary px-3 hover:no-underline",children:"LEARNING OBJECTIVES IMPORT"}),e.jsxs(de,{className:"px-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-xs mb-1 font-terminal text-muted-foreground",children:"Target Module (optional)"}),e.jsxs("select",{className:"w-full bg-black border border-secondary rounded-none p-2 font-terminal",value:c||"",onChange:o=>d(o.target.value?parseInt(o.target.value):null),children:[e.jsx("option",{value:"",children:"-- No Module (Course-level) --"}),g.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))]})]}),e.jsx("button",{onClick:()=>B(na),className:"bg-primary hover:bg-primary/80 px-3 py-1 rounded-none text-xs font-terminal mb-2",type:"button",children:"Copy Prompt for ChatGPT"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2 font-terminal",children:"Paste the ChatGPT response (JSON array) below:"}),e.jsx("textarea",{className:"w-full bg-black border border-secondary rounded-none p-2 h-32 font-terminal text-sm",placeholder:'[{"loCode": "1.1", "title": "Define..."}]',value:x,onChange:o=>j(o.target.value)}),e.jsx("button",{onClick:()=>T.mutate(x),disabled:!x||T.isPending,className:"bg-secondary hover:bg-secondary/80 disabled:opacity-50 px-4 py-2 rounded-none mt-2 font-terminal text-xs",type:"button",children:T.isPending?"Importing...":"Import LOs"}),I.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("h4",{className:"font-terminal text-xs mb-2",children:["Current LOs (",I.length,")"]}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:I.map(o=>e.jsxs("div",{className:"text-xs py-1 border-b border-secondary/30 font-terminal",children:[e.jsx("span",{className:"text-primary",children:o.loCode}),": ",o.title,e.jsx("span",{className:`ml-2 text-[10px] px-1 rounded ${o.status==="solid"?"bg-green-600":o.status==="in_progress"?"bg-yellow-600":o.status==="need_review"?"bg-orange-600":"bg-gray-600"}`,children:o.status})]},o.id))})]})]})]})]})]})}const la=(a,r="MM/dd")=>{if(!a)return"-";try{const n=a instanceof Date?a:new Date(a);return kt(n)?At(n,r):"-"}catch{return"-"}},pe=a=>{if(Array.isArray(a))return a.filter(r=>typeof r=="string");if(typeof a=="string"){const r=a.trim();if(!r)return[];try{const n=JSON.parse(r);if(Array.isArray(n))return n.filter(c=>typeof c=="string")}catch{}return r.split(",").map(n=>n.trim()).filter(Boolean)}return[]};function va(){const[a,r]=l.useState(""),[n,c]=l.useState([]),[d,i]=l.useState(!1),[m,x]=l.useState(null),[j,b]=l.useState(new Set),[u,N]=l.useState(null),[z,y]=l.useState(!1),[V,F]=l.useState([]),[w,ne]=l.useState(!1),[g,I]=l.useState(new Set),[L,T]=l.useState(null),[R,B]=l.useState({front:"",back:"",deckName:""}),[Y,o]=l.useState("all"),[M,oe]=l.useState(""),[ca,ia]=l.useState("all"),[S,H]=l.useState({mode:"",minutes:"",cards:"",confusions:"",weakAnchors:"",concepts:"",issues:"",notes:""}),[O,Es]=l.useState("School"),[xe,ke]=l.useState(null),[_e,fe]=l.useState(""),[$e,qe]=l.useState(!1),[ze,ge]=l.useState(!1),Ps=[{name:"EBP",path:"School/Evidence Based Practice"},{name:"ExPhys",path:"School/Exercise Physiology"},{name:"MS1",path:"School/Movement Science 1"},{name:"Neuro",path:"School/Neuroscience"},{name:"TI",path:"School/Theraputic Intervention"}],Be=l.useRef(null),Ue=l.useRef(null),{data:se=[],isLoading:Ts}=W({queryKey:["sessions"],queryFn:f.sessions.getAll}),{data:C,isLoading:Ke}=W({queryKey:["brain","metrics"],queryFn:f.brain.getMetrics}),J=xs(),Ae=ee({mutationFn:s=>f.sessions.deleteMany(s),onSuccess:()=>{J.invalidateQueries({queryKey:["sessions"]}),J.invalidateQueries({queryKey:["brain","metrics"]}),b(new Set)}}),Rs=ee({mutationFn:({id:s,updates:t})=>f.sessions.update(s,t),onSuccess:()=>{J.invalidateQueries({queryKey:["sessions"]}),J.invalidateQueries({queryKey:["brain","metrics"]}),N(null)}}),Ms=s=>{b(t=>{const h=new Set(t);return h.has(s)?h.delete(s):h.add(s),h})},Fs=()=>{j.size===se.length?b(new Set):b(new Set(se.map(s=>s.id)))},Ls=()=>{j.size!==0&&(F(Array.from(j)),y(!0))},_s=s=>{F([s]),y(!0)},$s=()=>{Ae.mutate(V),y(!1),F([])};l.useEffect(()=>{if(u!==null){const s=se.find(t=>t.id===u);s&&H({mode:s.mode||"",minutes:s.minutes?.toString()||"",cards:s.cards?.toString()||"",confusions:pe(s.confusions).join(", "),weakAnchors:pe(s.weakAnchors).join(", "),concepts:pe(s.concepts).join(", "),issues:pe(s.issues).join(", "),notes:s.notes||""})}},[u,se]);const qs=()=>{if(u===null)return;const s=v=>v?v.split(",").map(K=>K.trim()).filter(Boolean):[],t=v=>v.length?JSON.stringify(v):null,h={mode:S.mode||"study",minutes:parseInt(S.minutes)||0,cards:parseInt(S.cards)||0,confusions:t(s(S.confusions)),weakAnchors:t(s(S.weakAnchors)),concepts:t(s(S.concepts)),issues:t(s(S.issues)),notes:S.notes||null};Rs.mutate({id:u,updates:h})},{data:U}=W({queryKey:["obsidian","status"],queryFn:f.obsidian.getStatus,refetchInterval:3e4}),{data:zs,refetch:da}=W({queryKey:["obsidian","files",O],queryFn:()=>f.obsidian.getFiles(O),enabled:U?.connected===!0}),Bs=async s=>{try{const t=await f.obsidian.getFile(s);t.success&&t.content!==void 0&&(ke(s),fe(t.content),ge(!1))}catch(t){console.error("Failed to load file:",t)}},Us=async()=>{if(xe){qe(!0);try{(await f.obsidian.saveFile(xe,_e)).success&&ge(!1)}catch(s){console.error("Failed to save file:",s)}finally{qe(!1)}}},ue=s=>{Es(s),ke(null),fe("")},Ks=()=>{const s=new Date().toISOString().split("T")[0],t=O?`${O}/Session-${s}.md`:`Session-${s}.md`,h=`# Study Session - ${s}

## Summary


## Concepts Covered
- 

## Strengths
- 

## Areas to Review
- 

## Notes

`;ke(t),fe(h),ge(!0)},{data:Q,isLoading:Gs,refetch:Ge}=W({queryKey:["anki","status"],queryFn:f.anki.getStatus,refetchInterval:3e4}),{data:Ws}=W({queryKey:["anki","due"],queryFn:f.anki.getDue,enabled:Q?.connected===!0}),{data:Vs=[],refetch:Ne}=W({queryKey:["anki","drafts"],queryFn:f.anki.getDrafts}),re=Vs.filter(s=>s.status==="pending"),Ys=(C?.issuesLog||[]).reduce((s,t)=>s+t.count,0),Ie=ee({mutationFn:f.anki.sync,onSuccess:()=>{J.invalidateQueries({queryKey:["anki"]}),Ne()}}),We=ee({mutationFn:s=>f.anki.approveDraft(s),onSuccess:()=>{Ne()}}),Ve=ee({mutationFn:s=>f.anki.deleteDraft(s),onSuccess:()=>{Ne()}}),Oe=ee({mutationFn:({id:s,data:t})=>f.anki.updateDraft(s,t),onSuccess:()=>{Ne(),T(null)}}),Hs=s=>{T(s.id),B({front:s.front,back:s.back,deckName:s.deckName})},Js=()=>{L!==null&&Oe.mutate({id:L,data:R})};l.useEffect(()=>{Ue.current?.scrollIntoView({behavior:"smooth"})},[n]);const Qs=s=>{let t=0;return/section\s*[ABCD]/i.test(s)&&(t+=2),/^[ABCD]\s*[:\)\-]/im.test(s)&&(t+=2),/front\s*:/i.test(s)&&/back\s*:/i.test(s)&&(t+=2),/\bWRAP\b/i.test(s)&&(t+=1),/```json/i.test(s)&&(t+=1),t>=2},Ye=async()=>{if(!a.trim())return;const s=a;r(""),x(null),c(t=>[...t,{role:"user",content:s}]),i(!0);try{if(Qs(s)){const t=await f.brain.ingest(s,"pasted_wrap.md");if(t.sessionSaved){const h=t.cardsCreated?` | Cards: ${t.cardsCreated}`:"";c(v=>[...v,{role:"assistant",content:`✓ Session saved (ID: ${t.sessionId})${h}
${t.message}`}]),J.invalidateQueries({queryKey:["sessions"]}),t.cardsCreated&&t.cardsCreated>0&&J.invalidateQueries({queryKey:["anki"]})}else{const h=t.errors?.join(", ")||t.message;c(v=>[...v,{role:"assistant",content:`⚠ ${h}`}])}}else{const t=await f.brain.chat(s,w,Y);c(h=>[...h,{role:"assistant",content:t.response}]),t.wrapProcessed&&x({cardsCreated:t.cardsCreated||0,issuesLogged:t.issuesLogged||0,obsidianSynced:!!t.obsidianSynced,obsidianPath:t.obsidianPath,sessionId:t.sessionId??null,wrapSessionId:t.wrapSessionId??null}),t.cardsCreated&&t.cardsCreated>0&&J.invalidateQueries({queryKey:["anki"]})}}catch{c(h=>[...h,{role:"assistant",content:"Error processing request. Please try again."}])}finally{i(!1)}},Xs=async()=>{try{const s=await navigator.clipboard.readText();s&&s.trim()&&r(s)}catch{c(s=>[...s,{role:"assistant",content:"Clipboard access failed. Paste manually."}])}},Zs=async s=>{const t=s.target.files?.[0];if(t){const h=new FileReader;h.onload=async v=>{const K=v.target?.result;c(te=>[...te,{role:"user",content:`[Uploaded: ${t.name}]
${K.slice(0,500)}${K.length>500?"...":""}`}]),i(!0);try{const te=await f.brain.ingest(K,t.name);if(te.sessionSaved)c(he=>[...he,{role:"assistant",content:`✓ Session saved (ID: ${te.sessionId})
${te.message}`}]);else{const he=te.errors?.join(", ")||te.message;c(et=>[...et,{role:"assistant",content:`⚠ ${he}`}])}}catch{c(he=>[...he,{role:"assistant",content:"Error processing file. Please try again."}])}finally{i(!1)}},h.readAsText(t)}};return e.jsxs(ct,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h1",{className:"font-arcade text-xl text-primary flex items-center gap-2",children:[e.jsx(it,{className:"w-6 h-6"}),"BRAIN ANALYTICS"]})}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-[minmax(0,3fr)_minmax(0,1fr)] gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4",children:[e.jsxs(k,{className:"brain-card-strong rounded-none",children:[e.jsx(D,{className:"p-3 border-b border-[#3a0a0a]",children:e.jsx(E,{className:"font-arcade text-[10px] text-muted-foreground",children:"TOTAL SESSIONS"})}),e.jsxs(A,{className:"p-4",children:[e.jsx("div",{className:"font-arcade text-2xl text-primary","data-testid":"text-total-sessions",children:C?.totalSessions||0}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Logged sessions"})]})]}),e.jsxs(k,{className:"brain-card-strong rounded-none",children:[e.jsx(D,{className:"p-3 border-b border-[#3a0a0a]",children:e.jsx(E,{className:"font-arcade text-[10px] text-muted-foreground",children:"STUDY MINUTES"})}),e.jsxs(A,{className:"p-4",children:[e.jsx("div",{className:"font-arcade text-2xl text-primary","data-testid":"text-total-minutes",children:C?.totalMinutes||0}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Total tracked time"})]})]}),e.jsxs(k,{className:"brain-card-strong rounded-none",children:[e.jsx(D,{className:"p-3 border-b border-[#3a0a0a]",children:e.jsx(E,{className:"font-arcade text-[10px] text-muted-foreground",children:"CARDS REVIEWED"})}),e.jsxs(A,{className:"p-4",children:[e.jsx("div",{className:"font-arcade text-2xl text-primary","data-testid":"text-total-cards",children:C?.totalCards||0}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Anki totals"})]})]}),e.jsxs(k,{className:"brain-card-strong rounded-none",children:[e.jsx(D,{className:"p-3 border-b border-[#3a0a0a]",children:e.jsx(E,{className:"font-arcade text-[10px] text-muted-foreground",children:"ISSUES LOGGED"})}),e.jsxs(A,{className:"p-4",children:[e.jsx("div",{className:"font-arcade text-2xl text-orange-400",children:Ys}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Failures + blockers"})]})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"SESSION EVIDENCE"}),e.jsxs(k,{className:"brain-card rounded-none",children:[e.jsx(D,{className:"border-b border-secondary p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(E,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Et,{className:"w-4 h-4"}),"SESSION EVIDENCE TABLE"]}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Raw WRAP data. All metrics derive from these fields."})]}),j.size>0&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-terminal text-xs text-muted-foreground",children:[j.size," selected"]}),e.jsxs(p,{size:"sm",variant:"destructive",className:"font-terminal text-xs rounded-none",onClick:Ls,disabled:Ae.isPending,children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),Ae.isPending?"Deleting...":"Delete"]})]})]})}),e.jsx(A,{className:"p-0",children:Ts?e.jsx("div",{className:"p-8 text-center font-terminal text-muted-foreground",children:"LOADING..."}):se.length===0?e.jsx("div",{className:"p-8 text-center font-terminal text-muted-foreground",children:"NO SESSIONS YET"}):e.jsx(be,{className:"h-[400px]",children:e.jsxs(hs,{children:[e.jsx(ps,{children:e.jsxs(Pe,{className:"border-secondary hover:bg-transparent",children:[e.jsx(X,{className:"w-10 px-2 py-2",children:e.jsx(Ee,{checked:j.size===se.length&&se.length>0,onCheckedChange:Fs,className:"border-primary data-[state=checked]:bg-primary"})}),e.jsx(X,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"DATE"}),e.jsx(X,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"COURSE"}),e.jsx(X,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"MODE"}),e.jsx(X,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"MIN"}),e.jsx(X,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"CARDS"}),e.jsx(X,{className:"font-arcade text-[10px] text-primary px-2 py-2",children:"CONFUSIONS"}),e.jsx(X,{className:"font-arcade text-[10px] text-primary w-10 px-2 py-2",children:"ACTIONS"})]})}),e.jsx(fs,{children:se.map(s=>e.jsxs(Pe,{className:"border-secondary/50 hover:bg-primary/10 font-terminal text-xs","data-testid":`row-session-${s.id}`,children:[e.jsx(Z,{className:"px-2 py-2",children:e.jsx(Ee,{checked:j.has(s.id),onCheckedChange:()=>Ms(s.id),className:"border-secondary data-[state=checked]:bg-primary"})}),e.jsx(Z,{className:"text-muted-foreground px-2 py-2",children:la(s.date)}),e.jsx(Z,{className:"font-bold px-2 py-2",children:s.topic||"-"}),e.jsx(Z,{className:"px-2 py-2",children:e.jsx(G,{variant:"outline",className:"rounded-none border-secondary font-normal text-[10px]",children:s.mode})}),e.jsx(Z,{className:"px-2 py-2",children:s.minutes||0}),e.jsx(Z,{className:"px-2 py-2",children:s.cards||0}),e.jsx(Z,{className:"max-w-[150px] truncate text-[10px] text-muted-foreground px-2 py-2",children:pe(s.confusions).join(", ")||"-"}),e.jsx(Z,{className:"px-2 py-2",children:e.jsxs("div",{className:"flex gap-1",children:[e.jsx(p,{size:"icon",variant:"ghost",className:"h-6 w-6 rounded-none hover:bg-primary/20",onClick:()=>N(s.id),title:"Edit session",children:e.jsx(ye,{className:"w-3 h-3"})}),e.jsx(p,{size:"icon",variant:"ghost",className:"h-6 w-6 rounded-none hover:bg-destructive/20 text-destructive",onClick:()=>_s(s.id),title:"Delete session",children:e.jsx(le,{className:"w-3 h-3"})})]})})]},s.id))})]})})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"DERIVED METRICS"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs(k,{className:"brain-card rounded-none",children:[e.jsx(D,{className:"border-b border-secondary p-3",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(Ot,{className:"w-3 h-3"}),"SESSIONS PER COURSE"]})}),e.jsx(A,{className:"p-3 max-h-[200px] overflow-y-auto",children:Ke?e.jsx("div",{className:"text-center font-terminal text-xs text-muted-foreground",children:"LOADING..."}):(C?.sessionsPerCourse||[]).length===0?e.jsx("div",{className:"text-center font-terminal text-xs text-muted-foreground py-4",children:"NO DATA"}):e.jsx("div",{className:"space-y-2",children:C?.sessionsPerCourse.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between font-terminal text-xs",children:[e.jsx("span",{className:"truncate max-w-[120px]",children:s.course}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-primary",children:[s.count," sess"]}),e.jsxs("span",{className:"text-muted-foreground",children:[s.minutes," min"]})]})]},t))})})]}),e.jsxs(k,{className:"brain-card rounded-none",children:[e.jsx(D,{className:"border-b border-secondary p-3",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(ds,{className:"w-3 h-3"}),"MODE DISTRIBUTION"]})}),e.jsx(A,{className:"p-3 max-h-[200px] overflow-y-auto",children:Ke?e.jsx("div",{className:"text-center font-terminal text-xs text-muted-foreground",children:"LOADING..."}):(C?.modeDistribution||[]).length===0?e.jsx("div",{className:"text-center font-terminal text-xs text-muted-foreground py-4",children:"NO DATA"}):e.jsx("div",{className:"space-y-2",children:C?.modeDistribution.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between font-terminal text-xs",children:[e.jsx(G,{variant:"outline",className:"rounded-none border-secondary",children:s.mode}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-primary",children:[s.count," sess"]}),e.jsxs("span",{className:"text-muted-foreground",children:[s.minutes," min"]})]})]},t))})})]}),e.jsxs(k,{className:"brain-card rounded-none",children:[e.jsx(D,{className:"border-b border-secondary p-3",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2 text-orange-400",children:[e.jsx(os,{className:"w-3 h-3"}),"REPEATED CONFUSIONS"]})}),e.jsx(A,{className:"p-3 max-h-[200px] overflow-y-auto",children:(C?.recentConfusions||[]).length===0?e.jsx("div",{className:"text-center font-terminal text-xs text-muted-foreground py-4",children:"NO CONFUSIONS LOGGED"}):e.jsx("div",{className:"space-y-1",children:C?.recentConfusions.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between font-terminal text-xs",children:[e.jsx("span",{className:"truncate max-w-[150px] text-orange-300",children:s.text}),e.jsxs("span",{className:"text-muted-foreground",children:["x",s.count]})]},t))})})]}),e.jsxs(k,{className:"brain-card rounded-none",children:[e.jsx(D,{className:"border-b border-secondary p-3",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2",children:[e.jsx(St,{className:"w-3 h-3"}),"CONCEPT FREQUENCY"]})}),e.jsx(A,{className:"p-3 max-h-[200px] overflow-y-auto",children:(C?.conceptFrequency||[]).length===0?e.jsx("div",{className:"text-center font-terminal text-xs text-muted-foreground py-4",children:"NO CONCEPTS LOGGED"}):e.jsx("div",{className:"flex flex-wrap gap-1",children:C?.conceptFrequency.slice(0,15).map((s,t)=>e.jsxs(G,{variant:"outline",className:"rounded-none border-secondary font-terminal text-xs",children:[s.concept," (",s.count,")"]},t))})})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"ISSUES LOG"}),e.jsxs(k,{className:"brain-card rounded-none",children:[e.jsxs(D,{className:"border-b border-secondary p-4",children:[e.jsxs(E,{className:"font-arcade text-sm flex items-center gap-2 text-red-400",children:[e.jsx(os,{className:"w-4 h-4"}),"ISSUES AND FAILURES LOG"]}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Aggregated session issues: interruptions, source-lock failures, workflow problems"})]}),e.jsx(A,{className:"p-4",children:(C?.issuesLog||[]).length===0?e.jsx("div",{className:"text-center font-terminal text-muted-foreground py-8",children:"NO ISSUES LOGGED"}):e.jsx("div",{className:"space-y-2",children:C?.issuesLog.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-red-500/30 bg-red-500/5 font-terminal text-sm",children:[e.jsx("span",{className:"text-red-300",children:s.issue}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-muted-foreground text-xs",children:s.course}),e.jsxs(G,{variant:"outline",className:"rounded-none border-red-500/50 text-red-400",children:["x",s.count]})]})]},t))})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"font-arcade text-lg text-primary mb-4",children:"SYSTEM STATUS"}),e.jsx(k,{className:"brain-card rounded-none",children:e.jsx(A,{className:"p-3",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 font-terminal text-xs",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${U?.connected?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-muted-foreground",children:"Obsidian"}),e.jsx("span",{className:"text-primary",children:U?.connected?"Online":"Offline"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${Q?.connected?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"text-muted-foreground",children:"Anki"}),e.jsx("span",{className:"text-primary",children:Q?.connected?"Connected":"Offline"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-muted-foreground",children:[e.jsxs("span",{children:["Cards: ",e.jsx("span",{className:"text-primary",children:C?.totalCards||0})]}),e.jsxs("span",{children:["Drafts: ",e.jsx("span",{className:"text-primary",children:re.length})]})]})]})})})]}),e.jsx(Re,{type:"single",collapsible:!0,className:"border border-secondary/40 rounded-none",children:e.jsxs(ce,{value:"ingestion",className:"border-secondary/40",children:[e.jsx(ie,{className:"font-arcade text-sm text-primary px-4 hover:no-underline",children:"DATA INGESTION TOOLS"}),e.jsx(de,{className:"px-2",children:e.jsx("div",{className:"pt-2",children:e.jsx(oa,{})})})]})}),e.jsx(Re,{type:"single",collapsible:!0,className:"border border-secondary/40 rounded-none",children:e.jsxs(ce,{value:"integrations",className:"border-secondary/40",children:[e.jsx(ie,{className:"font-arcade text-sm text-primary px-4 hover:no-underline",children:"INTEGRATIONS"}),e.jsx(de,{className:"px-2",children:e.jsxs("div",{className:"space-y-4 pt-2",children:[e.jsxs(k,{className:"brain-card rounded-none",children:[e.jsxs(D,{className:"border-b border-secondary/50 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(E,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"OBSIDIAN VAULT",U?.connected?e.jsx(ve,{className:"w-3 h-3 text-green-500"}):e.jsx(je,{className:"w-3 h-3 text-red-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{size:"sm",variant:"outline",className:"h-6 px-2 rounded-none font-terminal text-xs",onClick:Ks,disabled:!U?.connected,children:[e.jsx(cs,{className:"w-3 h-3 mr-1"}),"New Note"]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:s=>ne(s.target.checked),disabled:!U?.connected,className:"w-4 h-4 accent-primary"}),e.jsx("span",{className:"font-terminal text-xs",children:"Auto-Sync"})]})]})]}),e.jsx("div",{className:"flex items-center gap-1 mt-2 flex-wrap",children:Ps.map(s=>e.jsx(p,{size:"sm",variant:O===s.path?"default":"outline",className:"h-6 px-2 rounded-none font-terminal text-xs",onClick:()=>ue(s.path),children:s.name},s.path))}),O&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 font-terminal text-xs text-muted-foreground",children:[e.jsx("button",{onClick:()=>ue(""),className:"hover:text-primary",children:"vault"}),O.split("/").map((s,t,h)=>e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(dt,{className:"w-3 h-3"}),e.jsx("button",{onClick:()=>ue(h.slice(0,t+1).join("/")),className:"hover:text-primary",children:s})]},t))]})]}),e.jsx(A,{className:"p-0",children:U?.connected?e.jsxs("div",{className:"grid md:grid-cols-2 h-[300px]",children:[e.jsx("div",{className:"border-r border-secondary/30",children:e.jsx(be,{className:"h-[300px]",children:e.jsxs("div",{className:"p-2 space-y-1",children:[O&&e.jsxs("button",{onClick:()=>{const s=O.split("/");s.pop(),ue(s.join("/"))},className:"w-full flex items-center gap-2 p-2 hover:bg-secondary/20 font-terminal text-xs text-muted-foreground",children:[e.jsx(ls,{className:"w-3 h-3"}),".."]}),zs?.files?.map(s=>{const t=typeof s=="string"?s:s.path,h=t.endsWith("/"),v=t.replace(/\/$/,"").split("/").pop()||t;return e.jsxs("button",{onClick:()=>{if(h){const K=v.replace(/\/$/,"");ue(O?`${O}/${K}`:K)}else{const K=O?`${O}/${v}`:v;Bs(K)}},className:`w-full flex items-center gap-2 p-2 hover:bg-secondary/20 font-terminal text-xs ${xe?.endsWith(v)?"bg-primary/20 text-primary":""}`,children:[h?e.jsx(ls,{className:"w-3 h-3 text-yellow-500"}):e.jsx(Tt,{className:"w-3 h-3 text-blue-400"}),v]},t)})]})})}),e.jsx("div",{className:"flex flex-col h-[300px]",children:xe?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-secondary/30",children:[e.jsxs("span",{className:"font-terminal text-xs text-primary truncate",children:[xe.split("/").pop(),ze&&e.jsx("span",{className:"text-yellow-500 ml-1",children:"*"})]}),e.jsxs(p,{size:"sm",variant:"ghost",onClick:Us,disabled:!ze||$e,className:"h-6 px-2",children:[e.jsx(De,{className:"w-3 h-3 mr-1"}),$e?"Saving...":"Save"]})]}),e.jsx("textarea",{value:_e,onChange:s=>{fe(s.target.value),ge(!0)},className:"flex-1 w-full p-3 bg-black/60 font-terminal text-sm resize-none focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"File content..."})]}):e.jsx("div",{className:"flex-1 flex items-center justify-center font-terminal text-xs text-muted-foreground",children:"Select a file to edit"})})]}):e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("p",{className:"font-terminal text-xs text-red-400 mb-2",children:"Obsidian Offline"}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Open Obsidian with Local REST API plugin enabled"})]})})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsxs(k,{className:"brain-card rounded-none",children:[e.jsx(D,{className:"border-b border-secondary/50 p-3",children:e.jsxs(E,{className:"font-arcade text-xs flex items-center gap-2 text-muted-foreground",children:[e.jsx(ds,{className:"w-3 h-3"}),"ANKI INTEGRATION",Q?.connected?e.jsx(ve,{className:"w-3 h-3 text-green-500 ml-auto"}):e.jsx(je,{className:"w-3 h-3 text-red-500 ml-auto"})]})}),e.jsx(A,{className:"p-4 space-y-3",children:Gs?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Checking Anki..."}):Q?.connected?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Status:"}),e.jsx(G,{variant:"outline",className:"bg-green-500/20 text-green-400 border-green-500",children:"Connected"})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Cards Created:"}),e.jsx("span",{className:"font-arcade text-xs text-primary",children:C?.totalCards||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Due Today:"}),e.jsx("span",{className:"font-arcade text-xs text-secondary",children:Ws?.dueCount||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Reviewed Today:"}),e.jsx("span",{className:"font-arcade text-xs text-muted-foreground",children:Q.reviewedToday||0})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"Decks:"}),e.jsx("span",{className:"font-arcade text-xs text-muted-foreground",children:Q.decks?.length||0})]}),e.jsxs("div",{className:"pt-2 flex gap-2",children:[e.jsxs(p,{size:"sm",variant:"outline",className:"flex-1 font-terminal text-xs",onClick:()=>Ge(),children:[e.jsx(is,{className:"w-3 h-3 mr-1"}),"Refresh"]}),e.jsx(p,{size:"sm",className:"flex-1 font-terminal text-xs bg-secondary hover:bg-secondary/80",onClick:()=>Ie.mutate(),disabled:Ie.isPending,children:Ie.isPending?"Syncing...":"Sync Cards"})]}),re.length>0&&e.jsxs("div",{className:"pt-3 border-t border-secondary/30",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-arcade text-[10px] text-yellow-400",children:["PENDING CARDS (",re.length,")"]}),e.jsx("div",{className:"flex gap-1",children:e.jsx(p,{size:"sm",variant:"outline",className:"h-5 px-2 text-[10px] font-terminal",onClick:()=>{g.size===re.length?I(new Set):I(new Set(re.map(s=>s.id)))},children:g.size===re.length?"None":"All"})})]}),g.size>0&&e.jsxs("div",{className:"flex gap-1 mb-2",children:[e.jsxs(p,{size:"sm",className:"h-6 px-2 text-[10px] font-terminal bg-green-600 hover:bg-green-700",onClick:()=>{g.forEach(s=>We.mutate(s)),I(new Set)},children:[e.jsx(ve,{className:"w-3 h-3 mr-1"}),"Approve (",g.size,")"]}),e.jsxs(p,{size:"sm",variant:"destructive",className:"h-6 px-2 text-[10px] font-terminal",onClick:()=>{g.forEach(s=>Ve.mutate(s)),I(new Set)},children:[e.jsx(le,{className:"w-3 h-3 mr-1"}),"Delete (",g.size,")"]})]}),e.jsx(be,{className:"h-[200px]",children:e.jsx("div",{className:"space-y-2",children:re.map(s=>e.jsx("div",{className:`p-2 bg-black/40 border text-xs ${g.has(s.id)?"border-primary":"border-secondary/30"}`,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ee,{checked:g.has(s.id),onCheckedChange:t=>{const h=new Set(g);t?h.add(s.id):h.delete(s.id),I(h)},className:"mt-1 border-secondary data-[state=checked]:bg-primary"}),e.jsxs("div",{className:"flex-1 min-w-0 overflow-hidden",children:[e.jsx("div",{className:"font-terminal text-primary truncate",children:s.front}),e.jsx("div",{className:"font-terminal text-muted-foreground mt-1 truncate",children:s.back}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(G,{variant:"outline",className:"text-[9px] border-blue-500/50 text-blue-400 shrink-0",children:s.deckName}),e.jsx(p,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-yellow-500/50 text-yellow-400 hover:bg-yellow-500/20",onClick:()=>Hs(s),title:"Edit card",children:e.jsx(ye,{className:"w-3 h-3"})}),e.jsx(p,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-green-500/50 text-green-400 hover:bg-green-500/20",onClick:()=>We.mutate(s.id),title:"Approve card",children:e.jsx(ve,{className:"w-3 h-3"})}),e.jsx(p,{size:"icon",variant:"outline",className:"h-5 w-5 shrink-0 border-red-500/50 text-red-400 hover:bg-red-500/20",onClick:()=>Ve.mutate(s.id),title:"Delete card",children:e.jsx(le,{className:"w-3 h-3"})})]})]})]})},s.id))})})]})]}):e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"font-terminal text-xs text-red-400",children:Q?.error||"Anki not connected"}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"Open Anki with AnkiConnect plugin"}),e.jsxs(p,{size:"sm",variant:"outline",className:"font-terminal text-xs",onClick:()=>Ge(),children:[e.jsx(is,{className:"w-3 h-3 mr-1"}),"Retry"]})]})})]})})]})})]})})]}),e.jsx("div",{className:"space-y-4 xl:sticky xl:top-20 xl:h-[calc(100vh-6rem)]",children:e.jsxs(k,{className:"brain-card-strong rounded-none h-[520px] xl:h-[calc(100vh-6rem)] flex flex-col",children:[e.jsx(D,{className:"border-b border-primary/50 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(E,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ft,{className:"w-4 h-4"}),"LLM CHAT"]}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-1",children:"Ask questions about your study data"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${U?.connected?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:U?.connected?"Obsidian":"Obsidian Offline"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:s=>ne(s.target.checked),disabled:!U?.connected,className:"w-4 h-4 accent-primary"}),e.jsx("span",{className:"font-terminal text-xs",children:"Sync Notes"})]})]})]})}),e.jsxs(A,{className:"flex-1 flex flex-col p-0 overflow-hidden",children:[e.jsx(be,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-3",children:[n.length===0?e.jsxs("div",{className:"text-center font-terminal text-xs text-muted-foreground py-8",children:["Start a conversation or upload files.",e.jsx("br",{}),"Ask about your study patterns, concepts, or get summaries."]}):n.map((s,t)=>e.jsx("div",{className:`p-3 font-terminal text-sm ${s.role==="user"?"bg-primary/10 border-l-2 border-primary ml-4":"bg-secondary/10 border-l-2 border-secondary mr-4"}`,children:e.jsx("p",{className:"whitespace-pre-wrap",children:s.content})},t)),d&&e.jsx("div",{className:"p-3 font-terminal text-sm text-muted-foreground animate-pulse bg-secondary/10 border-l-2 border-secondary mr-4",children:"Thinking..."}),e.jsx("div",{ref:Ue})]})}),m&&e.jsxs("div",{className:"border-t border-secondary/50 p-3 bg-black/40",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{variant:"outline",className:"text-[10px]",children:"WRAP"}),e.jsxs("span",{className:"font-terminal text-xs text-muted-foreground",children:["Session ",m.wrapSessionId||m.sessionId||"logged"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(G,{variant:"outline",className:"text-[10px]",children:["Cards: ",m.cardsCreated]}),e.jsxs(G,{variant:"outline",className:"text-[10px]",children:["Issues: ",m.issuesLogged]}),e.jsxs(G,{variant:"outline",className:"text-[10px]",children:["Notes: ",m.obsidianSynced?"Merged":"Pending"]})]})]}),e.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[e.jsx(p,{variant:"outline",size:"sm",className:"font-terminal text-xs",onClick:()=>J.invalidateQueries({queryKey:["anki"]}),children:"Refresh Anki Drafts"}),m.obsidianPath&&e.jsx(p,{variant:"outline",size:"sm",className:"font-terminal text-xs",onClick:()=>navigator.clipboard.writeText(m.obsidianPath||""),children:"Copy Obsidian Path"})]}),m.obsidianPath&&e.jsxs("div",{className:"mt-2 font-terminal text-[11px] text-muted-foreground",children:["Obsidian: ",m.obsidianPath]})]}),e.jsxs("div",{className:"border-t border-primary/50 p-3",children:[e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("span",{className:"font-terminal text-xs text-muted-foreground self-center",children:"MODE:"}),["all","obsidian","anki","metrics"].map(s=>e.jsx(p,{variant:Y===s?"default":"outline",size:"sm",className:`rounded-none font-arcade text-[10px] h-7 px-2 ${Y===s?"bg-primary text-black":"border-secondary"}`,onClick:()=>o(s),children:s.toUpperCase()},s))]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"file",ref:Be,onChange:Zs,accept:".txt,.json,.md,.csv",className:"hidden"}),e.jsx(p,{variant:"ghost",size:"icon",className:"rounded-none h-10 w-10 shrink-0",onClick:()=>Be.current?.click(),"data-testid":"button-upload-file",title:"Attach file",children:e.jsx(_t,{className:"w-4 h-4"})}),e.jsx(p,{variant:"ghost",size:"icon",className:"rounded-none h-10 w-10 shrink-0",onClick:Xs,title:"Paste WRAP",children:e.jsx(cs,{className:"w-4 h-4"})}),e.jsx(ae,{value:a,onChange:s=>r(s.target.value),placeholder:"Type a message or paste WRAP...",className:"rounded-none border-secondary bg-black font-terminal text-sm min-h-[40px] max-h-[200px] resize-none overflow-y-auto",rows:Math.min(8,Math.max(1,a.split(`
`).length)),onKeyDown:s=>{s.key==="Enter"&&!s.shiftKey&&!s.ctrlKey&&(s.preventDefault(),Ye())},"data-testid":"input-chat"}),e.jsx(p,{size:"icon",className:"rounded-none bg-primary h-10 w-10 shrink-0",onClick:Ye,disabled:!a.trim()||d,"data-testid":"button-send-chat",children:e.jsx(wt,{className:"w-4 h-4"})})]})]})]})]})})]})]}),e.jsx(He,{open:u!==null,onOpenChange:()=>N(null),children:e.jsxs(Je,{className:"bg-black border-2 border-primary rounded-none max-w-2xl",children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{className:"font-arcade text-primary flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5"}),"EDIT SESSION #",u]}),e.jsx(Ze,{className:"font-terminal text-muted-foreground",children:"Update WRAP methodology fields for this study session"})]}),e.jsxs("div",{className:"space-y-4 font-terminal",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Mode"}),e.jsxs(ts,{value:S.mode,onValueChange:s=>H(t=>({...t,mode:s})),children:[e.jsx(as,{className:"rounded-none border-secondary",children:e.jsx(ns,{placeholder:"Select mode"})}),e.jsxs(rs,{className:"rounded-none border-secondary bg-black",children:[e.jsx(_,{value:"Core",children:"Core"}),e.jsx(_,{value:"Sprint",children:"Sprint"}),e.jsx(_,{value:"Drill",children:"Drill"}),e.jsx(_,{value:"study",children:"Study"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Minutes"}),e.jsx(es,{type:"number",value:S.minutes,onChange:s=>H(t=>({...t,minutes:s.target.value})),className:"rounded-none border-secondary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Cards"}),e.jsx(es,{type:"number",value:S.cards,onChange:s=>H(t=>({...t,cards:s.target.value})),className:"rounded-none border-secondary"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Confusions (comma-separated)"}),e.jsx(ae,{value:S.confusions,onChange:s=>H(t=>({...t,confusions:s.target.value})),placeholder:"e.g., muscle insertion points, nerve pathways",className:"rounded-none border-secondary min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Weak Anchors (comma-separated)"}),e.jsx(ae,{value:S.weakAnchors,onChange:s=>H(t=>({...t,weakAnchors:s.target.value})),placeholder:"e.g., brachial plexus diagram, ROM measurements",className:"rounded-none border-secondary min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Concepts (comma-separated)"}),e.jsx(ae,{value:S.concepts,onChange:s=>H(t=>({...t,concepts:s.target.value})),placeholder:"e.g., upper extremity anatomy, peripheral nerves",className:"rounded-none border-secondary min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Issues (comma-separated)"}),e.jsx(ae,{value:S.issues,onChange:s=>H(t=>({...t,issues:s.target.value})),placeholder:"e.g., interrupted by phone, lost focus after 30 min",className:"rounded-none border-secondary min-h-[60px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Notes"}),e.jsx(ae,{value:S.notes,onChange:s=>H(t=>({...t,notes:s.target.value})),placeholder:"Free-form observations about the session",className:"rounded-none border-secondary min-h-[80px]"})]})]}),e.jsxs(ss,{className:"gap-2",children:[e.jsxs(p,{variant:"outline",onClick:()=>N(null),className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(p,{onClick:qs,className:"font-terminal rounded-none bg-primary hover:bg-primary/80",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})}),e.jsx(pt,{open:z,onOpenChange:y,children:e.jsxs(ft,{className:"bg-black border-2 border-destructive rounded-none",children:[e.jsxs(gt,{children:[e.jsxs(Nt,{className:"font-arcade text-destructive flex items-center gap-2",children:[e.jsx(le,{className:"w-5 h-5"}),"CONFIRM DELETE"]}),e.jsxs(jt,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",V.length," session",V.length!==1?"s":"","? This action cannot be undone."]})]}),e.jsxs(bt,{className:"gap-2",children:[e.jsx(yt,{className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:"Cancel"}),e.jsxs(vt,{onClick:$s,className:"font-terminal rounded-none bg-destructive hover:bg-destructive/80 text-destructive-foreground",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})}),e.jsx(He,{open:L!==null,onOpenChange:()=>T(null),children:e.jsxs(Je,{className:"bg-black border-2 border-primary rounded-none max-w-lg",style:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:[e.jsxs(Qe,{children:[e.jsxs(Xe,{className:"font-arcade text-primary flex items-center gap-2",children:[e.jsx(ye,{className:"w-5 h-5"}),"EDIT CARD"]}),e.jsx(Ze,{className:"font-terminal text-muted-foreground",children:"Edit card content and select target deck"})]}),e.jsxs("div",{className:"space-y-4 font-terminal",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Front (Question)"}),e.jsx(ae,{value:R.front,onChange:s=>B(t=>({...t,front:s.target.value})),placeholder:"Card front...",className:"rounded-none border-secondary min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Back (Answer)"}),e.jsx(ae,{value:R.back,onChange:s=>B(t=>({...t,back:s.target.value})),placeholder:"Card back...",className:"rounded-none border-secondary min-h-[80px]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-muted-foreground",children:"Target Deck"}),e.jsxs(ts,{value:R.deckName,onValueChange:s=>B(t=>({...t,deckName:s})),children:[e.jsx(as,{className:"rounded-none border-secondary",children:e.jsx(ns,{placeholder:"Select deck"})}),e.jsxs(rs,{className:"rounded-none border-secondary bg-black max-h-[200px]",children:[e.jsx(_,{value:"PT::EBP",children:"PT::EBP (Evidence Based Practice)"}),e.jsx(_,{value:"PT::ExPhys",children:"PT::ExPhys (Exercise Physiology)"}),e.jsx(_,{value:"PT::MS1",children:"PT::MS1 (Movement Science 1)"}),e.jsx(_,{value:"PT::Neuro",children:"PT::Neuro (Neuroscience)"}),e.jsx(_,{value:"PT::TI",children:"PT::TI (Therapeutic Intervention)"}),e.jsx(_,{value:"PT::General",children:"PT::General"}),Q?.decks?.filter(s=>!s.startsWith("PT::")).map(s=>e.jsx(_,{value:s,children:s},s))]})]}),e.jsxs("p",{className:"text-[10px] text-muted-foreground mt-1",children:["Current: ",e.jsx("span",{className:"text-blue-400",children:R.deckName})]})]})]}),e.jsxs(ss,{className:"gap-2",children:[e.jsxs(p,{variant:"outline",onClick:()=>T(null),className:"font-terminal rounded-none border-secondary hover:bg-secondary/20",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(p,{onClick:Js,disabled:Oe.isPending,className:"font-terminal rounded-none bg-primary hover:bg-primary/80",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),Oe.isPending?"Saving...":"Save"]})]})]})})]})}export{va as default};
