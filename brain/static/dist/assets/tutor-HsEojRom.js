import{c as te,j as e,b as Oe,r as t,X as ke,u as Se}from"./index-q1LjcoNO.js";import{f as J,a as A,S as ue,E as he,F as De,B as X,G as Le,o as we,p as Me,n as Re,L as Ie}from"./layout-CARnhi-x.js";import{B as R,C as ce}from"./badge-aUyyI1bp.js";import{I as S,T as g,d as Z,e as W,f as se,P as re,g as _e,h as fe,i as ge,j as Pe,b as Fe}from"./theme-DVlXyDCo.js";import{C as ne}from"./checkbox-BhV53DeA.js";import{M as Ue,t as T}from"./MaterialUploader-B3PJyoAh.js";import{L as pe}from"./loader-circle--LeTzlTC.js";import{F as ie}from"./file-text-CxkdDePf.js";import{C as Ee,a as $e,b as qe}from"./index-DzeCb3bV.js";import{C as me}from"./clock-C_zYk_H7.js";import{D as Ge,M as Ke,r as Qe,F as He}from"./index-xuNikz1M.js";import{L as Be}from"./link-CBEgCDj9.js";import{Z as Xe}from"./zap-By0K-UlX.js";import{S as ze}from"./square-CBT8uGbN.js";import{S as Ye}from"./send-wtv2b7lR.js";import{M as ye}from"./message-square-jXuENV4-.js";import{C as Ve}from"./circle-question-mark-pcEjweo2.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],Ze=te("cloud",We);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Te=te("credit-card",Je);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],rr=te("cpu",er);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],tr=te("globe",sr);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Ae=te("map",ar);function ee({className:l,...i}){return e.jsx("div",{className:Oe("animate-pulse rounded-md bg-primary/10",l),...i})}const nr={pdf:"PDF",docx:"DOC",pptx:"PPT",md:"MD",txt:"TXT"};function ir({courseId:l,selectedMaterials:i,setSelectedMaterials:k}){const{data:N=[],isLoading:u}=J({queryKey:["tutor-materials",l],queryFn:()=>A.tutor.getMaterials(l?{course_id:l}:void 0)}),O=c=>{k(i.includes(c)?i.filter(I=>I!==c):[...i,c])},y=()=>{i.length===N.length?k([]):k(N.map(c=>c.id))};return u?e.jsx("div",{className:"flex items-center justify-center py-3",children:e.jsx(pe,{className:`${S} animate-spin text-muted-foreground`})}):N.length===0?e.jsx("div",{className:`${g} text-center py-2`,children:"No materials uploaded yet"}):e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:`flex items-center gap-1.5 px-1 py-0.5 ${Z} text-muted-foreground hover:text-foreground cursor-pointer border-b border-muted-foreground/10 pb-1`,children:[e.jsx(ne,{checked:N.length>0&&i.length===N.length,onCheckedChange:y,className:"w-3 h-3"}),e.jsx("span",{children:"Select all"}),e.jsxs(R,{variant:"outline",className:`ml-auto ${W} h-4 px-1`,children:[i.length,"/",N.length]})]}),N.map(c=>e.jsxs("label",{className:`flex items-center gap-1.5 px-1 py-0.5 ${Z} text-muted-foreground hover:text-foreground cursor-pointer`,children:[e.jsx(ne,{checked:i.includes(c.id),onCheckedChange:()=>O(c.id),className:"w-3 h-3"}),e.jsx(ie,{className:`${S} text-primary/60 shrink-0`}),e.jsx("span",{className:"truncate flex-1",children:c.title}),e.jsx(R,{variant:"outline",className:`${W} h-4 px-1 shrink-0`,children:nr[c.file_type]||c.file_type.toUpperCase()})]},c.id))]})}const be=["prepare","encode","interrogate","retrieve","refine","overlearn"];function or({selectedBlockIds:l,setSelectedBlockIds:i}){const{data:k=[],isLoading:N}=J({queryKey:["tutor-method-blocks"],queryFn:()=>A.tutor.getMethodBlocks()}),[u,O]=t.useState(new Set),[y,c]=t.useState(null),[I,v]=t.useState(null),_=t.useMemo(()=>{const s=new Map;for(const a of k)s.set(a.id,a);return s},[k]),E=t.useMemo(()=>{const s={};for(const a of be)s[a]=[];for(const a of k)s[a.category]||(s[a.category]=[]),s[a.category].push(a);return s},[k]),m=t.useMemo(()=>l.map(s=>_.get(s)).filter(Boolean),[l,_]),w=t.useMemo(()=>m.reduce((s,a)=>s+(a.default_duration_min||0),0),[m]),L=s=>{O(a=>{const h=new Set(a);return h.has(s)?h.delete(s):h.add(s),h})},n=s=>{i([...l,s])},x=s=>{i(l.filter((a,h)=>h!==s))},b=s=>{c(s)},o=(s,a)=>{s.preventDefault(),v(a)},j=s=>{if(y===null||y===s){c(null),v(null);return}const a=[...l],[h]=a.splice(y,1);a.splice(s,0,h),i(a),c(null),v(null)},f=()=>{c(null),v(null)};return N?e.jsx("div",{className:`${g} p-2`,children:"Loading blocks..."}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:`${se} text-xs`,children:"BLOCK PICKER"}),e.jsx(ue,{className:"h-36 border-2 border-primary/30 bg-black/20",children:e.jsx("div",{className:"p-1",children:be.map(s=>{const a=E[s]||[];if(a.length===0)return null;const h=u.has(s),D=he[s];return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>L(s),className:"w-full flex items-center gap-1 px-2 py-1 text-left hover:bg-black/30 transition-colors",children:[h?e.jsx(Ee,{className:"w-3 h-3",style:{color:D}}):e.jsx($e,{className:"w-3 h-3",style:{color:D}}),e.jsxs("span",{className:"font-arcade text-[10px] uppercase",style:{color:D},children:[De[s]," (",a.length,")"]})]}),!h&&e.jsx("div",{className:"pl-4 pb-1 space-y-0.5",children:a.map(M=>e.jsxs("button",{onClick:()=>n(M.id),className:"w-full text-left px-2 py-1 text-xs font-terminal text-foreground/80 hover:bg-primary/10 hover:text-foreground transition-colors flex items-center justify-between",children:[e.jsx("span",{className:"truncate",children:M.name}),e.jsxs("span",{className:`${g} text-[10px] shrink-0 ml-2`,children:["~",M.default_duration_min,"m"]})]},M.id))})]},s)})})}),e.jsxs("div",{className:`${se} text-xs flex items-center justify-between`,children:[e.jsx("span",{children:"YOUR CHAIN"}),m.length>0&&e.jsx(X,{variant:"ghost",size:"sm",onClick:()=>i([]),className:"h-5 px-2 text-[10px] font-arcade text-destructive hover:text-destructive",children:"CLEAR"})]}),e.jsx("div",{className:"border-2 border-primary/30 bg-black/20 min-h-[60px]",children:m.length===0?e.jsx("div",{className:`${g} text-xs p-3 text-center`,children:"Click blocks above to build your study chain"}):e.jsx("div",{className:"p-1 space-y-0.5",children:m.map((s,a)=>{const h=he[s.category]||"#888";return e.jsxs("div",{draggable:!0,onDragStart:()=>b(a),onDragOver:D=>o(D,a),onDrop:()=>j(a),onDragEnd:f,className:`flex items-center gap-1 px-2 py-1 border transition-all ${I===a?"border-primary bg-primary/20":"border-primary/20 bg-black/30"}`,children:[e.jsx(Le,{className:"w-3 h-3 text-muted-foreground/40 cursor-grab shrink-0"}),e.jsx(R,{variant:"outline",className:"text-[9px] rounded-none px-1 h-4 shrink-0",style:{borderColor:h,color:h},children:s.category.slice(0,3).toUpperCase()}),e.jsx("span",{className:"font-terminal text-xs text-foreground/80 truncate flex-1",children:s.name}),e.jsxs("span",{className:`${g} text-[10px] shrink-0`,children:["~",s.default_duration_min,"m"]}),e.jsx("button",{onClick:()=>x(a),className:"shrink-0 text-muted-foreground/40 hover:text-destructive transition-colors",children:e.jsx(ke,{className:"w-3 h-3"})})]},`${s.id}-${a}`)})})}),m.length>0&&e.jsxs("div",{className:"flex items-center justify-between px-1",children:[e.jsxs("span",{className:`${g} text-xs`,children:[m.length," block",m.length!==1?"s":""]}),e.jsxs("span",{className:"flex items-center gap-1 font-terminal text-xs text-primary",children:[e.jsx(me,{className:S}),"~",w," min"]})]})]})}const ae=[{value:"arcee-ai/trinity-large-preview:free",label:"Trinity Large (free)"},{value:"qwen/qwen3-coder-next",label:"Qwen3 Coder Next"},{value:"google/gemini-2.5-flash-lite",label:"Gemini 2.5 Flash Lite"}],lr=["Teaching Sprint","Diagnostic Sprint"],je={Core:"First Exposure (Core)",Sprint:"Review Sprint","Quick Sprint":"Quick Drill",Light:"Low Energy",Drill:"Mastery Review","Teaching Sprint":"First Exposure (Core)","Diagnostic Sprint":"Review Sprint"},Ne="tutor.autopick_chain.v1",ve="tutor.last_openrouter_model.v1",Ce="tutor.last_codex_model.v1";function xe(l){try{return localStorage.getItem(l)}catch{return null}}function de(l,i){try{localStorage.setItem(l,i)}catch{}}function cr(l,i){const k=xe(l);return k===null?i:k==="true"}function V({children:l,icon:i}){return e.jsxs("div",{className:`${se} flex items-center gap-1.5 pb-1 border-b border-primary/20 mb-2`,children:[i,l]})}function dr({courseId:l,setCourseId:i,selectedMaterials:k,setSelectedMaterials:N,mode:u,setMode:O,chainId:y,setChainId:c,customBlockIds:I,setCustomBlockIds:v,topic:_,setTopic:E,model:m,setModel:w,webSearch:L,setWebSearch:n,onStartSession:x,isStarting:b,hasActiveSession:o}){const{data:j,isLoading:f,isError:s}=J({queryKey:["tutor-content-sources"],queryFn:()=>A.tutor.getContentSources()}),{data:a=[],isLoading:h,isError:D}=J({queryKey:["tutor-template-chains"],queryFn:()=>A.tutor.getTemplateChains()}),{data:M=[],isLoading:B}=J({queryKey:["courses-active"],queryFn:()=>A.courses.getActive()}),P=j?.openrouter_enabled??!1,C=m.includes("/")?"openrouter":"codex";t.useEffect(()=>{!P&&C==="openrouter"&&w("codex")},[P,C,w]),t.useEffect(()=>{m&&(m.includes("/")?de(ve,m):de(Ce,m))},[m]);const[F,G]=t.useState(()=>cr(Ne,!0)),[Y,Q]=t.useState(null),[z,$]=t.useState("templates");t.useEffect(()=>{de(Ne,String(F))},[F]);const U=je[u],d=t.useMemo(()=>{if(U)return a.find(r=>r.name===U)},[a,U]);t.useEffect(()=>{F&&y===void 0&&d&&Y!==u&&(c(d.id),Q(u))},[F,y,d?.id,Y,u,c]);const H=r=>{if(O(r),!F||y!==void 0)return;const p=je[r];if(!p)return;const K=a.find(q=>q.name===p);K&&(c(K.id),Q(r))},oe=()=>{const r=xe(Ce),p=r&&!r.includes("/")?r:"codex";w(p)},le=()=>{if(!P)return;const r=xe(ve),p=r&&r.includes("/")?r:ae[0].value;w(p)};return t.useEffect(()=>{C==="openrouter"&&(ae.some(r=>r.value===m)||w(ae[0].value))},[C,m,w]),e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:`shrink-0 ${re} pb-2 border-b-2 border-primary/30`,children:[e.jsx("div",{className:_e,children:"CONTENT FILTER"}),(s||D)&&e.jsxs("div",{className:`${g} text-destructive`,children:["Tutor API unavailable. Start the dashboard via ",e.jsx("span",{className:"font-arcade",children:"Start_Dashboard.bat"}),"."]}),e.jsxs("div",{className:`flex items-center gap-2 mt-1 ${g}`,children:[e.jsx(Ge,{className:S}),j?.total_materials??0," materials",e.jsx("span",{className:"text-muted-foreground/40",children:"|"}),j?.total_instructions??0," SOP"]})]}),e.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:e.jsxs("div",{className:`${re} space-y-2`,children:[e.jsxs("div",{children:[e.jsx(V,{children:"Mode"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("button",{onClick:()=>H("Core"),className:`text-left px-2 py-2 border-2 transition-colors ${u==="Core"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50 hover:text-foreground hover:bg-black/30"}`,children:[e.jsx("div",{className:"font-arcade text-xs leading-tight truncate",children:"LEARN"}),e.jsx("div",{className:`${g} text-xs leading-tight truncate`,children:"Prime + encode"})]}),e.jsxs("button",{onClick:()=>H("Quick Sprint"),className:`text-left px-2 py-2 border-2 transition-colors ${u==="Quick Sprint"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50 hover:text-foreground hover:bg-black/30"}`,children:[e.jsx("div",{className:"font-arcade text-xs leading-tight truncate",children:"QUICK"}),e.jsx("div",{className:`${g} text-xs leading-tight truncate`,children:"Quick retrieval"})]})]}),e.jsx("button",{onClick:()=>H("Drill"),className:`w-full text-left px-2 py-2 border-2 transition-colors ${u==="Drill"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50 hover:text-foreground hover:bg-black/30"}`,children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-arcade text-xs leading-tight",children:"FIX"}),e.jsx("div",{className:`${g} text-xs leading-tight`,children:"Target weak spots"})]})})}),e.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[e.jsxs("button",{onClick:()=>H("Sprint"),className:`text-left px-2 py-2 border-2 transition-colors ${u==="Sprint"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50 hover:text-foreground hover:bg-black/30"}`,children:[e.jsx("div",{className:"font-arcade text-xs leading-tight truncate",children:"REVIEW"}),e.jsx("div",{className:`${g} text-xs leading-tight truncate`,children:"Retrieve + refine"})]}),e.jsxs("button",{onClick:()=>H("Light"),className:`text-left px-2 py-2 border-2 transition-colors ${u==="Light"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50 hover:text-foreground hover:bg-black/30"}`,children:[e.jsx("div",{className:"font-arcade text-xs leading-tight truncate",children:"LIGHT"}),e.jsx("div",{className:`${g} text-xs leading-tight truncate`,children:"Low energy"})]})]})]}),e.jsx("div",{className:`${g} text-xs mt-2`,children:"Auto-picks a chain template. Override below."}),lr.includes(u)&&e.jsxs("div",{className:`${g} text-xs mt-1`,children:["Legacy mode active: ",u]})]}),e.jsxs("div",{children:[e.jsx(V,{icon:e.jsx(Be,{className:S}),children:"Chain"}),e.jsxs("div",{className:"grid grid-cols-2 gap-1 mb-2 min-w-0",children:[e.jsx("button",{onClick:()=>$("templates"),className:`px-1.5 py-1 border-2 font-arcade text-[10px] truncate transition-colors ${z==="templates"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50"}`,children:"TEMPLATES"}),e.jsx("button",{onClick:()=>{$("custom"),c(void 0)},className:`px-1.5 py-1 border-2 font-arcade text-[10px] truncate transition-colors ${z==="custom"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50"}`,children:"CUSTOM"})]}),z==="templates"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[e.jsxs("div",{className:`${g} text-xs min-w-0 truncate`,children:[e.jsx("span",{className:"opacity-70",children:"Rec:"})," ",d?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-foreground font-medium",children:d.name}),e.jsxs(R,{variant:"outline",className:`ml-1 ${W} h-4 px-1.5 text-xs`,children:[d.blocks.length," blocks"]})]}):h?e.jsx(ee,{className:"inline-block w-20 h-4 bg-primary/10"}):e.jsx("span",{className:"opacity-70",children:"—"})]}),d&&y!==d.id&&e.jsx(X,{size:"sm",onClick:()=>c(d.id),className:"rounded-none h-6 px-2 font-arcade text-[10px] bg-primary text-primary-foreground hover:bg-primary/90 border border-primary",children:"APPLY"})]}),e.jsxs("label",{className:`flex items-center gap-2 ${Z} text-muted-foreground mb-2 cursor-pointer`,children:[e.jsx(ne,{checked:F,onCheckedChange:r=>G(r===!0),className:"w-3 h-3"}),e.jsx("span",{className:"select-none text-xs",children:"Auto-pick recommended chain"})]}),e.jsx(ue,{className:"h-40 border-2 border-primary/30 bg-black/20",children:e.jsxs("div",{className:"p-1 space-y-1",children:[e.jsx("button",{onClick:()=>{c(void 0),Q(u)},className:`w-full text-left px-3 py-2 border-2 transition-all ${y?"border-primary/20 text-foreground/80 hover:border-primary/40 hover:text-foreground hover:bg-black/30":"border-primary bg-primary/20 text-primary"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-arcade text-xs",children:"FREEFORM"}),e.jsx("div",{className:`${g} text-xs`,children:"No template"})]}),!y&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]})}),h?e.jsxs("div",{className:"space-y-2 p-2",children:[e.jsx(ee,{className:"w-full h-10 bg-primary/10"}),e.jsx(ee,{className:"w-full h-10 bg-primary/10"}),e.jsx(ee,{className:"w-full h-10 bg-primary/10"})]}):a.map(r=>e.jsx("button",{onClick:()=>c(r.id),className:`w-full text-left px-3 py-2 border-2 transition-all ${y===r.id?"border-primary bg-primary/20 text-primary":"border-primary/20 text-foreground/80 hover:border-primary/40 hover:text-foreground hover:bg-black/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-arcade text-xs truncate",children:r.name.toUpperCase()}),e.jsxs("div",{className:`${g} text-xs`,children:[r.blocks.length," blocks"]})]}),y===r.id&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary ml-2"})]})},r.id))]})})]}):e.jsx(or,{selectedBlockIds:I,setSelectedBlockIds:v})]}),e.jsxs("div",{children:[e.jsx(V,{children:"Topic"}),e.jsx("input",{value:_,onChange:r=>E(r.target.value),placeholder:"e.g. Hip Flexors",className:`${fe} border-2 border-primary/30`})]}),e.jsxs("div",{children:[e.jsx(V,{children:"Model"}),e.jsxs("div",{className:"space-y-1 mb-2",children:[e.jsx("button",{onClick:oe,className:`w-full text-left px-3 py-2 border-2 transition-colors ${C==="codex"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50 hover:text-foreground hover:bg-black/30"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rr,{className:S}),e.jsxs("div",{children:[e.jsx("div",{className:"font-arcade text-xs leading-tight",children:"CODEX"}),e.jsx("div",{className:`${g} text-xs leading-tight`,children:"ChatGPT login"})]})]}),C==="codex"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]})}),e.jsx("button",{onClick:le,disabled:!P,className:`w-full text-left px-3 py-2 border-2 transition-colors ${C==="openrouter"?"border-primary bg-primary/20 text-primary":"border-primary/30 text-foreground/80 hover:border-primary/50 hover:text-foreground hover:bg-black/30"} ${P?"":"opacity-50 cursor-not-allowed"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ze,{className:S}),e.jsxs("div",{children:[e.jsx("div",{className:"font-arcade text-xs leading-tight",children:"OPENROUTER"}),e.jsx("div",{className:`${g} text-xs leading-tight`,children:P?"API key enabled":"API key missing"})]})]}),C==="openrouter"&&e.jsx("div",{className:"w-2 h-2 rounded-full bg-primary"})]})})]}),C==="openrouter"?e.jsx("select",{value:m,onChange:r=>w(r.target.value),className:`${ge} border-2 border-primary/30`,children:ae.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))}):e.jsx("input",{value:m==="codex"?"":m,onChange:r=>w(r.target.value.trim()?r.target.value:"codex"),placeholder:"Codex model override (optional)",className:`${fe} border-2 border-primary/30`})]}),e.jsxs("label",{className:`flex items-center gap-2 cursor-pointer ${C!=="codex"?"opacity-50":""}`,children:[e.jsx(ne,{checked:L,onCheckedChange:r=>C==="codex"&&n(!!r),disabled:C!=="codex"}),e.jsx(tr,{className:S}),e.jsx("span",{className:`${Z} text-xs`,children:"Web search"}),C!=="codex"&&e.jsx("span",{className:"text-[10px] text-muted-foreground",children:"(Codex only)"})]}),e.jsxs("div",{children:[e.jsx(V,{children:"Course"}),B?e.jsx(ee,{className:"w-full h-10 bg-primary/10"}):e.jsxs("select",{value:l??"",onChange:r=>i(r.target.value?Number(r.target.value):void 0),className:`${ge} border-2 border-primary/30`,children:[e.jsx("option",{value:"",children:"All courses"}),M.map(r=>e.jsx("option",{value:r.id,children:r.name},r.id))]})]}),e.jsxs("div",{children:[e.jsx(V,{icon:e.jsx(ie,{className:S}),children:"Materials"}),e.jsx(ir,{courseId:l,selectedMaterials:k,setSelectedMaterials:N})]}),e.jsxs("div",{className:"border-t border-primary/10 pt-2",children:[e.jsx(V,{children:"Upload"}),e.jsx(Ue,{courseId:l})]})]})}),e.jsx("div",{className:`shrink-0 ${re} pt-2 border-t-2 border-primary/30`,children:e.jsxs(X,{onClick:x,disabled:b||o,className:`w-full rounded-none border-2 font-arcade text-xs h-9 ${o?"border-success/50 bg-success/10 text-success cursor-default":b?"border-primary/50 bg-primary/10 text-primary cursor-wait":"border-primary bg-primary/10 hover:bg-primary/20"}`,children:[b?e.jsx(pe,{className:`${S} animate-spin mr-1`}):o?e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-success animate-pulse"}),"SESSION ACTIVE"]}):e.jsx(Xe,{className:`${S} mr-1`}),!b&&!o&&"START SESSION"]})})]})}function mr({sessionId:l,onArtifactCreated:i,onSessionEnd:k,chainBlocks:N=[],currentBlockIndex:u=0,onAdvanceBlock:O}){const y=N.length>0,c=y&&u>=N.length,[I,v]=t.useState([]),[_,E]=t.useState(""),[m,w]=t.useState(!1),L=t.useRef(null),n=t.useRef(null);t.useEffect(()=>{L.current&&(L.current.scrollTop=L.current.scrollHeight)},[I]),t.useEffect(()=>{n.current?.focus()},[l]);const x=t.useCallback(async()=>{if(!_.trim()||!l||m)return;const o=_.trim();E("");const j=/^\/(note|save)\b/i.test(o),f=/^\/(card|flashcard)\b/i.test(o),s=/^\/(map|diagram)\b/i.test(o);v(a=>[...a,{role:"user",content:o}]),v(a=>[...a,{role:"assistant",content:"",isStreaming:!0}]),w(!0);try{const h=(await fetch(`/api/tutor/session/${l}/turn`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:o})})).body?.getReader(),D=new TextDecoder;if(!h)throw new Error("No response body");let M="",B="",P=[],C;for(;;){const{done:F,value:G}=await h.read();if(F)break;M+=D.decode(G,{stream:!0});const Y=M.split(`
`);M=Y.pop()??"";for(const Q of Y){if(!Q.startsWith("data: "))continue;const z=Q.slice(6);if(z==="[DONE]")break;try{const $=JSON.parse(z);if($.type==="error"){v(U=>{const d=[...U];return d[d.length-1]={role:"assistant",content:`Error: ${$.content}`},d}),w(!1);return}$.type==="web_search_searching"&&v(U=>{const d=[...U];return d[d.length-1]={...d[d.length-1],content:`Searching the web...

`,isStreaming:!0},d}),$.type==="web_search_completed"&&(B="",v(U=>{const d=[...U];return d[d.length-1]={...d[d.length-1],content:"",isStreaming:!0},d})),$.type==="token"&&$.content&&(B+=$.content,v(U=>{const d=[...U],H=d[d.length-1];return d[d.length-1]={...H,content:H.content+$.content,isStreaming:!0},d})),$.type==="done"&&(P=$.citations??[],C=$.model)}catch{}}}v(F=>{const G=[...F];return G[G.length-1]={role:"assistant",content:B,citations:P,model:C,isStreaming:!1},G}),(j||f||s)&&i({type:j?"note":f?"card":"map",content:B,title:o.replace(/^\/(note|card|flashcard|map|diagram|save)\s*/i,"").trim()})}catch(a){v(h=>{const D=[...h];return D[D.length-1]={role:"assistant",content:`Connection error: ${a instanceof Error?a.message:"Unknown"}`},D})}finally{w(!1)}},[_,l,m,i]),b=o=>{o.key==="Enter"&&!o.shiftKey&&(o.preventDefault(),x())};return l?e.jsxs("div",{className:"flex flex-col h-full",children:[y&&e.jsxs("div",{className:"shrink-0 px-3 py-2 border-b-2 border-primary/30 bg-black/40",children:[e.jsxs("div",{className:"flex items-center gap-1 overflow-x-auto",children:[N.map((o,j)=>{const f=j<u,s=j===u&&!c;return e.jsxs("div",{className:"flex items-center shrink-0",children:[j>0&&e.jsx(Ee,{className:"w-4 h-4 text-muted-foreground/40 mx-0.5"}),e.jsxs("div",{className:`px-2 py-1 border-2 text-base font-terminal flex items-center gap-1 ${s?"border-primary bg-primary/20 text-primary":f?"border-primary/30 bg-primary/5 text-muted-foreground/70 line-through":"border-primary/20 text-muted-foreground/50"}`,children:[f&&e.jsx(we,{className:"w-4 h-4"}),o.name]})]},o.id)}),!c&&O&&e.jsx("button",{onClick:O,className:"shrink-0 ml-2 px-3 py-1 border-2 border-primary/60 text-xs font-arcade text-primary hover:bg-primary/20 transition-colors",children:"NEXT"}),c&&e.jsx("span",{className:"shrink-0 ml-2 px-3 py-1 text-xs font-arcade text-green-400 border-2 border-green-400/50",children:"COMPLETE"})]}),!c&&N[u]&&e.jsxs("div",{className:"mt-1 text-base font-terminal text-muted-foreground",children:[e.jsx("span",{className:"text-primary",children:N[u].category.toUpperCase()})," ","· ~",N[u].duration,"min"]})]}),e.jsxs("div",{ref:L,className:"flex-1 overflow-y-auto p-3 space-y-3",children:[I.length===0&&e.jsxs("div",{className:"text-center py-8 space-y-2",children:[e.jsx("div",{className:"font-arcade text-sm text-primary",children:"SESSION STARTED"}),e.jsx("div",{className:"font-terminal text-lg text-muted-foreground",children:"Ask a question to begin learning. Use /note, /card, or /map for artifacts."})]}),I.map((o,j)=>e.jsx("div",{className:`flex ${o.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[85%] px-3 py-2 text-lg font-terminal ${o.role==="user"?"bg-primary/20 border-2 border-primary/50 text-foreground":"bg-black/40 border-2 border-primary/20 text-foreground"}`,children:[o.role==="assistant"?e.jsxs("div",{className:"prose prose-invert prose-lg max-w-none font-terminal [&_p]:my-2 [&_li]:my-1 [&_code]:text-base [&_pre]:text-base",children:[e.jsx(Ke,{remarkPlugins:[Qe],children:o.content||(o.isStreaming?"...":"")}),o.isStreaming&&e.jsx("span",{className:"inline-block w-2 h-3 bg-primary animate-pulse ml-0.5"})]}):e.jsx("div",{children:o.content}),(o.citations?.length||o.model)&&!o.isStreaming?e.jsxs("div",{className:"flex flex-wrap items-center gap-1 mt-2 pt-2 border-t border-primary/20",children:[o.citations?.map(f=>f.url?e.jsx("a",{href:f.url,target:"_blank",rel:"noopener noreferrer",children:e.jsxs(R,{variant:"outline",className:"text-sm rounded-none cursor-pointer hover:bg-primary/10",children:["[",f.index,"] ",f.source]})},f.index):e.jsxs(R,{variant:"outline",className:"text-sm rounded-none",children:["[",f.index,"] ",f.source]},f.index)),o.model&&e.jsx(R,{variant:"outline",className:"text-sm rounded-none text-muted-foreground/60 ml-auto",children:o.model})]}):null]})},j))]}),e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 border-t border-primary/20",children:[e.jsx("span",{className:"text-base font-terminal text-muted-foreground/60",children:"Commands:"}),e.jsxs(R,{variant:"outline",className:"text-sm rounded-none cursor-pointer hover:bg-primary/10",onClick:()=>E("/note "),children:[e.jsx(ie,{className:"w-4 h-4 mr-1"}),"/note"]}),e.jsxs(R,{variant:"outline",className:"text-sm rounded-none cursor-pointer hover:bg-primary/10",onClick:()=>E("/card "),children:[e.jsx(Te,{className:"w-4 h-4 mr-1"}),"/card"]}),e.jsxs(R,{variant:"outline",className:"text-sm rounded-none cursor-pointer hover:bg-primary/10",onClick:()=>E("/map "),children:[e.jsx(Ae,{className:"w-4 h-4 mr-1"}),"/map"]}),e.jsx("div",{className:"flex-1"}),e.jsxs(X,{variant:"ghost",size:"sm",onClick:k,className:"text-sm font-terminal text-destructive hover:text-destructive h-8 px-3",children:[e.jsx(ze,{className:"w-4 h-4 mr-1"}),"END"]})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 border-t-2 border-primary/20",children:[e.jsx("input",{ref:n,value:_,onChange:o=>E(o.target.value),onKeyDown:b,placeholder:"Ask a question...",disabled:m,className:"flex-1 bg-black/60 border-2 border-primary/40 rounded-none px-3 py-2 text-lg font-terminal text-foreground placeholder:text-muted-foreground/50 focus:border-primary focus:outline-none disabled:opacity-50"}),e.jsx(X,{onClick:x,disabled:!_.trim()||m,className:"rounded-none border-2 border-primary h-11 w-11 p-0",children:m?e.jsx(pe,{className:"w-5 h-5 animate-spin"}):e.jsx(Ye,{className:"w-5 h-5"})})]})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"font-arcade text-sm text-muted-foreground",children:"NO ACTIVE SESSION"}),e.jsx("div",{className:"font-terminal text-lg text-muted-foreground/70",children:"Configure content filter and start a session"})]})})}const xr={note:ie,card:Te,map:Ae},ur={note:"text-blue-400",card:"text-yellow-400",map:"text-green-400"};function pr({sessionId:l,artifacts:i,turnCount:k,mode:N,topic:u,startedAt:O,recentSessions:y,onResumeSession:c}){const I=Se(),[v,_]=t.useState(null),[E,m]=t.useState(null),w=async n=>{try{await A.tutor.deleteSession(n),T.success("Session deleted"),I.invalidateQueries({queryKey:["tutor-sessions"]}),_(null)}catch(x){T.error(`Delete failed: ${x instanceof Error?x.message:"Unknown"}`)}},L=async n=>{m(n.session_id);try{const x=await A.tutor.getSession(n.session_id);if(!x.turns||x.turns.length===0){T.error("No turns to save");return}const b=[`# Tutor: ${n.topic||n.mode}`,`**Date:** ${new Date(n.started_at).toLocaleDateString()}`,`**Mode:** ${n.mode} | **Turns:** ${n.turn_count}`,"","---",""];for(const f of x.turns)b.push(`## Q${f.turn_number}`),b.push(f.question),b.push(""),f.answer&&(b.push("**Answer:**"),b.push(f.answer),b.push(""));const j=`Study Sessions/${`Tutor - ${(n.topic||n.mode).replace(/[^a-zA-Z0-9 ]/g,"").trim()}`}.md`;await A.obsidian.append(j,b.join(`
`)),T.success(`Saved to Obsidian: ${j}`)}catch(x){T.error(`Save failed: ${x instanceof Error?x.message:"Unknown"}`)}finally{m(null)}};return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsx("div",{className:`shrink-0 ${re} pb-2 border-b-2 border-primary/30`,children:e.jsx("div",{className:_e,children:"ARTIFACTS"})}),e.jsx(ue,{className:"flex-1 min-h-0",children:e.jsxs("div",{className:`${re} space-y-3`,children:[l?e.jsxs("div",{className:"space-y-2 pb-3 border-b border-muted-foreground/20",children:[e.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[e.jsx(R,{variant:"outline",className:`${W} h-5 px-1.5`,children:N}),e.jsx(R,{variant:"outline",className:`${W} h-5 px-1.5 text-primary`,children:"FIRST PASS"})]}),u&&e.jsx("div",{className:`${Z} text-sm`,children:u}),e.jsxs("div",{className:`flex items-center gap-3 ${g}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:S}),k," turns"]}),O&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(me,{className:S}),new Date(O).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})]}):e.jsx("div",{className:`${Z} text-muted-foreground/50 py-3 text-center`,children:"No active session"}),i.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:se,children:"Artifacts"}),i.map((n,x)=>{const b=xr[n.type],o=ur[n.type];return e.jsxs("div",{className:"border-2 border-muted-foreground/20 p-2.5 hover:border-primary/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(b,{className:`${Pe} ${o}`}),e.jsx("span",{className:`${Z} text-sm truncate flex-1`,children:n.title||`${n.type} #${x+1}`})]}),n.content&&e.jsx("div",{className:`${g} mt-1 line-clamp-2`,children:n.content.slice(0,100)})]},x)})]}),l&&i.length===0&&e.jsxs("div",{className:"text-center space-y-1 py-4",children:[e.jsx(Me,{className:`${Fe} text-muted-foreground/30 mx-auto`}),e.jsx("div",{className:`${g} text-muted-foreground/50`,children:"No artifacts yet"}),e.jsx("div",{className:`${g} text-muted-foreground/30`,children:"Use /note, /card, or /map"})]}),y.length>0&&e.jsxs("div",{className:"space-y-2 pt-2 border-t border-muted-foreground/20",children:[e.jsx("div",{className:se,children:"Recent Sessions"}),y.slice(0,8).map(n=>e.jsxs("div",{className:"border-2 border-muted-foreground/10 hover:border-muted-foreground/30 transition-colors",children:[e.jsxs("button",{onClick:()=>c(n.session_id),className:"w-full text-left px-3 py-2.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{variant:"outline",className:`${W} h-5 px-1.5 shrink-0 ${n.status==="active"?"text-green-400 border-green-400/50":"text-muted-foreground"}`,children:n.status==="active"?"LIVE":"DONE"}),e.jsx("span",{className:"font-terminal text-sm truncate flex-1",children:n.topic||n.mode})]}),e.jsxs("div",{className:`flex items-center gap-2 mt-1.5 ${g}`,children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:S}),n.turn_count]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(me,{className:S}),new Date(n.started_at).toLocaleDateString()]}),e.jsx(R,{variant:"outline",className:`${W} h-4 px-1 ml-auto`,children:n.mode})]})]}),e.jsxs("div",{className:"flex items-center border-t border-primary/20 px-2 py-1",children:[e.jsxs(X,{variant:"ghost",size:"sm",className:"h-8 px-3 rounded-none text-muted-foreground hover:text-primary font-terminal text-sm",disabled:E===n.session_id,onClick:x=>{x.stopPropagation(),L(n)},children:[e.jsx(He,{className:`${S} mr-1`}),E===n.session_id?"SAVING...":"SAVE"]}),e.jsx("div",{className:"ml-auto",children:v===n.session_id?e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx("span",{className:"font-terminal text-sm text-red-400 mr-1",children:"Delete?"}),e.jsx(X,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 rounded-none text-red-400 hover:text-red-300 hover:bg-red-400/10",onClick:x=>{x.stopPropagation(),w(n.session_id)},children:e.jsx(we,{className:S})}),e.jsx(X,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 rounded-none text-muted-foreground hover:text-foreground",onClick:x=>{x.stopPropagation(),_(null)},children:e.jsx(ke,{className:S})})]}):e.jsx(X,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 rounded-none text-muted-foreground hover:text-red-400",onClick:x=>{x.stopPropagation(),_(n.session_id)},children:e.jsx(Re,{className:S})})})]})]},n.session_id))]})]})})]})}function Or(){const l=Se(),[i,k]=t.useState(null),[N,u]=t.useState(!1),[O,y]=t.useState(),[c,I]=t.useState([]),[v,_]=t.useState("Core"),[E,m]=t.useState(),[w,L]=t.useState(0),[n,x]=t.useState([]),[b,o]=t.useState([]),[j,f]=t.useState(""),[s,a]=t.useState("codex"),[h,D]=t.useState(!1),[M,B]=t.useState(()=>{try{return localStorage.getItem("tutor-help-dismissed")!=="1"}catch{return!0}}),[P,C]=t.useState([]),[F,G]=t.useState(0),[Y,Q]=t.useState(null),{data:z=[]}=J({queryKey:["tutor-sessions"],queryFn:()=>A.tutor.listSessions({limit:10})}),$=t.useCallback(async()=>{u(!0);try{let r=E;!r&&b.length>0&&(r=(await A.tutor.createCustomChain(b,`Custom ${j||"Chain"}`)).id);const p=await A.tutor.createSession({course_id:O,phase:"first_pass",mode:v,topic:j||void 0,content_filter:{...c.length>0?{material_ids:c}:{},model:s,...h?{web_search:!0}:{}},method_chain_id:r});if(k(p.session_id),Q(p.started_at),C([]),G(0),L(p.current_block_index??0),E){const K=await A.tutor.getSession(p.session_id);K.chain_blocks&&x(K.chain_blocks.map(q=>({id:q.id,name:q.name,category:q.category,duration:q.default_duration_min})))}else x([]);T.success("Tutor session started"),l.invalidateQueries({queryKey:["tutor-sessions"]})}catch(r){T.error(`Failed to start session: ${r instanceof Error?r.message:"Unknown"}`)}finally{u(!1)}},[O,v,j,c,s,h,E,b,l]),U=t.useCallback(async()=>{if(i)try{await A.tutor.endSession(i),T.success("Session ended"),k(null),C([]),G(0),Q(null),L(0),x([]),l.invalidateQueries({queryKey:["tutor-sessions"]})}catch(r){T.error(`Failed to end session: ${r instanceof Error?r.message:"Unknown"}`)}},[i,l]),d=t.useCallback(async r=>{if(i)try{const p=await A.tutor.createArtifact(i,{type:r.type,content:r.content,title:r.title}),K={type:r.type,title:r.title||`${r.type} #${P.length+1}`,content:r.content.slice(0,200),createdAt:new Date().toISOString(),cardId:p.card_id};C(q=>[...q,K]),T.success(`${r.type.charAt(0).toUpperCase()+r.type.slice(1)} created`)}catch(p){T.error(`Failed to create artifact: ${p instanceof Error?p.message:"Unknown"}`)}},[i,P.length]),H=t.useCallback(async()=>{if(i)try{const r=await A.tutor.advanceBlock(i);L(r.block_index),r.complete?T.success("Chain complete!"):T.success(`Advanced to: ${r.block_name}`)}catch(r){T.error(`Failed to advance block: ${r instanceof Error?r.message:"Unknown"}`)}},[i]),oe=t.useCallback(async r=>{try{const p=await A.tutor.getSession(r);if(k(p.session_id),G(p.turn_count),Q(p.started_at),_(p.mode),f(p.topic||""),y(p.course_id??void 0),p.artifacts_json)try{const K=JSON.parse(p.artifacts_json);Array.isArray(K)&&C(K.map(q=>({type:q.type,title:q.title,content:"",createdAt:q.created_at})))}catch{C([])}T.success("Session resumed")}catch(p){T.error(`Failed to resume session: ${p instanceof Error?p.message:"Unknown"}`)}},[]),le=()=>{B(!1);try{localStorage.setItem("tutor-help-dismissed","1")}catch{}};return e.jsx(Ie,{children:e.jsxs("div",{className:"flex flex-col h-[calc(100vh-140px)] gap-2",children:[e.jsxs("div",{className:"shrink-0",children:[e.jsxs("button",{onClick:()=>M?le():B(!0),className:"flex items-center gap-2 w-full px-3 py-1.5 bg-black/60 border-2 border-primary/40 text-left",children:[e.jsx(Ve,{className:"w-3.5 h-3.5 text-primary shrink-0"}),e.jsx("span",{className:"font-arcade text-[10px] text-primary flex-1",children:"QUICK START GUIDE"}),M?e.jsx(qe,{className:"w-3 h-3 text-primary"}):e.jsx($e,{className:"w-3 h-3 text-primary"})]}),M&&e.jsxs("div",{className:"px-3 py-3 bg-black/80 border-x-2 border-b-2 border-primary/40 grid md:grid-cols-4 gap-4 font-terminal text-xs text-muted-foreground",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-primary font-semibold text-[10px] mb-1",children:"1. PICK A MODE"}),e.jsxs("p",{children:[e.jsx("span",{className:"text-cyan-400",children:"LEARN"})," - New material (prime + encode)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-yellow-400",children:"QUICK"})," - Fast retrieval drill"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-red-400",children:"FIX"})," - Target weak spots"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-green-400",children:"REVIEW"})," - Spaced repetition"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-purple-400",children:"LIGHT"})," - Low-energy review"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary font-semibold text-[10px] mb-1",children:"2. SET UP A CHAIN"}),e.jsxs("p",{children:[e.jsx("span",{className:"text-white",children:"Templates tab"})," - Pre-built PEIRRO sequences (recommended for starters)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-white",children:"Custom tab"})," - Drag blocks from the 6 PEIRRO categories to build your own sequence"]}),e.jsx("p",{className:"mt-1 text-[10px]",children:"Auto-pick matches a chain to your mode"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary font-semibold text-[10px] mb-1",children:"3. ENTER A TOPIC"}),e.jsx("p",{children:'Type your study topic (e.g. "Hip Flexors", "Gait Analysis")'}),e.jsx("p",{className:"mt-1",children:"Optionally pick a course and upload materials for RAG context"}),e.jsxs("p",{className:"mt-1",children:["Hit ",e.jsx("span",{className:"text-primary",children:"START SESSION"})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-primary font-semibold text-[10px] mb-1",children:"4. STUDY + ARTIFACTS"}),e.jsx("p",{children:"Chat with the tutor. Use slash commands:"}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"text-cyan-400",children:"/note"})," - Save study notes"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-yellow-400",children:"/card"})," - Create Anki flashcard"]}),e.jsxs("p",{children:[e.jsx("span",{className:"text-green-400",children:"/map"})," - Generate concept map"]}),e.jsxs("p",{className:"mt-1",children:["Click ",e.jsx("span",{className:"text-primary",children:"NEXT"})," to advance chain blocks"]})]})]})]}),e.jsxs("div",{className:"flex-1 flex gap-2 min-h-0",children:[e.jsx(ce,{className:"w-80 shrink-0 bg-black/40 border-2 border-primary rounded-none overflow-hidden",children:e.jsx(dr,{courseId:O,setCourseId:y,selectedMaterials:c,setSelectedMaterials:I,mode:v,setMode:_,chainId:E,setChainId:m,customBlockIds:b,setCustomBlockIds:o,topic:j,setTopic:f,model:s,setModel:a,webSearch:h,setWebSearch:D,onStartSession:$,isStarting:N,hasActiveSession:!!i})}),e.jsx(ce,{className:"flex-1 bg-black/60 border-2 border-primary rounded-none flex flex-col min-w-0",children:e.jsx(mr,{sessionId:i,onArtifactCreated:d,onSessionEnd:U,chainBlocks:n,currentBlockIndex:w,onAdvanceBlock:H})}),e.jsx(ce,{className:"w-80 shrink-0 bg-black/40 border-2 border-primary rounded-none overflow-hidden",children:e.jsx(pr,{sessionId:i,artifacts:P,turnCount:F,mode:v,topic:j,startedAt:Y,onCreateArtifact:d,recentSessions:z,onResumeSession:oe})})]})]})})}export{Or as default};
