import{c as rt,R as Gv,r as T,j as E,l as Fn,g as Wv,a as Pe,m as Hc}from"./index-BcW_Cmk8.js";import{g as ax,c as de,b as st,T as Yv,Q as Uc,P as sx,u as Lr,S as Zv,B as ux}from"./layout-7VRRr6LV.js";import{s as De,t as Vc,u as Gc,T as zr,v as Fr,w as at,p as cx,a as Kv,x as lx}from"./isObject-BFc1UtiU.js";import{i as $r}from"./value-rnpseC1p.js";import{u as fx,c as dx,L as Xv,D as Wc,M as hx,a as px}from"./percentages-BXMCSKIN-BrsAvtcv.js";import{c as Yc}from"./_commonjs-dynamic-modules-TDtrdbi3.js";import{C as Zc,d as Qv,V as gx}from"./colors-Bbj8o8sD.js";import{P as sr}from"./plus-BEvv455R.js";import{A as mx,C as vx}from"./triangle-alert-DF5QOwWC.js";import{F as Jv}from"./file-text-D1KMrGe1.js";import{C as Vt}from"./checkbox-D96jaIyJ.js";import{S as yx,a as bx}from"./square-e7OD9JTR.js";import{t as Vl}from"./toNumber-BCPdEKpe.js";import{o as _x}from"./ordinal-Cboi1Yqb.js";import{c as xx}from"./colors-Cc3OSVma.js";import{m as Gl,a as Wl}from"./min-tv6RD-6E.js";import{S as wx}from"./send-CKxGQpzc.js";import"./index-DtHNA_nq.js";import"./refresh-cw-CEL2G6Fb.js";import"./index-CBZ66Q7a.js";import"./message-square-BVsLKndd.js";import"./tabs-CvaMsCeq.js";import"./select-BEb3BClr.js";import"./loader-circle-rMUrwLQR.js";import"./badge-CcvPSPps.js";import"./external-link-SqHzwN5f.js";import"./star-DSe05mgE.js";import"./chevron-left-De81NkWV.js";import"./isSymbol-B69OnXas.js";import"./init-Gi6I4Gst.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cx=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],ey=rt("arrow-left-right",Cx);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ex=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],ty=rt("arrow-up-down",Ex);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sx=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],kx=rt("diamond",Sx);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nx=[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M2 15h10",key:"jfw4w8"}],["path",{d:"m9 18 3-3-3-3",key:"112psh"}]],Mx=rt("file-input",Nx);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ax=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],ny=rt("hexagon",Ax);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rx=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]],ry=rt("import",Rx);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ix=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],iy=rt("palette",Ix);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tx=[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]],Px=rt("redo-2",Tx);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ox=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],jx=rt("sprout",Ox);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qx=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],Dx=rt("undo-2",qx);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lx=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],zx=rt("workflow",Lx);function Ie(e){if(typeof e=="string"||typeof e=="number")return""+e;let n="";if(Array.isArray(e))for(let r=0,i;r<e.length;r++)(i=Ie(e[r]))!==""&&(n+=(n&&" ")+i);else for(let r in e)e[r]&&(n+=(n&&" ")+r);return n}function Fx(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Ye(e,n){if(e=Fx(e),n===void 0&&(n=e.currentTarget),n){var r=n.ownerSVGElement||n;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(n.getScreenCTM().inverse()),[i.x,i.y]}if(n.getBoundingClientRect){var o=n.getBoundingClientRect();return[e.clientX-o.left-n.clientLeft,e.clientY-o.top-n.clientTop]}}return[e.pageX,e.pageY]}const $x={passive:!1},wn={capture:!0,passive:!1};function Br(e){e.stopImmediatePropagation()}function Yt(e){e.preventDefault(),e.stopImmediatePropagation()}function oy(e){var n=e.document.documentElement,r=De(e).on("dragstart.drag",Yt,wn);"onselectstart"in n?r.on("selectstart.drag",Yt,wn):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function ay(e,n){var r=e.document.documentElement,i=De(e).on("dragstart.drag",null);n&&(i.on("click.drag",Yt,wn),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const $n=e=>()=>e;function wc(e,{sourceEvent:n,subject:r,target:i,identifier:o,active:a,x:s,y:u,dx:l,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:l,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}wc.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Bx(e){return!e.ctrlKey&&!e.button}function Hx(){return this.parentNode}function Ux(e,n){return n??{x:e.x,y:e.y}}function Vx(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kc(){var e=Bx,n=Hx,r=Ux,i=Vx,o={},a=Vc("start","drag","end"),s=0,u,l,c,d,f=0;function h(x){x.on("mousedown.drag",p).filter(i).on("touchstart.drag",v).on("touchmove.drag",g,$x).on("touchend.drag touchcancel.drag",_).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(x,w){if(!(d||!e.call(this,x,w))){var C=y(this,n.call(this,x,w),x,w,"mouse");C&&(De(x.view).on("mousemove.drag",m,wn).on("mouseup.drag",b,wn),oy(x.view),Br(x),c=!1,u=x.clientX,l=x.clientY,C("start",x))}}function m(x){if(Yt(x),!c){var w=x.clientX-u,C=x.clientY-l;c=w*w+C*C>f}o.mouse("drag",x)}function b(x){De(x.view).on("mousemove.drag mouseup.drag",null),ay(x.view,c),Yt(x),o.mouse("end",x)}function v(x,w){if(e.call(this,x,w)){var C=x.changedTouches,S=n.call(this,x,w),k=C.length,A,N;for(A=0;A<k;++A)(N=y(this,S,x,w,C[A].identifier,C[A]))&&(Br(x),N("start",x,C[A]))}}function g(x){var w=x.changedTouches,C=w.length,S,k;for(S=0;S<C;++S)(k=o[w[S].identifier])&&(Yt(x),k("drag",x,w[S]))}function _(x){var w=x.changedTouches,C=w.length,S,k;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),S=0;S<C;++S)(k=o[w[S].identifier])&&(Br(x),k("end",x,w[S]))}function y(x,w,C,S,k,A){var N=a.copy(),M=Ye(A||C,w),I,O,R;if((R=r.call(x,new wc("beforestart",{sourceEvent:C,target:h,identifier:k,active:s,x:M[0],y:M[1],dx:0,dy:0,dispatch:N}),S))!=null)return I=R.x-M[0]||0,O=R.y-M[1]||0,function P(j,L,z){var F=M,Y;switch(j){case"start":o[k]=P,Y=s++;break;case"end":delete o[k],--s;case"drag":M=Ye(z||L,w),Y=s;break}N.call(j,x,new wc(j,{sourceEvent:L,subject:R,target:h,identifier:k,active:Y,x:M[0]+I,y:M[1]+O,dx:M[0]-F[0],dy:M[1]-F[1],dispatch:N}),S)}}return h.filter=function(x){return arguments.length?(e=typeof x=="function"?x:$n(!!x),h):e},h.container=function(x){return arguments.length?(n=typeof x=="function"?x:$n(x),h):n},h.subject=function(x){return arguments.length?(r=typeof x=="function"?x:$n(x),h):r},h.touchable=function(x){return arguments.length?(i=typeof x=="function"?x:$n(!!x),h):i},h.on=function(){var x=a.on.apply(a,arguments);return x===a?h:x},h.clickDistance=function(x){return arguments.length?(f=(x=+x)*x,h):Math.sqrt(f)},h}var Gx=1e-12;function Yl(e){return((e=Math.exp(e))+1/e)/2}function Wx(e){return((e=Math.exp(e))-1/e)/2}function Yx(e){return((e=Math.exp(2*e))-1)/(e+1)}const Xn=(function e(n,r,i){function o(a,s){var u=a[0],l=a[1],c=a[2],d=s[0],f=s[1],h=s[2],p=d-u,m=f-l,b=p*p+m*m,v,g;if(b<Gx)g=Math.log(h/c)/n,v=function(S){return[u+S*p,l+S*m,c*Math.exp(n*S*g)]};else{var _=Math.sqrt(b),y=(h*h-c*c+i*b)/(2*c*r*_),x=(h*h-c*c-i*b)/(2*h*r*_),w=Math.log(Math.sqrt(y*y+1)-y),C=Math.log(Math.sqrt(x*x+1)-x);g=(C-w)/n,v=function(S){var k=S*g,A=Yl(w),N=c/(r*_)*(A*Yx(n*k+w)-Wx(w));return[u+N*p,l+N*m,c*A/Yl(n*k+w)]}}return v.duration=g*1e3*n/Math.SQRT2,v}return o.rho=function(a){var s=Math.max(.001,+a),u=s*s,l=u*u;return e(s,u,l)},o})(Math.SQRT2,2,4),Bn=e=>()=>e;function Zx(e,{sourceEvent:n,target:r,transform:i,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function Hr(e){e.stopImmediatePropagation()}function an(e){e.preventDefault(),e.stopImmediatePropagation()}function Kx(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Xx(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Zl(){return this.__zoom||Gc}function Qx(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Jx(){return navigator.maxTouchPoints||"ontouchstart"in this}function e1(e,n,r){var i=e.invertX(n[0][0])-r[0][0],o=e.invertX(n[1][0])-r[1][0],a=e.invertY(n[0][1])-r[0][1],s=e.invertY(n[1][1])-r[1][1];return e.translate(o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o),s>a?(a+s)/2:Math.min(0,a)||Math.max(0,s))}function Xc(){var e=Kx,n=Xx,r=e1,i=Qx,o=Jx,a=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],u=250,l=Xn,c=Vc("start","zoom","end"),d,f,h,p=500,m=150,b=0,v=10;function g(R){R.property("__zoom",Zl).on("wheel.zoom",k,{passive:!1}).on("mousedown.zoom",A).on("dblclick.zoom",N).filter(o).on("touchstart.zoom",M).on("touchmove.zoom",I).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(R,P,j,L){var z=R.selection?R.selection():R;z.property("__zoom",Zl),R!==z?w(R,P,j,L):z.interrupt().each(function(){C(this,arguments).event(L).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},g.scaleBy=function(R,P,j,L){g.scaleTo(R,function(){var z=this.__zoom.k,F=typeof P=="function"?P.apply(this,arguments):P;return z*F},j,L)},g.scaleTo=function(R,P,j,L){g.transform(R,function(){var z=n.apply(this,arguments),F=this.__zoom,Y=j==null?x(z):typeof j=="function"?j.apply(this,arguments):j,Z=F.invert(Y),W=typeof P=="function"?P.apply(this,arguments):P;return r(y(_(F,W),Y,Z),z,s)},j,L)},g.translateBy=function(R,P,j,L){g.transform(R,function(){return r(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof j=="function"?j.apply(this,arguments):j),n.apply(this,arguments),s)},null,L)},g.translateTo=function(R,P,j,L,z){g.transform(R,function(){var F=n.apply(this,arguments),Y=this.__zoom,Z=L==null?x(F):typeof L=="function"?L.apply(this,arguments):L;return r(Gc.translate(Z[0],Z[1]).scale(Y.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof j=="function"?-j.apply(this,arguments):-j),F,s)},L,z)};function _(R,P){return P=Math.max(a[0],Math.min(a[1],P)),P===R.k?R:new zr(P,R.x,R.y)}function y(R,P,j){var L=P[0]-j[0]*R.k,z=P[1]-j[1]*R.k;return L===R.x&&z===R.y?R:new zr(R.k,L,z)}function x(R){return[(+R[0][0]+ +R[1][0])/2,(+R[0][1]+ +R[1][1])/2]}function w(R,P,j,L){R.on("start.zoom",function(){C(this,arguments).event(L).start()}).on("interrupt.zoom end.zoom",function(){C(this,arguments).event(L).end()}).tween("zoom",function(){var z=this,F=arguments,Y=C(z,F).event(L),Z=n.apply(z,F),W=j==null?x(Z):typeof j=="function"?j.apply(z,F):j,Q=Math.max(Z[1][0]-Z[0][0],Z[1][1]-Z[0][1]),q=z.__zoom,$=typeof P=="function"?P.apply(z,F):P,H=l(q.invert(W).concat(Q/q.k),$.invert(W).concat(Q/$.k));return function(U){if(U===1)U=$;else{var V=H(U),B=Q/V[2];U=new zr(B,W[0]-V[0]*B,W[1]-V[1]*B)}Y.zoom(null,U)}})}function C(R,P,j){return!j&&R.__zooming||new S(R,P)}function S(R,P){this.that=R,this.args=P,this.active=0,this.sourceEvent=null,this.extent=n.apply(R,P),this.taps=0}S.prototype={event:function(R){return R&&(this.sourceEvent=R),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(R,P){return this.mouse&&R!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&R!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&R!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(R){var P=De(this.that).datum();c.call(R,this.that,new Zx(R,{sourceEvent:this.sourceEvent,target:g,transform:this.that.__zoom,dispatch:c}),P)}};function k(R,...P){if(!e.apply(this,arguments))return;var j=C(this,P).event(R),L=this.__zoom,z=Math.max(a[0],Math.min(a[1],L.k*Math.pow(2,i.apply(this,arguments)))),F=Ye(R);if(j.wheel)(j.mouse[0][0]!==F[0]||j.mouse[0][1]!==F[1])&&(j.mouse[1]=L.invert(j.mouse[0]=F)),clearTimeout(j.wheel);else{if(L.k===z)return;j.mouse=[F,L.invert(F)],Fr(this),j.start()}an(R),j.wheel=setTimeout(Y,m),j.zoom("mouse",r(y(_(L,z),j.mouse[0],j.mouse[1]),j.extent,s));function Y(){j.wheel=null,j.end()}}function A(R,...P){if(h||!e.apply(this,arguments))return;var j=R.currentTarget,L=C(this,P,!0).event(R),z=De(R.view).on("mousemove.zoom",W,!0).on("mouseup.zoom",Q,!0),F=Ye(R,j),Y=R.clientX,Z=R.clientY;oy(R.view),Hr(R),L.mouse=[F,this.__zoom.invert(F)],Fr(this),L.start();function W(q){if(an(q),!L.moved){var $=q.clientX-Y,H=q.clientY-Z;L.moved=$*$+H*H>b}L.event(q).zoom("mouse",r(y(L.that.__zoom,L.mouse[0]=Ye(q,j),L.mouse[1]),L.extent,s))}function Q(q){z.on("mousemove.zoom mouseup.zoom",null),ay(q.view,L.moved),an(q),L.event(q).end()}}function N(R,...P){if(e.apply(this,arguments)){var j=this.__zoom,L=Ye(R.changedTouches?R.changedTouches[0]:R,this),z=j.invert(L),F=j.k*(R.shiftKey?.5:2),Y=r(y(_(j,F),L,z),n.apply(this,P),s);an(R),u>0?De(this).transition().duration(u).call(w,Y,L,R):De(this).call(g.transform,Y,L,R)}}function M(R,...P){if(e.apply(this,arguments)){var j=R.touches,L=j.length,z=C(this,P,R.changedTouches.length===L).event(R),F,Y,Z,W;for(Hr(R),Y=0;Y<L;++Y)Z=j[Y],W=Ye(Z,this),W=[W,this.__zoom.invert(W),Z.identifier],z.touch0?!z.touch1&&z.touch0[2]!==W[2]&&(z.touch1=W,z.taps=0):(z.touch0=W,F=!0,z.taps=1+!!d);d&&(d=clearTimeout(d)),F&&(z.taps<2&&(f=W[0],d=setTimeout(function(){d=null},p)),Fr(this),z.start())}}function I(R,...P){if(this.__zooming){var j=C(this,P).event(R),L=R.changedTouches,z=L.length,F,Y,Z,W;for(an(R),F=0;F<z;++F)Y=L[F],Z=Ye(Y,this),j.touch0&&j.touch0[2]===Y.identifier?j.touch0[0]=Z:j.touch1&&j.touch1[2]===Y.identifier&&(j.touch1[0]=Z);if(Y=j.that.__zoom,j.touch1){var Q=j.touch0[0],q=j.touch0[1],$=j.touch1[0],H=j.touch1[1],U=(U=$[0]-Q[0])*U+(U=$[1]-Q[1])*U,V=(V=H[0]-q[0])*V+(V=H[1]-q[1])*V;Y=_(Y,Math.sqrt(U/V)),Z=[(Q[0]+$[0])/2,(Q[1]+$[1])/2],W=[(q[0]+H[0])/2,(q[1]+H[1])/2]}else if(j.touch0)Z=j.touch0[0],W=j.touch0[1];else return;j.zoom("touch",r(y(Y,Z,W),j.extent,s))}}function O(R,...P){if(this.__zooming){var j=C(this,P).event(R),L=R.changedTouches,z=L.length,F,Y;for(Hr(R),h&&clearTimeout(h),h=setTimeout(function(){h=null},p),F=0;F<z;++F)Y=L[F],j.touch0&&j.touch0[2]===Y.identifier?delete j.touch0:j.touch1&&j.touch1[2]===Y.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(Y=Ye(Y,this),Math.hypot(f[0]-Y[0],f[1]-Y[1])<v)){var Z=De(this).on("dblclick.zoom");Z&&Z.apply(this,arguments)}}}return g.wheelDelta=function(R){return arguments.length?(i=typeof R=="function"?R:Bn(+R),g):i},g.filter=function(R){return arguments.length?(e=typeof R=="function"?R:Bn(!!R),g):e},g.touchable=function(R){return arguments.length?(o=typeof R=="function"?R:Bn(!!R),g):o},g.extent=function(R){return arguments.length?(n=typeof R=="function"?R:Bn([[+R[0][0],+R[0][1]],[+R[1][0],+R[1][1]]]),g):n},g.scaleExtent=function(R){return arguments.length?(a[0]=+R[0],a[1]=+R[1],g):[a[0],a[1]]},g.translateExtent=function(R){return arguments.length?(s[0][0]=+R[0][0],s[1][0]=+R[1][0],s[0][1]=+R[0][1],s[1][1]=+R[1][1],g):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},g.constrain=function(R){return arguments.length?(r=R,g):r},g.duration=function(R){return arguments.length?(u=+R,g):u},g.interpolate=function(R){return arguments.length?(l=R,g):l},g.on=function(){var R=c.on.apply(c,arguments);return R===c?g:R},g.clickDistance=function(R){return arguments.length?(b=(R=+R)*R,g):Math.sqrt(b)},g.tapDistance=function(R){return arguments.length?(v=+R,g):v},g}const ct={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:n,sourceHandle:r,targetHandle:i})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:i}", edge id: ${n}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Cn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],sy=["Enter"," ","Escape"],uy={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:n,y:r})=>`Moved selected node ${e}. New position, x: ${n}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Zt;(function(e){e.Strict="strict",e.Loose="loose"})(Zt||(Zt={}));var Pt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Pt||(Pt={}));var En;(function(e){e.Partial="partial",e.Full="full"})(En||(En={}));const cy={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var St;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(St||(St={}));var Nt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Nt||(Nt={}));var ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(ne||(ne={}));const Kl={[ne.Left]:ne.Right,[ne.Right]:ne.Left,[ne.Top]:ne.Bottom,[ne.Bottom]:ne.Top};function ly(e){return e===null?null:e?"valid":"invalid"}const fy=e=>"id"in e&&"source"in e&&"target"in e,t1=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Qc=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Rn=(e,n=[0,0])=>{const{width:r,height:i}=yt(e),o=e.origin??n,a=r*o[0],s=i*o[1];return{x:e.position.x-a,y:e.position.y-s}},n1=(e,n={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((i,o)=>{const a=typeof o=="string";let s=!n.nodeLookup&&!a?o:void 0;n.nodeLookup&&(s=a?n.nodeLookup.get(o):Qc(o)?o:n.nodeLookup.get(o.id));const u=s?Jn(s,n.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ur(i,u)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return cr(r)},In=(e,n={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},i=!1;return e.forEach(o=>{(n.filter===void 0||n.filter(o))&&(r=ur(r,Jn(o)),i=!0)}),i?cr(r):{x:0,y:0,width:0,height:0}},Jc=(e,n,[r,i,o]=[0,0,1],a=!1,s=!1)=>{const u={...Pn(n,[r,i,o]),width:n.width/o,height:n.height/o},l=[];for(const c of e.values()){const{measured:d,selectable:f=!0,hidden:h=!1}=c;if(s&&!f||h)continue;const p=d.width??c.width??c.initialWidth??null,m=d.height??c.height??c.initialHeight??null,b=Sn(u,Xt(c)),v=(p??0)*(m??0),g=a&&b>0;(!c.internals.handleBounds||g||b>=v||c.dragging)&&l.push(c)}return l},r1=(e,n)=>{const r=new Set;return e.forEach(i=>{r.add(i.id)}),n.filter(i=>r.has(i.source)||r.has(i.target))};function i1(e,n){const r=new Map,i=n?.nodes?new Set(n.nodes.map(o=>o.id)):null;return e.forEach(o=>{o.measured.width&&o.measured.height&&(n?.includeHiddenNodes||!o.hidden)&&(!i||i.has(o.id))&&r.set(o.id,o)}),r}async function o1({nodes:e,width:n,height:r,panZoom:i,minZoom:o,maxZoom:a},s){if(e.size===0)return Promise.resolve(!0);const u=i1(e,s),l=In(u),c=el(l,n,r,s?.minZoom??o,s?.maxZoom??a,s?.padding??.1);return await i.setViewport(c,{duration:s?.duration,ease:s?.ease,interpolate:s?.interpolate}),Promise.resolve(!0)}function dy({nodeId:e,nextPosition:n,nodeLookup:r,nodeOrigin:i=[0,0],nodeExtent:o,onError:a}){const s=r.get(e),u=s.parentId?r.get(s.parentId):void 0,{x:l,y:c}=u?u.internals.positionAbsolute:{x:0,y:0},d=s.origin??i;let f=s.extent||o;if(s.extent==="parent"&&!s.expandParent)if(!u)a?.("005",ct.error005());else{const p=u.measured.width,m=u.measured.height;p&&m&&(f=[[l,c],[l+p,c+m]])}else u&&Qt(s.extent)&&(f=[[s.extent[0][0]+l,s.extent[0][1]+c],[s.extent[1][0]+l,s.extent[1][1]+c]]);const h=Qt(f)?jt(n,f,s.measured):n;return(s.measured.width===void 0||s.measured.height===void 0)&&a?.("015",ct.error015()),{position:{x:h.x-l+(s.measured.width??0)*d[0],y:h.y-c+(s.measured.height??0)*d[1]},positionAbsolute:h}}async function a1({nodesToRemove:e=[],edgesToRemove:n=[],nodes:r,edges:i,onBeforeDelete:o}){const a=new Set(e.map(h=>h.id)),s=[];for(const h of r){if(h.deletable===!1)continue;const p=a.has(h.id),m=!p&&h.parentId&&s.find(b=>b.id===h.parentId);(p||m)&&s.push(h)}const u=new Set(n.map(h=>h.id)),l=i.filter(h=>h.deletable!==!1),d=r1(s,l);for(const h of l)u.has(h.id)&&!d.find(m=>m.id===h.id)&&d.push(h);if(!o)return{edges:d,nodes:s};const f=await o({nodes:s,edges:d});return typeof f=="boolean"?f?{edges:d,nodes:s}:{edges:[],nodes:[]}:f}const Kt=(e,n=0,r=1)=>Math.min(Math.max(e,n),r),jt=(e={x:0,y:0},n,r)=>({x:Kt(e.x,n[0][0],n[1][0]-(r?.width??0)),y:Kt(e.y,n[0][1],n[1][1]-(r?.height??0))});function hy(e,n,r){const{width:i,height:o}=yt(r),{x:a,y:s}=r.internals.positionAbsolute;return jt(e,[[a,s],[a+i,s+o]],n)}const Xl=(e,n,r)=>e<n?Kt(Math.abs(e-n),1,n)/n:e>r?-Kt(Math.abs(e-r),1,n)/n:0,py=(e,n,r=15,i=40)=>{const o=Xl(e.x,i,n.width-i)*r,a=Xl(e.y,i,n.height-i)*r;return[o,a]},ur=(e,n)=>({x:Math.min(e.x,n.x),y:Math.min(e.y,n.y),x2:Math.max(e.x2,n.x2),y2:Math.max(e.y2,n.y2)}),Cc=({x:e,y:n,width:r,height:i})=>({x:e,y:n,x2:e+r,y2:n+i}),cr=({x:e,y:n,x2:r,y2:i})=>({x:e,y:n,width:r-e,height:i-n}),Xt=(e,n=[0,0])=>{const{x:r,y:i}=Qc(e)?e.internals.positionAbsolute:Rn(e,n);return{x:r,y:i,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Jn=(e,n=[0,0])=>{const{x:r,y:i}=Qc(e)?e.internals.positionAbsolute:Rn(e,n);return{x:r,y:i,x2:r+(e.measured?.width??e.width??e.initialWidth??0),y2:i+(e.measured?.height??e.height??e.initialHeight??0)}},gy=(e,n)=>cr(ur(Cc(e),Cc(n))),Sn=(e,n)=>{const r=Math.max(0,Math.min(e.x+e.width,n.x+n.width)-Math.max(e.x,n.x)),i=Math.max(0,Math.min(e.y+e.height,n.y+n.height)-Math.max(e.y,n.y));return Math.ceil(r*i)},Ql=e=>Je(e.width)&&Je(e.height)&&Je(e.x)&&Je(e.y),Je=e=>!isNaN(e)&&isFinite(e),s1=(e,n)=>{},Tn=(e,n=[1,1])=>({x:n[0]*Math.round(e.x/n[0]),y:n[1]*Math.round(e.y/n[1])}),Pn=({x:e,y:n},[r,i,o],a=!1,s=[1,1])=>{const u={x:(e-r)/o,y:(n-i)/o};return a?Tn(u,s):u},er=({x:e,y:n},[r,i,o])=>({x:e*o+r,y:n*o+i});function Bt(e,n){if(typeof e=="number")return Math.floor((n-n/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(n*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function u1(e,n,r){if(typeof e=="string"||typeof e=="number"){const i=Bt(e,r),o=Bt(e,n);return{top:i,right:o,bottom:i,left:o,x:o*2,y:i*2}}if(typeof e=="object"){const i=Bt(e.top??e.y??0,r),o=Bt(e.bottom??e.y??0,r),a=Bt(e.left??e.x??0,n),s=Bt(e.right??e.x??0,n);return{top:i,right:s,bottom:o,left:a,x:a+s,y:i+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function c1(e,n,r,i,o,a){const{x:s,y:u}=er(e,[n,r,i]),{x:l,y:c}=er({x:e.x+e.width,y:e.y+e.height},[n,r,i]),d=o-l,f=a-c;return{left:Math.floor(s),top:Math.floor(u),right:Math.floor(d),bottom:Math.floor(f)}}const el=(e,n,r,i,o,a)=>{const s=u1(a,n,r),u=(n-s.x)/e.width,l=(r-s.y)/e.height,c=Math.min(u,l),d=Kt(c,i,o),f=e.x+e.width/2,h=e.y+e.height/2,p=n/2-f*d,m=r/2-h*d,b=c1(e,p,m,d,n,r),v={left:Math.min(b.left-s.left,0),top:Math.min(b.top-s.top,0),right:Math.min(b.right-s.right,0),bottom:Math.min(b.bottom-s.bottom,0)};return{x:p-v.left+v.right,y:m-v.top+v.bottom,zoom:d}},kn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Qt(e){return e!=null&&e!=="parent"}function yt(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function my(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function vy(e,n={width:0,height:0},r,i,o){const a={...e},s=i.get(r);if(s){const u=s.origin||o;a.x+=s.internals.positionAbsolute.x-(n.width??0)*u[0],a.y+=s.internals.positionAbsolute.y-(n.height??0)*u[1]}return a}function Jl(e,n){if(e.size!==n.size)return!1;for(const r of e)if(!n.has(r))return!1;return!0}function l1(){let e,n;return{promise:new Promise((i,o)=>{e=i,n=o}),resolve:e,reject:n}}function f1(e){return{...uy,...e||{}}}function vn(e,{snapGrid:n=[0,0],snapToGrid:r=!1,transform:i,containerBounds:o}){const{x:a,y:s}=et(e),u=Pn({x:a-(o?.left??0),y:s-(o?.top??0)},i),{x:l,y:c}=r?Tn(u,n):u;return{xSnapped:l,ySnapped:c,...u}}const tl=e=>({width:e.offsetWidth,height:e.offsetHeight}),yy=e=>e?.getRootNode?.()||window?.document,d1=["INPUT","SELECT","TEXTAREA"];function by(e){const n=e.composedPath?.()?.[0]||e.target;return n?.nodeType!==1?!1:d1.includes(n.nodeName)||n.hasAttribute("contenteditable")||!!n.closest(".nokey")}const _y=e=>"clientX"in e,et=(e,n)=>{const r=_y(e),i=r?e.clientX:e.touches?.[0].clientX,o=r?e.clientY:e.touches?.[0].clientY;return{x:i-(n?.left??0),y:o-(n?.top??0)}},ef=(e,n,r,i,o)=>{const a=n.querySelectorAll(`.${e}`);return!a||!a.length?null:Array.from(a).map(s=>{const u=s.getBoundingClientRect();return{id:s.getAttribute("data-handleid"),type:e,nodeId:o,position:s.getAttribute("data-handlepos"),x:(u.left-r.left)/i,y:(u.top-r.top)/i,...tl(s)}})};function xy({sourceX:e,sourceY:n,targetX:r,targetY:i,sourceControlX:o,sourceControlY:a,targetControlX:s,targetControlY:u}){const l=e*.125+o*.375+s*.375+r*.125,c=n*.125+a*.375+u*.375+i*.125,d=Math.abs(l-e),f=Math.abs(c-n);return[l,c,d,f]}function Hn(e,n){return e>=0?.5*e:n*25*Math.sqrt(-e)}function tf({pos:e,x1:n,y1:r,x2:i,y2:o,c:a}){switch(e){case ne.Left:return[n-Hn(n-i,a),r];case ne.Right:return[n+Hn(i-n,a),r];case ne.Top:return[n,r-Hn(r-o,a)];case ne.Bottom:return[n,r+Hn(o-r,a)]}}function wy({sourceX:e,sourceY:n,sourcePosition:r=ne.Bottom,targetX:i,targetY:o,targetPosition:a=ne.Top,curvature:s=.25}){const[u,l]=tf({pos:r,x1:e,y1:n,x2:i,y2:o,c:s}),[c,d]=tf({pos:a,x1:i,y1:o,x2:e,y2:n,c:s}),[f,h,p,m]=xy({sourceX:e,sourceY:n,targetX:i,targetY:o,sourceControlX:u,sourceControlY:l,targetControlX:c,targetControlY:d});return[`M${e},${n} C${u},${l} ${c},${d} ${i},${o}`,f,h,p,m]}function Cy({sourceX:e,sourceY:n,targetX:r,targetY:i}){const o=Math.abs(r-e)/2,a=r<e?r+o:r-o,s=Math.abs(i-n)/2,u=i<n?i+s:i-s;return[a,u,o,s]}function h1({sourceNode:e,targetNode:n,selected:r=!1,zIndex:i=0,elevateOnSelect:o=!1,zIndexMode:a="basic"}){if(a==="manual")return i;const s=o&&r?i+1e3:i,u=Math.max(e.parentId||o&&e.selected?e.internals.z:0,n.parentId||o&&n.selected?n.internals.z:0);return s+u}function p1({sourceNode:e,targetNode:n,width:r,height:i,transform:o}){const a=ur(Jn(e),Jn(n));a.x===a.x2&&(a.x2+=1),a.y===a.y2&&(a.y2+=1);const s={x:-o[0]/o[2],y:-o[1]/o[2],width:r/o[2],height:i/o[2]};return Sn(s,cr(a))>0}const g1=({source:e,sourceHandle:n,target:r,targetHandle:i})=>`xy-edge__${e}${n||""}-${r}${i||""}`,m1=(e,n)=>n.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),nl=(e,n,r={})=>{if(!e.source||!e.target)return n;const i=r.getEdgeId||g1;let o;return fy(e)?o={...e}:o={...e,id:i(e)},m1(o,n)?n:(o.sourceHandle===null&&delete o.sourceHandle,o.targetHandle===null&&delete o.targetHandle,n.concat(o))};function Ey({sourceX:e,sourceY:n,targetX:r,targetY:i}){const[o,a,s,u]=Cy({sourceX:e,sourceY:n,targetX:r,targetY:i});return[`M ${e},${n}L ${r},${i}`,o,a,s,u]}const nf={[ne.Left]:{x:-1,y:0},[ne.Right]:{x:1,y:0},[ne.Top]:{x:0,y:-1},[ne.Bottom]:{x:0,y:1}},v1=({source:e,sourcePosition:n=ne.Bottom,target:r})=>n===ne.Left||n===ne.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},rf=(e,n)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2));function y1({source:e,sourcePosition:n=ne.Bottom,target:r,targetPosition:i=ne.Top,center:o,offset:a,stepPosition:s}){const u=nf[n],l=nf[i],c={x:e.x+u.x*a,y:e.y+u.y*a},d={x:r.x+l.x*a,y:r.y+l.y*a},f=v1({source:c,sourcePosition:n,target:d}),h=f.x!==0?"x":"y",p=f[h];let m=[],b,v;const g={x:0,y:0},_={x:0,y:0},[,,y,x]=Cy({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(u[h]*l[h]===-1){h==="x"?(b=o.x??c.x+(d.x-c.x)*s,v=o.y??(c.y+d.y)/2):(b=o.x??(c.x+d.x)/2,v=o.y??c.y+(d.y-c.y)*s);const C=[{x:b,y:c.y},{x:b,y:d.y}],S=[{x:c.x,y:v},{x:d.x,y:v}];u[h]===p?m=h==="x"?C:S:m=h==="x"?S:C}else{const C=[{x:c.x,y:d.y}],S=[{x:d.x,y:c.y}];if(h==="x"?m=u.x===p?S:C:m=u.y===p?C:S,n===i){const I=Math.abs(e[h]-r[h]);if(I<=a){const O=Math.min(a-1,a-I);u[h]===p?g[h]=(c[h]>e[h]?-1:1)*O:_[h]=(d[h]>r[h]?-1:1)*O}}if(n!==i){const I=h==="x"?"y":"x",O=u[h]===l[I],R=c[I]>d[I],P=c[I]<d[I];(u[h]===1&&(!O&&R||O&&P)||u[h]!==1&&(!O&&P||O&&R))&&(m=h==="x"?C:S)}const k={x:c.x+g.x,y:c.y+g.y},A={x:d.x+_.x,y:d.y+_.y},N=Math.max(Math.abs(k.x-m[0].x),Math.abs(A.x-m[0].x)),M=Math.max(Math.abs(k.y-m[0].y),Math.abs(A.y-m[0].y));N>=M?(b=(k.x+A.x)/2,v=m[0].y):(b=m[0].x,v=(k.y+A.y)/2)}return[[e,{x:c.x+g.x,y:c.y+g.y},...m,{x:d.x+_.x,y:d.y+_.y},r],b,v,y,x]}function b1(e,n,r,i){const o=Math.min(rf(e,n)/2,rf(n,r)/2,i),{x:a,y:s}=n;if(e.x===a&&a===r.x||e.y===s&&s===r.y)return`L${a} ${s}`;if(e.y===s){const c=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${a+o*c},${s}Q ${a},${s} ${a},${s+o*d}`}const u=e.x<r.x?1:-1,l=e.y<r.y?-1:1;return`L ${a},${s+o*l}Q ${a},${s} ${a+o*u},${s}`}function Ec({sourceX:e,sourceY:n,sourcePosition:r=ne.Bottom,targetX:i,targetY:o,targetPosition:a=ne.Top,borderRadius:s=5,centerX:u,centerY:l,offset:c=20,stepPosition:d=.5}){const[f,h,p,m,b]=y1({source:{x:e,y:n},sourcePosition:r,target:{x:i,y:o},targetPosition:a,center:{x:u,y:l},offset:c,stepPosition:d});return[f.reduce((g,_,y)=>{let x="";return y>0&&y<f.length-1?x=b1(f[y-1],_,f[y+1],s):x=`${y===0?"M":"L"}${_.x} ${_.y}`,g+=x,g},""),h,p,m,b]}function of(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function _1(e){const{sourceNode:n,targetNode:r}=e;if(!of(n)||!of(r))return null;const i=n.internals.handleBounds||af(n.handles),o=r.internals.handleBounds||af(r.handles),a=sf(i?.source??[],e.sourceHandle),s=sf(e.connectionMode===Zt.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!a||!s)return e.onError?.("008",ct.error008(a?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const u=a?.position||ne.Bottom,l=s?.position||ne.Top,c=qt(n,a,u),d=qt(r,s,l);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y,sourcePosition:u,targetPosition:l}}function af(e){if(!e)return null;const n=[],r=[];for(const i of e)i.width=i.width??1,i.height=i.height??1,i.type==="source"?n.push(i):i.type==="target"&&r.push(i);return{source:n,target:r}}function qt(e,n,r=ne.Left,i=!1){const o=(n?.x??0)+e.internals.positionAbsolute.x,a=(n?.y??0)+e.internals.positionAbsolute.y,{width:s,height:u}=n??yt(e);if(i)return{x:o+s/2,y:a+u/2};switch(n?.position??r){case ne.Top:return{x:o+s/2,y:a};case ne.Right:return{x:o+s,y:a+u/2};case ne.Bottom:return{x:o+s/2,y:a+u};case ne.Left:return{x:o,y:a+u/2}}}function sf(e,n){return e&&(n?e.find(r=>r.id===n):e[0])||null}function Sc(e,n){return e?typeof e=="string"?e:`${n?`${n}__`:""}${Object.keys(e).sort().map(i=>`${i}=${e[i]}`).join("&")}`:""}function x1(e,{id:n,defaultColor:r,defaultMarkerStart:i,defaultMarkerEnd:o}){const a=new Set;return e.reduce((s,u)=>([u.markerStart||i,u.markerEnd||o].forEach(l=>{if(l&&typeof l=="object"){const c=Sc(l,n);a.has(c)||(s.push({id:c,color:l.color||r,...l}),a.add(c))}}),s),[]).sort((s,u)=>s.id.localeCompare(u.id))}const Sy=1e3,w1=10,rl={nodeOrigin:[0,0],nodeExtent:Cn,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},C1={...rl,checkEquality:!0};function il(e,n){const r={...e};for(const i in n)n[i]!==void 0&&(r[i]=n[i]);return r}function E1(e,n,r){const i=il(rl,r);for(const o of e.values())if(o.parentId)al(o,e,n,i);else{const a=Rn(o,i.nodeOrigin),s=Qt(o.extent)?o.extent:i.nodeExtent,u=jt(a,s,yt(o));o.internals.positionAbsolute=u}}function S1(e,n){if(!e.handles)return e.measured?n?.internals.handleBounds:void 0;const r=[],i=[];for(const o of e.handles){const a={id:o.id,width:o.width??1,height:o.height??1,nodeId:e.id,x:o.x,y:o.y,position:o.position,type:o.type};o.type==="source"?r.push(a):o.type==="target"&&i.push(a)}return{source:r,target:i}}function ol(e){return e==="manual"}function kc(e,n,r,i={}){const o=il(C1,i),a={i:0},s=new Map(n),u=o?.elevateNodesOnSelect&&!ol(o.zIndexMode)?Sy:0;let l=e.length>0;n.clear(),r.clear();for(const c of e){let d=s.get(c.id);if(o.checkEquality&&c===d?.internals.userNode)n.set(c.id,d);else{const f=Rn(c,o.nodeOrigin),h=Qt(c.extent)?c.extent:o.nodeExtent,p=jt(f,h,yt(c));d={...o.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:p,handleBounds:S1(c,d),z:ky(c,u,o.zIndexMode),userNode:c}},n.set(c.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(l=!1),c.parentId&&al(d,n,r,i,a)}return l}function k1(e,n){if(!e.parentId)return;const r=n.get(e.parentId);r?r.set(e.id,e):n.set(e.parentId,new Map([[e.id,e]]))}function al(e,n,r,i,o){const{elevateNodesOnSelect:a,nodeOrigin:s,nodeExtent:u,zIndexMode:l}=il(rl,i),c=e.parentId,d=n.get(c);if(!d){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}k1(e,r),o&&!d.parentId&&d.internals.rootParentIndex===void 0&&l==="auto"&&(d.internals.rootParentIndex=++o.i,d.internals.z=d.internals.z+o.i*w1),o&&d.internals.rootParentIndex!==void 0&&(o.i=d.internals.rootParentIndex);const f=a&&!ol(l)?Sy:0,{x:h,y:p,z:m}=N1(e,d,s,u,f,l),{positionAbsolute:b}=e.internals,v=h!==b.x||p!==b.y;(v||m!==e.internals.z)&&n.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:h,y:p}:b,z:m}})}function ky(e,n,r){const i=Je(e.zIndex)?e.zIndex:0;return ol(r)?i:i+(e.selected?n:0)}function N1(e,n,r,i,o,a){const{x:s,y:u}=n.internals.positionAbsolute,l=yt(e),c=Rn(e,r),d=Qt(e.extent)?jt(c,e.extent,l):c;let f=jt({x:s+d.x,y:u+d.y},i,l);e.extent==="parent"&&(f=hy(f,l,n));const h=ky(e,o,a),p=n.internals.z??0;return{x:f.x,y:f.y,z:p>=h?p+1:h}}function sl(e,n,r,i=[0,0]){const o=[],a=new Map;for(const s of e){const u=n.get(s.parentId);if(!u)continue;const l=a.get(s.parentId)?.expandedRect??Xt(u),c=gy(l,s.rect);a.set(s.parentId,{expandedRect:c,parent:u})}return a.size>0&&a.forEach(({expandedRect:s,parent:u},l)=>{const c=u.internals.positionAbsolute,d=yt(u),f=u.origin??i,h=s.x<c.x?Math.round(Math.abs(c.x-s.x)):0,p=s.y<c.y?Math.round(Math.abs(c.y-s.y)):0,m=Math.max(d.width,Math.round(s.width)),b=Math.max(d.height,Math.round(s.height)),v=(m-d.width)*f[0],g=(b-d.height)*f[1];(h>0||p>0||v||g)&&(o.push({id:l,type:"position",position:{x:u.position.x-h+v,y:u.position.y-p+g}}),r.get(l)?.forEach(_=>{e.some(y=>y.id===_.id)||o.push({id:_.id,type:"position",position:{x:_.position.x+h,y:_.position.y+p}})})),(d.width<s.width||d.height<s.height||h||p)&&o.push({id:l,type:"dimensions",setAttributes:!0,dimensions:{width:m+(h?f[0]*h-v:0),height:b+(p?f[1]*p-g:0)}})}),o}function M1(e,n,r,i,o,a,s){const u=i?.querySelector(".xyflow__viewport");let l=!1;if(!u)return{changes:[],updatedInternals:l};const c=[],d=window.getComputedStyle(u),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=[];for(const p of e.values()){const m=n.get(p.id);if(!m)continue;if(m.hidden){n.set(m.id,{...m,internals:{...m.internals,handleBounds:void 0}}),l=!0;continue}const b=tl(p.nodeElement),v=m.measured.width!==b.width||m.measured.height!==b.height;if(!!(b.width&&b.height&&(v||!m.internals.handleBounds||p.force))){const _=p.nodeElement.getBoundingClientRect(),y=Qt(m.extent)?m.extent:a;let{positionAbsolute:x}=m.internals;m.parentId&&m.extent==="parent"?x=hy(x,b,n.get(m.parentId)):y&&(x=jt(x,y,b));const w={...m,measured:b,internals:{...m.internals,positionAbsolute:x,handleBounds:{source:ef("source",p.nodeElement,_,f,m.id),target:ef("target",p.nodeElement,_,f,m.id)}}};n.set(m.id,w),m.parentId&&al(w,n,r,{nodeOrigin:o,zIndexMode:s}),l=!0,v&&(c.push({id:m.id,type:"dimensions",dimensions:b}),m.expandParent&&m.parentId&&h.push({id:m.id,parentId:m.parentId,rect:Xt(w,o)}))}}if(h.length>0){const p=sl(h,n,r,o);c.push(...p)}return{changes:c,updatedInternals:l}}async function A1({delta:e,panZoom:n,transform:r,translateExtent:i,width:o,height:a}){if(!n||!e.x&&!e.y)return Promise.resolve(!1);const s=await n.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[o,a]],i),u=!!s&&(s.x!==r[0]||s.y!==r[1]||s.k!==r[2]);return Promise.resolve(u)}function uf(e,n,r,i,o,a){let s=o;const u=i.get(s)||new Map;i.set(s,u.set(r,n)),s=`${o}-${e}`;const l=i.get(s)||new Map;if(i.set(s,l.set(r,n)),a){s=`${o}-${e}-${a}`;const c=i.get(s)||new Map;i.set(s,c.set(r,n))}}function Ny(e,n,r){e.clear(),n.clear();for(const i of r){const{source:o,target:a,sourceHandle:s=null,targetHandle:u=null}=i,l={edgeId:i.id,source:o,target:a,sourceHandle:s,targetHandle:u},c=`${o}-${s}--${a}-${u}`,d=`${a}-${u}--${o}-${s}`;uf("source",l,d,e,o,s),uf("target",l,c,e,a,u),n.set(i.id,i)}}function My(e,n){if(!e.parentId)return!1;const r=n.get(e.parentId);return r?r.selected?!0:My(r,n):!1}function cf(e,n,r){let i=e;do{if(i?.matches?.(n))return!0;if(i===r)return!1;i=i?.parentElement}while(i);return!1}function R1(e,n,r,i){const o=new Map;for(const[a,s]of e)if((s.selected||s.id===i)&&(!s.parentId||!My(s,e))&&(s.draggable||n&&typeof s.draggable>"u")){const u=e.get(a);u&&o.set(a,{id:a,position:u.position||{x:0,y:0},distance:{x:r.x-u.internals.positionAbsolute.x,y:r.y-u.internals.positionAbsolute.y},extent:u.extent,parentId:u.parentId,origin:u.origin,expandParent:u.expandParent,internals:{positionAbsolute:u.internals.positionAbsolute||{x:0,y:0}},measured:{width:u.measured.width??0,height:u.measured.height??0}})}return o}function Ur({nodeId:e,dragItems:n,nodeLookup:r,dragging:i=!0}){const o=[];for(const[s,u]of n){const l=r.get(s)?.internals.userNode;l&&o.push({...l,position:u.position,dragging:i})}if(!e)return[o[0],o];const a=r.get(e)?.internals.userNode;return[a?{...a,position:n.get(e)?.position||a.position,dragging:i}:o[0],o]}function I1({dragItems:e,snapGrid:n,x:r,y:i}){const o=e.values().next().value;if(!o)return null;const a={x:r-o.distance.x,y:i-o.distance.y},s=Tn(a,n);return{x:s.x-a.x,y:s.y-a.y}}function T1({onNodeMouseDown:e,getStoreItems:n,onDragStart:r,onDrag:i,onDragStop:o}){let a={x:null,y:null},s=0,u=new Map,l=!1,c={x:0,y:0},d=null,f=!1,h=null,p=!1,m=!1,b=null;function v({noDragClassName:_,handleSelector:y,domNode:x,isSelectable:w,nodeId:C,nodeClickDistance:S=0}){h=De(x);function k({x:I,y:O}){const{nodeLookup:R,nodeExtent:P,snapGrid:j,snapToGrid:L,nodeOrigin:z,onNodeDrag:F,onSelectionDrag:Y,onError:Z,updateNodePositions:W}=n();a={x:I,y:O};let Q=!1;const q=u.size>1,$=q&&P?Cc(In(u)):null,H=q&&L?I1({dragItems:u,snapGrid:j,x:I,y:O}):null;for(const[U,V]of u){if(!R.has(U))continue;let B={x:I-V.distance.x,y:O-V.distance.y};L&&(B=H?{x:Math.round(B.x+H.x),y:Math.round(B.y+H.y)}:Tn(B,j));let K=null;if(q&&P&&!V.extent&&$){const{positionAbsolute:te}=V.internals,ce=te.x-$.x+P[0][0],re=te.x+V.measured.width-$.x2+P[1][0],le=te.y-$.y+P[0][1],ae=te.y+V.measured.height-$.y2+P[1][1];K=[[ce,le],[re,ae]]}const{position:J,positionAbsolute:oe}=dy({nodeId:U,nextPosition:B,nodeLookup:R,nodeExtent:K||P,nodeOrigin:z,onError:Z});Q=Q||V.position.x!==J.x||V.position.y!==J.y,V.position=J,V.internals.positionAbsolute=oe}if(m=m||Q,!!Q&&(W(u,!0),b&&(i||F||!C&&Y))){const[U,V]=Ur({nodeId:C,dragItems:u,nodeLookup:R});i?.(b,u,U,V),F?.(b,U,V),C||Y?.(b,V)}}async function A(){if(!d)return;const{transform:I,panBy:O,autoPanSpeed:R,autoPanOnNodeDrag:P}=n();if(!P){l=!1,cancelAnimationFrame(s);return}const[j,L]=py(c,d,R);(j!==0||L!==0)&&(a.x=(a.x??0)-j/I[2],a.y=(a.y??0)-L/I[2],await O({x:j,y:L})&&k(a)),s=requestAnimationFrame(A)}function N(I){const{nodeLookup:O,multiSelectionActive:R,nodesDraggable:P,transform:j,snapGrid:L,snapToGrid:z,selectNodesOnDrag:F,onNodeDragStart:Y,onSelectionDragStart:Z,unselectNodesAndEdges:W}=n();f=!0,(!F||!w)&&!R&&C&&(O.get(C)?.selected||W()),w&&F&&C&&e?.(C);const Q=vn(I.sourceEvent,{transform:j,snapGrid:L,snapToGrid:z,containerBounds:d});if(a=Q,u=R1(O,P,Q,C),u.size>0&&(r||Y||!C&&Z)){const[q,$]=Ur({nodeId:C,dragItems:u,nodeLookup:O});r?.(I.sourceEvent,u,q,$),Y?.(I.sourceEvent,q,$),C||Z?.(I.sourceEvent,$)}}const M=Kc().clickDistance(S).on("start",I=>{const{domNode:O,nodeDragThreshold:R,transform:P,snapGrid:j,snapToGrid:L}=n();d=O?.getBoundingClientRect()||null,p=!1,m=!1,b=I.sourceEvent,R===0&&N(I),a=vn(I.sourceEvent,{transform:P,snapGrid:j,snapToGrid:L,containerBounds:d}),c=et(I.sourceEvent,d)}).on("drag",I=>{const{autoPanOnNodeDrag:O,transform:R,snapGrid:P,snapToGrid:j,nodeDragThreshold:L,nodeLookup:z}=n(),F=vn(I.sourceEvent,{transform:R,snapGrid:P,snapToGrid:j,containerBounds:d});if(b=I.sourceEvent,(I.sourceEvent.type==="touchmove"&&I.sourceEvent.touches.length>1||C&&!z.has(C))&&(p=!0),!p){if(!l&&O&&f&&(l=!0,A()),!f){const Y=et(I.sourceEvent,d),Z=Y.x-c.x,W=Y.y-c.y;Math.sqrt(Z*Z+W*W)>L&&N(I)}(a.x!==F.xSnapped||a.y!==F.ySnapped)&&u&&f&&(c=et(I.sourceEvent,d),k(F))}}).on("end",I=>{if(!(!f||p)&&(l=!1,f=!1,cancelAnimationFrame(s),u.size>0)){const{nodeLookup:O,updateNodePositions:R,onNodeDragStop:P,onSelectionDragStop:j}=n();if(m&&(R(u,!1),m=!1),o||P||!C&&j){const[L,z]=Ur({nodeId:C,dragItems:u,nodeLookup:O,dragging:!1});o?.(I.sourceEvent,u,L,z),P?.(I.sourceEvent,L,z),C||j?.(I.sourceEvent,z)}}}).filter(I=>{const O=I.target;return!I.button&&(!_||!cf(O,`.${_}`,x))&&(!y||cf(O,y,x))});h.call(M)}function g(){h?.on(".drag",null)}return{update:v,destroy:g}}function P1(e,n,r){const i=[],o={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const a of n.values())Sn(o,Xt(a))>0&&i.push(a);return i}const O1=250;function j1(e,n,r,i){let o=[],a=1/0;const s=P1(e,r,n+O1);for(const u of s){const l=[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]];for(const c of l){if(i.nodeId===c.nodeId&&i.type===c.type&&i.id===c.id)continue;const{x:d,y:f}=qt(u,c,c.position,!0),h=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(f-e.y,2));h>n||(h<a?(o=[{...c,x:d,y:f}],a=h):h===a&&o.push({...c,x:d,y:f}))}}if(!o.length)return null;if(o.length>1){const u=i.type==="source"?"target":"source";return o.find(l=>l.type===u)??o[0]}return o[0]}function Ay(e,n,r,i,o,a=!1){const s=i.get(e);if(!s)return null;const u=o==="strict"?s.internals.handleBounds?.[n]:[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]],l=(r?u?.find(c=>c.id===r):u?.[0])??null;return l&&a?{...l,...qt(s,l,l.position,!0)}:l}function Ry(e,n){return e||(n?.classList.contains("target")?"target":n?.classList.contains("source")?"source":null)}function q1(e,n){let r=null;return n?r=!0:e&&!n&&(r=!1),r}const Iy=()=>!0;function D1(e,{connectionMode:n,connectionRadius:r,handleId:i,nodeId:o,edgeUpdaterType:a,isTarget:s,domNode:u,nodeLookup:l,lib:c,autoPanOnConnect:d,flowId:f,panBy:h,cancelConnection:p,onConnectStart:m,onConnect:b,onConnectEnd:v,isValidConnection:g=Iy,onReconnectEnd:_,updateConnection:y,getTransform:x,getFromHandle:w,autoPanSpeed:C,dragThreshold:S=1,handleDomNode:k}){const A=yy(e.target);let N=0,M;const{x:I,y:O}=et(e),R=Ry(a,k),P=u?.getBoundingClientRect();let j=!1;if(!P||!R)return;const L=Ay(o,R,i,l,n);if(!L)return;let z=et(e,P),F=!1,Y=null,Z=!1,W=null;function Q(){if(!d||!P)return;const[J,oe]=py(z,P,C);h({x:J,y:oe}),N=requestAnimationFrame(Q)}const q={...L,nodeId:o,type:R,position:L.position},$=l.get(o);let U={inProgress:!0,isValid:null,from:qt($,q,ne.Left,!0),fromHandle:q,fromPosition:q.position,fromNode:$,to:z,toHandle:null,toPosition:Kl[q.position],toNode:null,pointer:z};function V(){j=!0,y(U),m?.(e,{nodeId:o,handleId:i,handleType:R})}S===0&&V();function B(J){if(!j){const{x:ae,y:Ae}=et(J),Me=ae-I,je=Ae-O;if(!(Me*Me+je*je>S*S))return;V()}if(!w()||!q){K(J);return}const oe=x();z=et(J,P),M=j1(Pn(z,oe,!1,[1,1]),r,l,q),F||(Q(),F=!0);const te=Ty(J,{handle:M,connectionMode:n,fromNodeId:o,fromHandleId:i,fromType:s?"target":"source",isValidConnection:g,doc:A,lib:c,flowId:f,nodeLookup:l});W=te.handleDomNode,Y=te.connection,Z=q1(!!M,te.isValid);const ce=l.get(o),re=ce?qt(ce,q,ne.Left,!0):U.from,le={...U,from:re,isValid:Z,to:te.toHandle&&Z?er({x:te.toHandle.x,y:te.toHandle.y},oe):z,toHandle:te.toHandle,toPosition:Z&&te.toHandle?te.toHandle.position:Kl[q.position],toNode:te.toHandle?l.get(te.toHandle.nodeId):null,pointer:z};y(le),U=le}function K(J){if(!("touches"in J&&J.touches.length>0)){if(j){(M||W)&&Y&&Z&&b?.(Y);const{inProgress:oe,...te}=U,ce={...te,toPosition:U.toHandle?U.toPosition:null};v?.(J,ce),a&&_?.(J,ce)}p(),cancelAnimationFrame(N),F=!1,Z=!1,Y=null,W=null,A.removeEventListener("mousemove",B),A.removeEventListener("mouseup",K),A.removeEventListener("touchmove",B),A.removeEventListener("touchend",K)}}A.addEventListener("mousemove",B),A.addEventListener("mouseup",K),A.addEventListener("touchmove",B),A.addEventListener("touchend",K)}function Ty(e,{handle:n,connectionMode:r,fromNodeId:i,fromHandleId:o,fromType:a,doc:s,lib:u,flowId:l,isValidConnection:c=Iy,nodeLookup:d}){const f=a==="target",h=n?s.querySelector(`.${u}-flow__handle[data-id="${l}-${n?.nodeId}-${n?.id}-${n?.type}"]`):null,{x:p,y:m}=et(e),b=s.elementFromPoint(p,m),v=b?.classList.contains(`${u}-flow__handle`)?b:h,g={handleDomNode:v,isValid:!1,connection:null,toHandle:null};if(v){const _=Ry(void 0,v),y=v.getAttribute("data-nodeid"),x=v.getAttribute("data-handleid"),w=v.classList.contains("connectable"),C=v.classList.contains("connectableend");if(!y||!_)return g;const S={source:f?y:i,sourceHandle:f?x:o,target:f?i:y,targetHandle:f?o:x};g.connection=S;const A=w&&C&&(r===Zt.Strict?f&&_==="source"||!f&&_==="target":y!==i||x!==o);g.isValid=A&&c(S),g.toHandle=Ay(y,_,x,d,r,!0)}return g}const Nc={onPointerDown:D1,isValid:Ty};function L1({domNode:e,panZoom:n,getTransform:r,getViewScale:i}){const o=De(e);function a({translateExtent:u,width:l,height:c,zoomStep:d=1,pannable:f=!0,zoomable:h=!0,inversePan:p=!1}){const m=y=>{if(y.sourceEvent.type!=="wheel"||!n)return;const x=r(),w=y.sourceEvent.ctrlKey&&kn()?10:1,C=-y.sourceEvent.deltaY*(y.sourceEvent.deltaMode===1?.05:y.sourceEvent.deltaMode?1:.002)*d,S=x[2]*Math.pow(2,C*w);n.scaleTo(S)};let b=[0,0];const v=y=>{(y.sourceEvent.type==="mousedown"||y.sourceEvent.type==="touchstart")&&(b=[y.sourceEvent.clientX??y.sourceEvent.touches[0].clientX,y.sourceEvent.clientY??y.sourceEvent.touches[0].clientY])},g=y=>{const x=r();if(y.sourceEvent.type!=="mousemove"&&y.sourceEvent.type!=="touchmove"||!n)return;const w=[y.sourceEvent.clientX??y.sourceEvent.touches[0].clientX,y.sourceEvent.clientY??y.sourceEvent.touches[0].clientY],C=[w[0]-b[0],w[1]-b[1]];b=w;const S=i()*Math.max(x[2],Math.log(x[2]))*(p?-1:1),k={x:x[0]-C[0]*S,y:x[1]-C[1]*S},A=[[0,0],[l,c]];n.setViewportConstrained({x:k.x,y:k.y,zoom:x[2]},A,u)},_=Xc().on("start",v).on("zoom",f?g:null).on("zoom.wheel",h?m:null);o.call(_,{})}function s(){o.on("zoom",null)}return{update:a,destroy:s,pointer:Ye}}const lr=e=>({x:e.x,y:e.y,zoom:e.k}),Vr=({x:e,y:n,zoom:r})=>Gc.translate(e,n).scale(r),Gt=(e,n)=>e.target.closest(`.${n}`),Py=(e,n)=>n===2&&Array.isArray(e)&&e.includes(2),z1=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Gr=(e,n=0,r=z1,i=()=>{})=>{const o=typeof n=="number"&&n>0;return o||i(),o?e.transition().duration(n).ease(r).on("end",i):e},Oy=e=>{const n=e.ctrlKey&&kn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*n};function F1({zoomPanValues:e,noWheelClassName:n,d3Selection:r,d3Zoom:i,panOnScrollMode:o,panOnScrollSpeed:a,zoomOnPinch:s,onPanZoomStart:u,onPanZoom:l,onPanZoomEnd:c}){return d=>{if(Gt(d,n))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const f=r.property("__zoom").k||1;if(d.ctrlKey&&s){const v=Ye(d),g=Oy(d),_=f*Math.pow(2,g);i.scaleTo(r,_,v,d);return}const h=d.deltaMode===1?20:1;let p=o===Pt.Vertical?0:d.deltaX*h,m=o===Pt.Horizontal?0:d.deltaY*h;!kn()&&d.shiftKey&&o!==Pt.Vertical&&(p=d.deltaY*h,m=0),i.translateBy(r,-(p/f)*a,-(m/f)*a,{internal:!0});const b=lr(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(l?.(d,b),e.panScrollTimeout=setTimeout(()=>{c?.(d,b),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,u?.(d,b))}}function $1({noWheelClassName:e,preventScrolling:n,d3ZoomHandler:r}){return function(i,o){const a=i.type==="wheel",s=!n&&a&&!i.ctrlKey,u=Gt(i,e);if(i.ctrlKey&&a&&u&&i.preventDefault(),s||u)return null;i.preventDefault(),r.call(this,i,o)}}function B1({zoomPanValues:e,onDraggingChange:n,onPanZoomStart:r}){return i=>{if(i.sourceEvent?.internal)return;const o=lr(i.transform);e.mouseButton=i.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,i.sourceEvent?.type==="mousedown"&&n(!0),r&&r?.(i.sourceEvent,o)}}function H1({zoomPanValues:e,panOnDrag:n,onPaneContextMenu:r,onTransformChange:i,onPanZoom:o}){return a=>{e.usedRightMouseButton=!!(r&&Py(n,e.mouseButton??0)),a.sourceEvent?.sync||i([a.transform.x,a.transform.y,a.transform.k]),o&&!a.sourceEvent?.internal&&o?.(a.sourceEvent,lr(a.transform))}}function U1({zoomPanValues:e,panOnDrag:n,panOnScroll:r,onDraggingChange:i,onPanZoomEnd:o,onPaneContextMenu:a}){return s=>{if(!s.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,a&&Py(n,e.mouseButton??0)&&!e.usedRightMouseButton&&s.sourceEvent&&a(s.sourceEvent),e.usedRightMouseButton=!1,i(!1),o)){const u=lr(s.transform);e.prevViewport=u,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(s.sourceEvent,u)},r?150:0)}}}function V1({zoomActivationKeyPressed:e,zoomOnScroll:n,zoomOnPinch:r,panOnDrag:i,panOnScroll:o,zoomOnDoubleClick:a,userSelectionActive:s,noWheelClassName:u,noPanClassName:l,lib:c,connectionInProgress:d}){return f=>{const h=e||n,p=r&&f.ctrlKey,m=f.type==="wheel";if(f.button===1&&f.type==="mousedown"&&(Gt(f,`${c}-flow__node`)||Gt(f,`${c}-flow__edge`)))return!0;if(!i&&!h&&!o&&!a&&!r||s||d&&!m||Gt(f,u)&&m||Gt(f,l)&&(!m||o&&m&&!e)||!r&&f.ctrlKey&&m)return!1;if(!r&&f.type==="touchstart"&&f.touches?.length>1)return f.preventDefault(),!1;if(!h&&!o&&!p&&m||!i&&(f.type==="mousedown"||f.type==="touchstart")||Array.isArray(i)&&!i.includes(f.button)&&f.type==="mousedown")return!1;const b=Array.isArray(i)&&i.includes(f.button)||!f.button||f.button<=1;return(!f.ctrlKey||m)&&b}}function G1({domNode:e,minZoom:n,maxZoom:r,translateExtent:i,viewport:o,onPanZoom:a,onPanZoomStart:s,onPanZoomEnd:u,onDraggingChange:l}){const c={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Xc().scaleExtent([n,r]).translateExtent(i),h=De(e).call(f);_({x:o.x,y:o.y,zoom:Kt(o.zoom,n,r)},[[0,0],[d.width,d.height]],i);const p=h.on("wheel.zoom"),m=h.on("dblclick.zoom");f.wheelDelta(Oy);function b(M,I){return h?new Promise(O=>{f?.interpolate(I?.interpolate==="linear"?$r:Xn).transform(Gr(h,I?.duration,I?.ease,()=>O(!0)),M)}):Promise.resolve(!1)}function v({noWheelClassName:M,noPanClassName:I,onPaneContextMenu:O,userSelectionActive:R,panOnScroll:P,panOnDrag:j,panOnScrollMode:L,panOnScrollSpeed:z,preventScrolling:F,zoomOnPinch:Y,zoomOnScroll:Z,zoomOnDoubleClick:W,zoomActivationKeyPressed:Q,lib:q,onTransformChange:$,connectionInProgress:H,paneClickDistance:U,selectionOnDrag:V}){R&&!c.isZoomingOrPanning&&g();const B=P&&!Q&&!R;f.clickDistance(V?1/0:!Je(U)||U<0?0:U);const K=B?F1({zoomPanValues:c,noWheelClassName:M,d3Selection:h,d3Zoom:f,panOnScrollMode:L,panOnScrollSpeed:z,zoomOnPinch:Y,onPanZoomStart:s,onPanZoom:a,onPanZoomEnd:u}):$1({noWheelClassName:M,preventScrolling:F,d3ZoomHandler:p});if(h.on("wheel.zoom",K,{passive:!1}),!R){const oe=B1({zoomPanValues:c,onDraggingChange:l,onPanZoomStart:s});f.on("start",oe);const te=H1({zoomPanValues:c,panOnDrag:j,onPaneContextMenu:!!O,onPanZoom:a,onTransformChange:$});f.on("zoom",te);const ce=U1({zoomPanValues:c,panOnDrag:j,panOnScroll:P,onPaneContextMenu:O,onPanZoomEnd:u,onDraggingChange:l});f.on("end",ce)}const J=V1({zoomActivationKeyPressed:Q,panOnDrag:j,zoomOnScroll:Z,panOnScroll:P,zoomOnDoubleClick:W,zoomOnPinch:Y,userSelectionActive:R,noPanClassName:I,noWheelClassName:M,lib:q,connectionInProgress:H});f.filter(J),W?h.on("dblclick.zoom",m):h.on("dblclick.zoom",null)}function g(){f.on("zoom",null)}async function _(M,I,O){const R=Vr(M),P=f?.constrain()(R,I,O);return P&&await b(P),new Promise(j=>j(P))}async function y(M,I){const O=Vr(M);return await b(O,I),new Promise(R=>R(O))}function x(M){if(h){const I=Vr(M),O=h.property("__zoom");(O.k!==M.zoom||O.x!==M.x||O.y!==M.y)&&f?.transform(h,I,null,{sync:!0})}}function w(){const M=h?at(h.node()):{x:0,y:0,k:1};return{x:M.x,y:M.y,zoom:M.k}}function C(M,I){return h?new Promise(O=>{f?.interpolate(I?.interpolate==="linear"?$r:Xn).scaleTo(Gr(h,I?.duration,I?.ease,()=>O(!0)),M)}):Promise.resolve(!1)}function S(M,I){return h?new Promise(O=>{f?.interpolate(I?.interpolate==="linear"?$r:Xn).scaleBy(Gr(h,I?.duration,I?.ease,()=>O(!0)),M)}):Promise.resolve(!1)}function k(M){f?.scaleExtent(M)}function A(M){f?.translateExtent(M)}function N(M){const I=!Je(M)||M<0?0:M;f?.clickDistance(I)}return{update:v,destroy:g,setViewport:y,setViewportConstrained:_,getViewport:w,scaleTo:C,scaleBy:S,setScaleExtent:k,setTranslateExtent:A,syncViewport:x,setClickDistance:N}}var Dt;(function(e){e.Line="line",e.Handle="handle"})(Dt||(Dt={}));const W1=["top-left","top-right","bottom-left","bottom-right"],Y1=["top","right","bottom","left"];function Z1({width:e,prevWidth:n,height:r,prevHeight:i,affectsX:o,affectsY:a}){const s=e-n,u=r-i,l=[s>0?1:s<0?-1:0,u>0?1:u<0?-1:0];return s&&o&&(l[0]=l[0]*-1),u&&a&&(l[1]=l[1]*-1),l}function lf(e){const n=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),i=e.includes("left"),o=e.includes("top");return{isHorizontal:n,isVertical:r,affectsX:i,affectsY:o}}function xt(e,n){return Math.max(0,n-e)}function wt(e,n){return Math.max(0,e-n)}function Un(e,n,r){return Math.max(0,n-e,e-r)}function ff(e,n){return e?!n:n}function K1(e,n,r,i,o,a,s,u){let{affectsX:l,affectsY:c}=n;const{isHorizontal:d,isVertical:f}=n,h=d&&f,{xSnapped:p,ySnapped:m}=r,{minWidth:b,maxWidth:v,minHeight:g,maxHeight:_}=i,{x:y,y:x,width:w,height:C,aspectRatio:S}=e;let k=Math.floor(d?p-e.pointerX:0),A=Math.floor(f?m-e.pointerY:0);const N=w+(l?-k:k),M=C+(c?-A:A),I=-a[0]*w,O=-a[1]*C;let R=Un(N,b,v),P=Un(M,g,_);if(s){let z=0,F=0;l&&k<0?z=xt(y+k+I,s[0][0]):!l&&k>0&&(z=wt(y+N+I,s[1][0])),c&&A<0?F=xt(x+A+O,s[0][1]):!c&&A>0&&(F=wt(x+M+O,s[1][1])),R=Math.max(R,z),P=Math.max(P,F)}if(u){let z=0,F=0;l&&k>0?z=wt(y+k,u[0][0]):!l&&k<0&&(z=xt(y+N,u[1][0])),c&&A>0?F=wt(x+A,u[0][1]):!c&&A<0&&(F=xt(x+M,u[1][1])),R=Math.max(R,z),P=Math.max(P,F)}if(o){if(d){const z=Un(N/S,g,_)*S;if(R=Math.max(R,z),s){let F=0;!l&&!c||l&&!c&&h?F=wt(x+O+N/S,s[1][1])*S:F=xt(x+O+(l?k:-k)/S,s[0][1])*S,R=Math.max(R,F)}if(u){let F=0;!l&&!c||l&&!c&&h?F=xt(x+N/S,u[1][1])*S:F=wt(x+(l?k:-k)/S,u[0][1])*S,R=Math.max(R,F)}}if(f){const z=Un(M*S,b,v)/S;if(P=Math.max(P,z),s){let F=0;!l&&!c||c&&!l&&h?F=wt(y+M*S+I,s[1][0])/S:F=xt(y+(c?A:-A)*S+I,s[0][0])/S,P=Math.max(P,F)}if(u){let F=0;!l&&!c||c&&!l&&h?F=xt(y+M*S,u[1][0])/S:F=wt(y+(c?A:-A)*S,u[0][0])/S,P=Math.max(P,F)}}}A=A+(A<0?P:-P),k=k+(k<0?R:-R),o&&(h?N>M*S?A=(ff(l,c)?-k:k)/S:k=(ff(l,c)?-A:A)*S:d?(A=k/S,c=l):(k=A*S,l=c));const j=l?y+k:y,L=c?x+A:x;return{width:w+(l?-k:k),height:C+(c?-A:A),x:a[0]*k*(l?-1:1)+j,y:a[1]*A*(c?-1:1)+L}}const jy={width:0,height:0,x:0,y:0},X1={...jy,pointerX:0,pointerY:0,aspectRatio:1};function Q1(e){return[[0,0],[e.measured.width,e.measured.height]]}function J1(e,n,r){const i=n.position.x+e.position.x,o=n.position.y+e.position.y,a=e.measured.width??0,s=e.measured.height??0,u=r[0]*a,l=r[1]*s;return[[i-u,o-l],[i+a-u,o+s-l]]}function ew({domNode:e,nodeId:n,getStoreItems:r,onChange:i,onEnd:o}){const a=De(e);let s={controlDirection:lf("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function u({controlPosition:c,boundaries:d,keepAspectRatio:f,resizeDirection:h,onResizeStart:p,onResize:m,onResizeEnd:b,shouldResize:v}){let g={...jy},_={...X1};s={boundaries:d,resizeDirection:h,keepAspectRatio:f,controlDirection:lf(c)};let y,x=null,w=[],C,S,k,A=!1;const N=Kc().on("start",M=>{const{nodeLookup:I,transform:O,snapGrid:R,snapToGrid:P,nodeOrigin:j,paneDomNode:L}=r();if(y=I.get(n),!y)return;x=L?.getBoundingClientRect()??null;const{xSnapped:z,ySnapped:F}=vn(M.sourceEvent,{transform:O,snapGrid:R,snapToGrid:P,containerBounds:x});g={width:y.measured.width??0,height:y.measured.height??0,x:y.position.x??0,y:y.position.y??0},_={...g,pointerX:z,pointerY:F,aspectRatio:g.width/g.height},C=void 0,y.parentId&&(y.extent==="parent"||y.expandParent)&&(C=I.get(y.parentId),S=C&&y.extent==="parent"?Q1(C):void 0),w=[],k=void 0;for(const[Y,Z]of I)if(Z.parentId===n&&(w.push({id:Y,position:{...Z.position},extent:Z.extent}),Z.extent==="parent"||Z.expandParent)){const W=J1(Z,y,Z.origin??j);k?k=[[Math.min(W[0][0],k[0][0]),Math.min(W[0][1],k[0][1])],[Math.max(W[1][0],k[1][0]),Math.max(W[1][1],k[1][1])]]:k=W}p?.(M,{...g})}).on("drag",M=>{const{transform:I,snapGrid:O,snapToGrid:R,nodeOrigin:P}=r(),j=vn(M.sourceEvent,{transform:I,snapGrid:O,snapToGrid:R,containerBounds:x}),L=[];if(!y)return;const{x:z,y:F,width:Y,height:Z}=g,W={},Q=y.origin??P,{width:q,height:$,x:H,y:U}=K1(_,s.controlDirection,j,s.boundaries,s.keepAspectRatio,Q,S,k),V=q!==Y,B=$!==Z,K=H!==z&&V,J=U!==F&&B;if(!K&&!J&&!V&&!B)return;if((K||J||Q[0]===1||Q[1]===1)&&(W.x=K?H:g.x,W.y=J?U:g.y,g.x=W.x,g.y=W.y,w.length>0)){const re=H-z,le=U-F;for(const ae of w)ae.position={x:ae.position.x-re+Q[0]*(q-Y),y:ae.position.y-le+Q[1]*($-Z)},L.push(ae)}if((V||B)&&(W.width=V&&(!s.resizeDirection||s.resizeDirection==="horizontal")?q:g.width,W.height=B&&(!s.resizeDirection||s.resizeDirection==="vertical")?$:g.height,g.width=W.width,g.height=W.height),C&&y.expandParent){const re=Q[0]*(W.width??0);W.x&&W.x<re&&(g.x=re,_.x=_.x-(W.x-re));const le=Q[1]*(W.height??0);W.y&&W.y<le&&(g.y=le,_.y=_.y-(W.y-le))}const oe=Z1({width:g.width,prevWidth:Y,height:g.height,prevHeight:Z,affectsX:s.controlDirection.affectsX,affectsY:s.controlDirection.affectsY}),te={...g,direction:oe};v?.(M,te)!==!1&&(A=!0,m?.(M,te),i(W,L))}).on("end",M=>{A&&(b?.(M,{...g}),o?.({...g}),A=!1)});a.call(N)}function l(){a.on(".drag",null)}return{update:u,destroy:l}}const{useDebugValue:tw}=Gv,{useSyncExternalStoreWithSelector:nw}=fx,rw=e=>e;function qy(e,n=rw,r){const i=nw(e.subscribe,e.getState,e.getServerState||e.getInitialState,n,r);return tw(i),i}const df=(e,n)=>{const r=dx(e),i=(o,a=n)=>qy(r,o,a);return Object.assign(i,r),i},iw=(e,n)=>e?df(e,n):df;function Se(e,n){if(Object.is(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(const[i,o]of e)if(!Object.is(o,n.get(i)))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(const i of e)if(!n.has(i))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!1;for(const i of r)if(!Object.prototype.hasOwnProperty.call(n,i)||!Object.is(e[i],n[i]))return!1;return!0}const fr=T.createContext(null),ow=fr.Provider,Dy=ct.error001();function me(e,n){const r=T.useContext(fr);if(r===null)throw new Error(Dy);return qy(r,e,n)}function ke(){const e=T.useContext(fr);if(e===null)throw new Error(Dy);return T.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const hf={display:"none"},aw={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Ly="react-flow__node-desc",zy="react-flow__edge-desc",sw="react-flow__aria-live",uw=e=>e.ariaLiveMessage,cw=e=>e.ariaLabelConfig;function lw({rfId:e}){const n=me(uw);return E.jsx("div",{id:`${sw}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:aw,children:n})}function fw({rfId:e,disableKeyboardA11y:n}){const r=me(cw);return E.jsxs(E.Fragment,{children:[E.jsx("div",{id:`${Ly}-${e}`,style:hf,children:n?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),E.jsx("div",{id:`${zy}-${e}`,style:hf,children:r["edge.a11yDescription.default"]}),!n&&E.jsx(lw,{rfId:e})]})}const dr=T.forwardRef(({position:e="top-left",children:n,className:r,style:i,...o},a)=>{const s=`${e}`.split("-");return E.jsx("div",{className:Ie(["react-flow__panel",r,...s]),style:i,ref:a,...o,children:n})});dr.displayName="Panel";function dw({proOptions:e,position:n="bottom-right"}){return e?.hideAttribution?null:E.jsx(dr,{position:n,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:E.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const hw=e=>{const n=[],r=[];for(const[,i]of e.nodeLookup)i.selected&&n.push(i.internals.userNode);for(const[,i]of e.edgeLookup)i.selected&&r.push(i);return{selectedNodes:n,selectedEdges:r}},Vn=e=>e.id;function pw(e,n){return Se(e.selectedNodes.map(Vn),n.selectedNodes.map(Vn))&&Se(e.selectedEdges.map(Vn),n.selectedEdges.map(Vn))}function gw({onSelectionChange:e}){const n=ke(),{selectedNodes:r,selectedEdges:i}=me(hw,pw);return T.useEffect(()=>{const o={nodes:r,edges:i};e?.(o),n.getState().onSelectionChangeHandlers.forEach(a=>a(o))},[r,i,e]),null}const mw=e=>!!e.onSelectionChangeHandlers;function vw({onSelectionChange:e}){const n=me(mw);return e||n?E.jsx(gw,{onSelectionChange:e}):null}const Fy=[0,0],yw={x:0,y:0,zoom:1},bw=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],pf=[...bw,"rfId"],_w=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),gf={translateExtent:Cn,nodeOrigin:Fy,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function xw(e){const{setNodes:n,setEdges:r,setMinZoom:i,setMaxZoom:o,setTranslateExtent:a,setNodeExtent:s,reset:u,setDefaultNodesAndEdges:l}=me(_w,Se),c=ke();T.useEffect(()=>(l(e.defaultNodes,e.defaultEdges),()=>{d.current=gf,u()}),[]);const d=T.useRef(gf);return T.useEffect(()=>{for(const f of pf){const h=e[f],p=d.current[f];h!==p&&(typeof e[f]>"u"||(f==="nodes"?n(h):f==="edges"?r(h):f==="minZoom"?i(h):f==="maxZoom"?o(h):f==="translateExtent"?a(h):f==="nodeExtent"?s(h):f==="ariaLabelConfig"?c.setState({ariaLabelConfig:f1(h)}):f==="fitView"?c.setState({fitViewQueued:h}):f==="fitViewOptions"?c.setState({fitViewOptions:h}):c.setState({[f]:h})))}d.current=e},pf.map(f=>e[f])),null}function mf(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function ww(e){const[n,r]=T.useState(e==="system"?null:e);return T.useEffect(()=>{if(e!=="system"){r(e);return}const i=mf(),o=()=>r(i?.matches?"dark":"light");return o(),i?.addEventListener("change",o),()=>{i?.removeEventListener("change",o)}},[e]),n!==null?n:mf()?.matches?"dark":"light"}const vf=typeof document<"u"?document:null;function Nn(e=null,n={target:vf,actInsideInputWithModifier:!0}){const[r,i]=T.useState(!1),o=T.useRef(!1),a=T.useRef(new Set([])),[s,u]=T.useMemo(()=>{if(e!==null){const c=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=c.reduce((f,h)=>f.concat(...h),[]);return[c,d]}return[[],[]]},[e]);return T.useEffect(()=>{const l=n?.target??vf,c=n?.actInsideInputWithModifier??!0;if(e!==null){const d=p=>{if(o.current=p.ctrlKey||p.metaKey||p.shiftKey||p.altKey,(!o.current||o.current&&!c)&&by(p))return!1;const b=bf(p.code,u);if(a.current.add(p[b]),yf(s,a.current,!1)){const v=p.composedPath?.()?.[0]||p.target,g=v?.nodeName==="BUTTON"||v?.nodeName==="A";n.preventDefault!==!1&&(o.current||!g)&&p.preventDefault(),i(!0)}},f=p=>{const m=bf(p.code,u);yf(s,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(p[m]),p.key==="Meta"&&a.current.clear(),o.current=!1},h=()=>{a.current.clear(),i(!1)};return l?.addEventListener("keydown",d),l?.addEventListener("keyup",f),window.addEventListener("blur",h),window.addEventListener("contextmenu",h),()=>{l?.removeEventListener("keydown",d),l?.removeEventListener("keyup",f),window.removeEventListener("blur",h),window.removeEventListener("contextmenu",h)}}},[e,i]),r}function yf(e,n,r){return e.filter(i=>r||i.length===n.size).some(i=>i.every(o=>n.has(o)))}function bf(e,n){return n.includes(e)?"code":"key"}const Cw=()=>{const e=ke();return T.useMemo(()=>({zoomIn:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomOut:n=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:n?.duration}):Promise.resolve(!1)},zoomTo:(n,r)=>{const{panZoom:i}=e.getState();return i?i.scaleTo(n,{duration:r?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(n,r)=>{const{transform:[i,o,a],panZoom:s}=e.getState();return s?(await s.setViewport({x:n.x??i,y:n.y??o,zoom:n.zoom??a},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[n,r,i]=e.getState().transform;return{x:n,y:r,zoom:i}},setCenter:async(n,r,i)=>e.getState().setCenter(n,r,i),fitBounds:async(n,r)=>{const{width:i,height:o,minZoom:a,maxZoom:s,panZoom:u}=e.getState(),l=el(n,i,o,a,s,r?.padding??.1);return u?(await u.setViewport(l,{duration:r?.duration,ease:r?.ease,interpolate:r?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(n,r={})=>{const{transform:i,snapGrid:o,snapToGrid:a,domNode:s}=e.getState();if(!s)return n;const{x:u,y:l}=s.getBoundingClientRect(),c={x:n.x-u,y:n.y-l},d=r.snapGrid??o,f=r.snapToGrid??a;return Pn(c,i,f,d)},flowToScreenPosition:n=>{const{transform:r,domNode:i}=e.getState();if(!i)return n;const{x:o,y:a}=i.getBoundingClientRect(),s=er(n,r);return{x:s.x+o,y:s.y+a}}}),[])};function $y(e,n){const r=[],i=new Map,o=[];for(const a of e)if(a.type==="add"){o.push(a);continue}else if(a.type==="remove"||a.type==="replace")i.set(a.id,[a]);else{const s=i.get(a.id);s?s.push(a):i.set(a.id,[a])}for(const a of n){const s=i.get(a.id);if(!s){r.push(a);continue}if(s[0].type==="remove")continue;if(s[0].type==="replace"){r.push({...s[0].item});continue}const u={...a};for(const l of s)Ew(l,u);r.push(u)}return o.length&&o.forEach(a=>{a.index!==void 0?r.splice(a.index,0,{...a.item}):r.push({...a.item})}),r}function Ew(e,n){switch(e.type){case"select":{n.selected=e.selected;break}case"position":{typeof e.position<"u"&&(n.position=e.position),typeof e.dragging<"u"&&(n.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(n.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(n.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(n.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(n.resizing=e.resizing);break}}}function By(e,n){return $y(e,n)}function Hy(e,n){return $y(e,n)}function Rt(e,n){return{id:e,type:"select",selected:n}}function Wt(e,n=new Set,r=!1){const i=[];for(const[o,a]of e){const s=n.has(o);!(a.selected===void 0&&!s)&&a.selected!==s&&(r&&(a.selected=s),i.push(Rt(a.id,s)))}return i}function _f({items:e=[],lookup:n}){const r=[],i=new Map(e.map(o=>[o.id,o]));for(const[o,a]of e.entries()){const s=n.get(a.id),u=s?.internals?.userNode??s;u!==void 0&&u!==a&&r.push({id:a.id,item:a,type:"replace"}),u===void 0&&r.push({item:a,type:"add",index:o})}for(const[o]of n)i.get(o)===void 0&&r.push({id:o,type:"remove"});return r}function xf(e){return{id:e.id,type:"remove"}}const wf=e=>t1(e),Sw=e=>fy(e);function Uy(e){return T.forwardRef(e)}const kw=typeof window<"u"?T.useLayoutEffect:T.useEffect;function Cf(e){const[n,r]=T.useState(BigInt(0)),[i]=T.useState(()=>Nw(()=>r(o=>o+BigInt(1))));return kw(()=>{const o=i.get();o.length&&(e(o),i.reset())},[n]),i}function Nw(e){let n=[];return{get:()=>n,reset:()=>{n=[]},push:r=>{n.push(r),e()}}}const Vy=T.createContext(null);function Mw({children:e}){const n=ke(),r=T.useCallback(u=>{const{nodes:l=[],setNodes:c,hasDefaultNodes:d,onNodesChange:f,nodeLookup:h,fitViewQueued:p,onNodesChangeMiddlewareMap:m}=n.getState();let b=l;for(const g of u)b=typeof g=="function"?g(b):g;let v=_f({items:b,lookup:h});for(const g of m.values())v=g(v);d&&c(b),v.length>0?f?.(v):p&&window.requestAnimationFrame(()=>{const{fitViewQueued:g,nodes:_,setNodes:y}=n.getState();g&&y(_)})},[]),i=Cf(r),o=T.useCallback(u=>{const{edges:l=[],setEdges:c,hasDefaultEdges:d,onEdgesChange:f,edgeLookup:h}=n.getState();let p=l;for(const m of u)p=typeof m=="function"?m(p):m;d?c(p):f&&f(_f({items:p,lookup:h}))},[]),a=Cf(o),s=T.useMemo(()=>({nodeQueue:i,edgeQueue:a}),[]);return E.jsx(Vy.Provider,{value:s,children:e})}function Aw(){const e=T.useContext(Vy);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Rw=e=>!!e.panZoom;function ul(){const e=Cw(),n=ke(),r=Aw(),i=me(Rw),o=T.useMemo(()=>{const a=f=>n.getState().nodeLookup.get(f),s=f=>{r.nodeQueue.push(f)},u=f=>{r.edgeQueue.push(f)},l=f=>{const{nodeLookup:h,nodeOrigin:p}=n.getState(),m=wf(f)?f:h.get(f.id),b=m.parentId?vy(m.position,m.measured,m.parentId,h,p):m.position,v={...m,position:b,width:m.measured?.width??m.width,height:m.measured?.height??m.height};return Xt(v)},c=(f,h,p={replace:!1})=>{s(m=>m.map(b=>{if(b.id===f){const v=typeof h=="function"?h(b):h;return p.replace&&wf(v)?v:{...b,...v}}return b}))},d=(f,h,p={replace:!1})=>{u(m=>m.map(b=>{if(b.id===f){const v=typeof h=="function"?h(b):h;return p.replace&&Sw(v)?v:{...b,...v}}return b}))};return{getNodes:()=>n.getState().nodes.map(f=>({...f})),getNode:f=>a(f)?.internals.userNode,getInternalNode:a,getEdges:()=>{const{edges:f=[]}=n.getState();return f.map(h=>({...h}))},getEdge:f=>n.getState().edgeLookup.get(f),setNodes:s,setEdges:u,addNodes:f=>{const h=Array.isArray(f)?f:[f];r.nodeQueue.push(p=>[...p,...h])},addEdges:f=>{const h=Array.isArray(f)?f:[f];r.edgeQueue.push(p=>[...p,...h])},toObject:()=>{const{nodes:f=[],edges:h=[],transform:p}=n.getState(),[m,b,v]=p;return{nodes:f.map(g=>({...g})),edges:h.map(g=>({...g})),viewport:{x:m,y:b,zoom:v}}},deleteElements:async({nodes:f=[],edges:h=[]})=>{const{nodes:p,edges:m,onNodesDelete:b,onEdgesDelete:v,triggerNodeChanges:g,triggerEdgeChanges:_,onDelete:y,onBeforeDelete:x}=n.getState(),{nodes:w,edges:C}=await a1({nodesToRemove:f,edgesToRemove:h,nodes:p,edges:m,onBeforeDelete:x}),S=C.length>0,k=w.length>0;if(S){const A=C.map(xf);v?.(C),_(A)}if(k){const A=w.map(xf);b?.(w),g(A)}return(k||S)&&y?.({nodes:w,edges:C}),{deletedNodes:w,deletedEdges:C}},getIntersectingNodes:(f,h=!0,p)=>{const m=Ql(f),b=m?f:l(f),v=p!==void 0;return b?(p||n.getState().nodes).filter(g=>{const _=n.getState().nodeLookup.get(g.id);if(_&&!m&&(g.id===f.id||!_.internals.positionAbsolute))return!1;const y=Xt(v?g:_),x=Sn(y,b);return h&&x>0||x>=y.width*y.height||x>=b.width*b.height}):[]},isNodeIntersecting:(f,h,p=!0)=>{const b=Ql(f)?f:l(f);if(!b)return!1;const v=Sn(b,h);return p&&v>0||v>=h.width*h.height||v>=b.width*b.height},updateNode:c,updateNodeData:(f,h,p={replace:!1})=>{c(f,m=>{const b=typeof h=="function"?h(m):h;return p.replace?{...m,data:b}:{...m,data:{...m.data,...b}}},p)},updateEdge:d,updateEdgeData:(f,h,p={replace:!1})=>{d(f,m=>{const b=typeof h=="function"?h(m):h;return p.replace?{...m,data:b}:{...m,data:{...m.data,...b}}},p)},getNodesBounds:f=>{const{nodeLookup:h,nodeOrigin:p}=n.getState();return n1(f,{nodeLookup:h,nodeOrigin:p})},getHandleConnections:({type:f,id:h,nodeId:p})=>Array.from(n.getState().connectionLookup.get(`${p}-${f}${h?`-${h}`:""}`)?.values()??[]),getNodeConnections:({type:f,handleId:h,nodeId:p})=>Array.from(n.getState().connectionLookup.get(`${p}${f?h?`-${f}-${h}`:`-${f}`:""}`)?.values()??[]),fitView:async f=>{const h=n.getState().fitViewResolver??l1();return n.setState({fitViewQueued:!0,fitViewOptions:f,fitViewResolver:h}),r.nodeQueue.push(p=>[...p]),h.promise}}},[]);return T.useMemo(()=>({...o,...e,viewportInitialized:i}),[i])}const Ef=e=>e.selected,Iw=typeof window<"u"?window:void 0;function Tw({deleteKeyCode:e,multiSelectionKeyCode:n}){const r=ke(),{deleteElements:i}=ul(),o=Nn(e,{actInsideInputWithModifier:!1}),a=Nn(n,{target:Iw});T.useEffect(()=>{if(o){const{edges:s,nodes:u}=r.getState();i({nodes:u.filter(Ef),edges:s.filter(Ef)}),r.setState({nodesSelectionActive:!1})}},[o]),T.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])}function Pw(e){const n=ke();T.useEffect(()=>{const r=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const i=tl(e.current);(i.height===0||i.width===0)&&n.getState().onError?.("004",ct.error004()),n.setState({width:i.width||500,height:i.height||500})};if(e.current){r(),window.addEventListener("resize",r);const i=new ResizeObserver(()=>r());return i.observe(e.current),()=>{window.removeEventListener("resize",r),i&&e.current&&i.unobserve(e.current)}}},[])}const hr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ow=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function jw({onPaneContextMenu:e,zoomOnScroll:n=!0,zoomOnPinch:r=!0,panOnScroll:i=!1,panOnScrollSpeed:o=.5,panOnScrollMode:a=Pt.Free,zoomOnDoubleClick:s=!0,panOnDrag:u=!0,defaultViewport:l,translateExtent:c,minZoom:d,maxZoom:f,zoomActivationKeyCode:h,preventScrolling:p=!0,children:m,noWheelClassName:b,noPanClassName:v,onViewportChange:g,isControlledViewport:_,paneClickDistance:y,selectionOnDrag:x}){const w=ke(),C=T.useRef(null),{userSelectionActive:S,lib:k,connectionInProgress:A}=me(Ow,Se),N=Nn(h),M=T.useRef();Pw(C);const I=T.useCallback(O=>{g?.({x:O[0],y:O[1],zoom:O[2]}),_||w.setState({transform:O})},[g,_]);return T.useEffect(()=>{if(C.current){M.current=G1({domNode:C.current,minZoom:d,maxZoom:f,translateExtent:c,viewport:l,onDraggingChange:j=>w.setState({paneDragging:j}),onPanZoomStart:(j,L)=>{const{onViewportChangeStart:z,onMoveStart:F}=w.getState();F?.(j,L),z?.(L)},onPanZoom:(j,L)=>{const{onViewportChange:z,onMove:F}=w.getState();F?.(j,L),z?.(L)},onPanZoomEnd:(j,L)=>{const{onViewportChangeEnd:z,onMoveEnd:F}=w.getState();F?.(j,L),z?.(L)}});const{x:O,y:R,zoom:P}=M.current.getViewport();return w.setState({panZoom:M.current,transform:[O,R,P],domNode:C.current.closest(".react-flow")}),()=>{M.current?.destroy()}}},[]),T.useEffect(()=>{M.current?.update({onPaneContextMenu:e,zoomOnScroll:n,zoomOnPinch:r,panOnScroll:i,panOnScrollSpeed:o,panOnScrollMode:a,zoomOnDoubleClick:s,panOnDrag:u,zoomActivationKeyPressed:N,preventScrolling:p,noPanClassName:v,userSelectionActive:S,noWheelClassName:b,lib:k,onTransformChange:I,connectionInProgress:A,selectionOnDrag:x,paneClickDistance:y})},[e,n,r,i,o,a,s,u,N,p,v,S,b,k,I,A,x,y]),E.jsx("div",{className:"react-flow__renderer",ref:C,style:hr,children:m})}const qw=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Dw(){const{userSelectionActive:e,userSelectionRect:n}=me(qw,Se);return e&&n?E.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:n.width,height:n.height,transform:`translate(${n.x}px, ${n.y}px)`}}):null}const Wr=(e,n)=>r=>{r.target===n.current&&e?.(r)},Lw=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function zw({isSelecting:e,selectionKeyPressed:n,selectionMode:r=En.Full,panOnDrag:i,paneClickDistance:o,selectionOnDrag:a,onSelectionStart:s,onSelectionEnd:u,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:f,onPaneMouseMove:h,onPaneMouseLeave:p,children:m}){const b=ke(),{userSelectionActive:v,elementsSelectable:g,dragging:_,connectionInProgress:y}=me(Lw,Se),x=g&&(e||v),w=T.useRef(null),C=T.useRef(),S=T.useRef(new Set),k=T.useRef(new Set),A=T.useRef(!1),N=z=>{if(A.current||y){A.current=!1;return}l?.(z),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},M=z=>{if(Array.isArray(i)&&i?.includes(2)){z.preventDefault();return}c?.(z)},I=d?z=>d(z):void 0,O=z=>{A.current&&(z.stopPropagation(),A.current=!1)},R=z=>{const{domNode:F}=b.getState();if(C.current=F?.getBoundingClientRect(),!C.current)return;const Y=z.target===w.current;if(!Y&&!!z.target.closest(".nokey")||!e||!(a&&Y||n)||z.button!==0||!z.isPrimary)return;z.target?.setPointerCapture?.(z.pointerId),A.current=!1;const{x:Q,y:q}=et(z.nativeEvent,C.current);b.setState({userSelectionRect:{width:0,height:0,startX:Q,startY:q,x:Q,y:q}}),Y||(z.stopPropagation(),z.preventDefault())},P=z=>{const{userSelectionRect:F,transform:Y,nodeLookup:Z,edgeLookup:W,connectionLookup:Q,triggerNodeChanges:q,triggerEdgeChanges:$,defaultEdgeOptions:H,resetSelectedElements:U}=b.getState();if(!C.current||!F)return;const{x:V,y:B}=et(z.nativeEvent,C.current),{startX:K,startY:J}=F;if(!A.current){const le=n?0:o;if(Math.hypot(V-K,B-J)<=le)return;U(),s?.(z)}A.current=!0;const oe={startX:K,startY:J,x:V<K?V:K,y:B<J?B:J,width:Math.abs(V-K),height:Math.abs(B-J)},te=S.current,ce=k.current;S.current=new Set(Jc(Z,oe,Y,r===En.Partial,!0).map(le=>le.id)),k.current=new Set;const re=H?.selectable??!0;for(const le of S.current){const ae=Q.get(le);if(ae)for(const{edgeId:Ae}of ae.values()){const Me=W.get(Ae);Me&&(Me.selectable??re)&&k.current.add(Ae)}}if(!Jl(te,S.current)){const le=Wt(Z,S.current,!0);q(le)}if(!Jl(ce,k.current)){const le=Wt(W,k.current);$(le)}b.setState({userSelectionRect:oe,userSelectionActive:!0,nodesSelectionActive:!1})},j=z=>{z.button===0&&(z.target?.releasePointerCapture?.(z.pointerId),!v&&z.target===w.current&&b.getState().userSelectionRect&&N?.(z),b.setState({userSelectionActive:!1,userSelectionRect:null}),A.current&&(u?.(z),b.setState({nodesSelectionActive:S.current.size>0})))},L=i===!0||Array.isArray(i)&&i.includes(0);return E.jsxs("div",{className:Ie(["react-flow__pane",{draggable:L,dragging:_,selection:e}]),onClick:x?void 0:Wr(N,w),onContextMenu:Wr(M,w),onWheel:Wr(I,w),onPointerEnter:x?void 0:f,onPointerMove:x?P:h,onPointerUp:x?j:void 0,onPointerDownCapture:x?R:void 0,onClickCapture:x?O:void 0,onPointerLeave:p,ref:w,style:hr,children:[m,E.jsx(Dw,{})]})}function Mc({id:e,store:n,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:o,unselectNodesAndEdges:a,multiSelectionActive:s,nodeLookup:u,onError:l}=n.getState(),c=u.get(e);if(!c){l?.("012",ct.error012(e));return}n.setState({nodesSelectionActive:!1}),c.selected?(r||c.selected&&s)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>i?.current?.blur())):o([e])}function Gy({nodeRef:e,disabled:n=!1,noDragClassName:r,handleSelector:i,nodeId:o,isSelectable:a,nodeClickDistance:s}){const u=ke(),[l,c]=T.useState(!1),d=T.useRef();return T.useEffect(()=>{d.current=T1({getStoreItems:()=>u.getState(),onNodeMouseDown:f=>{Mc({id:f,store:u,nodeRef:e})},onDragStart:()=>{c(!0)},onDragStop:()=>{c(!1)}})},[]),T.useEffect(()=>{if(n)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:r,handleSelector:i,domNode:e.current,isSelectable:a,nodeId:o,nodeClickDistance:s}),()=>{d.current?.destroy()}},[r,i,n,a,e,o]),l}const Fw=e=>n=>n.selected&&(n.draggable||e&&typeof n.draggable>"u");function Wy(){const e=ke();return T.useCallback(r=>{const{nodeExtent:i,snapToGrid:o,snapGrid:a,nodesDraggable:s,onError:u,updateNodePositions:l,nodeLookup:c,nodeOrigin:d}=e.getState(),f=new Map,h=Fw(s),p=o?a[0]:5,m=o?a[1]:5,b=r.direction.x*p*r.factor,v=r.direction.y*m*r.factor;for(const[,g]of c){if(!h(g))continue;let _={x:g.internals.positionAbsolute.x+b,y:g.internals.positionAbsolute.y+v};o&&(_=Tn(_,a));const{position:y,positionAbsolute:x}=dy({nodeId:g.id,nextPosition:_,nodeLookup:c,nodeExtent:i,nodeOrigin:d,onError:u});g.position=y,g.internals.positionAbsolute=x,f.set(g.id,g)}l(f)},[])}const cl=T.createContext(null),$w=cl.Provider;cl.Consumer;const Yy=()=>T.useContext(cl),Bw=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Hw=(e,n,r)=>i=>{const{connectionClickStartHandle:o,connectionMode:a,connection:s}=i,{fromHandle:u,toHandle:l,isValid:c}=s,d=l?.nodeId===e&&l?.id===n&&l?.type===r;return{connectingFrom:u?.nodeId===e&&u?.id===n&&u?.type===r,connectingTo:d,clickConnecting:o?.nodeId===e&&o?.id===n&&o?.type===r,isPossibleEndHandle:a===Zt.Strict?u?.type!==r:e!==u?.nodeId||n!==u?.id,connectionInProcess:!!u,clickConnectionInProcess:!!o,valid:d&&c}};function Uw({type:e="source",position:n=ne.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:o=!0,isConnectableEnd:a=!0,id:s,onConnect:u,children:l,className:c,onMouseDown:d,onTouchStart:f,...h},p){const m=s||null,b=e==="target",v=ke(),g=Yy(),{connectOnClick:_,noPanClassName:y,rfId:x}=me(Bw,Se),{connectingFrom:w,connectingTo:C,clickConnecting:S,isPossibleEndHandle:k,connectionInProcess:A,clickConnectionInProcess:N,valid:M}=me(Hw(g,m,e),Se);g||v.getState().onError?.("010",ct.error010());const I=P=>{const{defaultEdgeOptions:j,onConnect:L,hasDefaultEdges:z}=v.getState(),F={...j,...P};if(z){const{edges:Y,setEdges:Z}=v.getState();Z(nl(F,Y))}L?.(F),u?.(F)},O=P=>{if(!g)return;const j=_y(P.nativeEvent);if(o&&(j&&P.button===0||!j)){const L=v.getState();Nc.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:L.autoPanOnConnect,connectionMode:L.connectionMode,connectionRadius:L.connectionRadius,domNode:L.domNode,nodeLookup:L.nodeLookup,lib:L.lib,isTarget:b,handleId:m,nodeId:g,flowId:L.rfId,panBy:L.panBy,cancelConnection:L.cancelConnection,onConnectStart:L.onConnectStart,onConnectEnd:L.onConnectEnd,updateConnection:L.updateConnection,onConnect:I,isValidConnection:r||L.isValidConnection,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,autoPanSpeed:L.autoPanSpeed,dragThreshold:L.connectionDragThreshold})}j?d?.(P):f?.(P)},R=P=>{const{onClickConnectStart:j,onClickConnectEnd:L,connectionClickStartHandle:z,connectionMode:F,isValidConnection:Y,lib:Z,rfId:W,nodeLookup:Q,connection:q}=v.getState();if(!g||!z&&!o)return;if(!z){j?.(P.nativeEvent,{nodeId:g,handleId:m,handleType:e}),v.setState({connectionClickStartHandle:{nodeId:g,type:e,id:m}});return}const $=yy(P.target),H=r||Y,{connection:U,isValid:V}=Nc.isValid(P.nativeEvent,{handle:{nodeId:g,id:m,type:e},connectionMode:F,fromNodeId:z.nodeId,fromHandleId:z.id||null,fromType:z.type,isValidConnection:H,flowId:W,doc:$,lib:Z,nodeLookup:Q});V&&U&&I(U);const B=structuredClone(q);delete B.inProgress,B.toPosition=B.toHandle?B.toHandle.position:null,L?.(P,B),v.setState({connectionClickStartHandle:null})};return E.jsx("div",{"data-handleid":m,"data-nodeid":g,"data-handlepos":n,"data-id":`${x}-${g}-${m}-${e}`,className:Ie(["react-flow__handle",`react-flow__handle-${n}`,"nodrag",y,c,{source:!b,target:b,connectable:i,connectablestart:o,connectableend:a,clickconnecting:S,connectingfrom:w,connectingto:C,valid:M,connectionindicator:i&&(!A||k)&&(A||N?a:o)}]),onMouseDown:O,onTouchStart:O,onClick:_?R:void 0,ref:p,...h,children:l})}const Le=T.memo(Uy(Uw));function Vw({data:e,isConnectable:n,sourcePosition:r=ne.Bottom}){return E.jsxs(E.Fragment,{children:[e?.label,E.jsx(Le,{type:"source",position:r,isConnectable:n})]})}function Gw({data:e,isConnectable:n,targetPosition:r=ne.Top,sourcePosition:i=ne.Bottom}){return E.jsxs(E.Fragment,{children:[E.jsx(Le,{type:"target",position:r,isConnectable:n}),e?.label,E.jsx(Le,{type:"source",position:i,isConnectable:n})]})}function Ww(){return null}function Yw({data:e,isConnectable:n,targetPosition:r=ne.Top}){return E.jsxs(E.Fragment,{children:[E.jsx(Le,{type:"target",position:r,isConnectable:n}),e?.label]})}const tr={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},Sf={input:Vw,default:Gw,output:Yw,group:Ww};function Zw(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Kw=e=>{const{width:n,height:r,x:i,y:o}=In(e.nodeLookup,{filter:a=>!!a.selected});return{width:Je(n)?n:null,height:Je(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${i}px,${o}px)`}};function Xw({onSelectionContextMenu:e,noPanClassName:n,disableKeyboardA11y:r}){const i=ke(),{width:o,height:a,transformString:s,userSelectionActive:u}=me(Kw,Se),l=Wy(),c=T.useRef(null);if(T.useEffect(()=>{r||c.current?.focus({preventScroll:!0})},[r]),Gy({nodeRef:c}),u||!o||!a)return null;const d=e?h=>{const p=i.getState().nodes.filter(m=>m.selected);e(h,p)}:void 0,f=h=>{Object.prototype.hasOwnProperty.call(tr,h.key)&&(h.preventDefault(),l({direction:tr[h.key],factor:h.shiftKey?4:1}))};return E.jsx("div",{className:Ie(["react-flow__nodesselection","react-flow__container",n]),style:{transform:s},children:E.jsx("div",{ref:c,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:r?void 0:-1,onKeyDown:r?void 0:f,style:{width:o,height:a}})})}const kf=typeof window<"u"?window:void 0,Qw=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Zy({children:e,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,paneClickDistance:u,deleteKeyCode:l,selectionKeyCode:c,selectionOnDrag:d,selectionMode:f,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:m,panActivationKeyCode:b,zoomActivationKeyCode:v,elementsSelectable:g,zoomOnScroll:_,zoomOnPinch:y,panOnScroll:x,panOnScrollSpeed:w,panOnScrollMode:C,zoomOnDoubleClick:S,panOnDrag:k,defaultViewport:A,translateExtent:N,minZoom:M,maxZoom:I,preventScrolling:O,onSelectionContextMenu:R,noWheelClassName:P,noPanClassName:j,disableKeyboardA11y:L,onViewportChange:z,isControlledViewport:F}){const{nodesSelectionActive:Y,userSelectionActive:Z}=me(Qw,Se),W=Nn(c,{target:kf}),Q=Nn(b,{target:kf}),q=Q||k,$=Q||x,H=d&&q!==!0,U=W||Z||H;return Tw({deleteKeyCode:l,multiSelectionKeyCode:m}),E.jsx(jw,{onPaneContextMenu:a,elementsSelectable:g,zoomOnScroll:_,zoomOnPinch:y,panOnScroll:$,panOnScrollSpeed:w,panOnScrollMode:C,zoomOnDoubleClick:S,panOnDrag:!W&&q,defaultViewport:A,translateExtent:N,minZoom:M,maxZoom:I,zoomActivationKeyCode:v,preventScrolling:O,noWheelClassName:P,noPanClassName:j,onViewportChange:z,isControlledViewport:F,paneClickDistance:u,selectionOnDrag:H,children:E.jsxs(zw,{onSelectionStart:h,onSelectionEnd:p,onPaneClick:n,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:o,onPaneContextMenu:a,onPaneScroll:s,panOnDrag:q,isSelecting:!!U,selectionMode:f,selectionKeyPressed:W,paneClickDistance:u,selectionOnDrag:H,children:[e,Y&&E.jsx(Xw,{onSelectionContextMenu:R,noPanClassName:j,disableKeyboardA11y:L})]})})}Zy.displayName="FlowRenderer";const Jw=T.memo(Zy),e2=e=>n=>e?Jc(n.nodeLookup,{x:0,y:0,width:n.width,height:n.height},n.transform,!0).map(r=>r.id):Array.from(n.nodeLookup.keys());function t2(e){return me(T.useCallback(e2(e),[e]),Se)}const n2=e=>e.updateNodeInternals;function r2(){const e=me(n2),[n]=T.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const i=new Map;r.forEach(o=>{const a=o.target.getAttribute("data-id");i.set(a,{id:a,nodeElement:o.target,force:!0})}),e(i)}));return T.useEffect(()=>()=>{n?.disconnect()},[n]),n}function i2({node:e,nodeType:n,hasDimensions:r,resizeObserver:i}){const o=ke(),a=T.useRef(null),s=T.useRef(null),u=T.useRef(e.sourcePosition),l=T.useRef(e.targetPosition),c=T.useRef(n),d=r&&!!e.internals.handleBounds;return T.useEffect(()=>{a.current&&!e.hidden&&(!d||s.current!==a.current)&&(s.current&&i?.unobserve(s.current),i?.observe(a.current),s.current=a.current)},[d,e.hidden]),T.useEffect(()=>()=>{s.current&&(i?.unobserve(s.current),s.current=null)},[]),T.useEffect(()=>{if(a.current){const f=c.current!==n,h=u.current!==e.sourcePosition,p=l.current!==e.targetPosition;(f||h||p)&&(c.current=n,u.current=e.sourcePosition,l.current=e.targetPosition,o.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:a.current,force:!0}]])))}},[e.id,n,e.sourcePosition,e.targetPosition]),a}function o2({id:e,onClick:n,onMouseEnter:r,onMouseMove:i,onMouseLeave:o,onContextMenu:a,onDoubleClick:s,nodesDraggable:u,elementsSelectable:l,nodesConnectable:c,nodesFocusable:d,resizeObserver:f,noDragClassName:h,noPanClassName:p,disableKeyboardA11y:m,rfId:b,nodeTypes:v,nodeClickDistance:g,onError:_}){const{node:y,internals:x,isParent:w}=me(V=>{const B=V.nodeLookup.get(e),K=V.parentLookup.has(e);return{node:B,internals:B.internals,isParent:K}},Se);let C=y.type||"default",S=v?.[C]||Sf[C];S===void 0&&(_?.("003",ct.error003(C)),C="default",S=v?.default||Sf.default);const k=!!(y.draggable||u&&typeof y.draggable>"u"),A=!!(y.selectable||l&&typeof y.selectable>"u"),N=!!(y.connectable||c&&typeof y.connectable>"u"),M=!!(y.focusable||d&&typeof y.focusable>"u"),I=ke(),O=my(y),R=i2({node:y,nodeType:C,hasDimensions:O,resizeObserver:f}),P=Gy({nodeRef:R,disabled:y.hidden||!k,noDragClassName:h,handleSelector:y.dragHandle,nodeId:e,isSelectable:A,nodeClickDistance:g}),j=Wy();if(y.hidden)return null;const L=yt(y),z=Zw(y),F=A||k||n||r||i||o,Y=r?V=>r(V,{...x.userNode}):void 0,Z=i?V=>i(V,{...x.userNode}):void 0,W=o?V=>o(V,{...x.userNode}):void 0,Q=a?V=>a(V,{...x.userNode}):void 0,q=s?V=>s(V,{...x.userNode}):void 0,$=V=>{const{selectNodesOnDrag:B,nodeDragThreshold:K}=I.getState();A&&(!B||!k||K>0)&&Mc({id:e,store:I,nodeRef:R}),n&&n(V,{...x.userNode})},H=V=>{if(!(by(V.nativeEvent)||m)){if(sy.includes(V.key)&&A){const B=V.key==="Escape";Mc({id:e,store:I,unselect:B,nodeRef:R})}else if(k&&y.selected&&Object.prototype.hasOwnProperty.call(tr,V.key)){V.preventDefault();const{ariaLabelConfig:B}=I.getState();I.setState({ariaLiveMessage:B["node.a11yDescription.ariaLiveMessage"]({direction:V.key.replace("Arrow","").toLowerCase(),x:~~x.positionAbsolute.x,y:~~x.positionAbsolute.y})}),j({direction:tr[V.key],factor:V.shiftKey?4:1})}}},U=()=>{if(m||!R.current?.matches(":focus-visible"))return;const{transform:V,width:B,height:K,autoPanOnNodeFocus:J,setCenter:oe}=I.getState();if(!J)return;Jc(new Map([[e,y]]),{x:0,y:0,width:B,height:K},V,!0).length>0||oe(y.position.x+L.width/2,y.position.y+L.height/2,{zoom:V[2]})};return E.jsx("div",{className:Ie(["react-flow__node",`react-flow__node-${C}`,{[p]:k},y.className,{selected:y.selected,selectable:A,parent:w,draggable:k,dragging:P}]),ref:R,style:{zIndex:x.z,transform:`translate(${x.positionAbsolute.x}px,${x.positionAbsolute.y}px)`,pointerEvents:F?"all":"none",visibility:O?"visible":"hidden",...y.style,...z},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:Y,onMouseMove:Z,onMouseLeave:W,onContextMenu:Q,onClick:$,onDoubleClick:q,onKeyDown:M?H:void 0,tabIndex:M?0:void 0,onFocus:M?U:void 0,role:y.ariaRole??(M?"group":void 0),"aria-roledescription":"node","aria-describedby":m?void 0:`${Ly}-${b}`,"aria-label":y.ariaLabel,...y.domAttributes,children:E.jsx($w,{value:e,children:E.jsx(S,{id:e,data:y.data,type:C,positionAbsoluteX:x.positionAbsolute.x,positionAbsoluteY:x.positionAbsolute.y,selected:y.selected??!1,selectable:A,draggable:k,deletable:y.deletable??!0,isConnectable:N,sourcePosition:y.sourcePosition,targetPosition:y.targetPosition,dragging:P,dragHandle:y.dragHandle,zIndex:x.z,parentId:y.parentId,...L})})})}var a2=T.memo(o2);const s2=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function Ky(e){const{nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:o,onError:a}=me(s2,Se),s=t2(e.onlyRenderVisibleElements),u=r2();return E.jsx("div",{className:"react-flow__nodes",style:hr,children:s.map(l=>E.jsx(a2,{id:l,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:u,nodesDraggable:n,nodesConnectable:r,nodesFocusable:i,elementsSelectable:o,nodeClickDistance:e.nodeClickDistance,onError:a},l))})}Ky.displayName="NodeRenderer";const u2=T.memo(Ky);function c2(e){return me(T.useCallback(r=>{if(!e)return r.edges.map(o=>o.id);const i=[];if(r.width&&r.height)for(const o of r.edges){const a=r.nodeLookup.get(o.source),s=r.nodeLookup.get(o.target);a&&s&&p1({sourceNode:a,targetNode:s,width:r.width,height:r.height,transform:r.transform})&&i.push(o.id)}return i},[e]),Se)}const l2=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e}};return E.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},f2=({color:e="none",strokeWidth:n=1})=>{const r={strokeWidth:n,...e&&{stroke:e,fill:e}};return E.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},Nf={[Nt.Arrow]:l2,[Nt.ArrowClosed]:f2};function d2(e){const n=ke();return T.useMemo(()=>Object.prototype.hasOwnProperty.call(Nf,e)?Nf[e]:(n.getState().onError?.("009",ct.error009(e)),null),[e])}const h2=({id:e,type:n,color:r,width:i=12.5,height:o=12.5,markerUnits:a="strokeWidth",strokeWidth:s,orient:u="auto-start-reverse"})=>{const l=d2(n);return l?E.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${i}`,markerHeight:`${o}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:u,refX:"0",refY:"0",children:E.jsx(l,{color:r,strokeWidth:s})}):null},Xy=({defaultColor:e,rfId:n})=>{const r=me(a=>a.edges),i=me(a=>a.defaultEdgeOptions),o=T.useMemo(()=>x1(r,{id:n,defaultColor:e,defaultMarkerStart:i?.markerStart,defaultMarkerEnd:i?.markerEnd}),[r,i,n,e]);return o.length?E.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:E.jsx("defs",{children:o.map(a=>E.jsx(h2,{id:a.id,type:a.type,color:a.color,width:a.width,height:a.height,markerUnits:a.markerUnits,strokeWidth:a.strokeWidth,orient:a.orient},a.id))})}):null};Xy.displayName="MarkerDefinitions";var p2=T.memo(Xy);function Qy({x:e,y:n,label:r,labelStyle:i,labelShowBg:o=!0,labelBgStyle:a,labelBgPadding:s=[2,4],labelBgBorderRadius:u=2,children:l,className:c,...d}){const[f,h]=T.useState({x:1,y:0,width:0,height:0}),p=Ie(["react-flow__edge-textwrapper",c]),m=T.useRef(null);return T.useEffect(()=>{if(m.current){const b=m.current.getBBox();h({x:b.x,y:b.y,width:b.width,height:b.height})}},[r]),r?E.jsxs("g",{transform:`translate(${e-f.width/2} ${n-f.height/2})`,className:p,visibility:f.width?"visible":"hidden",...d,children:[o&&E.jsx("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:a,rx:u,ry:u}),E.jsx("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:m,style:i,children:r}),l]}):null}Qy.displayName="EdgeText";const g2=T.memo(Qy);function pr({path:e,labelX:n,labelY:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l,interactionWidth:c=20,...d}){return E.jsxs(E.Fragment,{children:[E.jsx("path",{...d,d:e,fill:"none",className:Ie(["react-flow__edge-path",d.className])}),c?E.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:c,className:"react-flow__edge-interaction"}):null,i&&Je(n)&&Je(r)?E.jsx(g2,{x:n,y:r,label:i,labelStyle:o,labelShowBg:a,labelBgStyle:s,labelBgPadding:u,labelBgBorderRadius:l}):null]})}function Mf({pos:e,x1:n,y1:r,x2:i,y2:o}){return e===ne.Left||e===ne.Right?[.5*(n+i),r]:[n,.5*(r+o)]}function Jy({sourceX:e,sourceY:n,sourcePosition:r=ne.Bottom,targetX:i,targetY:o,targetPosition:a=ne.Top}){const[s,u]=Mf({pos:r,x1:e,y1:n,x2:i,y2:o}),[l,c]=Mf({pos:a,x1:i,y1:o,x2:e,y2:n}),[d,f,h,p]=xy({sourceX:e,sourceY:n,targetX:i,targetY:o,sourceControlX:s,sourceControlY:u,targetControlX:l,targetControlY:c});return[`M${e},${n} C${s},${u} ${l},${c} ${i},${o}`,d,f,h,p]}function e0(e){return T.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,sourcePosition:s,targetPosition:u,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:v,interactionWidth:g})=>{const[_,y,x]=Jy({sourceX:r,sourceY:i,sourcePosition:s,targetX:o,targetY:a,targetPosition:u}),w=e.isInternal?void 0:n;return E.jsx(pr,{id:w,path:_,labelX:y,labelY:x,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:v,interactionWidth:g})})}const m2=e0({isInternal:!1}),t0=e0({isInternal:!0});m2.displayName="SimpleBezierEdge";t0.displayName="SimpleBezierEdgeInternal";function n0(e){return T.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,sourcePosition:p=ne.Bottom,targetPosition:m=ne.Top,markerEnd:b,markerStart:v,pathOptions:g,interactionWidth:_})=>{const[y,x,w]=Ec({sourceX:r,sourceY:i,sourcePosition:p,targetX:o,targetY:a,targetPosition:m,borderRadius:g?.borderRadius,offset:g?.offset,stepPosition:g?.stepPosition}),C=e.isInternal?void 0:n;return E.jsx(pr,{id:C,path:y,labelX:x,labelY:w,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:b,markerStart:v,interactionWidth:_})})}const r0=n0({isInternal:!1}),i0=n0({isInternal:!0});r0.displayName="SmoothStepEdge";i0.displayName="SmoothStepEdgeInternal";function o0(e){return T.memo(({id:n,...r})=>{const i=e.isInternal?void 0:n;return E.jsx(r0,{...r,id:i,pathOptions:T.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])})})}const v2=o0({isInternal:!1}),a0=o0({isInternal:!0});v2.displayName="StepEdge";a0.displayName="StepEdgeInternal";function s0(e){return T.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:m,interactionWidth:b})=>{const[v,g,_]=Ey({sourceX:r,sourceY:i,targetX:o,targetY:a}),y=e.isInternal?void 0:n;return E.jsx(pr,{id:y,path:v,labelX:g,labelY:_,label:s,labelStyle:u,labelShowBg:l,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:f,style:h,markerEnd:p,markerStart:m,interactionWidth:b})})}const y2=s0({isInternal:!1}),u0=s0({isInternal:!0});y2.displayName="StraightEdge";u0.displayName="StraightEdgeInternal";function c0(e){return T.memo(({id:n,sourceX:r,sourceY:i,targetX:o,targetY:a,sourcePosition:s=ne.Bottom,targetPosition:u=ne.Top,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:v,pathOptions:g,interactionWidth:_})=>{const[y,x,w]=wy({sourceX:r,sourceY:i,sourcePosition:s,targetX:o,targetY:a,targetPosition:u,curvature:g?.curvature}),C=e.isInternal?void 0:n;return E.jsx(pr,{id:C,path:y,labelX:x,labelY:w,label:l,labelStyle:c,labelShowBg:d,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:v,interactionWidth:_})})}const b2=c0({isInternal:!1}),l0=c0({isInternal:!0});b2.displayName="BezierEdge";l0.displayName="BezierEdgeInternal";const Af={default:l0,straight:u0,step:a0,smoothstep:i0,simplebezier:t0},Rf={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},_2=(e,n,r)=>r===ne.Left?e-n:r===ne.Right?e+n:e,x2=(e,n,r)=>r===ne.Top?e-n:r===ne.Bottom?e+n:e,If="react-flow__edgeupdater";function Tf({position:e,centerX:n,centerY:r,radius:i=10,onMouseDown:o,onMouseEnter:a,onMouseOut:s,type:u}){return E.jsx("circle",{onMouseDown:o,onMouseEnter:a,onMouseOut:s,className:Ie([If,`${If}-${u}`]),cx:_2(n,i,e),cy:x2(r,i,e),r:i,stroke:"transparent",fill:"transparent"})}function w2({isReconnectable:e,reconnectRadius:n,edge:r,sourceX:i,sourceY:o,targetX:a,targetY:s,sourcePosition:u,targetPosition:l,onReconnect:c,onReconnectStart:d,onReconnectEnd:f,setReconnecting:h,setUpdateHover:p}){const m=ke(),b=(x,w)=>{if(x.button!==0)return;const{autoPanOnConnect:C,domNode:S,isValidConnection:k,connectionMode:A,connectionRadius:N,lib:M,onConnectStart:I,onConnectEnd:O,cancelConnection:R,nodeLookup:P,rfId:j,panBy:L,updateConnection:z}=m.getState(),F=w.type==="target",Y=(Q,q)=>{h(!1),f?.(Q,r,w.type,q)},Z=Q=>c?.(r,Q),W=(Q,q)=>{h(!0),d?.(x,r,w.type),I?.(Q,q)};Nc.onPointerDown(x.nativeEvent,{autoPanOnConnect:C,connectionMode:A,connectionRadius:N,domNode:S,handleId:w.id,nodeId:w.nodeId,nodeLookup:P,isTarget:F,edgeUpdaterType:w.type,lib:M,flowId:j,cancelConnection:R,panBy:L,isValidConnection:k,onConnect:Z,onConnectStart:W,onConnectEnd:O,onReconnectEnd:Y,updateConnection:z,getTransform:()=>m.getState().transform,getFromHandle:()=>m.getState().connection.fromHandle,dragThreshold:m.getState().connectionDragThreshold,handleDomNode:x.currentTarget})},v=x=>b(x,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),g=x=>b(x,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),_=()=>p(!0),y=()=>p(!1);return E.jsxs(E.Fragment,{children:[(e===!0||e==="source")&&E.jsx(Tf,{position:u,centerX:i,centerY:o,radius:n,onMouseDown:v,onMouseEnter:_,onMouseOut:y,type:"source"}),(e===!0||e==="target")&&E.jsx(Tf,{position:l,centerX:a,centerY:s,radius:n,onMouseDown:g,onMouseEnter:_,onMouseOut:y,type:"target"})]})}function C2({id:e,edgesFocusable:n,edgesReconnectable:r,elementsSelectable:i,onClick:o,onDoubleClick:a,onContextMenu:s,onMouseEnter:u,onMouseMove:l,onMouseLeave:c,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,rfId:m,edgeTypes:b,noPanClassName:v,onError:g,disableKeyboardA11y:_}){let y=me(oe=>oe.edgeLookup.get(e));const x=me(oe=>oe.defaultEdgeOptions);y=x?{...x,...y}:y;let w=y.type||"default",C=b?.[w]||Af[w];C===void 0&&(g?.("011",ct.error011(w)),w="default",C=b?.default||Af.default);const S=!!(y.focusable||n&&typeof y.focusable>"u"),k=typeof f<"u"&&(y.reconnectable||r&&typeof y.reconnectable>"u"),A=!!(y.selectable||i&&typeof y.selectable>"u"),N=T.useRef(null),[M,I]=T.useState(!1),[O,R]=T.useState(!1),P=ke(),{zIndex:j,sourceX:L,sourceY:z,targetX:F,targetY:Y,sourcePosition:Z,targetPosition:W}=me(T.useCallback(oe=>{const te=oe.nodeLookup.get(y.source),ce=oe.nodeLookup.get(y.target);if(!te||!ce)return{zIndex:y.zIndex,...Rf};const re=_1({id:e,sourceNode:te,targetNode:ce,sourceHandle:y.sourceHandle||null,targetHandle:y.targetHandle||null,connectionMode:oe.connectionMode,onError:g});return{zIndex:h1({selected:y.selected,zIndex:y.zIndex,sourceNode:te,targetNode:ce,elevateOnSelect:oe.elevateEdgesOnSelect,zIndexMode:oe.zIndexMode}),...re||Rf}},[y.source,y.target,y.sourceHandle,y.targetHandle,y.selected,y.zIndex]),Se),Q=T.useMemo(()=>y.markerStart?`url('#${Sc(y.markerStart,m)}')`:void 0,[y.markerStart,m]),q=T.useMemo(()=>y.markerEnd?`url('#${Sc(y.markerEnd,m)}')`:void 0,[y.markerEnd,m]);if(y.hidden||L===null||z===null||F===null||Y===null)return null;const $=oe=>{const{addSelectedEdges:te,unselectNodesAndEdges:ce,multiSelectionActive:re}=P.getState();A&&(P.setState({nodesSelectionActive:!1}),y.selected&&re?(ce({nodes:[],edges:[y]}),N.current?.blur()):te([e])),o&&o(oe,y)},H=a?oe=>{a(oe,{...y})}:void 0,U=s?oe=>{s(oe,{...y})}:void 0,V=u?oe=>{u(oe,{...y})}:void 0,B=l?oe=>{l(oe,{...y})}:void 0,K=c?oe=>{c(oe,{...y})}:void 0,J=oe=>{if(!_&&sy.includes(oe.key)&&A){const{unselectNodesAndEdges:te,addSelectedEdges:ce}=P.getState();oe.key==="Escape"?(N.current?.blur(),te({edges:[y]})):ce([e])}};return E.jsx("svg",{style:{zIndex:j},children:E.jsxs("g",{className:Ie(["react-flow__edge",`react-flow__edge-${w}`,y.className,v,{selected:y.selected,animated:y.animated,inactive:!A&&!o,updating:M,selectable:A}]),onClick:$,onDoubleClick:H,onContextMenu:U,onMouseEnter:V,onMouseMove:B,onMouseLeave:K,onKeyDown:S?J:void 0,tabIndex:S?0:void 0,role:y.ariaRole??(S?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":y.ariaLabel===null?void 0:y.ariaLabel||`Edge from ${y.source} to ${y.target}`,"aria-describedby":S?`${zy}-${m}`:void 0,ref:N,...y.domAttributes,children:[!O&&E.jsx(C,{id:e,source:y.source,target:y.target,type:y.type,selected:y.selected,animated:y.animated,selectable:A,deletable:y.deletable??!0,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,sourceX:L,sourceY:z,targetX:F,targetY:Y,sourcePosition:Z,targetPosition:W,data:y.data,style:y.style,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerStart:Q,markerEnd:q,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth}),k&&E.jsx(w2,{edge:y,isReconnectable:k,reconnectRadius:d,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,sourceX:L,sourceY:z,targetX:F,targetY:Y,sourcePosition:Z,targetPosition:W,setUpdateHover:I,setReconnecting:R})]})})}var E2=T.memo(C2);const S2=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function f0({defaultMarkerColor:e,onlyRenderVisibleElements:n,rfId:r,edgeTypes:i,noPanClassName:o,onReconnect:a,onEdgeContextMenu:s,onEdgeMouseEnter:u,onEdgeMouseMove:l,onEdgeMouseLeave:c,onEdgeClick:d,reconnectRadius:f,onEdgeDoubleClick:h,onReconnectStart:p,onReconnectEnd:m,disableKeyboardA11y:b}){const{edgesFocusable:v,edgesReconnectable:g,elementsSelectable:_,onError:y}=me(S2,Se),x=c2(n);return E.jsxs("div",{className:"react-flow__edges",children:[E.jsx(p2,{defaultColor:e,rfId:r}),x.map(w=>E.jsx(E2,{id:w,edgesFocusable:v,edgesReconnectable:g,elementsSelectable:_,noPanClassName:o,onReconnect:a,onContextMenu:s,onMouseEnter:u,onMouseMove:l,onMouseLeave:c,onClick:d,reconnectRadius:f,onDoubleClick:h,onReconnectStart:p,onReconnectEnd:m,rfId:r,onError:y,edgeTypes:i,disableKeyboardA11y:b},w))]})}f0.displayName="EdgeRenderer";const k2=T.memo(f0),N2=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function M2({children:e}){const n=me(N2);return E.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:n},children:e})}function A2(e){const n=ul(),r=T.useRef(!1);T.useEffect(()=>{!r.current&&n.viewportInitialized&&e&&(setTimeout(()=>e(n),1),r.current=!0)},[e,n.viewportInitialized])}const R2=e=>e.panZoom?.syncViewport;function I2(e){const n=me(R2),r=ke();return T.useEffect(()=>{e&&(n?.(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,n]),null}function T2(e){return e.connection.inProgress?{...e.connection,to:Pn(e.connection.to,e.transform)}:{...e.connection}}function P2(e){return T2}function O2(e){const n=P2();return me(n,Se)}const j2=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function q2({containerStyle:e,style:n,type:r,component:i}){const{nodesConnectable:o,width:a,height:s,isValid:u,inProgress:l}=me(j2,Se);return!(a&&o&&l)?null:E.jsx("svg",{style:e,width:a,height:s,className:"react-flow__connectionline react-flow__container",children:E.jsx("g",{className:Ie(["react-flow__connection",ly(u)]),children:E.jsx(d0,{style:n,type:r,CustomComponent:i,isValid:u})})})}const d0=({style:e,type:n=St.Bezier,CustomComponent:r,isValid:i})=>{const{inProgress:o,from:a,fromNode:s,fromHandle:u,fromPosition:l,to:c,toNode:d,toHandle:f,toPosition:h,pointer:p}=O2();if(!o)return;if(r)return E.jsx(r,{connectionLineType:n,connectionLineStyle:e,fromNode:s,fromHandle:u,fromX:a.x,fromY:a.y,toX:c.x,toY:c.y,fromPosition:l,toPosition:h,connectionStatus:ly(i),toNode:d,toHandle:f,pointer:p});let m="";const b={sourceX:a.x,sourceY:a.y,sourcePosition:l,targetX:c.x,targetY:c.y,targetPosition:h};switch(n){case St.Bezier:[m]=wy(b);break;case St.SimpleBezier:[m]=Jy(b);break;case St.Step:[m]=Ec({...b,borderRadius:0});break;case St.SmoothStep:[m]=Ec(b);break;default:[m]=Ey(b)}return E.jsx("path",{d:m,fill:"none",className:"react-flow__connection-path",style:e})};d0.displayName="ConnectionLine";const D2={};function Pf(e=D2){T.useRef(e),ke(),T.useEffect(()=>{},[e])}function L2(){ke(),T.useRef(!1),T.useEffect(()=>{},[])}function h0({nodeTypes:e,edgeTypes:n,onInit:r,onNodeClick:i,onEdgeClick:o,onNodeDoubleClick:a,onEdgeDoubleClick:s,onNodeMouseEnter:u,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,onSelectionContextMenu:f,onSelectionStart:h,onSelectionEnd:p,connectionLineType:m,connectionLineStyle:b,connectionLineComponent:v,connectionLineContainerStyle:g,selectionKeyCode:_,selectionOnDrag:y,selectionMode:x,multiSelectionKeyCode:w,panActivationKeyCode:C,zoomActivationKeyCode:S,deleteKeyCode:k,onlyRenderVisibleElements:A,elementsSelectable:N,defaultViewport:M,translateExtent:I,minZoom:O,maxZoom:R,preventScrolling:P,defaultMarkerColor:j,zoomOnScroll:L,zoomOnPinch:z,panOnScroll:F,panOnScrollSpeed:Y,panOnScrollMode:Z,zoomOnDoubleClick:W,panOnDrag:Q,onPaneClick:q,onPaneMouseEnter:$,onPaneMouseMove:H,onPaneMouseLeave:U,onPaneScroll:V,onPaneContextMenu:B,paneClickDistance:K,nodeClickDistance:J,onEdgeContextMenu:oe,onEdgeMouseEnter:te,onEdgeMouseMove:ce,onEdgeMouseLeave:re,reconnectRadius:le,onReconnect:ae,onReconnectStart:Ae,onReconnectEnd:Me,noDragClassName:je,noWheelClassName:Ue,noPanClassName:G,disableKeyboardA11y:ee,nodeExtent:ie,rfId:pe,viewport:se,onViewportChange:fe}){return Pf(e),Pf(n),L2(),A2(r),I2(se),E.jsx(Jw,{onPaneClick:q,onPaneMouseEnter:$,onPaneMouseMove:H,onPaneMouseLeave:U,onPaneContextMenu:B,onPaneScroll:V,paneClickDistance:K,deleteKeyCode:k,selectionKeyCode:_,selectionOnDrag:y,selectionMode:x,onSelectionStart:h,onSelectionEnd:p,multiSelectionKeyCode:w,panActivationKeyCode:C,zoomActivationKeyCode:S,elementsSelectable:N,zoomOnScroll:L,zoomOnPinch:z,zoomOnDoubleClick:W,panOnScroll:F,panOnScrollSpeed:Y,panOnScrollMode:Z,panOnDrag:Q,defaultViewport:M,translateExtent:I,minZoom:O,maxZoom:R,onSelectionContextMenu:f,preventScrolling:P,noDragClassName:je,noWheelClassName:Ue,noPanClassName:G,disableKeyboardA11y:ee,onViewportChange:fe,isControlledViewport:!!se,children:E.jsxs(M2,{children:[E.jsx(k2,{edgeTypes:n,onEdgeClick:o,onEdgeDoubleClick:s,onReconnect:ae,onReconnectStart:Ae,onReconnectEnd:Me,onlyRenderVisibleElements:A,onEdgeContextMenu:oe,onEdgeMouseEnter:te,onEdgeMouseMove:ce,onEdgeMouseLeave:re,reconnectRadius:le,defaultMarkerColor:j,noPanClassName:G,disableKeyboardA11y:ee,rfId:pe}),E.jsx(q2,{style:b,type:m,component:v,containerStyle:g}),E.jsx("div",{className:"react-flow__edgelabel-renderer"}),E.jsx(u2,{nodeTypes:e,onNodeClick:i,onNodeDoubleClick:a,onNodeMouseEnter:u,onNodeMouseMove:l,onNodeMouseLeave:c,onNodeContextMenu:d,nodeClickDistance:J,onlyRenderVisibleElements:A,noPanClassName:G,noDragClassName:je,disableKeyboardA11y:ee,nodeExtent:ie,rfId:pe}),E.jsx("div",{className:"react-flow__viewport-portal"})]})})}h0.displayName="GraphView";const z2=T.memo(h0),Of=({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:s,fitViewOptions:u,minZoom:l=.5,maxZoom:c=2,nodeOrigin:d,nodeExtent:f,zIndexMode:h="basic"}={})=>{const p=new Map,m=new Map,b=new Map,v=new Map,g=i??n??[],_=r??e??[],y=d??[0,0],x=f??Cn;Ny(b,v,g);const w=kc(_,p,m,{nodeOrigin:y,nodeExtent:x,zIndexMode:h});let C=[0,0,1];if(s&&o&&a){const S=In(p,{filter:M=>!!((M.width||M.initialWidth)&&(M.height||M.initialHeight))}),{x:k,y:A,zoom:N}=el(S,o,a,l,c,u?.padding??.1);C=[k,A,N]}return{rfId:"1",width:o??0,height:a??0,transform:C,nodes:_,nodesInitialized:w,nodeLookup:p,parentLookup:m,edges:g,edgeLookup:v,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:i!==void 0,panZoom:null,minZoom:l,maxZoom:c,translateExtent:Cn,nodeExtent:x,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Zt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:y,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:s??!1,fitViewOptions:u,fitViewResolver:null,connection:{...cy},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:s1,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:uy,zIndexMode:h,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},F2=({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:s,fitViewOptions:u,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:f,zIndexMode:h})=>iw((p,m)=>{async function b(){const{nodeLookup:v,panZoom:g,fitViewOptions:_,fitViewResolver:y,width:x,height:w,minZoom:C,maxZoom:S}=m();g&&(await o1({nodes:v,width:x,height:w,panZoom:g,minZoom:C,maxZoom:S},_),y?.resolve(!0),p({fitViewResolver:null}))}return{...Of({nodes:e,edges:n,width:o,height:a,fitView:s,fitViewOptions:u,minZoom:l,maxZoom:c,nodeOrigin:d,nodeExtent:f,defaultNodes:r,defaultEdges:i,zIndexMode:h}),setNodes:v=>{const{nodeLookup:g,parentLookup:_,nodeOrigin:y,elevateNodesOnSelect:x,fitViewQueued:w,zIndexMode:C}=m(),S=kc(v,g,_,{nodeOrigin:y,nodeExtent:f,elevateNodesOnSelect:x,checkEquality:!0,zIndexMode:C});w&&S?(b(),p({nodes:v,nodesInitialized:S,fitViewQueued:!1,fitViewOptions:void 0})):p({nodes:v,nodesInitialized:S})},setEdges:v=>{const{connectionLookup:g,edgeLookup:_}=m();Ny(g,_,v),p({edges:v})},setDefaultNodesAndEdges:(v,g)=>{if(v){const{setNodes:_}=m();_(v),p({hasDefaultNodes:!0})}if(g){const{setEdges:_}=m();_(g),p({hasDefaultEdges:!0})}},updateNodeInternals:v=>{const{triggerNodeChanges:g,nodeLookup:_,parentLookup:y,domNode:x,nodeOrigin:w,nodeExtent:C,debug:S,fitViewQueued:k,zIndexMode:A}=m(),{changes:N,updatedInternals:M}=M1(v,_,y,x,w,C,A);M&&(E1(_,y,{nodeOrigin:w,nodeExtent:C,zIndexMode:A}),k?(b(),p({fitViewQueued:!1,fitViewOptions:void 0})):p({}),N?.length>0&&(S&&console.log("React Flow: trigger node changes",N),g?.(N)))},updateNodePositions:(v,g=!1)=>{const _=[];let y=[];const{nodeLookup:x,triggerNodeChanges:w,connection:C,updateConnection:S,onNodesChangeMiddlewareMap:k}=m();for(const[A,N]of v){const M=x.get(A),I=!!(M?.expandParent&&M?.parentId&&N?.position),O={id:A,type:"position",position:I?{x:Math.max(0,N.position.x),y:Math.max(0,N.position.y)}:N.position,dragging:g};if(M&&C.inProgress&&C.fromNode.id===M.id){const R=qt(M,C.fromHandle,ne.Left,!0);S({...C,from:R})}I&&M.parentId&&_.push({id:A,parentId:M.parentId,rect:{...N.internals.positionAbsolute,width:N.measured.width??0,height:N.measured.height??0}}),y.push(O)}if(_.length>0){const{parentLookup:A,nodeOrigin:N}=m(),M=sl(_,x,A,N);y.push(...M)}for(const A of k.values())y=A(y);w(y)},triggerNodeChanges:v=>{const{onNodesChange:g,setNodes:_,nodes:y,hasDefaultNodes:x,debug:w}=m();if(v?.length){if(x){const C=By(v,y);_(C)}w&&console.log("React Flow: trigger node changes",v),g?.(v)}},triggerEdgeChanges:v=>{const{onEdgesChange:g,setEdges:_,edges:y,hasDefaultEdges:x,debug:w}=m();if(v?.length){if(x){const C=Hy(v,y);_(C)}w&&console.log("React Flow: trigger edge changes",v),g?.(v)}},addSelectedNodes:v=>{const{multiSelectionActive:g,edgeLookup:_,nodeLookup:y,triggerNodeChanges:x,triggerEdgeChanges:w}=m();if(g){const C=v.map(S=>Rt(S,!0));x(C);return}x(Wt(y,new Set([...v]),!0)),w(Wt(_))},addSelectedEdges:v=>{const{multiSelectionActive:g,edgeLookup:_,nodeLookup:y,triggerNodeChanges:x,triggerEdgeChanges:w}=m();if(g){const C=v.map(S=>Rt(S,!0));w(C);return}w(Wt(_,new Set([...v]))),x(Wt(y,new Set,!0))},unselectNodesAndEdges:({nodes:v,edges:g}={})=>{const{edges:_,nodes:y,nodeLookup:x,triggerNodeChanges:w,triggerEdgeChanges:C}=m(),S=v||y,k=g||_,A=S.map(M=>{const I=x.get(M.id);return I&&(I.selected=!1),Rt(M.id,!1)}),N=k.map(M=>Rt(M.id,!1));w(A),C(N)},setMinZoom:v=>{const{panZoom:g,maxZoom:_}=m();g?.setScaleExtent([v,_]),p({minZoom:v})},setMaxZoom:v=>{const{panZoom:g,minZoom:_}=m();g?.setScaleExtent([_,v]),p({maxZoom:v})},setTranslateExtent:v=>{m().panZoom?.setTranslateExtent(v),p({translateExtent:v})},resetSelectedElements:()=>{const{edges:v,nodes:g,triggerNodeChanges:_,triggerEdgeChanges:y,elementsSelectable:x}=m();if(!x)return;const w=g.reduce((S,k)=>k.selected?[...S,Rt(k.id,!1)]:S,[]),C=v.reduce((S,k)=>k.selected?[...S,Rt(k.id,!1)]:S,[]);_(w),y(C)},setNodeExtent:v=>{const{nodes:g,nodeLookup:_,parentLookup:y,nodeOrigin:x,elevateNodesOnSelect:w,nodeExtent:C,zIndexMode:S}=m();v[0][0]===C[0][0]&&v[0][1]===C[0][1]&&v[1][0]===C[1][0]&&v[1][1]===C[1][1]||(kc(g,_,y,{nodeOrigin:x,nodeExtent:v,elevateNodesOnSelect:w,checkEquality:!1,zIndexMode:S}),p({nodeExtent:v}))},panBy:v=>{const{transform:g,width:_,height:y,panZoom:x,translateExtent:w}=m();return A1({delta:v,panZoom:x,transform:g,translateExtent:w,width:_,height:y})},setCenter:async(v,g,_)=>{const{width:y,height:x,maxZoom:w,panZoom:C}=m();if(!C)return Promise.resolve(!1);const S=typeof _?.zoom<"u"?_.zoom:w;return await C.setViewport({x:y/2-v*S,y:x/2-g*S,zoom:S},{duration:_?.duration,ease:_?.ease,interpolate:_?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{p({connection:{...cy}})},updateConnection:v=>{p({connection:v})},reset:()=>p({...Of()})}},Object.is);function $2({initialNodes:e,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:o,initialHeight:a,initialMinZoom:s,initialMaxZoom:u,initialFitViewOptions:l,fitView:c,nodeOrigin:d,nodeExtent:f,zIndexMode:h,children:p}){const[m]=T.useState(()=>F2({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,width:o,height:a,fitView:c,minZoom:s,maxZoom:u,fitViewOptions:l,nodeOrigin:d,nodeExtent:f,zIndexMode:h}));return E.jsx(ow,{value:m,children:E.jsx(Mw,{children:p})})}function B2({children:e,nodes:n,edges:r,defaultNodes:i,defaultEdges:o,width:a,height:s,fitView:u,fitViewOptions:l,minZoom:c,maxZoom:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p}){return T.useContext(fr)?E.jsx(E.Fragment,{children:e}):E.jsx($2,{initialNodes:n,initialEdges:r,defaultNodes:i,defaultEdges:o,initialWidth:a,initialHeight:s,fitView:u,initialFitViewOptions:l,initialMinZoom:c,initialMaxZoom:d,nodeOrigin:f,nodeExtent:h,zIndexMode:p,children:e})}const H2={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function U2({nodes:e,edges:n,defaultNodes:r,defaultEdges:i,className:o,nodeTypes:a,edgeTypes:s,onNodeClick:u,onEdgeClick:l,onInit:c,onMove:d,onMoveStart:f,onMoveEnd:h,onConnect:p,onConnectStart:m,onConnectEnd:b,onClickConnectStart:v,onClickConnectEnd:g,onNodeMouseEnter:_,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:w,onNodeDoubleClick:C,onNodeDragStart:S,onNodeDrag:k,onNodeDragStop:A,onNodesDelete:N,onEdgesDelete:M,onDelete:I,onSelectionChange:O,onSelectionDragStart:R,onSelectionDrag:P,onSelectionDragStop:j,onSelectionContextMenu:L,onSelectionStart:z,onSelectionEnd:F,onBeforeDelete:Y,connectionMode:Z,connectionLineType:W=St.Bezier,connectionLineStyle:Q,connectionLineComponent:q,connectionLineContainerStyle:$,deleteKeyCode:H="Backspace",selectionKeyCode:U="Shift",selectionOnDrag:V=!1,selectionMode:B=En.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:J=kn()?"Meta":"Control",zoomActivationKeyCode:oe=kn()?"Meta":"Control",snapToGrid:te,snapGrid:ce,onlyRenderVisibleElements:re=!1,selectNodesOnDrag:le,nodesDraggable:ae,autoPanOnNodeFocus:Ae,nodesConnectable:Me,nodesFocusable:je,nodeOrigin:Ue=Fy,edgesFocusable:G,edgesReconnectable:ee,elementsSelectable:ie=!0,defaultViewport:pe=yw,minZoom:se=.5,maxZoom:fe=2,translateExtent:Re=Cn,preventScrolling:ve=!0,nodeExtent:_e,defaultMarkerColor:ze="#b1b1b7",zoomOnScroll:ge=!0,zoomOnPinch:we=!0,panOnScroll:he=!1,panOnScrollSpeed:qr=.5,panOnScrollMode:c_=Pt.Free,zoomOnDoubleClick:l_=!0,panOnDrag:f_=!0,onPaneClick:d_,onPaneMouseEnter:h_,onPaneMouseMove:p_,onPaneMouseLeave:g_,onPaneScroll:m_,onPaneContextMenu:v_,paneClickDistance:y_=1,nodeClickDistance:b_=0,children:__,onReconnect:x_,onReconnectStart:w_,onReconnectEnd:C_,onEdgeContextMenu:E_,onEdgeDoubleClick:S_,onEdgeMouseEnter:k_,onEdgeMouseMove:N_,onEdgeMouseLeave:M_,reconnectRadius:A_=10,onNodesChange:R_,onEdgesChange:I_,noDragClassName:T_="nodrag",noWheelClassName:P_="nowheel",noPanClassName:Dl="nopan",fitView:Ll,fitViewOptions:zl,connectOnClick:O_,attributionPosition:j_,proOptions:q_,defaultEdgeOptions:D_,elevateNodesOnSelect:L_=!0,elevateEdgesOnSelect:z_=!1,disableKeyboardA11y:Fl=!1,autoPanOnConnect:F_,autoPanOnNodeDrag:$_,autoPanSpeed:B_,connectionRadius:H_,isValidConnection:U_,onError:V_,style:G_,id:$l,nodeDragThreshold:W_,connectionDragThreshold:Y_,viewport:Z_,onViewportChange:K_,width:X_,height:Q_,colorMode:J_="light",debug:ex,onScroll:Bl,ariaLabelConfig:tx,zIndexMode:Hl="basic",...nx},rx){const Dr=$l||"1",ix=ww(J_),ox=T.useCallback(Ul=>{Ul.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Bl?.(Ul)},[Bl]);return E.jsx("div",{"data-testid":"rf__wrapper",...nx,onScroll:ox,style:{...G_,...H2},ref:rx,className:Ie(["react-flow",o,ix]),id:$l,role:"application",children:E.jsxs(B2,{nodes:e,edges:n,width:X_,height:Q_,fitView:Ll,fitViewOptions:zl,minZoom:se,maxZoom:fe,nodeOrigin:Ue,nodeExtent:_e,zIndexMode:Hl,children:[E.jsx(z2,{onInit:c,onNodeClick:u,onEdgeClick:l,onNodeMouseEnter:_,onNodeMouseMove:y,onNodeMouseLeave:x,onNodeContextMenu:w,onNodeDoubleClick:C,nodeTypes:a,edgeTypes:s,connectionLineType:W,connectionLineStyle:Q,connectionLineComponent:q,connectionLineContainerStyle:$,selectionKeyCode:U,selectionOnDrag:V,selectionMode:B,deleteKeyCode:H,multiSelectionKeyCode:J,panActivationKeyCode:K,zoomActivationKeyCode:oe,onlyRenderVisibleElements:re,defaultViewport:pe,translateExtent:Re,minZoom:se,maxZoom:fe,preventScrolling:ve,zoomOnScroll:ge,zoomOnPinch:we,zoomOnDoubleClick:l_,panOnScroll:he,panOnScrollSpeed:qr,panOnScrollMode:c_,panOnDrag:f_,onPaneClick:d_,onPaneMouseEnter:h_,onPaneMouseMove:p_,onPaneMouseLeave:g_,onPaneScroll:m_,onPaneContextMenu:v_,paneClickDistance:y_,nodeClickDistance:b_,onSelectionContextMenu:L,onSelectionStart:z,onSelectionEnd:F,onReconnect:x_,onReconnectStart:w_,onReconnectEnd:C_,onEdgeContextMenu:E_,onEdgeDoubleClick:S_,onEdgeMouseEnter:k_,onEdgeMouseMove:N_,onEdgeMouseLeave:M_,reconnectRadius:A_,defaultMarkerColor:ze,noDragClassName:T_,noWheelClassName:P_,noPanClassName:Dl,rfId:Dr,disableKeyboardA11y:Fl,nodeExtent:_e,viewport:Z_,onViewportChange:K_}),E.jsx(xw,{nodes:e,edges:n,defaultNodes:r,defaultEdges:i,onConnect:p,onConnectStart:m,onConnectEnd:b,onClickConnectStart:v,onClickConnectEnd:g,nodesDraggable:ae,autoPanOnNodeFocus:Ae,nodesConnectable:Me,nodesFocusable:je,edgesFocusable:G,edgesReconnectable:ee,elementsSelectable:ie,elevateNodesOnSelect:L_,elevateEdgesOnSelect:z_,minZoom:se,maxZoom:fe,nodeExtent:_e,onNodesChange:R_,onEdgesChange:I_,snapToGrid:te,snapGrid:ce,connectionMode:Z,translateExtent:Re,connectOnClick:O_,defaultEdgeOptions:D_,fitView:Ll,fitViewOptions:zl,onNodesDelete:N,onEdgesDelete:M,onDelete:I,onNodeDragStart:S,onNodeDrag:k,onNodeDragStop:A,onSelectionDrag:P,onSelectionDragStart:R,onSelectionDragStop:j,onMove:d,onMoveStart:f,onMoveEnd:h,noPanClassName:Dl,nodeOrigin:Ue,rfId:Dr,autoPanOnConnect:F_,autoPanOnNodeDrag:$_,autoPanSpeed:B_,onError:V_,connectionRadius:H_,isValidConnection:U_,selectNodesOnDrag:le,nodeDragThreshold:W_,connectionDragThreshold:Y_,onBeforeDelete:Y,debug:ex,ariaLabelConfig:tx,zIndexMode:Hl}),E.jsx(vw,{onSelectionChange:O}),__,E.jsx(dw,{proOptions:q_,position:j_}),E.jsx(fw,{rfId:Dr,disableKeyboardA11y:Fl})]})})}var p0=Uy(U2);function g0(e){const[n,r]=T.useState(e),i=T.useCallback(o=>r(a=>By(o,a)),[]);return[n,r,i]}function m0(e){const[n,r]=T.useState(e),i=T.useCallback(o=>r(a=>Hy(o,a)),[]);return[n,r,i]}function V2({dimensions:e,lineWidth:n,variant:r,className:i}){return E.jsx("path",{strokeWidth:n,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ie(["react-flow__background-pattern",r,i])})}function G2({radius:e,className:n}){return E.jsx("circle",{cx:e,cy:e,r:e,className:Ie(["react-flow__background-pattern","dots",n])})}var kt;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(kt||(kt={}));const W2={[kt.Dots]:1,[kt.Lines]:1,[kt.Cross]:6},Y2=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function v0({id:e,variant:n=kt.Dots,gap:r=20,size:i,lineWidth:o=1,offset:a=0,color:s,bgColor:u,style:l,className:c,patternClassName:d}){const f=T.useRef(null),{transform:h,patternId:p}=me(Y2,Se),m=i||W2[n],b=n===kt.Dots,v=n===kt.Cross,g=Array.isArray(r)?r:[r,r],_=[g[0]*h[2]||1,g[1]*h[2]||1],y=m*h[2],x=Array.isArray(a)?a:[a,a],w=v?[y,y]:_,C=[x[0]*h[2]||1+w[0]/2,x[1]*h[2]||1+w[1]/2],S=`${p}${e||""}`;return E.jsxs("svg",{className:Ie(["react-flow__background",c]),style:{...l,...hr,"--xy-background-color-props":u,"--xy-background-pattern-color-props":s},ref:f,"data-testid":"rf__background",children:[E.jsx("pattern",{id:S,x:h[0]%_[0],y:h[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`,children:b?E.jsx(G2,{radius:y/2,className:d}):E.jsx(V2,{dimensions:w,lineWidth:o,variant:n,className:d})}),E.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${S})`})]})}v0.displayName="Background";const y0=T.memo(v0);function Z2(){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:E.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function K2(){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:E.jsx("path",{d:"M0 0h32v4.2H0z"})})}function X2(){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:E.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Q2(){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:E.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function J2(){return E.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:E.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Gn({children:e,className:n,...r}){return E.jsx("button",{type:"button",className:Ie(["react-flow__controls-button",n]),...r,children:e})}const eC=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function b0({style:e,showZoom:n=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:o,onZoomIn:a,onZoomOut:s,onFitView:u,onInteractiveChange:l,className:c,children:d,position:f="bottom-left",orientation:h="vertical","aria-label":p}){const m=ke(),{isInteractive:b,minZoomReached:v,maxZoomReached:g,ariaLabelConfig:_}=me(eC,Se),{zoomIn:y,zoomOut:x,fitView:w}=ul(),C=()=>{y(),a?.()},S=()=>{x(),s?.()},k=()=>{w(o),u?.()},A=()=>{m.setState({nodesDraggable:!b,nodesConnectable:!b,elementsSelectable:!b}),l?.(!b)},N=h==="horizontal"?"horizontal":"vertical";return E.jsxs(dr,{className:Ie(["react-flow__controls",N,c]),position:f,style:e,"data-testid":"rf__controls","aria-label":p??_["controls.ariaLabel"],children:[n&&E.jsxs(E.Fragment,{children:[E.jsx(Gn,{onClick:C,className:"react-flow__controls-zoomin",title:_["controls.zoomIn.ariaLabel"],"aria-label":_["controls.zoomIn.ariaLabel"],disabled:g,children:E.jsx(Z2,{})}),E.jsx(Gn,{onClick:S,className:"react-flow__controls-zoomout",title:_["controls.zoomOut.ariaLabel"],"aria-label":_["controls.zoomOut.ariaLabel"],disabled:v,children:E.jsx(K2,{})})]}),r&&E.jsx(Gn,{className:"react-flow__controls-fitview",onClick:k,title:_["controls.fitView.ariaLabel"],"aria-label":_["controls.fitView.ariaLabel"],children:E.jsx(X2,{})}),i&&E.jsx(Gn,{className:"react-flow__controls-interactive",onClick:A,title:_["controls.interactive.ariaLabel"],"aria-label":_["controls.interactive.ariaLabel"],children:b?E.jsx(J2,{}):E.jsx(Q2,{})}),d]})}b0.displayName="Controls";const _0=T.memo(b0);function tC({id:e,x:n,y:r,width:i,height:o,style:a,color:s,strokeColor:u,strokeWidth:l,className:c,borderRadius:d,shapeRendering:f,selected:h,onClick:p}){const{background:m,backgroundColor:b}=a||{},v=s||m||b;return E.jsx("rect",{className:Ie(["react-flow__minimap-node",{selected:h},c]),x:n,y:r,rx:d,ry:d,width:i,height:o,style:{fill:v,stroke:u,strokeWidth:l},shapeRendering:f,onClick:p?g=>p(g,e):void 0})}const nC=T.memo(tC),rC=e=>e.nodes.map(n=>n.id),Yr=e=>e instanceof Function?e:()=>e;function iC({nodeStrokeColor:e,nodeColor:n,nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:o,nodeComponent:a=nC,onClick:s}){const u=me(rC,Se),l=Yr(n),c=Yr(e),d=Yr(r),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return E.jsx(E.Fragment,{children:u.map(h=>E.jsx(aC,{id:h,nodeColorFunc:l,nodeStrokeColorFunc:c,nodeClassNameFunc:d,nodeBorderRadius:i,nodeStrokeWidth:o,NodeComponent:a,onClick:s,shapeRendering:f},h))})}function oC({id:e,nodeColorFunc:n,nodeStrokeColorFunc:r,nodeClassNameFunc:i,nodeBorderRadius:o,nodeStrokeWidth:a,shapeRendering:s,NodeComponent:u,onClick:l}){const{node:c,x:d,y:f,width:h,height:p}=me(m=>{const{internals:b}=m.nodeLookup.get(e),v=b.userNode,{x:g,y:_}=b.positionAbsolute,{width:y,height:x}=yt(v);return{node:v,x:g,y:_,width:y,height:x}},Se);return!c||c.hidden||!my(c)?null:E.jsx(u,{x:d,y:f,width:h,height:p,style:c.style,selected:!!c.selected,className:i(c),color:n(c),borderRadius:o,strokeColor:r(c),strokeWidth:a,shapeRendering:s,onClick:l,id:c.id})}const aC=T.memo(oC);var sC=T.memo(iC);const uC=200,cC=150,lC=e=>!e.hidden,fC=e=>{const n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:e.nodeLookup.size>0?gy(In(e.nodeLookup,{filter:lC}),n):n,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},dC="react-flow__minimap-desc";function x0({style:e,className:n,nodeStrokeColor:r,nodeColor:i,nodeClassName:o="",nodeBorderRadius:a=5,nodeStrokeWidth:s,nodeComponent:u,bgColor:l,maskColor:c,maskStrokeColor:d,maskStrokeWidth:f,position:h="bottom-right",onClick:p,onNodeClick:m,pannable:b=!1,zoomable:v=!1,ariaLabel:g,inversePan:_,zoomStep:y=1,offsetScale:x=5}){const w=ke(),C=T.useRef(null),{boundingRect:S,viewBB:k,rfId:A,panZoom:N,translateExtent:M,flowWidth:I,flowHeight:O,ariaLabelConfig:R}=me(fC,Se),P=e?.width??uC,j=e?.height??cC,L=S.width/P,z=S.height/j,F=Math.max(L,z),Y=F*P,Z=F*j,W=x*F,Q=S.x-(Y-S.width)/2-W,q=S.y-(Z-S.height)/2-W,$=Y+W*2,H=Z+W*2,U=`${dC}-${A}`,V=T.useRef(0),B=T.useRef();V.current=F,T.useEffect(()=>{if(C.current&&N)return B.current=L1({domNode:C.current,panZoom:N,getTransform:()=>w.getState().transform,getViewScale:()=>V.current}),()=>{B.current?.destroy()}},[N]),T.useEffect(()=>{B.current?.update({translateExtent:M,width:I,height:O,inversePan:_,pannable:b,zoomStep:y,zoomable:v})},[b,v,_,y,M,I,O]);const K=p?te=>{const[ce,re]=B.current?.pointer(te)||[0,0];p(te,{x:ce,y:re})}:void 0,J=m?T.useCallback((te,ce)=>{const re=w.getState().nodeLookup.get(ce).internals.userNode;m(te,re)},[]):void 0,oe=g??R["minimap.ariaLabel"];return E.jsx(dr,{position:h,style:{...e,"--xy-minimap-background-color-props":typeof l=="string"?l:void 0,"--xy-minimap-mask-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof f=="number"?f*F:void 0,"--xy-minimap-node-background-color-props":typeof i=="string"?i:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof s=="number"?s:void 0},className:Ie(["react-flow__minimap",n]),"data-testid":"rf__minimap",children:E.jsxs("svg",{width:P,height:j,viewBox:`${Q} ${q} ${$} ${H}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":U,ref:C,onClick:K,children:[oe&&E.jsx("title",{id:U,children:oe}),E.jsx(sC,{onClick:J,nodeColor:i,nodeStrokeColor:r,nodeBorderRadius:a,nodeClassName:o,nodeStrokeWidth:s,nodeComponent:u}),E.jsx("path",{className:"react-flow__minimap-mask",d:`M${Q-W},${q-W}h${$+W*2}v${H+W*2}h${-$-W*2}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}x0.displayName="MiniMap";const w0=T.memo(x0),hC=e=>n=>e?`${Math.max(1/n.transform[2],1)}`:void 0,pC={[Dt.Line]:"right",[Dt.Handle]:"bottom-right"};function gC({nodeId:e,position:n,variant:r=Dt.Handle,className:i,style:o=void 0,children:a,color:s,minWidth:u=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,resizeDirection:h,autoScale:p=!0,shouldResize:m,onResizeStart:b,onResize:v,onResizeEnd:g}){const _=Yy(),y=typeof e=="string"?e:_,x=ke(),w=T.useRef(null),C=r===Dt.Handle,S=me(T.useCallback(hC(C&&p),[C,p]),Se),k=T.useRef(null),A=n??pC[r];T.useEffect(()=>{if(!(!w.current||!y))return k.current||(k.current=ew({domNode:w.current,nodeId:y,getStoreItems:()=>{const{nodeLookup:M,transform:I,snapGrid:O,snapToGrid:R,nodeOrigin:P,domNode:j}=x.getState();return{nodeLookup:M,transform:I,snapGrid:O,snapToGrid:R,nodeOrigin:P,paneDomNode:j}},onChange:(M,I)=>{const{triggerNodeChanges:O,nodeLookup:R,parentLookup:P,nodeOrigin:j}=x.getState(),L=[],z={x:M.x,y:M.y},F=R.get(y);if(F&&F.expandParent&&F.parentId){const Y=F.origin??j,Z=M.width??F.measured.width??0,W=M.height??F.measured.height??0,Q={id:F.id,parentId:F.parentId,rect:{width:Z,height:W,...vy({x:M.x??F.position.x,y:M.y??F.position.y},{width:Z,height:W},F.parentId,R,Y)}},q=sl([Q],R,P,j);L.push(...q),z.x=M.x?Math.max(Y[0]*Z,M.x):void 0,z.y=M.y?Math.max(Y[1]*W,M.y):void 0}if(z.x!==void 0&&z.y!==void 0){const Y={id:y,type:"position",position:{...z}};L.push(Y)}if(M.width!==void 0&&M.height!==void 0){const Z={id:y,type:"dimensions",resizing:!0,setAttributes:h?h==="horizontal"?"width":"height":!0,dimensions:{width:M.width,height:M.height}};L.push(Z)}for(const Y of I){const Z={...Y,type:"position"};L.push(Z)}O(L)},onEnd:({width:M,height:I})=>{const O={id:y,type:"dimensions",resizing:!1,dimensions:{width:M,height:I}};x.getState().triggerNodeChanges([O])}})),k.current.update({controlPosition:A,boundaries:{minWidth:u,minHeight:l,maxWidth:c,maxHeight:d},keepAspectRatio:f,resizeDirection:h,onResizeStart:b,onResize:v,onResizeEnd:g,shouldResize:m}),()=>{k.current?.destroy()}},[A,u,l,c,d,f,b,v,g,m]);const N=A.split("-");return E.jsx("div",{className:Ie(["react-flow__resize-control","nodrag",...N,r,i]),ref:w,style:{...o,scale:S,...s&&{[C?"backgroundColor":"borderColor"]:s}},children:a})}const jf=T.memo(gC);function C0({nodeId:e,isVisible:n=!0,handleClassName:r,handleStyle:i,lineClassName:o,lineStyle:a,color:s,minWidth:u=10,minHeight:l=10,maxWidth:c=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:f=!1,autoScale:h=!0,shouldResize:p,onResizeStart:m,onResize:b,onResizeEnd:v}){return n?E.jsxs(E.Fragment,{children:[Y1.map(g=>E.jsx(jf,{className:o,style:a,nodeId:e,position:g,variant:Dt.Line,color:s,minWidth:u,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:m,keepAspectRatio:f,autoScale:h,shouldResize:p,onResize:b,onResizeEnd:v},g)),W1.map(g=>E.jsx(jf,{className:r,style:i,nodeId:e,position:g,color:s,minWidth:u,minHeight:l,maxWidth:c,maxHeight:d,onResizeStart:m,keepAspectRatio:f,autoScale:h,shouldResize:p,onResize:b,onResizeEnd:v},g))]}):null}var Zr,qf;function mC(){if(qf)return Zr;qf=1;function e(){this.__data__=[],this.size=0}return Zr=e,Zr}var Kr,Df;function en(){if(Df)return Kr;Df=1;function e(n,r){return n===r||n!==n&&r!==r}return Kr=e,Kr}var Xr,Lf;function gr(){if(Lf)return Xr;Lf=1;var e=en();function n(r,i){for(var o=r.length;o--;)if(e(r[o][0],i))return o;return-1}return Xr=n,Xr}var Qr,zf;function vC(){if(zf)return Qr;zf=1;var e=gr(),n=Array.prototype,r=n.splice;function i(o){var a=this.__data__,s=e(a,o);if(s<0)return!1;var u=a.length-1;return s==u?a.pop():r.call(a,s,1),--this.size,!0}return Qr=i,Qr}var Jr,Ff;function yC(){if(Ff)return Jr;Ff=1;var e=gr();function n(r){var i=this.__data__,o=e(i,r);return o<0?void 0:i[o][1]}return Jr=n,Jr}var ei,$f;function bC(){if($f)return ei;$f=1;var e=gr();function n(r){return e(this.__data__,r)>-1}return ei=n,ei}var ti,Bf;function _C(){if(Bf)return ti;Bf=1;var e=gr();function n(r,i){var o=this.__data__,a=e(o,r);return a<0?(++this.size,o.push([r,i])):o[a][1]=i,this}return ti=n,ti}var ni,Hf;function mr(){if(Hf)return ni;Hf=1;var e=mC(),n=vC(),r=yC(),i=bC(),o=_C();function a(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var c=s[u];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,ni=a,ni}var ri,Uf;function xC(){if(Uf)return ri;Uf=1;var e=mr();function n(){this.__data__=new e,this.size=0}return ri=n,ri}var ii,Vf;function wC(){if(Vf)return ii;Vf=1;function e(n){var r=this.__data__,i=r.delete(n);return this.size=r.size,i}return ii=e,ii}var oi,Gf;function CC(){if(Gf)return oi;Gf=1;function e(n){return this.__data__.get(n)}return oi=e,oi}var ai,Wf;function EC(){if(Wf)return ai;Wf=1;function e(n){return this.__data__.has(n)}return ai=e,ai}var si,Yf;function E0(){if(Yf)return si;Yf=1;var e=typeof Fn=="object"&&Fn&&Fn.Object===Object&&Fn;return si=e,si}var ui,Zf;function it(){if(Zf)return ui;Zf=1;var e=E0(),n=typeof self=="object"&&self&&self.Object===Object&&self,r=e||n||Function("return this")();return ui=r,ui}var ci,Kf;function tn(){if(Kf)return ci;Kf=1;var e=it(),n=e.Symbol;return ci=n,ci}var li,Xf;function SC(){if(Xf)return li;Xf=1;var e=tn(),n=Object.prototype,r=n.hasOwnProperty,i=n.toString,o=e?e.toStringTag:void 0;function a(s){var u=r.call(s,o),l=s[o];try{s[o]=void 0;var c=!0}catch{}var d=i.call(s);return c&&(u?s[o]=l:delete s[o]),d}return li=a,li}var fi,Qf;function kC(){if(Qf)return fi;Qf=1;var e=Object.prototype,n=e.toString;function r(i){return n.call(i)}return fi=r,fi}var di,Jf;function Lt(){if(Jf)return di;Jf=1;var e=tn(),n=SC(),r=kC(),i="[object Null]",o="[object Undefined]",a=e?e.toStringTag:void 0;function s(u){return u==null?u===void 0?o:i:a&&a in Object(u)?n(u):r(u)}return di=s,di}var hi,ed;function Ke(){if(ed)return hi;ed=1;function e(n){var r=typeof n;return n!=null&&(r=="object"||r=="function")}return hi=e,hi}var pi,td;function On(){if(td)return pi;td=1;var e=Lt(),n=Ke(),r="[object AsyncFunction]",i="[object Function]",o="[object GeneratorFunction]",a="[object Proxy]";function s(u){if(!n(u))return!1;var l=e(u);return l==i||l==o||l==r||l==a}return pi=s,pi}var gi,nd;function NC(){if(nd)return gi;nd=1;var e=it(),n=e["__core-js_shared__"];return gi=n,gi}var mi,rd;function MC(){if(rd)return mi;rd=1;var e=NC(),n=(function(){var i=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""})();function r(i){return!!n&&n in i}return mi=r,mi}var vi,id;function S0(){if(id)return vi;id=1;var e=Function.prototype,n=e.toString;function r(i){if(i!=null){try{return n.call(i)}catch{}try{return i+""}catch{}}return""}return vi=r,vi}var yi,od;function AC(){if(od)return yi;od=1;var e=On(),n=MC(),r=Ke(),i=S0(),o=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,s=Function.prototype,u=Object.prototype,l=s.toString,c=u.hasOwnProperty,d=RegExp("^"+l.call(c).replace(o,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!r(h)||n(h))return!1;var p=e(h)?d:a;return p.test(i(h))}return yi=f,yi}var bi,ad;function RC(){if(ad)return bi;ad=1;function e(n,r){return n?.[r]}return bi=e,bi}var _i,sd;function zt(){if(sd)return _i;sd=1;var e=AC(),n=RC();function r(i,o){var a=n(i,o);return e(a)?a:void 0}return _i=r,_i}var xi,ud;function ll(){if(ud)return xi;ud=1;var e=zt(),n=it(),r=e(n,"Map");return xi=r,xi}var wi,cd;function vr(){if(cd)return wi;cd=1;var e=zt(),n=e(Object,"create");return wi=n,wi}var Ci,ld;function IC(){if(ld)return Ci;ld=1;var e=vr();function n(){this.__data__=e?e(null):{},this.size=0}return Ci=n,Ci}var Ei,fd;function TC(){if(fd)return Ei;fd=1;function e(n){var r=this.has(n)&&delete this.__data__[n];return this.size-=r?1:0,r}return Ei=e,Ei}var Si,dd;function PC(){if(dd)return Si;dd=1;var e=vr(),n="__lodash_hash_undefined__",r=Object.prototype,i=r.hasOwnProperty;function o(a){var s=this.__data__;if(e){var u=s[a];return u===n?void 0:u}return i.call(s,a)?s[a]:void 0}return Si=o,Si}var ki,hd;function OC(){if(hd)return ki;hd=1;var e=vr(),n=Object.prototype,r=n.hasOwnProperty;function i(o){var a=this.__data__;return e?a[o]!==void 0:r.call(a,o)}return ki=i,ki}var Ni,pd;function jC(){if(pd)return Ni;pd=1;var e=vr(),n="__lodash_hash_undefined__";function r(i,o){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=e&&o===void 0?n:o,this}return Ni=r,Ni}var Mi,gd;function qC(){if(gd)return Mi;gd=1;var e=IC(),n=TC(),r=PC(),i=OC(),o=jC();function a(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var c=s[u];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,Mi=a,Mi}var Ai,md;function DC(){if(md)return Ai;md=1;var e=qC(),n=mr(),r=ll();function i(){this.size=0,this.__data__={hash:new e,map:new(r||n),string:new e}}return Ai=i,Ai}var Ri,vd;function LC(){if(vd)return Ri;vd=1;function e(n){var r=typeof n;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?n!=="__proto__":n===null}return Ri=e,Ri}var Ii,yd;function yr(){if(yd)return Ii;yd=1;var e=LC();function n(r,i){var o=r.__data__;return e(i)?o[typeof i=="string"?"string":"hash"]:o.map}return Ii=n,Ii}var Ti,bd;function zC(){if(bd)return Ti;bd=1;var e=yr();function n(r){var i=e(this,r).delete(r);return this.size-=i?1:0,i}return Ti=n,Ti}var Pi,_d;function FC(){if(_d)return Pi;_d=1;var e=yr();function n(r){return e(this,r).get(r)}return Pi=n,Pi}var Oi,xd;function $C(){if(xd)return Oi;xd=1;var e=yr();function n(r){return e(this,r).has(r)}return Oi=n,Oi}var ji,wd;function BC(){if(wd)return ji;wd=1;var e=yr();function n(r,i){var o=e(this,r),a=o.size;return o.set(r,i),this.size+=o.size==a?0:1,this}return ji=n,ji}var qi,Cd;function fl(){if(Cd)return qi;Cd=1;var e=DC(),n=zC(),r=FC(),i=$C(),o=BC();function a(s){var u=-1,l=s==null?0:s.length;for(this.clear();++u<l;){var c=s[u];this.set(c[0],c[1])}}return a.prototype.clear=e,a.prototype.delete=n,a.prototype.get=r,a.prototype.has=i,a.prototype.set=o,qi=a,qi}var Di,Ed;function HC(){if(Ed)return Di;Ed=1;var e=mr(),n=ll(),r=fl(),i=200;function o(a,s){var u=this.__data__;if(u instanceof e){var l=u.__data__;if(!n||l.length<i-1)return l.push([a,s]),this.size=++u.size,this;u=this.__data__=new r(l)}return u.set(a,s),this.size=u.size,this}return Di=o,Di}var Li,Sd;function br(){if(Sd)return Li;Sd=1;var e=mr(),n=xC(),r=wC(),i=CC(),o=EC(),a=HC();function s(u){var l=this.__data__=new e(u);this.size=l.size}return s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=o,s.prototype.set=a,Li=s,Li}var zi,kd;function dl(){if(kd)return zi;kd=1;function e(n,r){for(var i=-1,o=n==null?0:n.length;++i<o&&r(n[i],i,n)!==!1;);return n}return zi=e,zi}var Fi,Nd;function k0(){if(Nd)return Fi;Nd=1;var e=zt(),n=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Fi=n,Fi}var $i,Md;function _r(){if(Md)return $i;Md=1;var e=k0();function n(r,i,o){i=="__proto__"&&e?e(r,i,{configurable:!0,enumerable:!0,value:o,writable:!0}):r[i]=o}return $i=n,$i}var Bi,Ad;function xr(){if(Ad)return Bi;Ad=1;var e=_r(),n=en(),r=Object.prototype,i=r.hasOwnProperty;function o(a,s,u){var l=a[s];(!(i.call(a,s)&&n(l,u))||u===void 0&&!(s in a))&&e(a,s,u)}return Bi=o,Bi}var Hi,Rd;function jn(){if(Rd)return Hi;Rd=1;var e=xr(),n=_r();function r(i,o,a,s){var u=!a;a||(a={});for(var l=-1,c=o.length;++l<c;){var d=o[l],f=s?s(a[d],i[d],d,a,i):void 0;f===void 0&&(f=i[d]),u?n(a,d,f):e(a,d,f)}return a}return Hi=r,Hi}var Ui,Id;function UC(){if(Id)return Ui;Id=1;function e(n,r){for(var i=-1,o=Array(n);++i<n;)o[i]=r(i);return o}return Ui=e,Ui}var Vi,Td;function ft(){if(Td)return Vi;Td=1;function e(n){return n!=null&&typeof n=="object"}return Vi=e,Vi}var Gi,Pd;function VC(){if(Pd)return Gi;Pd=1;var e=Lt(),n=ft(),r="[object Arguments]";function i(o){return n(o)&&e(o)==r}return Gi=i,Gi}var Wi,Od;function qn(){if(Od)return Wi;Od=1;var e=VC(),n=ft(),r=Object.prototype,i=r.hasOwnProperty,o=r.propertyIsEnumerable,a=e((function(){return arguments})())?e:function(s){return n(s)&&i.call(s,"callee")&&!o.call(s,"callee")};return Wi=a,Wi}var Yi,jd;function Te(){if(jd)return Yi;jd=1;var e=Array.isArray;return Yi=e,Yi}var dn={exports:{}},Zi,qd;function GC(){if(qd)return Zi;qd=1;function e(){return!1}return Zi=e,Zi}dn.exports;var Dd;function nn(){return Dd||(Dd=1,(function(e,n){var r=it(),i=GC(),o=n&&!n.nodeType&&n,a=o&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===o,u=s?r.Buffer:void 0,l=u?u.isBuffer:void 0,c=l||i;e.exports=c})(dn,dn.exports)),dn.exports}var Ki,Ld;function wr(){if(Ld)return Ki;Ld=1;var e=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function r(i,o){var a=typeof i;return o=o??e,!!o&&(a=="number"||a!="symbol"&&n.test(i))&&i>-1&&i%1==0&&i<o}return Ki=r,Ki}var Xi,zd;function hl(){if(zd)return Xi;zd=1;var e=9007199254740991;function n(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Xi=n,Xi}var Qi,Fd;function WC(){if(Fd)return Qi;Fd=1;var e=Lt(),n=hl(),r=ft(),i="[object Arguments]",o="[object Array]",a="[object Boolean]",s="[object Date]",u="[object Error]",l="[object Function]",c="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",p="[object Set]",m="[object String]",b="[object WeakMap]",v="[object ArrayBuffer]",g="[object DataView]",_="[object Float32Array]",y="[object Float64Array]",x="[object Int8Array]",w="[object Int16Array]",C="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",A="[object Uint16Array]",N="[object Uint32Array]",M={};M[_]=M[y]=M[x]=M[w]=M[C]=M[S]=M[k]=M[A]=M[N]=!0,M[i]=M[o]=M[v]=M[a]=M[g]=M[s]=M[u]=M[l]=M[c]=M[d]=M[f]=M[h]=M[p]=M[m]=M[b]=!1;function I(O){return r(O)&&n(O.length)&&!!M[e(O)]}return Qi=I,Qi}var Ji,$d;function Cr(){if($d)return Ji;$d=1;function e(n){return function(r){return n(r)}}return Ji=e,Ji}var hn={exports:{}};hn.exports;var Bd;function pl(){return Bd||(Bd=1,(function(e,n){var r=E0(),i=n&&!n.nodeType&&n,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a&&r.process,u=(function(){try{var l=o&&o.require&&o.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}})();e.exports=u})(hn,hn.exports)),hn.exports}var eo,Hd;function Dn(){if(Hd)return eo;Hd=1;var e=WC(),n=Cr(),r=pl(),i=r&&r.isTypedArray,o=i?n(i):e;return eo=o,eo}var to,Ud;function N0(){if(Ud)return to;Ud=1;var e=UC(),n=qn(),r=Te(),i=nn(),o=wr(),a=Dn(),s=Object.prototype,u=s.hasOwnProperty;function l(c,d){var f=r(c),h=!f&&n(c),p=!f&&!h&&i(c),m=!f&&!h&&!p&&a(c),b=f||h||p||m,v=b?e(c.length,String):[],g=v.length;for(var _ in c)(d||u.call(c,_))&&!(b&&(_=="length"||p&&(_=="offset"||_=="parent")||m&&(_=="buffer"||_=="byteLength"||_=="byteOffset")||o(_,g)))&&v.push(_);return v}return to=l,to}var no,Vd;function Er(){if(Vd)return no;Vd=1;var e=Object.prototype;function n(r){var i=r&&r.constructor,o=typeof i=="function"&&i.prototype||e;return r===o}return no=n,no}var ro,Gd;function M0(){if(Gd)return ro;Gd=1;function e(n,r){return function(i){return n(r(i))}}return ro=e,ro}var io,Wd;function YC(){if(Wd)return io;Wd=1;var e=M0(),n=e(Object.keys,Object);return io=n,io}var oo,Yd;function gl(){if(Yd)return oo;Yd=1;var e=Er(),n=YC(),r=Object.prototype,i=r.hasOwnProperty;function o(a){if(!e(a))return n(a);var s=[];for(var u in Object(a))i.call(a,u)&&u!="constructor"&&s.push(u);return s}return oo=o,oo}var ao,Zd;function bt(){if(Zd)return ao;Zd=1;var e=On(),n=hl();function r(i){return i!=null&&n(i.length)&&!e(i)}return ao=r,ao}var so,Kd;function Mt(){if(Kd)return so;Kd=1;var e=N0(),n=gl(),r=bt();function i(o){return r(o)?e(o):n(o)}return so=i,so}var uo,Xd;function ZC(){if(Xd)return uo;Xd=1;var e=jn(),n=Mt();function r(i,o){return i&&e(o,n(o),i)}return uo=r,uo}var co,Qd;function KC(){if(Qd)return co;Qd=1;function e(n){var r=[];if(n!=null)for(var i in Object(n))r.push(i);return r}return co=e,co}var lo,Jd;function XC(){if(Jd)return lo;Jd=1;var e=Ke(),n=Er(),r=KC(),i=Object.prototype,o=i.hasOwnProperty;function a(s){if(!e(s))return r(s);var u=n(s),l=[];for(var c in s)c=="constructor"&&(u||!o.call(s,c))||l.push(c);return l}return lo=a,lo}var fo,eh;function Ft(){if(eh)return fo;eh=1;var e=N0(),n=XC(),r=bt();function i(o){return r(o)?e(o,!0):n(o)}return fo=i,fo}var ho,th;function QC(){if(th)return ho;th=1;var e=jn(),n=Ft();function r(i,o){return i&&e(o,n(o),i)}return ho=r,ho}var pn={exports:{}};pn.exports;var nh;function A0(){return nh||(nh=1,(function(e,n){var r=it(),i=n&&!n.nodeType&&n,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,u=s?s.allocUnsafe:void 0;function l(c,d){if(d)return c.slice();var f=c.length,h=u?u(f):new c.constructor(f);return c.copy(h),h}e.exports=l})(pn,pn.exports)),pn.exports}var po,rh;function R0(){if(rh)return po;rh=1;function e(n,r){var i=-1,o=n.length;for(r||(r=Array(o));++i<o;)r[i]=n[i];return r}return po=e,po}var go,ih;function I0(){if(ih)return go;ih=1;function e(n,r){for(var i=-1,o=n==null?0:n.length,a=0,s=[];++i<o;){var u=n[i];r(u,i,n)&&(s[a++]=u)}return s}return go=e,go}var mo,oh;function T0(){if(oh)return mo;oh=1;function e(){return[]}return mo=e,mo}var vo,ah;function ml(){if(ah)return vo;ah=1;var e=I0(),n=T0(),r=Object.prototype,i=r.propertyIsEnumerable,o=Object.getOwnPropertySymbols,a=o?function(s){return s==null?[]:(s=Object(s),e(o(s),function(u){return i.call(s,u)}))}:n;return vo=a,vo}var yo,sh;function JC(){if(sh)return yo;sh=1;var e=jn(),n=ml();function r(i,o){return e(i,n(i),o)}return yo=r,yo}var bo,uh;function vl(){if(uh)return bo;uh=1;function e(n,r){for(var i=-1,o=r.length,a=n.length;++i<o;)n[a+i]=r[i];return n}return bo=e,bo}var _o,ch;function Sr(){if(ch)return _o;ch=1;var e=M0(),n=e(Object.getPrototypeOf,Object);return _o=n,_o}var xo,lh;function P0(){if(lh)return xo;lh=1;var e=vl(),n=Sr(),r=ml(),i=T0(),o=Object.getOwnPropertySymbols,a=o?function(s){for(var u=[];s;)e(u,r(s)),s=n(s);return u}:i;return xo=a,xo}var wo,fh;function eE(){if(fh)return wo;fh=1;var e=jn(),n=P0();function r(i,o){return e(i,n(i),o)}return wo=r,wo}var Co,dh;function O0(){if(dh)return Co;dh=1;var e=vl(),n=Te();function r(i,o,a){var s=o(i);return n(i)?s:e(s,a(i))}return Co=r,Co}var Eo,hh;function j0(){if(hh)return Eo;hh=1;var e=O0(),n=ml(),r=Mt();function i(o){return e(o,r,n)}return Eo=i,Eo}var So,ph;function tE(){if(ph)return So;ph=1;var e=O0(),n=P0(),r=Ft();function i(o){return e(o,r,n)}return So=i,So}var ko,gh;function nE(){if(gh)return ko;gh=1;var e=zt(),n=it(),r=e(n,"DataView");return ko=r,ko}var No,mh;function rE(){if(mh)return No;mh=1;var e=zt(),n=it(),r=e(n,"Promise");return No=r,No}var Mo,vh;function q0(){if(vh)return Mo;vh=1;var e=zt(),n=it(),r=e(n,"Set");return Mo=r,Mo}var Ao,yh;function iE(){if(yh)return Ao;yh=1;var e=zt(),n=it(),r=e(n,"WeakMap");return Ao=r,Ao}var Ro,bh;function rn(){if(bh)return Ro;bh=1;var e=nE(),n=ll(),r=rE(),i=q0(),o=iE(),a=Lt(),s=S0(),u="[object Map]",l="[object Object]",c="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",p=s(e),m=s(n),b=s(r),v=s(i),g=s(o),_=a;return(e&&_(new e(new ArrayBuffer(1)))!=h||n&&_(new n)!=u||r&&_(r.resolve())!=c||i&&_(new i)!=d||o&&_(new o)!=f)&&(_=function(y){var x=a(y),w=x==l?y.constructor:void 0,C=w?s(w):"";if(C)switch(C){case p:return h;case m:return u;case b:return c;case v:return d;case g:return f}return x}),Ro=_,Ro}var Io,_h;function oE(){if(_h)return Io;_h=1;var e=Object.prototype,n=e.hasOwnProperty;function r(i){var o=i.length,a=new i.constructor(o);return o&&typeof i[0]=="string"&&n.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return Io=r,Io}var To,xh;function D0(){if(xh)return To;xh=1;var e=it(),n=e.Uint8Array;return To=n,To}var Po,wh;function yl(){if(wh)return Po;wh=1;var e=D0();function n(r){var i=new r.constructor(r.byteLength);return new e(i).set(new e(r)),i}return Po=n,Po}var Oo,Ch;function aE(){if(Ch)return Oo;Ch=1;var e=yl();function n(r,i){var o=i?e(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.byteLength)}return Oo=n,Oo}var jo,Eh;function sE(){if(Eh)return jo;Eh=1;var e=/\w*$/;function n(r){var i=new r.constructor(r.source,e.exec(r));return i.lastIndex=r.lastIndex,i}return jo=n,jo}var qo,Sh;function uE(){if(Sh)return qo;Sh=1;var e=tn(),n=e?e.prototype:void 0,r=n?n.valueOf:void 0;function i(o){return r?Object(r.call(o)):{}}return qo=i,qo}var Do,kh;function L0(){if(kh)return Do;kh=1;var e=yl();function n(r,i){var o=i?e(r.buffer):r.buffer;return new r.constructor(o,r.byteOffset,r.length)}return Do=n,Do}var Lo,Nh;function cE(){if(Nh)return Lo;Nh=1;var e=yl(),n=aE(),r=sE(),i=uE(),o=L0(),a="[object Boolean]",s="[object Date]",u="[object Map]",l="[object Number]",c="[object RegExp]",d="[object Set]",f="[object String]",h="[object Symbol]",p="[object ArrayBuffer]",m="[object DataView]",b="[object Float32Array]",v="[object Float64Array]",g="[object Int8Array]",_="[object Int16Array]",y="[object Int32Array]",x="[object Uint8Array]",w="[object Uint8ClampedArray]",C="[object Uint16Array]",S="[object Uint32Array]";function k(A,N,M){var I=A.constructor;switch(N){case p:return e(A);case a:case s:return new I(+A);case m:return n(A,M);case b:case v:case g:case _:case y:case x:case w:case C:case S:return o(A,M);case u:return new I;case l:case f:return new I(A);case c:return r(A);case d:return new I;case h:return i(A)}}return Lo=k,Lo}var zo,Mh;function z0(){if(Mh)return zo;Mh=1;var e=Ke(),n=Object.create,r=(function(){function i(){}return function(o){if(!e(o))return{};if(n)return n(o);i.prototype=o;var a=new i;return i.prototype=void 0,a}})();return zo=r,zo}var Fo,Ah;function F0(){if(Ah)return Fo;Ah=1;var e=z0(),n=Sr(),r=Er();function i(o){return typeof o.constructor=="function"&&!r(o)?e(n(o)):{}}return Fo=i,Fo}var $o,Rh;function lE(){if(Rh)return $o;Rh=1;var e=rn(),n=ft(),r="[object Map]";function i(o){return n(o)&&e(o)==r}return $o=i,$o}var Bo,Ih;function fE(){if(Ih)return Bo;Ih=1;var e=lE(),n=Cr(),r=pl(),i=r&&r.isMap,o=i?n(i):e;return Bo=o,Bo}var Ho,Th;function dE(){if(Th)return Ho;Th=1;var e=rn(),n=ft(),r="[object Set]";function i(o){return n(o)&&e(o)==r}return Ho=i,Ho}var Uo,Ph;function hE(){if(Ph)return Uo;Ph=1;var e=dE(),n=Cr(),r=pl(),i=r&&r.isSet,o=i?n(i):e;return Uo=o,Uo}var Vo,Oh;function $0(){if(Oh)return Vo;Oh=1;var e=br(),n=dl(),r=xr(),i=ZC(),o=QC(),a=A0(),s=R0(),u=JC(),l=eE(),c=j0(),d=tE(),f=rn(),h=oE(),p=cE(),m=F0(),b=Te(),v=nn(),g=fE(),_=Ke(),y=hE(),x=Mt(),w=Ft(),C=1,S=2,k=4,A="[object Arguments]",N="[object Array]",M="[object Boolean]",I="[object Date]",O="[object Error]",R="[object Function]",P="[object GeneratorFunction]",j="[object Map]",L="[object Number]",z="[object Object]",F="[object RegExp]",Y="[object Set]",Z="[object String]",W="[object Symbol]",Q="[object WeakMap]",q="[object ArrayBuffer]",$="[object DataView]",H="[object Float32Array]",U="[object Float64Array]",V="[object Int8Array]",B="[object Int16Array]",K="[object Int32Array]",J="[object Uint8Array]",oe="[object Uint8ClampedArray]",te="[object Uint16Array]",ce="[object Uint32Array]",re={};re[A]=re[N]=re[q]=re[$]=re[M]=re[I]=re[H]=re[U]=re[V]=re[B]=re[K]=re[j]=re[L]=re[z]=re[F]=re[Y]=re[Z]=re[W]=re[J]=re[oe]=re[te]=re[ce]=!0,re[O]=re[R]=re[Q]=!1;function le(ae,Ae,Me,je,Ue,G){var ee,ie=Ae&C,pe=Ae&S,se=Ae&k;if(Me&&(ee=Ue?Me(ae,je,Ue,G):Me(ae)),ee!==void 0)return ee;if(!_(ae))return ae;var fe=b(ae);if(fe){if(ee=h(ae),!ie)return s(ae,ee)}else{var Re=f(ae),ve=Re==R||Re==P;if(v(ae))return a(ae,ie);if(Re==z||Re==A||ve&&!Ue){if(ee=pe||ve?{}:m(ae),!ie)return pe?l(ae,o(ee,ae)):u(ae,i(ee,ae))}else{if(!re[Re])return Ue?ae:{};ee=p(ae,Re,ie)}}G||(G=new e);var _e=G.get(ae);if(_e)return _e;G.set(ae,ee),y(ae)?ae.forEach(function(we){ee.add(le(we,Ae,Me,we,ae,G))}):g(ae)&&ae.forEach(function(we,he){ee.set(he,le(we,Ae,Me,he,ae,G))});var ze=se?pe?d:c:pe?w:x,ge=fe?void 0:ze(ae);return n(ge||ae,function(we,he){ge&&(he=we,we=ae[he]),r(ee,he,le(we,Ae,Me,he,ae,G))}),ee}return Vo=le,Vo}var Go,jh;function pE(){if(jh)return Go;jh=1;var e=$0(),n=4;function r(i){return e(i,n)}return Go=r,Go}var Wo,qh;function bl(){if(qh)return Wo;qh=1;function e(n){return function(){return n}}return Wo=e,Wo}var Yo,Dh;function gE(){if(Dh)return Yo;Dh=1;function e(n){return function(r,i,o){for(var a=-1,s=Object(r),u=o(r),l=u.length;l--;){var c=u[n?l:++a];if(i(s[c],c,s)===!1)break}return r}}return Yo=e,Yo}var Zo,Lh;function _l(){if(Lh)return Zo;Lh=1;var e=gE(),n=e();return Zo=n,Zo}var Ko,zh;function xl(){if(zh)return Ko;zh=1;var e=_l(),n=Mt();function r(i,o){return i&&e(i,o,n)}return Ko=r,Ko}var Xo,Fh;function mE(){if(Fh)return Xo;Fh=1;var e=bt();function n(r,i){return function(o,a){if(o==null)return o;if(!e(o))return r(o,a);for(var s=o.length,u=i?s:-1,l=Object(o);(i?u--:++u<s)&&a(l[u],u,l)!==!1;);return o}}return Xo=n,Xo}var Qo,$h;function kr(){if($h)return Qo;$h=1;var e=xl(),n=mE(),r=n(e);return Qo=r,Qo}var Jo,Bh;function $t(){if(Bh)return Jo;Bh=1;function e(n){return n}return Jo=e,Jo}var ea,Hh;function B0(){if(Hh)return ea;Hh=1;var e=$t();function n(r){return typeof r=="function"?r:e}return ea=n,ea}var ta,Uh;function H0(){if(Uh)return ta;Uh=1;var e=dl(),n=kr(),r=B0(),i=Te();function o(a,s){var u=i(a)?e:n;return u(a,r(s))}return ta=o,ta}var na,Vh;function U0(){return Vh||(Vh=1,na=H0()),na}var ra,Gh;function vE(){if(Gh)return ra;Gh=1;var e=kr();function n(r,i){var o=[];return e(r,function(a,s,u){i(a,s,u)&&o.push(a)}),o}return ra=n,ra}var ia,Wh;function yE(){if(Wh)return ia;Wh=1;var e="__lodash_hash_undefined__";function n(r){return this.__data__.set(r,e),this}return ia=n,ia}var oa,Yh;function bE(){if(Yh)return oa;Yh=1;function e(n){return this.__data__.has(n)}return oa=e,oa}var aa,Zh;function V0(){if(Zh)return aa;Zh=1;var e=fl(),n=yE(),r=bE();function i(o){var a=-1,s=o==null?0:o.length;for(this.__data__=new e;++a<s;)this.add(o[a])}return i.prototype.add=i.prototype.push=n,i.prototype.has=r,aa=i,aa}var sa,Kh;function _E(){if(Kh)return sa;Kh=1;function e(n,r){for(var i=-1,o=n==null?0:n.length;++i<o;)if(r(n[i],i,n))return!0;return!1}return sa=e,sa}var ua,Xh;function G0(){if(Xh)return ua;Xh=1;function e(n,r){return n.has(r)}return ua=e,ua}var ca,Qh;function W0(){if(Qh)return ca;Qh=1;var e=V0(),n=_E(),r=G0(),i=1,o=2;function a(s,u,l,c,d,f){var h=l&i,p=s.length,m=u.length;if(p!=m&&!(h&&m>p))return!1;var b=f.get(s),v=f.get(u);if(b&&v)return b==u&&v==s;var g=-1,_=!0,y=l&o?new e:void 0;for(f.set(s,u),f.set(u,s);++g<p;){var x=s[g],w=u[g];if(c)var C=h?c(w,x,g,u,s,f):c(x,w,g,s,u,f);if(C!==void 0){if(C)continue;_=!1;break}if(y){if(!n(u,function(S,k){if(!r(y,k)&&(x===S||d(x,S,l,c,f)))return y.push(k)})){_=!1;break}}else if(!(x===w||d(x,w,l,c,f))){_=!1;break}}return f.delete(s),f.delete(u),_}return ca=a,ca}var la,Jh;function xE(){if(Jh)return la;Jh=1;function e(n){var r=-1,i=Array(n.size);return n.forEach(function(o,a){i[++r]=[a,o]}),i}return la=e,la}var fa,ep;function wl(){if(ep)return fa;ep=1;function e(n){var r=-1,i=Array(n.size);return n.forEach(function(o){i[++r]=o}),i}return fa=e,fa}var da,tp;function wE(){if(tp)return da;tp=1;var e=tn(),n=D0(),r=en(),i=W0(),o=xE(),a=wl(),s=1,u=2,l="[object Boolean]",c="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",p="[object RegExp]",m="[object Set]",b="[object String]",v="[object Symbol]",g="[object ArrayBuffer]",_="[object DataView]",y=e?e.prototype:void 0,x=y?y.valueOf:void 0;function w(C,S,k,A,N,M,I){switch(k){case _:if(C.byteLength!=S.byteLength||C.byteOffset!=S.byteOffset)return!1;C=C.buffer,S=S.buffer;case g:return!(C.byteLength!=S.byteLength||!M(new n(C),new n(S)));case l:case c:case h:return r(+C,+S);case d:return C.name==S.name&&C.message==S.message;case p:case b:return C==S+"";case f:var O=o;case m:var R=A&s;if(O||(O=a),C.size!=S.size&&!R)return!1;var P=I.get(C);if(P)return P==S;A|=u,I.set(C,S);var j=i(O(C),O(S),A,N,M,I);return I.delete(C),j;case v:if(x)return x.call(C)==x.call(S)}return!1}return da=w,da}var ha,np;function CE(){if(np)return ha;np=1;var e=j0(),n=1,r=Object.prototype,i=r.hasOwnProperty;function o(a,s,u,l,c,d){var f=u&n,h=e(a),p=h.length,m=e(s),b=m.length;if(p!=b&&!f)return!1;for(var v=p;v--;){var g=h[v];if(!(f?g in s:i.call(s,g)))return!1}var _=d.get(a),y=d.get(s);if(_&&y)return _==s&&y==a;var x=!0;d.set(a,s),d.set(s,a);for(var w=f;++v<p;){g=h[v];var C=a[g],S=s[g];if(l)var k=f?l(S,C,g,s,a,d):l(C,S,g,a,s,d);if(!(k===void 0?C===S||c(C,S,u,l,d):k)){x=!1;break}w||(w=g=="constructor")}if(x&&!w){var A=a.constructor,N=s.constructor;A!=N&&"constructor"in a&&"constructor"in s&&!(typeof A=="function"&&A instanceof A&&typeof N=="function"&&N instanceof N)&&(x=!1)}return d.delete(a),d.delete(s),x}return ha=o,ha}var pa,rp;function EE(){if(rp)return pa;rp=1;var e=br(),n=W0(),r=wE(),i=CE(),o=rn(),a=Te(),s=nn(),u=Dn(),l=1,c="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,p=h.hasOwnProperty;function m(b,v,g,_,y,x){var w=a(b),C=a(v),S=w?d:o(b),k=C?d:o(v);S=S==c?f:S,k=k==c?f:k;var A=S==f,N=k==f,M=S==k;if(M&&s(b)){if(!s(v))return!1;w=!0,A=!1}if(M&&!A)return x||(x=new e),w||u(b)?n(b,v,g,_,y,x):r(b,v,S,g,_,y,x);if(!(g&l)){var I=A&&p.call(b,"__wrapped__"),O=N&&p.call(v,"__wrapped__");if(I||O){var R=I?b.value():b,P=O?v.value():v;return x||(x=new e),y(R,P,g,_,x)}}return M?(x||(x=new e),i(b,v,g,_,y,x)):!1}return pa=m,pa}var ga,ip;function Y0(){if(ip)return ga;ip=1;var e=EE(),n=ft();function r(i,o,a,s,u){return i===o?!0:i==null||o==null||!n(i)&&!n(o)?i!==i&&o!==o:e(i,o,a,s,r,u)}return ga=r,ga}var ma,op;function SE(){if(op)return ma;op=1;var e=br(),n=Y0(),r=1,i=2;function o(a,s,u,l){var c=u.length,d=c,f=!l;if(a==null)return!d;for(a=Object(a);c--;){var h=u[c];if(f&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++c<d;){h=u[c];var p=h[0],m=a[p],b=h[1];if(f&&h[2]){if(m===void 0&&!(p in a))return!1}else{var v=new e;if(l)var g=l(m,b,p,a,s,v);if(!(g===void 0?n(b,m,r|i,l,v):g))return!1}}return!0}return ma=o,ma}var va,ap;function Z0(){if(ap)return va;ap=1;var e=Ke();function n(r){return r===r&&!e(r)}return va=n,va}var ya,sp;function kE(){if(sp)return ya;sp=1;var e=Z0(),n=Mt();function r(i){for(var o=n(i),a=o.length;a--;){var s=o[a],u=i[s];o[a]=[s,u,e(u)]}return o}return ya=r,ya}var ba,up;function K0(){if(up)return ba;up=1;function e(n,r){return function(i){return i==null?!1:i[n]===r&&(r!==void 0||n in Object(i))}}return ba=e,ba}var _a,cp;function NE(){if(cp)return _a;cp=1;var e=SE(),n=kE(),r=K0();function i(o){var a=n(o);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(s){return s===o||e(s,o,a)}}return _a=i,_a}var xa,lp;function on(){if(lp)return xa;lp=1;var e=Lt(),n=ft(),r="[object Symbol]";function i(o){return typeof o=="symbol"||n(o)&&e(o)==r}return xa=i,xa}var wa,fp;function Cl(){if(fp)return wa;fp=1;var e=Te(),n=on(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function o(a,s){if(e(a))return!1;var u=typeof a;return u=="number"||u=="symbol"||u=="boolean"||a==null||n(a)?!0:i.test(a)||!r.test(a)||s!=null&&a in Object(s)}return wa=o,wa}var Ca,dp;function ME(){if(dp)return Ca;dp=1;var e=fl(),n="Expected a function";function r(i,o){if(typeof i!="function"||o!=null&&typeof o!="function")throw new TypeError(n);var a=function(){var s=arguments,u=o?o.apply(this,s):s[0],l=a.cache;if(l.has(u))return l.get(u);var c=i.apply(this,s);return a.cache=l.set(u,c)||l,c};return a.cache=new(r.Cache||e),a}return r.Cache=e,Ca=r,Ca}var Ea,hp;function AE(){if(hp)return Ea;hp=1;var e=ME(),n=500;function r(i){var o=e(i,function(s){return a.size===n&&a.clear(),s}),a=o.cache;return o}return Ea=r,Ea}var Sa,pp;function RE(){if(pp)return Sa;pp=1;var e=AE(),n=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=e(function(o){var a=[];return o.charCodeAt(0)===46&&a.push(""),o.replace(n,function(s,u,l,c){a.push(l?c.replace(r,"$1"):u||s)}),a});return Sa=i,Sa}var ka,gp;function Nr(){if(gp)return ka;gp=1;function e(n,r){for(var i=-1,o=n==null?0:n.length,a=Array(o);++i<o;)a[i]=r(n[i],i,n);return a}return ka=e,ka}var Na,mp;function IE(){if(mp)return Na;mp=1;var e=tn(),n=Nr(),r=Te(),i=on(),o=e?e.prototype:void 0,a=o?o.toString:void 0;function s(u){if(typeof u=="string")return u;if(r(u))return n(u,s)+"";if(i(u))return a?a.call(u):"";var l=u+"";return l=="0"&&1/u==-1/0?"-0":l}return Na=s,Na}var Ma,vp;function X0(){if(vp)return Ma;vp=1;var e=IE();function n(r){return r==null?"":e(r)}return Ma=n,Ma}var Aa,yp;function Mr(){if(yp)return Aa;yp=1;var e=Te(),n=Cl(),r=RE(),i=X0();function o(a,s){return e(a)?a:n(a,s)?[a]:r(i(a))}return Aa=o,Aa}var Ra,bp;function Ln(){if(bp)return Ra;bp=1;var e=on();function n(r){if(typeof r=="string"||e(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}return Ra=n,Ra}var Ia,_p;function Ar(){if(_p)return Ia;_p=1;var e=Mr(),n=Ln();function r(i,o){o=e(o,i);for(var a=0,s=o.length;i!=null&&a<s;)i=i[n(o[a++])];return a&&a==s?i:void 0}return Ia=r,Ia}var Ta,xp;function TE(){if(xp)return Ta;xp=1;var e=Ar();function n(r,i,o){var a=r==null?void 0:e(r,i);return a===void 0?o:a}return Ta=n,Ta}var Pa,wp;function PE(){if(wp)return Pa;wp=1;function e(n,r){return n!=null&&r in Object(n)}return Pa=e,Pa}var Oa,Cp;function Q0(){if(Cp)return Oa;Cp=1;var e=Mr(),n=qn(),r=Te(),i=wr(),o=hl(),a=Ln();function s(u,l,c){l=e(l,u);for(var d=-1,f=l.length,h=!1;++d<f;){var p=a(l[d]);if(!(h=u!=null&&c(u,p)))break;u=u[p]}return h||++d!=f?h:(f=u==null?0:u.length,!!f&&o(f)&&i(p,f)&&(r(u)||n(u)))}return Oa=s,Oa}var ja,Ep;function J0(){if(Ep)return ja;Ep=1;var e=PE(),n=Q0();function r(i,o){return i!=null&&n(i,o,e)}return ja=r,ja}var qa,Sp;function OE(){if(Sp)return qa;Sp=1;var e=Y0(),n=TE(),r=J0(),i=Cl(),o=Z0(),a=K0(),s=Ln(),u=1,l=2;function c(d,f){return i(d)&&o(f)?a(s(d),f):function(h){var p=n(h,d);return p===void 0&&p===f?r(h,d):e(f,p,u|l)}}return qa=c,qa}var Da,kp;function eb(){if(kp)return Da;kp=1;function e(n){return function(r){return r?.[n]}}return Da=e,Da}var La,Np;function jE(){if(Np)return La;Np=1;var e=Ar();function n(r){return function(i){return e(i,r)}}return La=n,La}var za,Mp;function qE(){if(Mp)return za;Mp=1;var e=eb(),n=jE(),r=Cl(),i=Ln();function o(a){return r(a)?e(i(a)):n(a)}return za=o,za}var Fa,Ap;function _t(){if(Ap)return Fa;Ap=1;var e=NE(),n=OE(),r=$t(),i=Te(),o=qE();function a(s){return typeof s=="function"?s:s==null?r:typeof s=="object"?i(s)?n(s[0],s[1]):e(s):o(s)}return Fa=a,Fa}var $a,Rp;function tb(){if(Rp)return $a;Rp=1;var e=I0(),n=vE(),r=_t(),i=Te();function o(a,s){var u=i(a)?e:n;return u(a,r(s,3))}return $a=o,$a}var Ba,Ip;function DE(){if(Ip)return Ba;Ip=1;var e=Object.prototype,n=e.hasOwnProperty;function r(i,o){return i!=null&&n.call(i,o)}return Ba=r,Ba}var Ha,Tp;function nb(){if(Tp)return Ha;Tp=1;var e=DE(),n=Q0();function r(i,o){return i!=null&&n(i,o,e)}return Ha=r,Ha}var Ua,Pp;function LE(){if(Pp)return Ua;Pp=1;var e=gl(),n=rn(),r=qn(),i=Te(),o=bt(),a=nn(),s=Er(),u=Dn(),l="[object Map]",c="[object Set]",d=Object.prototype,f=d.hasOwnProperty;function h(p){if(p==null)return!0;if(o(p)&&(i(p)||typeof p=="string"||typeof p.splice=="function"||a(p)||u(p)||r(p)))return!p.length;var m=n(p);if(m==l||m==c)return!p.size;if(s(p))return!e(p).length;for(var b in p)if(f.call(p,b))return!1;return!0}return Ua=h,Ua}var Va,Op;function rb(){if(Op)return Va;Op=1;function e(n){return n===void 0}return Va=e,Va}var Ga,jp;function ib(){if(jp)return Ga;jp=1;var e=kr(),n=bt();function r(i,o){var a=-1,s=n(i)?Array(i.length):[];return e(i,function(u,l,c){s[++a]=o(u,l,c)}),s}return Ga=r,Ga}var Wa,qp;function ob(){if(qp)return Wa;qp=1;var e=Nr(),n=_t(),r=ib(),i=Te();function o(a,s){var u=i(a)?e:r;return u(a,n(s,3))}return Wa=o,Wa}var Ya,Dp;function zE(){if(Dp)return Ya;Dp=1;function e(n,r,i,o){var a=-1,s=n==null?0:n.length;for(o&&s&&(i=n[++a]);++a<s;)i=r(i,n[a],a,n);return i}return Ya=e,Ya}var Za,Lp;function FE(){if(Lp)return Za;Lp=1;function e(n,r,i,o,a){return a(n,function(s,u,l){i=o?(o=!1,s):r(i,s,u,l)}),i}return Za=e,Za}var Ka,zp;function ab(){if(zp)return Ka;zp=1;var e=zE(),n=kr(),r=_t(),i=FE(),o=Te();function a(s,u,l){var c=o(s)?e:i,d=arguments.length<3;return c(s,r(u,4),l,d,n)}return Ka=a,Ka}var Xa,Fp;function $E(){if(Fp)return Xa;Fp=1;var e=Lt(),n=Te(),r=ft(),i="[object String]";function o(a){return typeof a=="string"||!n(a)&&r(a)&&e(a)==i}return Xa=o,Xa}var Qa,$p;function BE(){if($p)return Qa;$p=1;var e=eb(),n=e("length");return Qa=n,Qa}var Ja,Bp;function HE(){if(Bp)return Ja;Bp=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=n+r+i,a="\\ufe0e\\ufe0f",s="\\u200d",u=RegExp("["+s+e+o+a+"]");function l(c){return u.test(c)}return Ja=l,Ja}var es,Hp;function UE(){if(Hp)return es;Hp=1;var e="\\ud800-\\udfff",n="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",o=n+r+i,a="\\ufe0e\\ufe0f",s="["+e+"]",u="["+o+"]",l="\\ud83c[\\udffb-\\udfff]",c="(?:"+u+"|"+l+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",m=c+"?",b="["+a+"]?",v="(?:"+p+"(?:"+[d,f,h].join("|")+")"+b+m+")*",g=b+m+v,_="(?:"+[d+u+"?",u,f,h,s].join("|")+")",y=RegExp(l+"(?="+l+")|"+_+g,"g");function x(w){for(var C=y.lastIndex=0;y.test(w);)++C;return C}return es=x,es}var ts,Up;function VE(){if(Up)return ts;Up=1;var e=BE(),n=HE(),r=UE();function i(o){return n(o)?r(o):e(o)}return ts=i,ts}var ns,Vp;function GE(){if(Vp)return ns;Vp=1;var e=gl(),n=rn(),r=bt(),i=$E(),o=VE(),a="[object Map]",s="[object Set]";function u(l){if(l==null)return 0;if(r(l))return i(l)?o(l):l.length;var c=n(l);return c==a||c==s?l.size:e(l).length}return ns=u,ns}var rs,Gp;function WE(){if(Gp)return rs;Gp=1;var e=dl(),n=z0(),r=xl(),i=_t(),o=Sr(),a=Te(),s=nn(),u=On(),l=Ke(),c=Dn();function d(f,h,p){var m=a(f),b=m||s(f)||c(f);if(h=i(h,4),p==null){var v=f&&f.constructor;b?p=m?new v:[]:l(f)?p=u(v)?n(o(f)):{}:p={}}return(b?e:r)(f,function(g,_,y){return h(p,g,_,y)}),p}return rs=d,rs}var is,Wp;function YE(){if(Wp)return is;Wp=1;var e=tn(),n=qn(),r=Te(),i=e?e.isConcatSpreadable:void 0;function o(a){return r(a)||n(a)||!!(i&&a&&a[i])}return is=o,is}var os,Yp;function El(){if(Yp)return os;Yp=1;var e=vl(),n=YE();function r(i,o,a,s,u){var l=-1,c=i.length;for(a||(a=n),u||(u=[]);++l<c;){var d=i[l];o>0&&a(d)?o>1?r(d,o-1,a,s,u):e(u,d):s||(u[u.length]=d)}return u}return os=r,os}var as,Zp;function ZE(){if(Zp)return as;Zp=1;function e(n,r,i){switch(i.length){case 0:return n.call(r);case 1:return n.call(r,i[0]);case 2:return n.call(r,i[0],i[1]);case 3:return n.call(r,i[0],i[1],i[2])}return n.apply(r,i)}return as=e,as}var ss,Kp;function sb(){if(Kp)return ss;Kp=1;var e=ZE(),n=Math.max;function r(i,o,a){return o=n(o===void 0?i.length-1:o,0),function(){for(var s=arguments,u=-1,l=n(s.length-o,0),c=Array(l);++u<l;)c[u]=s[o+u];u=-1;for(var d=Array(o+1);++u<o;)d[u]=s[u];return d[o]=a(c),e(i,this,d)}}return ss=r,ss}var us,Xp;function KE(){if(Xp)return us;Xp=1;var e=bl(),n=k0(),r=$t(),i=n?function(o,a){return n(o,"toString",{configurable:!0,enumerable:!1,value:e(a),writable:!0})}:r;return us=i,us}var cs,Qp;function XE(){if(Qp)return cs;Qp=1;var e=800,n=16,r=Date.now;function i(o){var a=0,s=0;return function(){var u=r(),l=n-(u-s);if(s=u,l>0){if(++a>=e)return arguments[0]}else a=0;return o.apply(void 0,arguments)}}return cs=i,cs}var ls,Jp;function ub(){if(Jp)return ls;Jp=1;var e=KE(),n=XE(),r=n(e);return ls=r,ls}var fs,eg;function Rr(){if(eg)return fs;eg=1;var e=$t(),n=sb(),r=ub();function i(o,a){return r(n(o,a,e),o+"")}return fs=i,fs}var ds,tg;function cb(){if(tg)return ds;tg=1;function e(n,r,i,o){for(var a=n.length,s=i+(o?1:-1);o?s--:++s<a;)if(r(n[s],s,n))return s;return-1}return ds=e,ds}var hs,ng;function QE(){if(ng)return hs;ng=1;function e(n){return n!==n}return hs=e,hs}var ps,rg;function JE(){if(rg)return ps;rg=1;function e(n,r,i){for(var o=i-1,a=n.length;++o<a;)if(n[o]===r)return o;return-1}return ps=e,ps}var gs,ig;function eS(){if(ig)return gs;ig=1;var e=cb(),n=QE(),r=JE();function i(o,a,s){return a===a?r(o,a,s):e(o,n,s)}return gs=i,gs}var ms,og;function tS(){if(og)return ms;og=1;var e=eS();function n(r,i){var o=r==null?0:r.length;return!!o&&e(r,i,0)>-1}return ms=n,ms}var vs,ag;function nS(){if(ag)return vs;ag=1;function e(n,r,i){for(var o=-1,a=n==null?0:n.length;++o<a;)if(i(r,n[o]))return!0;return!1}return vs=e,vs}var ys,sg;function rS(){if(sg)return ys;sg=1;function e(){}return ys=e,ys}var bs,ug;function iS(){if(ug)return bs;ug=1;var e=q0(),n=rS(),r=wl(),i=1/0,o=e&&1/r(new e([,-0]))[1]==i?function(a){return new e(a)}:n;return bs=o,bs}var _s,cg;function oS(){if(cg)return _s;cg=1;var e=V0(),n=tS(),r=nS(),i=G0(),o=iS(),a=wl(),s=200;function u(l,c,d){var f=-1,h=n,p=l.length,m=!0,b=[],v=b;if(d)m=!1,h=r;else if(p>=s){var g=c?null:o(l);if(g)return a(g);m=!1,h=i,v=new e}else v=c?[]:b;e:for(;++f<p;){var _=l[f],y=c?c(_):_;if(_=d||_!==0?_:0,m&&y===y){for(var x=v.length;x--;)if(v[x]===y)continue e;c&&v.push(y),b.push(_)}else h(v,y,d)||(v!==b&&v.push(y),b.push(_))}return b}return _s=u,_s}var xs,lg;function lb(){if(lg)return xs;lg=1;var e=bt(),n=ft();function r(i){return n(i)&&e(i)}return xs=r,xs}var ws,fg;function aS(){if(fg)return ws;fg=1;var e=El(),n=Rr(),r=oS(),i=lb(),o=n(function(a){return r(e(a,1,i,!0))});return ws=o,ws}var Cs,dg;function sS(){if(dg)return Cs;dg=1;var e=Nr();function n(r,i){return e(i,function(o){return r[o]})}return Cs=n,Cs}var Es,hg;function fb(){if(hg)return Es;hg=1;var e=sS(),n=Mt();function r(i){return i==null?[]:e(i,n(i))}return Es=r,Es}var Ss,pg;function Xe(){if(pg)return Ss;pg=1;var e;if(typeof Yc=="function")try{e={clone:pE(),constant:bl(),each:U0(),filter:tb(),has:nb(),isArray:Te(),isEmpty:LE(),isFunction:On(),isUndefined:rb(),keys:Mt(),map:ob(),reduce:ab(),size:GE(),transform:WE(),union:aS(),values:fb()}}catch{}return e||(e=window._),Ss=e,Ss}var ks,gg;function Sl(){if(gg)return ks;gg=1;var e=Xe();ks=o;var n="\0",r="\0",i="";function o(d){this._isDirected=e.has(d,"directed")?d.directed:!0,this._isMultigraph=e.has(d,"multigraph")?d.multigraph:!1,this._isCompound=e.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(d){return this._label=d,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultNodeLabelFn=d,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return e.keys(this._nodes)},o.prototype.sources=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._in[f])})},o.prototype.sinks=function(){var d=this;return e.filter(this.nodes(),function(f){return e.isEmpty(d._out[f])})},o.prototype.setNodes=function(d,f){var h=arguments,p=this;return e.each(d,function(m){h.length>1?p.setNode(m,f):p.setNode(m)}),this},o.prototype.setNode=function(d,f){return e.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=f),this):(this._nodes[d]=arguments.length>1?f:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},o.prototype.node=function(d){return this._nodes[d]},o.prototype.hasNode=function(d){return e.has(this._nodes,d)},o.prototype.removeNode=function(d){var f=this;if(e.has(this._nodes,d)){var h=function(p){f.removeEdge(f._edgeObjs[p])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],e.each(this.children(d),function(p){f.setParent(p)}),delete this._children[d]),e.each(e.keys(this._in[d]),h),delete this._in[d],delete this._preds[d],e.each(e.keys(this._out[d]),h),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},o.prototype.setParent=function(d,f){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(f))f=r;else{f+="";for(var h=f;!e.isUndefined(h);h=this.parent(h))if(h===d)throw new Error("Setting "+f+" as parent of "+d+" would create a cycle");this.setNode(f)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=f,this._children[f][d]=!0,this},o.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},o.prototype.parent=function(d){if(this._isCompound){var f=this._parent[d];if(f!==r)return f}},o.prototype.children=function(d){if(e.isUndefined(d)&&(d=r),this._isCompound){var f=this._children[d];if(f)return e.keys(f)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}},o.prototype.predecessors=function(d){var f=this._preds[d];if(f)return e.keys(f)},o.prototype.successors=function(d){var f=this._sucs[d];if(f)return e.keys(f)},o.prototype.neighbors=function(d){var f=this.predecessors(d);if(f)return e.union(f,this.successors(d))},o.prototype.isLeaf=function(d){var f;return this.isDirected()?f=this.successors(d):f=this.neighbors(d),f.length===0},o.prototype.filterNodes=function(d){var f=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});f.setGraph(this.graph());var h=this;e.each(this._nodes,function(b,v){d(v)&&f.setNode(v,b)}),e.each(this._edgeObjs,function(b){f.hasNode(b.v)&&f.hasNode(b.w)&&f.setEdge(b,h.edge(b))});var p={};function m(b){var v=h.parent(b);return v===void 0||f.hasNode(v)?(p[b]=v,v):v in p?p[v]:m(v)}return this._isCompound&&e.each(f.nodes(),function(b){f.setParent(b,m(b))}),f},o.prototype.setDefaultEdgeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultEdgeLabelFn=d,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return e.values(this._edgeObjs)},o.prototype.setPath=function(d,f){var h=this,p=arguments;return e.reduce(d,function(m,b){return p.length>1?h.setEdge(m,b,f):h.setEdge(m,b),b}),this},o.prototype.setEdge=function(){var d,f,h,p,m=!1,b=arguments[0];typeof b=="object"&&b!==null&&"v"in b?(d=b.v,f=b.w,h=b.name,arguments.length===2&&(p=arguments[1],m=!0)):(d=b,f=arguments[1],h=arguments[3],arguments.length>2&&(p=arguments[2],m=!0)),d=""+d,f=""+f,e.isUndefined(h)||(h=""+h);var v=u(this._isDirected,d,f,h);if(e.has(this._edgeLabels,v))return m&&(this._edgeLabels[v]=p),this;if(!e.isUndefined(h)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(f),this._edgeLabels[v]=m?p:this._defaultEdgeLabelFn(d,f,h);var g=l(this._isDirected,d,f,h);return d=g.v,f=g.w,Object.freeze(g),this._edgeObjs[v]=g,a(this._preds[f],d),a(this._sucs[d],f),this._in[f][v]=g,this._out[d][v]=g,this._edgeCount++,this},o.prototype.edge=function(d,f,h){var p=arguments.length===1?c(this._isDirected,arguments[0]):u(this._isDirected,d,f,h);return this._edgeLabels[p]},o.prototype.hasEdge=function(d,f,h){var p=arguments.length===1?c(this._isDirected,arguments[0]):u(this._isDirected,d,f,h);return e.has(this._edgeLabels,p)},o.prototype.removeEdge=function(d,f,h){var p=arguments.length===1?c(this._isDirected,arguments[0]):u(this._isDirected,d,f,h),m=this._edgeObjs[p];return m&&(d=m.v,f=m.w,delete this._edgeLabels[p],delete this._edgeObjs[p],s(this._preds[f],d),s(this._sucs[d],f),delete this._in[f][p],delete this._out[d][p],this._edgeCount--),this},o.prototype.inEdges=function(d,f){var h=this._in[d];if(h){var p=e.values(h);return f?e.filter(p,function(m){return m.v===f}):p}},o.prototype.outEdges=function(d,f){var h=this._out[d];if(h){var p=e.values(h);return f?e.filter(p,function(m){return m.w===f}):p}},o.prototype.nodeEdges=function(d,f){var h=this.inEdges(d,f);if(h)return h.concat(this.outEdges(d,f))};function a(d,f){d[f]?d[f]++:d[f]=1}function s(d,f){--d[f]||delete d[f]}function u(d,f,h,p){var m=""+f,b=""+h;if(!d&&m>b){var v=m;m=b,b=v}return m+i+b+i+(e.isUndefined(p)?n:p)}function l(d,f,h,p){var m=""+f,b=""+h;if(!d&&m>b){var v=m;m=b,b=v}var g={v:m,w:b};return p&&(g.name=p),g}function c(d,f){return u(d,f.v,f.w,f.name)}return ks}var Ns,mg;function uS(){return mg||(mg=1,Ns="2.1.8"),Ns}var Ms,vg;function cS(){return vg||(vg=1,Ms={Graph:Sl(),version:uS()}),Ms}var As,yg;function lS(){if(yg)return As;yg=1;var e=Xe(),n=Sl();As={write:r,read:a};function r(s){var u={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:i(s),edges:o(s)};return e.isUndefined(s.graph())||(u.value=e.clone(s.graph())),u}function i(s){return e.map(s.nodes(),function(u){var l=s.node(u),c=s.parent(u),d={v:u};return e.isUndefined(l)||(d.value=l),e.isUndefined(c)||(d.parent=c),d})}function o(s){return e.map(s.edges(),function(u){var l=s.edge(u),c={v:u.v,w:u.w};return e.isUndefined(u.name)||(c.name=u.name),e.isUndefined(l)||(c.value=l),c})}function a(s){var u=new n(s.options).setGraph(s.value);return e.each(s.nodes,function(l){u.setNode(l.v,l.value),l.parent&&u.setParent(l.v,l.parent)}),e.each(s.edges,function(l){u.setEdge({v:l.v,w:l.w,name:l.name},l.value)}),u}return As}var Rs,bg;function fS(){if(bg)return Rs;bg=1;var e=Xe();Rs=n;function n(r){var i={},o=[],a;function s(u){e.has(i,u)||(i[u]=!0,a.push(u),e.each(r.successors(u),s),e.each(r.predecessors(u),s))}return e.each(r.nodes(),function(u){a=[],s(u),a.length&&o.push(a)}),o}return Rs}var Is,_g;function db(){if(_g)return Is;_g=1;var e=Xe();Is=n;function n(){this._arr=[],this._keyIndices={}}return n.prototype.size=function(){return this._arr.length},n.prototype.keys=function(){return this._arr.map(function(r){return r.key})},n.prototype.has=function(r){return e.has(this._keyIndices,r)},n.prototype.priority=function(r){var i=this._keyIndices[r];if(i!==void 0)return this._arr[i].priority},n.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},n.prototype.add=function(r,i){var o=this._keyIndices;if(r=String(r),!e.has(o,r)){var a=this._arr,s=a.length;return o[r]=s,a.push({key:r,priority:i}),this._decrease(s),!0}return!1},n.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},n.prototype.decrease=function(r,i){var o=this._keyIndices[r];if(i>this._arr[o].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[o].priority+" New: "+i);this._arr[o].priority=i,this._decrease(o)},n.prototype._heapify=function(r){var i=this._arr,o=2*r,a=o+1,s=r;o<i.length&&(s=i[o].priority<i[s].priority?o:s,a<i.length&&(s=i[a].priority<i[s].priority?a:s),s!==r&&(this._swap(r,s),this._heapify(s)))},n.prototype._decrease=function(r){for(var i=this._arr,o=i[r].priority,a;r!==0&&(a=r>>1,!(i[a].priority<o));)this._swap(r,a),r=a},n.prototype._swap=function(r,i){var o=this._arr,a=this._keyIndices,s=o[r],u=o[i];o[r]=u,o[i]=s,a[u.key]=r,a[s.key]=i},Is}var Ts,xg;function hb(){if(xg)return Ts;xg=1;var e=Xe(),n=db();Ts=i;var r=e.constant(1);function i(a,s,u,l){return o(a,String(s),u||r,l||function(c){return a.outEdges(c)})}function o(a,s,u,l){var c={},d=new n,f,h,p=function(m){var b=m.v!==f?m.v:m.w,v=c[b],g=u(m),_=h.distance+g;if(g<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+m+" Weight: "+g);_<v.distance&&(v.distance=_,v.predecessor=f,d.decrease(b,_))};for(a.nodes().forEach(function(m){var b=m===s?0:Number.POSITIVE_INFINITY;c[m]={distance:b},d.add(m,b)});d.size()>0&&(f=d.removeMin(),h=c[f],h.distance!==Number.POSITIVE_INFINITY);)l(f).forEach(p);return c}return Ts}var Ps,wg;function dS(){if(wg)return Ps;wg=1;var e=hb(),n=Xe();Ps=r;function r(i,o,a){return n.transform(i.nodes(),function(s,u){s[u]=e(i,u,o,a)},{})}return Ps}var Os,Cg;function pb(){if(Cg)return Os;Cg=1;var e=Xe();Os=n;function n(r){var i=0,o=[],a={},s=[];function u(l){var c=a[l]={onStack:!0,lowlink:i,index:i++};if(o.push(l),r.successors(l).forEach(function(h){e.has(a,h)?a[h].onStack&&(c.lowlink=Math.min(c.lowlink,a[h].index)):(u(h),c.lowlink=Math.min(c.lowlink,a[h].lowlink))}),c.lowlink===c.index){var d=[],f;do f=o.pop(),a[f].onStack=!1,d.push(f);while(l!==f);s.push(d)}}return r.nodes().forEach(function(l){e.has(a,l)||u(l)}),s}return Os}var js,Eg;function hS(){if(Eg)return js;Eg=1;var e=Xe(),n=pb();js=r;function r(i){return e.filter(n(i),function(o){return o.length>1||o.length===1&&i.hasEdge(o[0],o[0])})}return js}var qs,Sg;function pS(){if(Sg)return qs;Sg=1;var e=Xe();qs=r;var n=e.constant(1);function r(o,a,s){return i(o,a||n,s||function(u){return o.outEdges(u)})}function i(o,a,s){var u={},l=o.nodes();return l.forEach(function(c){u[c]={},u[c][c]={distance:0},l.forEach(function(d){c!==d&&(u[c][d]={distance:Number.POSITIVE_INFINITY})}),s(c).forEach(function(d){var f=d.v===c?d.w:d.v,h=a(d);u[c][f]={distance:h,predecessor:c}})}),l.forEach(function(c){var d=u[c];l.forEach(function(f){var h=u[f];l.forEach(function(p){var m=h[c],b=d[p],v=h[p],g=m.distance+b.distance;g<v.distance&&(v.distance=g,v.predecessor=b.predecessor)})})}),u}return qs}var Ds,kg;function gb(){if(kg)return Ds;kg=1;var e=Xe();Ds=n,n.CycleException=r;function n(i){var o={},a={},s=[];function u(l){if(e.has(a,l))throw new r;e.has(o,l)||(a[l]=!0,o[l]=!0,e.each(i.predecessors(l),u),delete a[l],s.push(l))}if(e.each(i.sinks(),u),e.size(o)!==i.nodeCount())throw new r;return s}function r(){}return r.prototype=new Error,Ds}var Ls,Ng;function gS(){if(Ng)return Ls;Ng=1;var e=gb();Ls=n;function n(r){try{e(r)}catch(i){if(i instanceof e.CycleException)return!1;throw i}return!0}return Ls}var zs,Mg;function mb(){if(Mg)return zs;Mg=1;var e=Xe();zs=n;function n(i,o,a){e.isArray(o)||(o=[o]);var s=(i.isDirected()?i.successors:i.neighbors).bind(i),u=[],l={};return e.each(o,function(c){if(!i.hasNode(c))throw new Error("Graph does not have node: "+c);r(i,c,a==="post",l,s,u)}),u}function r(i,o,a,s,u,l){e.has(s,o)||(s[o]=!0,a||l.push(o),e.each(u(o),function(c){r(i,c,a,s,u,l)}),a&&l.push(o))}return zs}var Fs,Ag;function mS(){if(Ag)return Fs;Ag=1;var e=mb();Fs=n;function n(r,i){return e(r,i,"post")}return Fs}var $s,Rg;function vS(){if(Rg)return $s;Rg=1;var e=mb();$s=n;function n(r,i){return e(r,i,"pre")}return $s}var Bs,Ig;function yS(){if(Ig)return Bs;Ig=1;var e=Xe(),n=Sl(),r=db();Bs=i;function i(o,a){var s=new n,u={},l=new r,c;function d(h){var p=h.v===c?h.w:h.v,m=l.priority(p);if(m!==void 0){var b=a(h);b<m&&(u[p]=c,l.decrease(p,b))}}if(o.nodeCount()===0)return s;e.each(o.nodes(),function(h){l.add(h,Number.POSITIVE_INFINITY),s.setNode(h)}),l.decrease(o.nodes()[0],0);for(var f=!1;l.size()>0;){if(c=l.removeMin(),e.has(u,c))s.setEdge(c,u[c]);else{if(f)throw new Error("Input graph is not connected: "+o);f=!0}o.nodeEdges(c).forEach(d)}return s}return Bs}var Hs,Tg;function bS(){return Tg||(Tg=1,Hs={components:fS(),dijkstra:hb(),dijkstraAll:dS(),findCycles:hS(),floydWarshall:pS(),isAcyclic:gS(),postorder:mS(),preorder:vS(),prim:yS(),tarjan:pb(),topsort:gb()}),Hs}var Us,Pg;function _S(){if(Pg)return Us;Pg=1;var e=cS();return Us={Graph:e.Graph,json:lS(),alg:bS(),version:e.version},Us}var Vs,Og;function nt(){if(Og)return Vs;Og=1;var e;if(typeof Yc=="function")try{e=_S()}catch{}return e||(e=window.graphlib),Vs=e,Vs}var Gs,jg;function xS(){if(jg)return Gs;jg=1;var e=$0(),n=1,r=4;function i(o){return e(o,n|r)}return Gs=i,Gs}var Ws,qg;function Ir(){if(qg)return Ws;qg=1;var e=en(),n=bt(),r=wr(),i=Ke();function o(a,s,u){if(!i(u))return!1;var l=typeof s;return(l=="number"?n(u)&&r(s,u.length):l=="string"&&s in u)?e(u[s],a):!1}return Ws=o,Ws}var Ys,Dg;function wS(){if(Dg)return Ys;Dg=1;var e=Rr(),n=en(),r=Ir(),i=Ft(),o=Object.prototype,a=o.hasOwnProperty,s=e(function(u,l){u=Object(u);var c=-1,d=l.length,f=d>2?l[2]:void 0;for(f&&r(l[0],l[1],f)&&(d=1);++c<d;)for(var h=l[c],p=i(h),m=-1,b=p.length;++m<b;){var v=p[m],g=u[v];(g===void 0||n(g,o[v])&&!a.call(u,v))&&(u[v]=h[v])}return u});return Ys=s,Ys}var Zs,Lg;function CS(){if(Lg)return Zs;Lg=1;var e=_t(),n=bt(),r=Mt();function i(o){return function(a,s,u){var l=Object(a);if(!n(a)){var c=e(s,3);a=r(a),s=function(f){return c(l[f],f,l)}}var d=o(a,s,u);return d>-1?l[c?a[d]:d]:void 0}}return Zs=i,Zs}var Ks,zg;function ES(){if(zg)return Ks;zg=1;var e=/\s/;function n(r){for(var i=r.length;i--&&e.test(r.charAt(i)););return i}return Ks=n,Ks}var Xs,Fg;function SS(){if(Fg)return Xs;Fg=1;var e=ES(),n=/^\s+/;function r(i){return i&&i.slice(0,e(i)+1).replace(n,"")}return Xs=r,Xs}var Qs,$g;function kS(){if($g)return Qs;$g=1;var e=SS(),n=Ke(),r=on(),i=NaN,o=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,s=/^0o[0-7]+$/i,u=parseInt;function l(c){if(typeof c=="number")return c;if(r(c))return i;if(n(c)){var d=typeof c.valueOf=="function"?c.valueOf():c;c=n(d)?d+"":d}if(typeof c!="string")return c===0?c:+c;c=e(c);var f=a.test(c);return f||s.test(c)?u(c.slice(2),f?2:8):o.test(c)?i:+c}return Qs=l,Qs}var Js,Bg;function vb(){if(Bg)return Js;Bg=1;var e=kS(),n=1/0,r=17976931348623157e292;function i(o){if(!o)return o===0?o:0;if(o=e(o),o===n||o===-n){var a=o<0?-1:1;return a*r}return o===o?o:0}return Js=i,Js}var eu,Hg;function NS(){if(Hg)return eu;Hg=1;var e=vb();function n(r){var i=e(r),o=i%1;return i===i?o?i-o:i:0}return eu=n,eu}var tu,Ug;function MS(){if(Ug)return tu;Ug=1;var e=cb(),n=_t(),r=NS(),i=Math.max;function o(a,s,u){var l=a==null?0:a.length;if(!l)return-1;var c=u==null?0:r(u);return c<0&&(c=i(l+c,0)),e(a,n(s,3),c)}return tu=o,tu}var nu,Vg;function AS(){if(Vg)return nu;Vg=1;var e=CS(),n=MS(),r=e(n);return nu=r,nu}var ru,Gg;function yb(){if(Gg)return ru;Gg=1;var e=El();function n(r){var i=r==null?0:r.length;return i?e(r,1):[]}return ru=n,ru}var iu,Wg;function RS(){if(Wg)return iu;Wg=1;var e=_l(),n=B0(),r=Ft();function i(o,a){return o==null?o:e(o,n(a),r)}return iu=i,iu}var ou,Yg;function IS(){if(Yg)return ou;Yg=1;function e(n){var r=n==null?0:n.length;return r?n[r-1]:void 0}return ou=e,ou}var au,Zg;function TS(){if(Zg)return au;Zg=1;var e=_r(),n=xl(),r=_t();function i(o,a){var s={};return a=r(a,3),n(o,function(u,l,c){e(s,l,a(u,l,c))}),s}return au=i,au}var su,Kg;function kl(){if(Kg)return su;Kg=1;var e=on();function n(r,i,o){for(var a=-1,s=r.length;++a<s;){var u=r[a],l=i(u);if(l!=null&&(c===void 0?l===l&&!e(l):o(l,c)))var c=l,d=u}return d}return su=n,su}var uu,Xg;function PS(){if(Xg)return uu;Xg=1;function e(n,r){return n>r}return uu=e,uu}var cu,Qg;function OS(){if(Qg)return cu;Qg=1;var e=kl(),n=PS(),r=$t();function i(o){return o&&o.length?e(o,r,n):void 0}return cu=i,cu}var lu,Jg;function bb(){if(Jg)return lu;Jg=1;var e=_r(),n=en();function r(i,o,a){(a!==void 0&&!n(i[o],a)||a===void 0&&!(o in i))&&e(i,o,a)}return lu=r,lu}var fu,em;function jS(){if(em)return fu;em=1;var e=Lt(),n=Sr(),r=ft(),i="[object Object]",o=Function.prototype,a=Object.prototype,s=o.toString,u=a.hasOwnProperty,l=s.call(Object);function c(d){if(!r(d)||e(d)!=i)return!1;var f=n(d);if(f===null)return!0;var h=u.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&s.call(h)==l}return fu=c,fu}var du,tm;function _b(){if(tm)return du;tm=1;function e(n,r){if(!(r==="constructor"&&typeof n[r]=="function")&&r!="__proto__")return n[r]}return du=e,du}var hu,nm;function qS(){if(nm)return hu;nm=1;var e=jn(),n=Ft();function r(i){return e(i,n(i))}return hu=r,hu}var pu,rm;function DS(){if(rm)return pu;rm=1;var e=bb(),n=A0(),r=L0(),i=R0(),o=F0(),a=qn(),s=Te(),u=lb(),l=nn(),c=On(),d=Ke(),f=jS(),h=Dn(),p=_b(),m=qS();function b(v,g,_,y,x,w,C){var S=p(v,_),k=p(g,_),A=C.get(k);if(A){e(v,_,A);return}var N=w?w(S,k,_+"",v,g,C):void 0,M=N===void 0;if(M){var I=s(k),O=!I&&l(k),R=!I&&!O&&h(k);N=k,I||O||R?s(S)?N=S:u(S)?N=i(S):O?(M=!1,N=n(k,!0)):R?(M=!1,N=r(k,!0)):N=[]:f(k)||a(k)?(N=S,a(S)?N=m(S):(!d(S)||c(S))&&(N=o(k))):M=!1}M&&(C.set(k,N),x(N,k,y,w,C),C.delete(k)),e(v,_,N)}return pu=b,pu}var gu,im;function LS(){if(im)return gu;im=1;var e=br(),n=bb(),r=_l(),i=DS(),o=Ke(),a=Ft(),s=_b();function u(l,c,d,f,h){l!==c&&r(c,function(p,m){if(h||(h=new e),o(p))i(l,c,m,d,u,f,h);else{var b=f?f(s(l,m),p,m+"",l,c,h):void 0;b===void 0&&(b=p),n(l,m,b)}},a)}return gu=u,gu}var mu,om;function zS(){if(om)return mu;om=1;var e=Rr(),n=Ir();function r(i){return e(function(o,a){var s=-1,u=a.length,l=u>1?a[u-1]:void 0,c=u>2?a[2]:void 0;for(l=i.length>3&&typeof l=="function"?(u--,l):void 0,c&&n(a[0],a[1],c)&&(l=u<3?void 0:l,u=1),o=Object(o);++s<u;){var d=a[s];d&&i(o,d,s,l)}return o})}return mu=r,mu}var vu,am;function FS(){if(am)return vu;am=1;var e=LS(),n=zS(),r=n(function(i,o,a){e(i,o,a)});return vu=r,vu}var yu,sm;function xb(){if(sm)return yu;sm=1;function e(n,r){return n<r}return yu=e,yu}var bu,um;function $S(){if(um)return bu;um=1;var e=kl(),n=xb(),r=$t();function i(o){return o&&o.length?e(o,r,n):void 0}return bu=i,bu}var _u,cm;function BS(){if(cm)return _u;cm=1;var e=kl(),n=_t(),r=xb();function i(o,a){return o&&o.length?e(o,n(a,2),r):void 0}return _u=i,_u}var xu,lm;function HS(){if(lm)return xu;lm=1;var e=it(),n=function(){return e.Date.now()};return xu=n,xu}var wu,fm;function US(){if(fm)return wu;fm=1;var e=xr(),n=Mr(),r=wr(),i=Ke(),o=Ln();function a(s,u,l,c){if(!i(s))return s;u=n(u,s);for(var d=-1,f=u.length,h=f-1,p=s;p!=null&&++d<f;){var m=o(u[d]),b=l;if(m==="__proto__"||m==="constructor"||m==="prototype")return s;if(d!=h){var v=p[m];b=c?c(v,m,p):void 0,b===void 0&&(b=i(v)?v:r(u[d+1])?[]:{})}e(p,m,b),p=p[m]}return s}return wu=a,wu}var Cu,dm;function VS(){if(dm)return Cu;dm=1;var e=Ar(),n=US(),r=Mr();function i(o,a,s){for(var u=-1,l=a.length,c={};++u<l;){var d=a[u],f=e(o,d);s(f,d)&&n(c,r(d,o),f)}return c}return Cu=i,Cu}var Eu,hm;function GS(){if(hm)return Eu;hm=1;var e=VS(),n=J0();function r(i,o){return e(i,o,function(a,s){return n(i,s)})}return Eu=r,Eu}var Su,pm;function WS(){if(pm)return Su;pm=1;var e=yb(),n=sb(),r=ub();function i(o){return r(n(o,void 0,e),o+"")}return Su=i,Su}var ku,gm;function YS(){if(gm)return ku;gm=1;var e=GS(),n=WS(),r=n(function(i,o){return i==null?{}:e(i,o)});return ku=r,ku}var Nu,mm;function ZS(){if(mm)return Nu;mm=1;var e=Math.ceil,n=Math.max;function r(i,o,a,s){for(var u=-1,l=n(e((o-i)/(a||1)),0),c=Array(l);l--;)c[s?l:++u]=i,i+=a;return c}return Nu=r,Nu}var Mu,vm;function KS(){if(vm)return Mu;vm=1;var e=ZS(),n=Ir(),r=vb();function i(o){return function(a,s,u){return u&&typeof u!="number"&&n(a,s,u)&&(s=u=void 0),a=r(a),s===void 0?(s=a,a=0):s=r(s),u=u===void 0?a<s?1:-1:r(u),e(a,s,u,o)}}return Mu=i,Mu}var Au,ym;function XS(){if(ym)return Au;ym=1;var e=KS(),n=e();return Au=n,Au}var Ru,bm;function QS(){if(bm)return Ru;bm=1;function e(n,r){var i=n.length;for(n.sort(r);i--;)n[i]=n[i].value;return n}return Ru=e,Ru}var Iu,_m;function JS(){if(_m)return Iu;_m=1;var e=on();function n(r,i){if(r!==i){var o=r!==void 0,a=r===null,s=r===r,u=e(r),l=i!==void 0,c=i===null,d=i===i,f=e(i);if(!c&&!f&&!u&&r>i||u&&l&&d&&!c&&!f||a&&l&&d||!o&&d||!s)return 1;if(!a&&!u&&!f&&r<i||f&&o&&s&&!a&&!u||c&&o&&s||!l&&s||!d)return-1}return 0}return Iu=n,Iu}var Tu,xm;function ek(){if(xm)return Tu;xm=1;var e=JS();function n(r,i,o){for(var a=-1,s=r.criteria,u=i.criteria,l=s.length,c=o.length;++a<l;){var d=e(s[a],u[a]);if(d){if(a>=c)return d;var f=o[a];return d*(f=="desc"?-1:1)}}return r.index-i.index}return Tu=n,Tu}var Pu,wm;function tk(){if(wm)return Pu;wm=1;var e=Nr(),n=Ar(),r=_t(),i=ib(),o=QS(),a=Cr(),s=ek(),u=$t(),l=Te();function c(d,f,h){f.length?f=e(f,function(b){return l(b)?function(v){return n(v,b.length===1?b[0]:b)}:b}):f=[u];var p=-1;f=e(f,a(r));var m=i(d,function(b,v,g){var _=e(f,function(y){return y(b)});return{criteria:_,index:++p,value:b}});return o(m,function(b,v){return s(b,v,h)})}return Pu=c,Pu}var Ou,Cm;function nk(){if(Cm)return Ou;Cm=1;var e=El(),n=tk(),r=Rr(),i=Ir(),o=r(function(a,s){if(a==null)return[];var u=s.length;return u>1&&i(a,s[0],s[1])?s=[]:u>2&&i(s[0],s[1],s[2])&&(s=[s[0]]),n(a,e(s,1),[])});return Ou=o,Ou}var ju,Em;function rk(){if(Em)return ju;Em=1;var e=X0(),n=0;function r(i){var o=++n;return e(i)+o}return ju=r,ju}var qu,Sm;function ik(){if(Sm)return qu;Sm=1;function e(n,r,i){for(var o=-1,a=n.length,s=r.length,u={};++o<a;){var l=o<s?r[o]:void 0;i(u,n[o],l)}return u}return qu=e,qu}var Du,km;function ok(){if(km)return Du;km=1;var e=xr(),n=ik();function r(i,o){return n(i||[],o||[],e)}return Du=r,Du}var Lu,Nm;function Ne(){if(Nm)return Lu;Nm=1;var e;if(typeof Yc=="function")try{e={cloneDeep:xS(),constant:bl(),defaults:wS(),each:U0(),filter:tb(),find:AS(),flatten:yb(),forEach:H0(),forIn:RS(),has:nb(),isUndefined:rb(),last:IS(),map:ob(),mapValues:TS(),max:OS(),merge:FS(),min:$S(),minBy:BS(),now:HS(),pick:YS(),range:XS(),reduce:ab(),sortBy:nk(),uniqueId:rk(),values:fb(),zipObject:ok()}}catch{}return e||(e=window._),Lu=e,Lu}var zu,Mm;function ak(){if(Mm)return zu;Mm=1,zu=e;function e(){var i={};i._next=i._prev=i,this._sentinel=i}e.prototype.dequeue=function(){var i=this._sentinel,o=i._prev;if(o!==i)return n(o),o},e.prototype.enqueue=function(i){var o=this._sentinel;i._prev&&i._next&&n(i),i._next=o._next,o._next._prev=i,o._next=i,i._prev=o},e.prototype.toString=function(){for(var i=[],o=this._sentinel,a=o._prev;a!==o;)i.push(JSON.stringify(a,r)),a=a._prev;return"["+i.join(", ")+"]"};function n(i){i._prev._next=i._next,i._next._prev=i._prev,delete i._next,delete i._prev}function r(i,o){if(i!=="_next"&&i!=="_prev")return o}return zu}var Fu,Am;function sk(){if(Am)return Fu;Am=1;var e=Ne(),n=nt().Graph,r=ak();Fu=o;var i=e.constant(1);function o(c,d){if(c.nodeCount()<=1)return[];var f=u(c,d||i),h=a(f.graph,f.buckets,f.zeroIdx);return e.flatten(e.map(h,function(p){return c.outEdges(p.v,p.w)}),!0)}function a(c,d,f){for(var h=[],p=d[d.length-1],m=d[0],b;c.nodeCount();){for(;b=m.dequeue();)s(c,d,f,b);for(;b=p.dequeue();)s(c,d,f,b);if(c.nodeCount()){for(var v=d.length-2;v>0;--v)if(b=d[v].dequeue(),b){h=h.concat(s(c,d,f,b,!0));break}}}return h}function s(c,d,f,h,p){var m=p?[]:void 0;return e.forEach(c.inEdges(h.v),function(b){var v=c.edge(b),g=c.node(b.v);p&&m.push({v:b.v,w:b.w}),g.out-=v,l(d,f,g)}),e.forEach(c.outEdges(h.v),function(b){var v=c.edge(b),g=b.w,_=c.node(g);_.in-=v,l(d,f,_)}),c.removeNode(h.v),m}function u(c,d){var f=new n,h=0,p=0;e.forEach(c.nodes(),function(v){f.setNode(v,{v,in:0,out:0})}),e.forEach(c.edges(),function(v){var g=f.edge(v.v,v.w)||0,_=d(v),y=g+_;f.setEdge(v.v,v.w,y),p=Math.max(p,f.node(v.v).out+=_),h=Math.max(h,f.node(v.w).in+=_)});var m=e.range(p+h+3).map(function(){return new r}),b=h+1;return e.forEach(f.nodes(),function(v){l(m,b,f.node(v))}),{graph:f,buckets:m,zeroIdx:b}}function l(c,d,f){f.out?f.in?c[f.out-f.in+d].enqueue(f):c[c.length-1].enqueue(f):c[0].enqueue(f)}return Fu}var $u,Rm;function uk(){if(Rm)return $u;Rm=1;var e=Ne(),n=sk();$u={run:r,undo:o};function r(a){var s=a.graph().acyclicer==="greedy"?n(a,u(a)):i(a);e.forEach(s,function(l){var c=a.edge(l);a.removeEdge(l),c.forwardName=l.name,c.reversed=!0,a.setEdge(l.w,l.v,c,e.uniqueId("rev"))});function u(l){return function(c){return l.edge(c).weight}}}function i(a){var s=[],u={},l={};function c(d){e.has(l,d)||(l[d]=!0,u[d]=!0,e.forEach(a.outEdges(d),function(f){e.has(u,f.w)?s.push(f):c(f.w)}),delete u[d])}return e.forEach(a.nodes(),c),s}function o(a){e.forEach(a.edges(),function(s){var u=a.edge(s);if(u.reversed){a.removeEdge(s);var l=u.forwardName;delete u.reversed,delete u.forwardName,a.setEdge(s.w,s.v,u,l)}})}return $u}var Bu,Im;function Be(){if(Im)return Bu;Im=1;var e=Ne(),n=nt().Graph;Bu={addDummyNode:r,simplify:i,asNonCompoundGraph:o,successorWeights:a,predecessorWeights:s,intersectRect:u,buildLayerMatrix:l,normalizeRanks:c,removeEmptyRanks:d,addBorderNode:f,maxRank:h,partition:p,time:m,notime:b};function r(v,g,_,y){var x;do x=e.uniqueId(y);while(v.hasNode(x));return _.dummy=g,v.setNode(x,_),x}function i(v){var g=new n().setGraph(v.graph());return e.forEach(v.nodes(),function(_){g.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){var y=g.edge(_.v,_.w)||{weight:0,minlen:1},x=v.edge(_);g.setEdge(_.v,_.w,{weight:y.weight+x.weight,minlen:Math.max(y.minlen,x.minlen)})}),g}function o(v){var g=new n({multigraph:v.isMultigraph()}).setGraph(v.graph());return e.forEach(v.nodes(),function(_){v.children(_).length||g.setNode(_,v.node(_))}),e.forEach(v.edges(),function(_){g.setEdge(_,v.edge(_))}),g}function a(v){var g=e.map(v.nodes(),function(_){var y={};return e.forEach(v.outEdges(_),function(x){y[x.w]=(y[x.w]||0)+v.edge(x).weight}),y});return e.zipObject(v.nodes(),g)}function s(v){var g=e.map(v.nodes(),function(_){var y={};return e.forEach(v.inEdges(_),function(x){y[x.v]=(y[x.v]||0)+v.edge(x).weight}),y});return e.zipObject(v.nodes(),g)}function u(v,g){var _=v.x,y=v.y,x=g.x-_,w=g.y-y,C=v.width/2,S=v.height/2;if(!x&&!w)throw new Error("Not possible to find intersection inside of the rectangle");var k,A;return Math.abs(w)*C>Math.abs(x)*S?(w<0&&(S=-S),k=S*x/w,A=S):(x<0&&(C=-C),k=C,A=C*w/x),{x:_+k,y:y+A}}function l(v){var g=e.map(e.range(h(v)+1),function(){return[]});return e.forEach(v.nodes(),function(_){var y=v.node(_),x=y.rank;e.isUndefined(x)||(g[x][y.order]=_)}),g}function c(v){var g=e.min(e.map(v.nodes(),function(_){return v.node(_).rank}));e.forEach(v.nodes(),function(_){var y=v.node(_);e.has(y,"rank")&&(y.rank-=g)})}function d(v){var g=e.min(e.map(v.nodes(),function(w){return v.node(w).rank})),_=[];e.forEach(v.nodes(),function(w){var C=v.node(w).rank-g;_[C]||(_[C]=[]),_[C].push(w)});var y=0,x=v.graph().nodeRankFactor;e.forEach(_,function(w,C){e.isUndefined(w)&&C%x!==0?--y:y&&e.forEach(w,function(S){v.node(S).rank+=y})})}function f(v,g,_,y){var x={width:0,height:0};return arguments.length>=4&&(x.rank=_,x.order=y),r(v,"border",x,g)}function h(v){return e.max(e.map(v.nodes(),function(g){var _=v.node(g).rank;if(!e.isUndefined(_))return _}))}function p(v,g){var _={lhs:[],rhs:[]};return e.forEach(v,function(y){g(y)?_.lhs.push(y):_.rhs.push(y)}),_}function m(v,g){var _=e.now();try{return g()}finally{console.log(v+" time: "+(e.now()-_)+"ms")}}function b(v,g){return g()}return Bu}var Hu,Tm;function ck(){if(Tm)return Hu;Tm=1;var e=Ne(),n=Be();Hu={run:r,undo:o};function r(a){a.graph().dummyChains=[],e.forEach(a.edges(),function(s){i(a,s)})}function i(a,s){var u=s.v,l=a.node(u).rank,c=s.w,d=a.node(c).rank,f=s.name,h=a.edge(s),p=h.labelRank;if(d!==l+1){a.removeEdge(s);var m,b,v;for(v=0,++l;l<d;++v,++l)h.points=[],b={width:0,height:0,edgeLabel:h,edgeObj:s,rank:l},m=n.addDummyNode(a,"edge",b,"_d"),l===p&&(b.width=h.width,b.height=h.height,b.dummy="edge-label",b.labelpos=h.labelpos),a.setEdge(u,m,{weight:h.weight},f),v===0&&a.graph().dummyChains.push(m),u=m;a.setEdge(u,c,{weight:h.weight},f)}}function o(a){e.forEach(a.graph().dummyChains,function(s){var u=a.node(s),l=u.edgeLabel,c;for(a.setEdge(u.edgeObj,l);u.dummy;)c=a.successors(s)[0],a.removeNode(s),l.points.push({x:u.x,y:u.y}),u.dummy==="edge-label"&&(l.x=u.x,l.y=u.y,l.width=u.width,l.height=u.height),s=c,u=a.node(s)})}return Hu}var Uu,Pm;function nr(){if(Pm)return Uu;Pm=1;var e=Ne();Uu={longestPath:n,slack:r};function n(i){var o={};function a(s){var u=i.node(s);if(e.has(o,s))return u.rank;o[s]=!0;var l=e.min(e.map(i.outEdges(s),function(c){return a(c.w)-i.edge(c).minlen}));return(l===Number.POSITIVE_INFINITY||l===void 0||l===null)&&(l=0),u.rank=l}e.forEach(i.sources(),a)}function r(i,o){return i.node(o.w).rank-i.node(o.v).rank-i.edge(o).minlen}return Uu}var Vu,Om;function wb(){if(Om)return Vu;Om=1;var e=Ne(),n=nt().Graph,r=nr().slack;Vu=i;function i(u){var l=new n({directed:!1}),c=u.nodes()[0],d=u.nodeCount();l.setNode(c,{});for(var f,h;o(l,u)<d;)f=a(l,u),h=l.hasNode(f.v)?r(u,f):-r(u,f),s(l,u,h);return l}function o(u,l){function c(d){e.forEach(l.nodeEdges(d),function(f){var h=f.v,p=d===h?f.w:h;!u.hasNode(p)&&!r(l,f)&&(u.setNode(p,{}),u.setEdge(d,p,{}),c(p))})}return e.forEach(u.nodes(),c),u.nodeCount()}function a(u,l){return e.minBy(l.edges(),function(c){if(u.hasNode(c.v)!==u.hasNode(c.w))return r(l,c)})}function s(u,l,c){e.forEach(u.nodes(),function(d){l.node(d).rank+=c})}return Vu}var Gu,jm;function lk(){if(jm)return Gu;jm=1;var e=Ne(),n=wb(),r=nr().slack,i=nr().longestPath,o=nt().alg.preorder,a=nt().alg.postorder,s=Be().simplify;Gu=u,u.initLowLimValues=f,u.initCutValues=l,u.calcCutValue=d,u.leaveEdge=p,u.enterEdge=m,u.exchangeEdges=b;function u(y){y=s(y),i(y);var x=n(y);f(x),l(x,y);for(var w,C;w=p(x);)C=m(x,y,w),b(x,y,w,C)}function l(y,x){var w=a(y,y.nodes());w=w.slice(0,w.length-1),e.forEach(w,function(C){c(y,x,C)})}function c(y,x,w){var C=y.node(w),S=C.parent;y.edge(w,S).cutvalue=d(y,x,w)}function d(y,x,w){var C=y.node(w),S=C.parent,k=!0,A=x.edge(w,S),N=0;return A||(k=!1,A=x.edge(S,w)),N=A.weight,e.forEach(x.nodeEdges(w),function(M){var I=M.v===w,O=I?M.w:M.v;if(O!==S){var R=I===k,P=x.edge(M).weight;if(N+=R?P:-P,g(y,w,O)){var j=y.edge(w,O).cutvalue;N+=R?-j:j}}}),N}function f(y,x){arguments.length<2&&(x=y.nodes()[0]),h(y,{},1,x)}function h(y,x,w,C,S){var k=w,A=y.node(C);return x[C]=!0,e.forEach(y.neighbors(C),function(N){e.has(x,N)||(w=h(y,x,w,N,C))}),A.low=k,A.lim=w++,S?A.parent=S:delete A.parent,w}function p(y){return e.find(y.edges(),function(x){return y.edge(x).cutvalue<0})}function m(y,x,w){var C=w.v,S=w.w;x.hasEdge(C,S)||(C=w.w,S=w.v);var k=y.node(C),A=y.node(S),N=k,M=!1;k.lim>A.lim&&(N=A,M=!0);var I=e.filter(x.edges(),function(O){return M===_(y,y.node(O.v),N)&&M!==_(y,y.node(O.w),N)});return e.minBy(I,function(O){return r(x,O)})}function b(y,x,w,C){var S=w.v,k=w.w;y.removeEdge(S,k),y.setEdge(C.v,C.w,{}),f(y),l(y,x),v(y,x)}function v(y,x){var w=e.find(y.nodes(),function(S){return!x.node(S).parent}),C=o(y,w);C=C.slice(1),e.forEach(C,function(S){var k=y.node(S).parent,A=x.edge(S,k),N=!1;A||(A=x.edge(k,S),N=!0),x.node(S).rank=x.node(k).rank+(N?A.minlen:-A.minlen)})}function g(y,x,w){return y.hasEdge(x,w)}function _(y,x,w){return w.low<=x.lim&&x.lim<=w.lim}return Gu}var Wu,qm;function fk(){if(qm)return Wu;qm=1;var e=nr(),n=e.longestPath,r=wb(),i=lk();Wu=o;function o(l){switch(l.graph().ranker){case"network-simplex":u(l);break;case"tight-tree":s(l);break;case"longest-path":a(l);break;default:u(l)}}var a=n;function s(l){n(l),r(l)}function u(l){i(l)}return Wu}var Yu,Dm;function dk(){if(Dm)return Yu;Dm=1;var e=Ne();Yu=n;function n(o){var a=i(o);e.forEach(o.graph().dummyChains,function(s){for(var u=o.node(s),l=u.edgeObj,c=r(o,a,l.v,l.w),d=c.path,f=c.lca,h=0,p=d[h],m=!0;s!==l.w;){if(u=o.node(s),m){for(;(p=d[h])!==f&&o.node(p).maxRank<u.rank;)h++;p===f&&(m=!1)}if(!m){for(;h<d.length-1&&o.node(p=d[h+1]).minRank<=u.rank;)h++;p=d[h]}o.setParent(s,p),s=o.successors(s)[0]}})}function r(o,a,s,u){var l=[],c=[],d=Math.min(a[s].low,a[u].low),f=Math.max(a[s].lim,a[u].lim),h,p;h=s;do h=o.parent(h),l.push(h);while(h&&(a[h].low>d||f>a[h].lim));for(p=h,h=u;(h=o.parent(h))!==p;)c.push(h);return{path:l.concat(c.reverse()),lca:p}}function i(o){var a={},s=0;function u(l){var c=s;e.forEach(o.children(l),u),a[l]={low:c,lim:s++}}return e.forEach(o.children(),u),a}return Yu}var Zu,Lm;function hk(){if(Lm)return Zu;Lm=1;var e=Ne(),n=Be();Zu={run:r,cleanup:s};function r(u){var l=n.addDummyNode(u,"root",{},"_root"),c=o(u),d=e.max(e.values(c))-1,f=2*d+1;u.graph().nestingRoot=l,e.forEach(u.edges(),function(p){u.edge(p).minlen*=f});var h=a(u)+1;e.forEach(u.children(),function(p){i(u,l,f,h,d,c,p)}),u.graph().nodeRankFactor=f}function i(u,l,c,d,f,h,p){var m=u.children(p);if(!m.length){p!==l&&u.setEdge(l,p,{weight:0,minlen:c});return}var b=n.addBorderNode(u,"_bt"),v=n.addBorderNode(u,"_bb"),g=u.node(p);u.setParent(b,p),g.borderTop=b,u.setParent(v,p),g.borderBottom=v,e.forEach(m,function(_){i(u,l,c,d,f,h,_);var y=u.node(_),x=y.borderTop?y.borderTop:_,w=y.borderBottom?y.borderBottom:_,C=y.borderTop?d:2*d,S=x!==w?1:f-h[p]+1;u.setEdge(b,x,{weight:C,minlen:S,nestingEdge:!0}),u.setEdge(w,v,{weight:C,minlen:S,nestingEdge:!0})}),u.parent(p)||u.setEdge(l,b,{weight:0,minlen:f+h[p]})}function o(u){var l={};function c(d,f){var h=u.children(d);h&&h.length&&e.forEach(h,function(p){c(p,f+1)}),l[d]=f}return e.forEach(u.children(),function(d){c(d,1)}),l}function a(u){return e.reduce(u.edges(),function(l,c){return l+u.edge(c).weight},0)}function s(u){var l=u.graph();u.removeNode(l.nestingRoot),delete l.nestingRoot,e.forEach(u.edges(),function(c){var d=u.edge(c);d.nestingEdge&&u.removeEdge(c)})}return Zu}var Ku,zm;function pk(){if(zm)return Ku;zm=1;var e=Ne(),n=Be();Ku=r;function r(o){function a(s){var u=o.children(s),l=o.node(s);if(u.length&&e.forEach(u,a),e.has(l,"minRank")){l.borderLeft=[],l.borderRight=[];for(var c=l.minRank,d=l.maxRank+1;c<d;++c)i(o,"borderLeft","_bl",s,l,c),i(o,"borderRight","_br",s,l,c)}}e.forEach(o.children(),a)}function i(o,a,s,u,l,c){var d={width:0,height:0,rank:c,borderType:a},f=l[a][c-1],h=n.addDummyNode(o,"border",d,s);l[a][c]=h,o.setParent(h,u),f&&o.setEdge(f,h,{weight:1})}return Ku}var Xu,Fm;function gk(){if(Fm)return Xu;Fm=1;var e=Ne();Xu={adjust:n,undo:r};function n(c){var d=c.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&i(c)}function r(c){var d=c.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&a(c),(d==="lr"||d==="rl")&&(u(c),i(c))}function i(c){e.forEach(c.nodes(),function(d){o(c.node(d))}),e.forEach(c.edges(),function(d){o(c.edge(d))})}function o(c){var d=c.width;c.width=c.height,c.height=d}function a(c){e.forEach(c.nodes(),function(d){s(c.node(d))}),e.forEach(c.edges(),function(d){var f=c.edge(d);e.forEach(f.points,s),e.has(f,"y")&&s(f)})}function s(c){c.y=-c.y}function u(c){e.forEach(c.nodes(),function(d){l(c.node(d))}),e.forEach(c.edges(),function(d){var f=c.edge(d);e.forEach(f.points,l),e.has(f,"x")&&l(f)})}function l(c){var d=c.x;c.x=c.y,c.y=d}return Xu}var Qu,$m;function mk(){if($m)return Qu;$m=1;var e=Ne();Qu=n;function n(r){var i={},o=e.filter(r.nodes(),function(c){return!r.children(c).length}),a=e.max(e.map(o,function(c){return r.node(c).rank})),s=e.map(e.range(a+1),function(){return[]});function u(c){if(!e.has(i,c)){i[c]=!0;var d=r.node(c);s[d.rank].push(c),e.forEach(r.successors(c),u)}}var l=e.sortBy(o,function(c){return r.node(c).rank});return e.forEach(l,u),s}return Qu}var Ju,Bm;function vk(){if(Bm)return Ju;Bm=1;var e=Ne();Ju=n;function n(i,o){for(var a=0,s=1;s<o.length;++s)a+=r(i,o[s-1],o[s]);return a}function r(i,o,a){for(var s=e.zipObject(a,e.map(a,function(h,p){return p})),u=e.flatten(e.map(o,function(h){return e.sortBy(e.map(i.outEdges(h),function(p){return{pos:s[p.w],weight:i.edge(p).weight}}),"pos")}),!0),l=1;l<a.length;)l<<=1;var c=2*l-1;l-=1;var d=e.map(new Array(c),function(){return 0}),f=0;return e.forEach(u.forEach(function(h){var p=h.pos+l;d[p]+=h.weight;for(var m=0;p>0;)p%2&&(m+=d[p+1]),p=p-1>>1,d[p]+=h.weight;f+=h.weight*m})),f}return Ju}var ec,Hm;function yk(){if(Hm)return ec;Hm=1;var e=Ne();ec=n;function n(r,i){return e.map(i,function(o){var a=r.inEdges(o);if(a.length){var s=e.reduce(a,function(u,l){var c=r.edge(l),d=r.node(l.v);return{sum:u.sum+c.weight*d.order,weight:u.weight+c.weight}},{sum:0,weight:0});return{v:o,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:o}})}return ec}var tc,Um;function bk(){if(Um)return tc;Um=1;var e=Ne();tc=n;function n(o,a){var s={};e.forEach(o,function(l,c){var d=s[l.v]={indegree:0,in:[],out:[],vs:[l.v],i:c};e.isUndefined(l.barycenter)||(d.barycenter=l.barycenter,d.weight=l.weight)}),e.forEach(a.edges(),function(l){var c=s[l.v],d=s[l.w];!e.isUndefined(c)&&!e.isUndefined(d)&&(d.indegree++,c.out.push(s[l.w]))});var u=e.filter(s,function(l){return!l.indegree});return r(u)}function r(o){var a=[];function s(c){return function(d){d.merged||(e.isUndefined(d.barycenter)||e.isUndefined(c.barycenter)||d.barycenter>=c.barycenter)&&i(c,d)}}function u(c){return function(d){d.in.push(c),--d.indegree===0&&o.push(d)}}for(;o.length;){var l=o.pop();a.push(l),e.forEach(l.in.reverse(),s(l)),e.forEach(l.out,u(l))}return e.map(e.filter(a,function(c){return!c.merged}),function(c){return e.pick(c,["vs","i","barycenter","weight"])})}function i(o,a){var s=0,u=0;o.weight&&(s+=o.barycenter*o.weight,u+=o.weight),a.weight&&(s+=a.barycenter*a.weight,u+=a.weight),o.vs=a.vs.concat(o.vs),o.barycenter=s/u,o.weight=u,o.i=Math.min(a.i,o.i),a.merged=!0}return tc}var nc,Vm;function _k(){if(Vm)return nc;Vm=1;var e=Ne(),n=Be();nc=r;function r(a,s){var u=n.partition(a,function(b){return e.has(b,"barycenter")}),l=u.lhs,c=e.sortBy(u.rhs,function(b){return-b.i}),d=[],f=0,h=0,p=0;l.sort(o(!!s)),p=i(d,c,p),e.forEach(l,function(b){p+=b.vs.length,d.push(b.vs),f+=b.barycenter*b.weight,h+=b.weight,p=i(d,c,p)});var m={vs:e.flatten(d,!0)};return h&&(m.barycenter=f/h,m.weight=h),m}function i(a,s,u){for(var l;s.length&&(l=e.last(s)).i<=u;)s.pop(),a.push(l.vs),u++;return u}function o(a){return function(s,u){return s.barycenter<u.barycenter?-1:s.barycenter>u.barycenter?1:a?u.i-s.i:s.i-u.i}}return nc}var rc,Gm;function xk(){if(Gm)return rc;Gm=1;var e=Ne(),n=yk(),r=bk(),i=_k();rc=o;function o(u,l,c,d){var f=u.children(l),h=u.node(l),p=h?h.borderLeft:void 0,m=h?h.borderRight:void 0,b={};p&&(f=e.filter(f,function(w){return w!==p&&w!==m}));var v=n(u,f);e.forEach(v,function(w){if(u.children(w.v).length){var C=o(u,w.v,c,d);b[w.v]=C,e.has(C,"barycenter")&&s(w,C)}});var g=r(v,c);a(g,b);var _=i(g,d);if(p&&(_.vs=e.flatten([p,_.vs,m],!0),u.predecessors(p).length)){var y=u.node(u.predecessors(p)[0]),x=u.node(u.predecessors(m)[0]);e.has(_,"barycenter")||(_.barycenter=0,_.weight=0),_.barycenter=(_.barycenter*_.weight+y.order+x.order)/(_.weight+2),_.weight+=2}return _}function a(u,l){e.forEach(u,function(c){c.vs=e.flatten(c.vs.map(function(d){return l[d]?l[d].vs:d}),!0)})}function s(u,l){e.isUndefined(u.barycenter)?(u.barycenter=l.barycenter,u.weight=l.weight):(u.barycenter=(u.barycenter*u.weight+l.barycenter*l.weight)/(u.weight+l.weight),u.weight+=l.weight)}return rc}var ic,Wm;function wk(){if(Wm)return ic;Wm=1;var e=Ne(),n=nt().Graph;ic=r;function r(o,a,s){var u=i(o),l=new n({compound:!0}).setGraph({root:u}).setDefaultNodeLabel(function(c){return o.node(c)});return e.forEach(o.nodes(),function(c){var d=o.node(c),f=o.parent(c);(d.rank===a||d.minRank<=a&&a<=d.maxRank)&&(l.setNode(c),l.setParent(c,f||u),e.forEach(o[s](c),function(h){var p=h.v===c?h.w:h.v,m=l.edge(p,c),b=e.isUndefined(m)?0:m.weight;l.setEdge(p,c,{weight:o.edge(h).weight+b})}),e.has(d,"minRank")&&l.setNode(c,{borderLeft:d.borderLeft[a],borderRight:d.borderRight[a]}))}),l}function i(o){for(var a;o.hasNode(a=e.uniqueId("_root")););return a}return ic}var oc,Ym;function Ck(){if(Ym)return oc;Ym=1;var e=Ne();oc=n;function n(r,i,o){var a={},s;e.forEach(o,function(u){for(var l=r.parent(u),c,d;l;){if(c=r.parent(l),c?(d=a[c],a[c]=l):(d=s,s=l),d&&d!==l){i.setEdge(d,l);return}l=c}})}return oc}var ac,Zm;function Ek(){if(Zm)return ac;Zm=1;var e=Ne(),n=mk(),r=vk(),i=xk(),o=wk(),a=Ck(),s=nt().Graph,u=Be();ac=l;function l(h){var p=u.maxRank(h),m=c(h,e.range(1,p+1),"inEdges"),b=c(h,e.range(p-1,-1,-1),"outEdges"),v=n(h);f(h,v);for(var g=Number.POSITIVE_INFINITY,_,y=0,x=0;x<4;++y,++x){d(y%2?m:b,y%4>=2),v=u.buildLayerMatrix(h);var w=r(h,v);w<g&&(x=0,_=e.cloneDeep(v),g=w)}f(h,_)}function c(h,p,m){return e.map(p,function(b){return o(h,b,m)})}function d(h,p){var m=new s;e.forEach(h,function(b){var v=b.graph().root,g=i(b,v,m,p);e.forEach(g.vs,function(_,y){b.node(_).order=y}),a(b,m,g.vs)})}function f(h,p){e.forEach(p,function(m){e.forEach(m,function(b,v){h.node(b).order=v})})}return ac}var sc,Km;function Sk(){if(Km)return sc;Km=1;var e=Ne(),n=nt().Graph,r=Be();sc={positionX:m,findType1Conflicts:i,findType2Conflicts:o,addConflict:s,hasConflict:u,verticalAlignment:l,horizontalCompaction:c,alignCoordinates:h,findSmallestWidthAlignment:f,balance:p};function i(g,_){var y={};function x(w,C){var S=0,k=0,A=w.length,N=e.last(C);return e.forEach(C,function(M,I){var O=a(g,M),R=O?g.node(O).order:A;(O||M===N)&&(e.forEach(C.slice(k,I+1),function(P){e.forEach(g.predecessors(P),function(j){var L=g.node(j),z=L.order;(z<S||R<z)&&!(L.dummy&&g.node(P).dummy)&&s(y,j,P)})}),k=I+1,S=R)}),C}return e.reduce(_,x),y}function o(g,_){var y={};function x(C,S,k,A,N){var M;e.forEach(e.range(S,k),function(I){M=C[I],g.node(M).dummy&&e.forEach(g.predecessors(M),function(O){var R=g.node(O);R.dummy&&(R.order<A||R.order>N)&&s(y,O,M)})})}function w(C,S){var k=-1,A,N=0;return e.forEach(S,function(M,I){if(g.node(M).dummy==="border"){var O=g.predecessors(M);O.length&&(A=g.node(O[0]).order,x(S,N,I,k,A),N=I,k=A)}x(S,N,S.length,A,C.length)}),S}return e.reduce(_,w),y}function a(g,_){if(g.node(_).dummy)return e.find(g.predecessors(_),function(y){return g.node(y).dummy})}function s(g,_,y){if(_>y){var x=_;_=y,y=x}var w=g[_];w||(g[_]=w={}),w[y]=!0}function u(g,_,y){if(_>y){var x=_;_=y,y=x}return e.has(g[_],y)}function l(g,_,y,x){var w={},C={},S={};return e.forEach(_,function(k){e.forEach(k,function(A,N){w[A]=A,C[A]=A,S[A]=N})}),e.forEach(_,function(k){var A=-1;e.forEach(k,function(N){var M=x(N);if(M.length){M=e.sortBy(M,function(j){return S[j]});for(var I=(M.length-1)/2,O=Math.floor(I),R=Math.ceil(I);O<=R;++O){var P=M[O];C[N]===N&&A<S[P]&&!u(y,N,P)&&(C[P]=N,C[N]=w[N]=w[P],A=S[P])}}})}),{root:w,align:C}}function c(g,_,y,x,w){var C={},S=d(g,_,y,w),k=w?"borderLeft":"borderRight";function A(I,O){for(var R=S.nodes(),P=R.pop(),j={};P;)j[P]?I(P):(j[P]=!0,R.push(P),R=R.concat(O(P))),P=R.pop()}function N(I){C[I]=S.inEdges(I).reduce(function(O,R){return Math.max(O,C[R.v]+S.edge(R))},0)}function M(I){var O=S.outEdges(I).reduce(function(P,j){return Math.min(P,C[j.w]-S.edge(j))},Number.POSITIVE_INFINITY),R=g.node(I);O!==Number.POSITIVE_INFINITY&&R.borderType!==k&&(C[I]=Math.max(C[I],O))}return A(N,S.predecessors.bind(S)),A(M,S.successors.bind(S)),e.forEach(x,function(I){C[I]=C[y[I]]}),C}function d(g,_,y,x){var w=new n,C=g.graph(),S=b(C.nodesep,C.edgesep,x);return e.forEach(_,function(k){var A;e.forEach(k,function(N){var M=y[N];if(w.setNode(M),A){var I=y[A],O=w.edge(I,M);w.setEdge(I,M,Math.max(S(g,N,A),O||0))}A=N})}),w}function f(g,_){return e.minBy(e.values(_),function(y){var x=Number.NEGATIVE_INFINITY,w=Number.POSITIVE_INFINITY;return e.forIn(y,function(C,S){var k=v(g,S)/2;x=Math.max(C+k,x),w=Math.min(C-k,w)}),x-w})}function h(g,_){var y=e.values(_),x=e.min(y),w=e.max(y);e.forEach(["u","d"],function(C){e.forEach(["l","r"],function(S){var k=C+S,A=g[k],N;if(A!==_){var M=e.values(A);N=S==="l"?x-e.min(M):w-e.max(M),N&&(g[k]=e.mapValues(A,function(I){return I+N}))}})})}function p(g,_){return e.mapValues(g.ul,function(y,x){if(_)return g[_.toLowerCase()][x];var w=e.sortBy(e.map(g,x));return(w[1]+w[2])/2})}function m(g){var _=r.buildLayerMatrix(g),y=e.merge(i(g,_),o(g,_)),x={},w;e.forEach(["u","d"],function(S){w=S==="u"?_:e.values(_).reverse(),e.forEach(["l","r"],function(k){k==="r"&&(w=e.map(w,function(I){return e.values(I).reverse()}));var A=(S==="u"?g.predecessors:g.successors).bind(g),N=l(g,w,y,A),M=c(g,w,N.root,N.align,k==="r");k==="r"&&(M=e.mapValues(M,function(I){return-I})),x[S+k]=M})});var C=f(g,x);return h(x,C),p(x,g.graph().align)}function b(g,_,y){return function(x,w,C){var S=x.node(w),k=x.node(C),A=0,N;if(A+=S.width/2,e.has(S,"labelpos"))switch(S.labelpos.toLowerCase()){case"l":N=-S.width/2;break;case"r":N=S.width/2;break}if(N&&(A+=y?N:-N),N=0,A+=(S.dummy?_:g)/2,A+=(k.dummy?_:g)/2,A+=k.width/2,e.has(k,"labelpos"))switch(k.labelpos.toLowerCase()){case"l":N=k.width/2;break;case"r":N=-k.width/2;break}return N&&(A+=y?N:-N),N=0,A}}function v(g,_){return g.node(_).width}return sc}var uc,Xm;function kk(){if(Xm)return uc;Xm=1;var e=Ne(),n=Be(),r=Sk().positionX;uc=i;function i(a){a=n.asNonCompoundGraph(a),o(a),e.forEach(r(a),function(s,u){a.node(u).x=s})}function o(a){var s=n.buildLayerMatrix(a),u=a.graph().ranksep,l=0;e.forEach(s,function(c){var d=e.max(e.map(c,function(f){return a.node(f).height}));e.forEach(c,function(f){a.node(f).y=l+d/2}),l+=d+u})}return uc}var cc,Qm;function Nk(){if(Qm)return cc;Qm=1;var e=Ne(),n=uk(),r=ck(),i=fk(),o=Be().normalizeRanks,a=dk(),s=Be().removeEmptyRanks,u=hk(),l=pk(),c=gk(),d=Ek(),f=kk(),h=Be(),p=nt().Graph;cc=m;function m(q,$){var H=$&&$.debugTiming?h.time:h.notime;H("layout",function(){var U=H("  buildLayoutGraph",function(){return A(q)});H("  runLayout",function(){b(U,H)}),H("  updateInputGraph",function(){v(q,U)})})}function b(q,$){$("    makeSpaceForEdgeLabels",function(){N(q)}),$("    removeSelfEdges",function(){F(q)}),$("    acyclic",function(){n.run(q)}),$("    nestingGraph.run",function(){u.run(q)}),$("    rank",function(){i(h.asNonCompoundGraph(q))}),$("    injectEdgeLabelProxies",function(){M(q)}),$("    removeEmptyRanks",function(){s(q)}),$("    nestingGraph.cleanup",function(){u.cleanup(q)}),$("    normalizeRanks",function(){o(q)}),$("    assignRankMinMax",function(){I(q)}),$("    removeEdgeLabelProxies",function(){O(q)}),$("    normalize.run",function(){r.run(q)}),$("    parentDummyChains",function(){a(q)}),$("    addBorderSegments",function(){l(q)}),$("    order",function(){d(q)}),$("    insertSelfEdges",function(){Y(q)}),$("    adjustCoordinateSystem",function(){c.adjust(q)}),$("    position",function(){f(q)}),$("    positionSelfEdges",function(){Z(q)}),$("    removeBorderNodes",function(){z(q)}),$("    normalize.undo",function(){r.undo(q)}),$("    fixupEdgeLabelCoords",function(){j(q)}),$("    undoCoordinateSystem",function(){c.undo(q)}),$("    translateGraph",function(){R(q)}),$("    assignNodeIntersects",function(){P(q)}),$("    reversePoints",function(){L(q)}),$("    acyclic.undo",function(){n.undo(q)})}function v(q,$){e.forEach(q.nodes(),function(H){var U=q.node(H),V=$.node(H);U&&(U.x=V.x,U.y=V.y,$.children(H).length&&(U.width=V.width,U.height=V.height))}),e.forEach(q.edges(),function(H){var U=q.edge(H),V=$.edge(H);U.points=V.points,e.has(V,"x")&&(U.x=V.x,U.y=V.y)}),q.graph().width=$.graph().width,q.graph().height=$.graph().height}var g=["nodesep","edgesep","ranksep","marginx","marginy"],_={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},C=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},k=["labelpos"];function A(q){var $=new p({multigraph:!0,compound:!0}),H=Q(q.graph());return $.setGraph(e.merge({},_,W(H,g),e.pick(H,y))),e.forEach(q.nodes(),function(U){var V=Q(q.node(U));$.setNode(U,e.defaults(W(V,x),w)),$.setParent(U,q.parent(U))}),e.forEach(q.edges(),function(U){var V=Q(q.edge(U));$.setEdge(U,e.merge({},S,W(V,C),e.pick(V,k)))}),$}function N(q){var $=q.graph();$.ranksep/=2,e.forEach(q.edges(),function(H){var U=q.edge(H);U.minlen*=2,U.labelpos.toLowerCase()!=="c"&&($.rankdir==="TB"||$.rankdir==="BT"?U.width+=U.labeloffset:U.height+=U.labeloffset)})}function M(q){e.forEach(q.edges(),function($){var H=q.edge($);if(H.width&&H.height){var U=q.node($.v),V=q.node($.w),B={rank:(V.rank-U.rank)/2+U.rank,e:$};h.addDummyNode(q,"edge-proxy",B,"_ep")}})}function I(q){var $=0;e.forEach(q.nodes(),function(H){var U=q.node(H);U.borderTop&&(U.minRank=q.node(U.borderTop).rank,U.maxRank=q.node(U.borderBottom).rank,$=e.max($,U.maxRank))}),q.graph().maxRank=$}function O(q){e.forEach(q.nodes(),function($){var H=q.node($);H.dummy==="edge-proxy"&&(q.edge(H.e).labelRank=H.rank,q.removeNode($))})}function R(q){var $=Number.POSITIVE_INFINITY,H=0,U=Number.POSITIVE_INFINITY,V=0,B=q.graph(),K=B.marginx||0,J=B.marginy||0;function oe(te){var ce=te.x,re=te.y,le=te.width,ae=te.height;$=Math.min($,ce-le/2),H=Math.max(H,ce+le/2),U=Math.min(U,re-ae/2),V=Math.max(V,re+ae/2)}e.forEach(q.nodes(),function(te){oe(q.node(te))}),e.forEach(q.edges(),function(te){var ce=q.edge(te);e.has(ce,"x")&&oe(ce)}),$-=K,U-=J,e.forEach(q.nodes(),function(te){var ce=q.node(te);ce.x-=$,ce.y-=U}),e.forEach(q.edges(),function(te){var ce=q.edge(te);e.forEach(ce.points,function(re){re.x-=$,re.y-=U}),e.has(ce,"x")&&(ce.x-=$),e.has(ce,"y")&&(ce.y-=U)}),B.width=H-$+K,B.height=V-U+J}function P(q){e.forEach(q.edges(),function($){var H=q.edge($),U=q.node($.v),V=q.node($.w),B,K;H.points?(B=H.points[0],K=H.points[H.points.length-1]):(H.points=[],B=V,K=U),H.points.unshift(h.intersectRect(U,B)),H.points.push(h.intersectRect(V,K))})}function j(q){e.forEach(q.edges(),function($){var H=q.edge($);if(e.has(H,"x"))switch((H.labelpos==="l"||H.labelpos==="r")&&(H.width-=H.labeloffset),H.labelpos){case"l":H.x-=H.width/2+H.labeloffset;break;case"r":H.x+=H.width/2+H.labeloffset;break}})}function L(q){e.forEach(q.edges(),function($){var H=q.edge($);H.reversed&&H.points.reverse()})}function z(q){e.forEach(q.nodes(),function($){if(q.children($).length){var H=q.node($),U=q.node(H.borderTop),V=q.node(H.borderBottom),B=q.node(e.last(H.borderLeft)),K=q.node(e.last(H.borderRight));H.width=Math.abs(K.x-B.x),H.height=Math.abs(V.y-U.y),H.x=B.x+H.width/2,H.y=U.y+H.height/2}}),e.forEach(q.nodes(),function($){q.node($).dummy==="border"&&q.removeNode($)})}function F(q){e.forEach(q.edges(),function($){if($.v===$.w){var H=q.node($.v);H.selfEdges||(H.selfEdges=[]),H.selfEdges.push({e:$,label:q.edge($)}),q.removeEdge($)}})}function Y(q){var $=h.buildLayerMatrix(q);e.forEach($,function(H){var U=0;e.forEach(H,function(V,B){var K=q.node(V);K.order=B+U,e.forEach(K.selfEdges,function(J){h.addDummyNode(q,"selfedge",{width:J.label.width,height:J.label.height,rank:K.rank,order:B+ ++U,e:J.e,label:J.label},"_se")}),delete K.selfEdges})})}function Z(q){e.forEach(q.nodes(),function($){var H=q.node($);if(H.dummy==="selfedge"){var U=q.node(H.e.v),V=U.x+U.width/2,B=U.y,K=H.x-V,J=U.height/2;q.setEdge(H.e,H.label),q.removeNode($),H.label.points=[{x:V+2*K/3,y:B-J},{x:V+5*K/6,y:B-J},{x:V+K,y:B},{x:V+5*K/6,y:B+J},{x:V+2*K/3,y:B+J}],H.label.x=H.x,H.label.y=H.y}})}function W(q,$){return e.mapValues(e.pick(q,$),Number)}function Q(q){var $={};return e.forEach(q,function(H,U){$[U.toLowerCase()]=H}),$}return cc}var lc,Jm;function Mk(){if(Jm)return lc;Jm=1;var e=Ne(),n=Be(),r=nt().Graph;lc={debugOrdering:i};function i(o){var a=n.buildLayerMatrix(o),s=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(o.nodes(),function(u){s.setNode(u,{label:u}),s.setParent(u,"layer"+o.node(u).rank)}),e.forEach(o.edges(),function(u){s.setEdge(u.v,u.w,{},u.name)}),e.forEach(a,function(u,l){var c="layer"+l;s.setNode(c,{rank:"same"}),e.reduce(u,function(d,f){return s.setEdge(d,f,{style:"invis"}),f})}),s}return lc}var fc,ev;function Ak(){return ev||(ev=1,fc="0.8.5"),fc}var dc,tv;function Rk(){return tv||(tv=1,dc={graphlib:nt(),layout:Nk(),debug:Mk(),util:{time:Be().time,notime:Be().notime},version:Ak()}),dc}var Ik=Rk();const nv=Wv(Ik),Tk=/^graph\s+(TD|TB|LR|RL|BT)/i,Pk=/^\s*(\w+)\["([^"]+)"\]/,Ok=/^\s*(\w+)\(["']?([^)"']+)["']?\)/,jk=/^\s*(\w+)\{["']?([^}"']+)["']?\}/,qk=/^\s*(\w+)\s*-->\s*\|([^|]+)\|\s*(\w+)/,Dk=/^\s*(\w+)\s*-->\s*(\w+)/,Lk=/^\s*(\w+)\s*-->\s*(\w+)\["([^"]+)"\]/;function Cb(e){const n=e.split(`
`).map(u=>u.trim()).filter(Boolean);let r="TB";const i=new Map,o=[];let a=0;for(const u of n){const l=u.match(Tk);if(l){const b=l[1].toUpperCase();r=b==="LR"||b==="RL"?"LR":"TB";continue}if(/^(subgraph|end|style|class|classDef|linkStyle)\b/i.test(u))continue;const c=u.match(qk);if(c){const[,b,v,g]=c;i.has(b)||i.set(b,b),i.has(g)||i.set(g,g),o.push({id:`e${a++}`,source:b,target:g,label:v.trim()});continue}const d=u.match(Lk);if(d){const[,b,v,g]=d;i.has(b)||i.set(b,b),i.set(v,g),o.push({id:`e${a++}`,source:b,target:v});continue}const f=u.match(Dk);if(f){const[,b,v]=f;i.has(b)||i.set(b,b),i.has(v)||i.set(v,v),o.push({id:`e${a++}`,source:b,target:v});continue}const h=u.match(Pk);if(h){const[,b,v]=h;i.set(b,v);continue}const p=u.match(Ok);if(p){const[,b,v]=p;i.set(b,v);continue}const m=u.match(jk);if(m){const[,b,v]=m;i.set(b,v);continue}}return{nodes:Array.from(i.entries()).map(([u,l])=>({id:u,type:"arcade",position:{x:0,y:0},data:{label:l}})),edges:o,direction:r}}function yn(e,n,r="TB"){const i=[`graph ${r}`];for(const o of e){const a=o.data.label||o.id;i.push(`    ${o.id}["${a}"]`)}i.push("");for(const o of n)o.label?i.push(`    ${o.source} -->|${o.label}| ${o.target}`):i.push(`    ${o.source} --> ${o.target}`);return i.join(`
`)}function Tt(e,n,r){const{direction:i,nodeWidth:o=180,nodeHeight:a=50,rankSep:s=80,nodeSep:u=40}=r,l=new nv.graphlib.Graph;l.setDefaultEdgeLabel(()=>({})),l.setGraph({rankdir:i,ranksep:s,nodesep:u});for(const c of e)l.setNode(c.id,{width:o,height:a});for(const c of n)l.setEdge(c.source,c.target);return nv.layout(l),e.map(c=>{const d=l.node(c.id);return{...c,position:{x:d.x-o/2,y:d.y-a/2}}})}function Eb(e){return(e||"Untitled Canvas").trim().replace(/[/\\?%*:|"<>]/g,"-")||"Untitled Canvas"}function Sb(e){const n=new Date().toISOString(),r=["---","type: brain-canvas",`canvas_mode: ${e.mode}`,`title: "${e.title.replace(/"/g,'\\"')}"`,`updated: ${n}`];return e.layoutPath&&r.push(`layout_path: "${e.layoutPath}"`),e.strokesPath&&r.push(`strokes_path: "${e.strokesPath}"`),e.snapshotPath&&r.push(`snapshot_path: "${e.snapshotPath}"`),r.push("---","",`# ${e.title}`,""),e.mermaid?.trim()?r.push("```mermaid",e.mermaid.trim(),"```",""):r.push("> Freehand canvas content is stored in sidecar JSON files.",""),r.join(`
`)}const Ac=Zc,zk=Qv;function Fk({data:e,selected:n}){const r=e.label,i=e.colorIdx??0,o=Ac[i]||Ac[0];return E.jsxs("div",{className:Pe("px-3 py-2 font-terminal text-xs border-2 rounded-none min-w-[100px] text-center",n?"border-primary text-primary ring-1 ring-primary":`${o.border} ${o.text}`,o.bg),children:[E.jsx(Le,{type:"target",position:ne.Top,className:"!bg-primary !border-primary !w-2 !h-2"}),E.jsx(Le,{type:"target",position:ne.Left,className:"!bg-primary !border-primary !w-2 !h-2"}),r,E.jsx(Le,{type:"source",position:ne.Bottom,className:"!bg-primary !border-primary !w-2 !h-2"}),E.jsx(Le,{type:"source",position:ne.Right,className:"!bg-primary !border-primary !w-2 !h-2"})]})}const $k={arcade:Fk},Bk={type:"smoothstep",style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:Nt.ArrowClosed,color:"hsl(var(--primary))"}},Hk=[{id:"basic-concept-map",name:"Concept Map",description:"Central concept with labeled branches",category:"concept-map",mermaid:`graph TD
    A["Central Concept"]
    B["Related Idea 1"]
    C["Related Idea 2"]
    D["Related Idea 3"]
    E["Related Idea 4"]
    A -->|"causes"| B
    A -->|"includes"| C
    A -->|"affects"| D
    B -->|"leads to"| E`},{id:"process-flowchart",name:"Process Flowchart",description:"Linear process with decision point",category:"flowchart",mermaid:`graph TD
    A["Start / Input"]
    B["Step 1"]
    C{"Decision?"}
    D["Path A"]
    E["Path B"]
    F["Outcome"]
    A --> B
    B --> C
    C -->|"Yes"| D
    C -->|"No"| E
    D --> F
    E --> F`},{id:"clinical-decision-tree",name:"Clinical Decision Tree",description:"Presentation to diagnosis reasoning",category:"decision-tree",mermaid:`graph TD
    A["Patient Presentation"]
    B{"Key Finding 1?"}
    C{"Key Finding 2?"}
    D["Differential A"]
    E["Differential B"]
    F["Confirm: Test X"]
    G["Confirm: Test Y"]
    A --> B
    B -->|"Present"| D
    B -->|"Absent"| C
    C -->|"Positive"| E
    C -->|"Negative"| D
    D --> F
    E --> G`},{id:"physiological-pathway",name:"Physiological Pathway",description:"Stimulus to response cascade",category:"pathway",mermaid:`graph TD
    A["Stimulus"]
    B["Receptor / Sensor"]
    C["Signal Transduction"]
    D["Effector Response"]
    E["Outcome / Adaptation"]
    F["Feedback Loop"]
    A --> B
    B --> C
    C --> D
    D --> E
    E -->|"negative feedback"| A
    E -->|"modulates"| F
    F --> B`},{id:"compare-contrast",name:"Compare & Contrast",description:"Two concepts with shared and unique features",category:"compare",mermaid:`graph LR
    A["Concept A"]
    B["Shared Feature 1"]
    C["Shared Feature 2"]
    D["Concept B"]
    E["Unique to A"]
    F["Unique to B"]
    A --> B
    D --> B
    A --> C
    D --> C
    A --> E
    D --> F`}];function Uk({mermaidInput:e,onMermaidInputChange:n,onImport:r,onBlank:i,className:o}){return E.jsxs("div",{className:Pe("flex flex-col items-center h-full p-4 gap-3 overflow-auto",o),children:[E.jsx("p",{className:"font-arcade text-xs text-primary",children:"CONCEPT MAP EDITOR"}),E.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"START FROM TEMPLATE"}),E.jsx("div",{className:"grid grid-cols-2 gap-2 w-full max-w-md",children:Hk.map(a=>E.jsxs("button",{onClick:()=>r(a.mermaid),className:"border-[3px] border-double border-secondary/50 hover:border-primary p-3 cursor-pointer text-left transition-colors bg-black/40",children:[E.jsx("p",{className:"font-terminal text-xs text-primary",children:a.name}),E.jsx("p",{className:"font-terminal text-xs text-muted-foreground mt-0.5",children:a.description})]},a.id))}),E.jsx("div",{className:"w-px h-2"}),E.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"OR PASTE MERMAID CODE"}),E.jsx(ax,{value:e,onChange:a=>n(a.target.value),placeholder:`graph TD
    A["Main Topic"]
    B["Subtopic 1"]
    C["Subtopic 2"]
    A --> B
    A --> C`,className:"w-full max-w-md h-32 font-mono text-xs rounded-none border-secondary bg-black/60"}),E.jsxs("div",{className:"flex gap-2",children:[E.jsxs(de,{size:"sm",className:"font-terminal text-xs rounded-none",onClick:()=>r(e),disabled:!e.trim(),children:[E.jsx(ry,{className:"w-3 h-3 mr-1"}),"Import"]}),E.jsxs(de,{size:"sm",variant:"outline",className:"font-terminal text-xs rounded-none",onClick:i,children:[E.jsx(sr,{className:"w-3 h-3 mr-1"}),"Blank Canvas"]})]})]})}function Vk({initialMermaid:e,onSave:n,onInitialMermaidConsumed:r,hideToolbar:i=!1,externalCommand:o,onStatusChange:a,className:s}){const[u,l,c]=g0([]),[d,f,h]=m0([]),[p,m]=T.useState("TB"),[b,v]=T.useState(!e&&u.length===0),[g,_]=T.useState(e||""),[y,x]=T.useState(0),[w,C]=T.useState(!1),[S,k]=T.useState(null),[A,N]=T.useState(!1),M=T.useRef(null),I=T.useRef(!1),O=T.useRef(0),{toast:R}=Hc(),P=T.useCallback(B=>{if(!B.trim())return;const K=Cb(B);m(K.direction);const J=Tt(K.nodes,K.edges,{direction:K.direction});l(J),f(K.edges),x(K.nodes.length),v(!1),N(!0)},[l,f]);T.useEffect(()=>{e?.trim()&&!I.current&&(I.current=!0,P(e),_(e),r?.())},[e,P,r]),T.useEffect(()=>{if(!w)return;const B=K=>{K.key==="Escape"&&C(!1)};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[w]);const j=T.useCallback(B=>{N(!0),c(B)},[c]),L=T.useCallback(B=>{N(!0),h(B)},[h]),z=T.useCallback(B=>{N(!0),f(K=>nl(B,K))},[f]),F=T.useCallback(()=>{const B=Tt(u,d,{direction:p});l(B),N(!0)},[u,d,p,l]),Y=T.useCallback(()=>{const B=p==="TB"?"LR":"TB";m(B);const K=Tt(u,d,{direction:B});l(K),N(!0)},[p,u,d,l]),Z=T.useCallback(()=>{const B=`N${y+1}`;x(J=>J+1);const K={id:B,type:"arcade",position:{x:Math.random()*300+50,y:Math.random()*200+50},data:{label:`New Node ${y+1}`,colorIdx:0}};l(J=>[...J,K]),N(!0)},[y,l]),W=T.useCallback(()=>{l(B=>B.filter(K=>!K.selected)),f(B=>B.filter(K=>!K.selected)),N(!0)},[l,f]),Q=T.useCallback(B=>{l(K=>K.map(J=>J.selected?{...J,data:{...J.data,colorIdx:B}}:J)),k(null),N(!0)},[l]),q=T.useCallback(B=>{f(K=>K.map(J=>J.selected?{...J,style:{...J.style,stroke:B,strokeWidth:2},markerEnd:{type:Nt.ArrowClosed,color:B}}:J)),k(null),N(!0)},[f]),$=T.useCallback(async()=>{if(M.current)try{const B=M.current.querySelector(".react-flow__viewport");if(!B)return;const{width:K,height:J}=B.getBoundingClientRect(),oe=B.cloneNode(!0);oe.style.backgroundColor="#000";const te=`<svg xmlns="http://www.w3.org/2000/svg" width="${K}" height="${J}">
        <foreignObject width="100%" height="100%">
          <div xmlns="http://www.w3.org/1999/xhtml">${new XMLSerializer().serializeToString(oe)}</div>
        </foreignObject>
      </svg>`,ce=new Image,re=new Blob([te],{type:"image/svg+xml;charset=utf-8"}),le=URL.createObjectURL(re);ce.onload=()=>{const ae=document.createElement("canvas");ae.width=K*2,ae.height=J*2;const Ae=ae.getContext("2d");Ae.scale(2,2),Ae.drawImage(ce,0,0),URL.revokeObjectURL(le),ae.toBlob(Me=>{if(!Me)return;const je=document.createElement("a");je.download="concept-map.png",je.href=URL.createObjectURL(Me),je.click(),URL.revokeObjectURL(je.href),R({title:"PNG exported"})},"image/png")},ce.onerror=()=>{URL.revokeObjectURL(le),R({title:"Export failed",variant:"destructive"})},ce.src=le}catch(B){R({title:"Export failed",description:String(B),variant:"destructive"})}},[R]),H=T.useCallback(()=>{const B=yn(u,d,p);navigator.clipboard.writeText(B),R({title:"Mermaid copied to clipboard"})},[u,d,p,R]),U=T.useCallback(async()=>{const B=yn(u,d,p),K=Eb(u[0]?.data?.label||"Untitled Canvas"),J=`Brain Canvas/${K}`,oe=`${J}.md`,te=`${J}.layout.json`,ce=JSON.stringify({direction:p,nodes:u.map(le=>({id:le.id,type:le.type,position:le.position,data:le.data,style:le.style})),edges:d.map(le=>({id:le.id,source:le.source,target:le.target,label:le.label,style:le.style,markerEnd:le.markerEnd})),updated:new Date().toISOString()},null,2),re=Sb({mode:"structured",title:K,mermaid:B,layoutPath:te});try{await st.obsidian.saveFile(te,ce),await st.obsidian.saveFile(oe,re),R({title:"Saved to vault",description:oe}),n?.(B),N(!1)}catch(le){R({title:"Save failed",description:String(le),variant:"destructive"})}},[u,d,p,R,n]),V=T.useCallback(()=>{v(!0),_(u.length>0?yn(u,d,p):"")},[u,d,p]);return T.useEffect(()=>{a?.({mode:"structured",isDirty:A,nodeCount:u.length,edgeCount:d.length,canUndo:!1,canRedo:!1,supportsMermaid:!0,supportsDraw:!1,selectedLabels:u.filter(B=>B.selected).map(B=>String(B.data?.label||B.id))})},[a,A,u,d]),T.useEffect(()=>{if(!(!o||o.target!=="structured")&&o.id!==O.current)switch(O.current=o.id,o.type){case"save":U();break;case"export_png":$();break;case"export_mermaid":H();break;case"import_mermaid":{const B=typeof o.payload=="string"?o.payload.trim():"";B?(P(B),_(B)):V();break}case"add_node":Z();break;case"delete_selected":W();break;case"auto_layout":F();break;case"toggle_direction":Y();break}},[o,U,$,H,P,V,Z,W,F,Y]),b&&u.length===0?E.jsx(Uk,{mermaidInput:g,onMermaidInputChange:_,onImport:P,onBlank:()=>{v(!1),Z()},className:s}):E.jsxs("div",{className:Pe("flex flex-col",w?"fixed inset-0 z-[100010] bg-black":"h-full",s),children:[!i&&E.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-secondary/30 bg-black/40 shrink-0 flex-wrap",children:[E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:V,title:"Back to import",children:E.jsx(mx,{className:"w-3 h-3"})}),E.jsx("div",{className:"w-px h-4 bg-secondary/30"}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:Z,title:"Add node",children:E.jsx(sr,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:W,title:"Delete selected",children:E.jsx(Yv,{className:"w-3 h-3"})}),E.jsxs("div",{className:"relative",children:[E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:()=>k(S?null:"node"),title:"Color selected",children:E.jsx(iy,{className:"w-3 h-3"})}),S&&E.jsxs("div",{className:"absolute top-full left-0 mt-1 p-2 bg-black border-[3px] border-double border-primary/50 z-50 space-y-2 min-w-[160px]",children:[E.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"NODE COLORS"}),E.jsx("div",{className:"flex flex-wrap gap-1",children:Ac.map((B,K)=>E.jsx("button",{onClick:()=>Q(K),className:Pe("w-5 h-5 border-2 rounded-none",B.border,B.bg),title:B.name},B.name))}),E.jsx("p",{className:"font-terminal text-xs text-muted-foreground pt-1",children:"EDGE COLORS"}),E.jsx("div",{className:"flex flex-wrap gap-1",children:zk.map(B=>E.jsx("button",{onClick:()=>q(B.stroke),className:"w-5 h-5 border-[3px] border-double border-secondary/50 rounded-none",style:{backgroundColor:B.stroke},title:B.name},B.name))})]})]}),E.jsx("div",{className:"w-px h-4 bg-secondary/30"}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:F,title:"Auto layout",children:E.jsx(Xv,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:Y,title:`Direction: ${p}`,children:p==="TB"?E.jsx(ty,{className:"w-3 h-3"}):E.jsx(ey,{className:"w-3 h-3"})}),E.jsx("div",{className:"w-px h-4 bg-secondary/30"}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:H,title:"Copy Mermaid",children:E.jsx(Jv,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:$,title:"Export PNG",children:E.jsx(Wc,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:U,title:"Save to vault",children:E.jsx(Uc,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:()=>C(!w),title:w?"Exit fullscreen":"Fullscreen",children:w?E.jsx(hx,{className:"w-3 h-3"}):E.jsx(px,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 text-xs font-terminal",onClick:()=>{v(!0),l([]),f([])},title:"Import Mermaid",children:E.jsx(ry,{className:"w-3 h-3"})}),E.jsxs("div",{className:"ml-auto flex items-center gap-2 text-xs font-terminal text-muted-foreground",children:[E.jsxs("span",{children:[u.length,"N / ",d.length,"E"]}),E.jsx("span",{className:Pe("w-2 h-2 rounded-full",A?"bg-destructive":"bg-success")}),E.jsx("span",{children:A?"Unsaved":"Saved"})]})]}),E.jsx("div",{className:"flex-1 min-h-0",ref:M,children:E.jsxs(p0,{nodes:u,edges:d,onNodesChange:j,onEdgesChange:L,onConnect:z,nodeTypes:$k,defaultEdgeOptions:Bk,fitView:!0,className:"bg-black/80",proOptions:{hideAttribution:!0},onPaneClick:()=>k(null),children:[E.jsx(y0,{color:"hsl(var(--primary) / 0.1)",gap:20}),E.jsx(_0,{className:"!bg-black !border-primary [&_button]:!bg-black/80 [&_button]:!border-primary/50 [&_button]:!text-primary"}),E.jsx(w0,{className:"!bg-black/80 !border-primary",nodeColor:"hsl(var(--primary))",maskColor:"rgba(0,0,0,0.5)"})]})})]})}function Gk({className:e}){return E.jsxs("div",{className:Pe("flex flex-col items-center justify-center h-full gap-4 text-muted-foreground",e),children:[E.jsx("p",{className:"font-arcade text-sm text-primary",children:"FREEHAND MOVED TO CANVAS TAB"}),E.jsx("p",{className:"font-terminal text-base",children:"Switch to the CANVAS tab (Alt+1) for the full Excalidraw drawing experience."})]})}const rv=["rectangle","circle","diamond","hexagon"],iv=Zc,Wk="polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%)",Yk="polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)",Zk={rectangle:{width:200,height:72},circle:{width:110,height:110},diamond:{width:130,height:130},hexagon:{width:180,height:96}};function Wn(e){return{...Zk[e]}}function Kk({shape:e,className:n,children:r}){return e==="circle"?E.jsx("div",{className:Pe("w-full h-full rounded-full",n),children:E.jsx("div",{className:"w-full h-full flex items-center justify-center p-3",children:r})}):e==="diamond"?E.jsx("div",{className:Pe("w-full h-full",n),style:{clipPath:Wk},children:E.jsx("div",{className:"w-full h-full flex items-center justify-center p-3",children:r})}):e==="hexagon"?E.jsx("div",{className:Pe("w-full h-full",n),style:{clipPath:Yk},children:E.jsx("div",{className:"w-full h-full flex items-center justify-center p-3",children:r})}):E.jsx("div",{className:Pe("w-full h-full rounded-none",n),children:E.jsx("div",{className:"w-full h-full flex items-center justify-center px-3 py-2",children:r})})}function Xk({data:e,selected:n,id:r}){const{label:i,colorIdx:o=0,shape:a="rectangle"}=e,s=iv[o]||iv[0],[u,l]=T.useState(!1),[c,d]=T.useState(i),f=T.useCallback(()=>{if(l(!1),c.trim()&&c!==i){const m=new CustomEvent("mindmap:node-label",{detail:{id:r,label:c.trim()}});window.dispatchEvent(m)}},[c,i,r]),h=T.useCallback(m=>{m.key==="Enter"&&f(),m.key==="Escape"&&(d(i),l(!1))},[f,i]),p="!bg-primary !border-primary !w-2 !h-2";return E.jsxs(E.Fragment,{children:[E.jsx(C0,{isVisible:!!n,minWidth:a==="rectangle"?110:80,minHeight:a==="rectangle"?48:80,keepAspectRatio:a!=="rectangle",lineClassName:"!border-primary",handleClassName:"!bg-primary !border-primary !w-2 !h-2"}),E.jsx(Le,{type:"target",position:ne.Top,className:p}),E.jsx(Le,{type:"target",position:ne.Left,className:p}),E.jsx(Kk,{shape:a,className:Pe("w-full h-full border-2 font-terminal text-xs text-center min-w-[60px]",n?"border-primary text-primary ring-1 ring-primary":`${s.border} ${s.text}`,s.bg),children:u?E.jsx("input",{autoFocus:!0,value:c,onChange:m=>d(m.target.value),onBlur:f,onKeyDown:h,className:"bg-transparent border-b border-primary text-center text-xs font-terminal outline-none w-full"}):E.jsx("span",{onDoubleClick:()=>{d(i),l(!0)},children:i})}),E.jsx(Le,{type:"source",position:ne.Bottom,className:p}),E.jsx(Le,{type:"source",position:ne.Right,className:p})]})}function Qk({data:e,selected:n}){const{src:r}=e,i="!bg-primary !border-primary !w-2 !h-2";return E.jsxs(E.Fragment,{children:[E.jsx(C0,{isVisible:!!n,minWidth:50,minHeight:50,keepAspectRatio:!0,lineClassName:"!border-primary",handleClassName:"!bg-primary !border-primary !w-2 !h-2"}),E.jsx(Le,{type:"target",position:ne.Top,className:i}),E.jsx(Le,{type:"target",position:ne.Left,className:i}),E.jsx("img",{src:r,alt:"pasted",className:Pe("w-full h-full object-contain border-[3px] border-double rounded-none",n?"border-primary ring-1 ring-primary":"border-secondary/50"),draggable:!1}),E.jsx(Le,{type:"source",position:ne.Bottom,className:i}),E.jsx(Le,{type:"source",position:ne.Right,className:i})]})}const Jk={mindmapShape:Xk,mindmapImage:Qk},hc={type:"smoothstep",style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:Nt.ArrowClosed,color:"hsl(var(--primary))"}},ov={rectangle:yx,circle:vx,diamond:kx,hexagon:ny},ot="h-6 px-1.5 text-xs font-terminal";function eN({onSeedMap:e,onAddNode:n,onDeleteSelected:r,onSetNodeColor:i,onSetEdgeColor:o,onSetShape:a,onAutoLayout:s,onToggleDirection:u,direction:l,drawMode:c,onToggleDraw:d,onExportPng:f,onSaveToVault:h,nodeCount:p,edgeCount:m,isDirty:b}){const[v,g]=T.useState(null);return E.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-secondary/30 bg-black/40 shrink-0 flex-wrap",children:[E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:e,title:"Seed from curriculum",children:E.jsx(jx,{className:"w-3 h-3"})}),E.jsx("div",{className:"w-px h-4 bg-secondary/30"}),E.jsxs("div",{className:"relative",children:[E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:()=>g(v==="add"?null:"add"),title:"Add node",children:E.jsx(sr,{className:"w-3 h-3"})}),v==="add"&&E.jsx("div",{className:"absolute top-full left-0 mt-1 p-1 bg-black border-[3px] border-double border-primary/50 z-50 space-y-0.5 min-w-[120px]",children:rv.map(_=>{const y=ov[_];return E.jsxs("button",{onClick:()=>{n(_),g(null)},className:"flex items-center gap-2 w-full px-2 py-1 text-xs font-terminal text-secondary-foreground hover:bg-primary/20",children:[E.jsx(y,{className:"w-3 h-3"}),_]},_)})})]}),E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:r,title:"Delete selected",children:E.jsx(Yv,{className:"w-3 h-3"})}),E.jsxs("div",{className:"relative",children:[E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:()=>g(v==="color"?null:"color"),title:"Color selected",children:E.jsx(iy,{className:"w-3 h-3"})}),v==="color"&&E.jsxs("div",{className:"absolute top-full left-0 mt-1 p-2 bg-black border-[3px] border-double border-primary/50 z-50 space-y-2 min-w-[160px]",children:[E.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"NODE COLORS"}),E.jsx("div",{className:"flex flex-wrap gap-1",children:Zc.map((_,y)=>E.jsx("button",{onClick:()=>{i(y),g(null)},className:Pe("w-5 h-5 border-2 rounded-none",_.border,_.bg),title:_.name},_.name))}),E.jsx("p",{className:"font-terminal text-xs text-muted-foreground pt-1",children:"EDGE COLORS"}),E.jsx("div",{className:"flex flex-wrap gap-1",children:Qv.map(_=>E.jsx("button",{onClick:()=>{o(_.stroke),g(null)},className:"w-5 h-5 border-[3px] border-double border-secondary/50 rounded-none",style:{backgroundColor:_.stroke},title:_.name},_.name))})]})]}),E.jsxs("div",{className:"relative",children:[E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:()=>g(v==="shape"?null:"shape"),title:"Change shape",children:E.jsx(ny,{className:"w-3 h-3"})}),v==="shape"&&E.jsx("div",{className:"absolute top-full left-0 mt-1 p-1 bg-black border-[3px] border-double border-primary/50 z-50 space-y-0.5 min-w-[120px]",children:rv.map(_=>{const y=ov[_];return E.jsxs("button",{onClick:()=>{a(_),g(null)},className:"flex items-center gap-2 w-full px-2 py-1 text-xs font-terminal text-secondary-foreground hover:bg-primary/20",children:[E.jsx(y,{className:"w-3 h-3"}),_]},_)})})]}),E.jsx("div",{className:"w-px h-4 bg-secondary/30"}),E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:s,title:"Auto layout",children:E.jsx(Xv,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:u,title:`Direction: ${l}`,children:l==="TB"?E.jsx(ty,{className:"w-3 h-3"}):E.jsx(ey,{className:"w-3 h-3"})}),E.jsx("div",{className:"w-px h-4 bg-secondary/30"}),E.jsx(de,{size:"sm",variant:"ghost",className:Pe(ot,c&&"bg-primary/20 text-primary"),onClick:d,title:"Draw mode",children:E.jsx(sx,{className:"w-3 h-3"})}),E.jsx("div",{className:"w-px h-4 bg-secondary/30"}),E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:f,title:"Export PNG",children:E.jsx(Wc,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:ot,onClick:h,title:"Save to vault",children:E.jsx(Uc,{className:"w-3 h-3"})}),E.jsxs("div",{className:"ml-auto flex items-center gap-2 text-xs font-terminal text-muted-foreground",children:[E.jsxs("span",{children:[p,"N / ",m,"E"]}),E.jsx("span",{className:Pe("w-2 h-2 rounded-full",b?"bg-destructive":"bg-success")}),E.jsx("span",{children:b?"Unsaved":"Saved"})]})]})}function tN({active:e,strokes:n,onStrokeAdd:r,penColor:i="#ef4444",penWidth:o=2}){const a=T.useRef(null),s=T.useRef(!1),u=T.useRef([]),l=T.useCallback(()=>{const h=a.current;if(!h)return;const p=h.getContext("2d");if(!p)return;p.clearRect(0,0,h.width,h.height);for(const b of n)if(!(b.points.length<2)){p.beginPath(),p.strokeStyle=b.color,p.lineWidth=b.width,p.lineCap="round",p.lineJoin="round",p.moveTo(b.points[0][0],b.points[0][1]);for(let v=1;v<b.points.length;v++)p.lineTo(b.points[v][0],b.points[v][1]);p.stroke()}const m=u.current;if(m.length>=2){p.beginPath(),p.strokeStyle=i,p.lineWidth=o,p.lineCap="round",p.lineJoin="round",p.moveTo(m[0][0],m[0][1]);for(let b=1;b<m.length;b++)p.lineTo(m[b][0],m[b][1]);p.stroke()}},[n,i,o]);T.useEffect(()=>{const h=a.current;if(!h)return;const p=h.parentElement;if(!p)return;const m=new ResizeObserver(()=>{const b=p.getBoundingClientRect();h.width=b.width,h.height=b.height,l()});return m.observe(p),()=>m.disconnect()},[l]),T.useEffect(()=>{l()},[l]);const c=T.useCallback(h=>{if(!e)return;s.current=!0;const p=a.current?.getBoundingClientRect();p&&(u.current=[[h.clientX-p.left,h.clientY-p.top]],h.target.setPointerCapture(h.pointerId))},[e]),d=T.useCallback(h=>{if(!s.current)return;const p=a.current?.getBoundingClientRect();p&&(u.current.push([h.clientX-p.left,h.clientY-p.top]),l())},[l]),f=T.useCallback(()=>{if(!s.current)return;s.current=!1;const h=u.current;h.length>=2&&r({points:[...h],color:i,width:o}),u.current=[]},[r,i,o]);return E.jsx("canvas",{ref:a,className:"absolute inset-0",style:{zIndex:e?10:0,pointerEvents:e?"auto":"none",cursor:e?"crosshair":"default"},onPointerDown:c,onPointerMove:d,onPointerUp:f})}const nN={course:6,module:4,lo:3},av={course:"rectangle",module:"rectangle",lo:"rectangle"};function rN({hideToolbar:e=!1,externalCommand:n,onStatusChange:r}){const[i,o,a]=g0([]),[s,u,l]=m0([]),[c,d]=T.useState("LR"),[f,h]=T.useState(0),[p,m]=T.useState(!1),[b,v]=T.useState(!1),[g,_]=T.useState([]),[y,x]=T.useState(!1),[w,C]=T.useState(""),S=T.useRef(null),k=T.useRef(!1),A=T.useRef(0),{toast:N}=Hc(),[M,I]=T.useState(new Set),[O,R]=T.useState(new Set),[P,j]=T.useState(!0),{data:L=[]}=Lr({queryKey:["courses"],queryFn:()=>st.courses.getActive()}),z=L.map(G=>G.id).sort(),{data:F=[]}=Lr({queryKey:["modules","all",z],queryFn:async()=>(await Promise.all(L.map(ee=>st.modules.getByCourse(ee.id)))).flat(),enabled:L.length>0}),{data:Y=[]}=Lr({queryKey:["learningObjectives","all",z,P],queryFn:async()=>(await Promise.all(L.map(ee=>st.learningObjectives.getByCourse(ee.id)))).flat(),enabled:L.length>0&&P});T.useEffect(()=>{L.length>0&&!k.current&&(k.current=!0,I(new Set(L.map(G=>G.id))))},[L]);const Z=T.useMemo(()=>{const G=[],ee=[],ie=new Map;for(const se of F){const fe=ie.get(se.courseId)??[];fe.push(se),ie.set(se.courseId,fe)}const pe=new Map;for(const se of Y){if(se.moduleId==null)continue;const fe=pe.get(se.moduleId)??[];fe.push(se),pe.set(se.moduleId,fe)}for(const se of L){if(!M.has(se.id))continue;const fe=`course-${se.id}`;G.push({id:fe,name:se.name,type:"course"});const Re=ie.get(se.id)??[];for(const ve of Re){if(O.size>0&&!O.has(ve.id))continue;const _e=`module-${ve.id}`;if(G.push({id:_e,name:ve.name,type:"module"}),ee.push({source:fe,target:_e}),P){const ze=pe.get(ve.id)??[];for(const ge of ze){const we=`lo-${ge.id}`;G.push({id:we,name:`${ge.loCode}: ${ge.title}`,type:"lo"}),ee.push({source:_e,target:we})}}}}return{nodes:G,links:ee}},[L,F,Y,M,O,P]),W=G=>{I(ee=>{const ie=new Set(ee);return ie.has(G)?ie.delete(G):ie.add(G),ie})},Q=G=>{R(ee=>{const ie=new Set(ee);return ie.has(G)?ie.delete(G):ie.add(G),ie})},q=T.useCallback(G=>{m(!0),a(G)},[a]),$=T.useCallback(G=>{m(!0),l(G)},[l]),H=T.useCallback(G=>{m(!0),u(ee=>nl(G,ee))},[u]);T.useEffect(()=>{const G=ee=>{const{id:ie,label:pe}=ee.detail;o(se=>se.map(fe=>fe.id===ie?{...fe,data:{...fe.data,label:pe}}:fe)),m(!0)};return window.addEventListener("mindmap:node-label",G),()=>window.removeEventListener("mindmap:node-label",G)},[o]);const U=T.useCallback(()=>{const{nodes:G,links:ee}=Z;if(G.length===0){N({title:"No data",description:"Select courses first",variant:"destructive"});return}const ie=new Set(i.filter(ge=>!ge.id.startsWith("course-")&&!ge.id.startsWith("module-")&&!ge.id.startsWith("lo-")).map(ge=>ge.id)),pe=i.filter(ge=>ie.has(ge.id)),se=s.filter(ge=>ie.has(ge.source)||ie.has(ge.target)),fe=G.map(ge=>({id:ge.id,type:"mindmapShape",position:{x:0,y:0},data:(()=>{const we=av[ge.type]??"rectangle";return{label:ge.name,colorIdx:nN[ge.type]??0,shape:we}})(),style:Wn(av[ge.type]??"rectangle")})),Re=ee.map((ge,we)=>({id:`seed-e-${we}`,source:ge.source,target:ge.target,...hc})),ve=[...fe,...pe],_e=[...Re,...se],ze=Tt(ve,_e,{direction:c});o(ze),u(_e),h(ve.length),m(!0),N({title:"Map seeded",description:`${G.length} curriculum nodes`})},[Z,i,s,c,o,u,N]),V=T.useCallback(G=>{const ee=`mm-${f+1}`;h(pe=>pe+1);const ie={id:ee,type:"mindmapShape",position:{x:Math.random()*300+50,y:Math.random()*200+50},data:{label:`Node ${f+1}`,colorIdx:0,shape:G},style:Wn(G)};o(pe=>[...pe,ie]),m(!0)},[f,o]),B=T.useCallback(()=>{o(G=>G.filter(ee=>!ee.selected)),u(G=>G.filter(ee=>!ee.selected)),m(!0)},[o,u]),K=T.useCallback(G=>{o(ee=>ee.map(ie=>ie.selected?{...ie,data:{...ie.data,colorIdx:G}}:ie)),m(!0)},[o]),J=T.useCallback(G=>{u(ee=>ee.map(ie=>ie.selected?{...ie,style:{...ie.style,stroke:G,strokeWidth:2.5},markerEnd:{type:Nt.ArrowClosed,color:G}}:ie)),m(!0)},[u]),oe=T.useCallback(G=>{o(ee=>ee.map(ie=>ie.selected&&ie.type==="mindmapShape"?{...ie,data:{...ie.data,shape:G},style:Wn(G)}:ie)),m(!0)},[o]),te=T.useCallback(()=>{const G=Tt(i,s,{direction:c});o(G),m(!0)},[i,s,c,o]),ce=T.useCallback(()=>{const G=c==="TB"?"LR":"TB";d(G);const ee=Tt(i,s,{direction:G});o(ee),m(!0)},[c,i,s,o]),re=T.useCallback(G=>{const ee=G.clipboardData?.items;if(ee)for(const ie of ee){if(!ie.type.startsWith("image/"))continue;const pe=ie.getAsFile();if(!pe)continue;const se=new FileReader;se.onload=()=>{const fe=`mm-img-${f+1}`;h(ve=>ve+1);const Re={id:fe,type:"mindmapImage",position:{x:Math.random()*300+50,y:Math.random()*200+50},data:{src:se.result},style:{width:200,height:150}};o(ve=>[...ve,Re]),m(!0)},se.readAsDataURL(pe);break}},[f,o]),le=T.useCallback(async()=>{if(S.current)try{const G=S.current.querySelector(".react-flow__viewport");if(!G)return;const{width:ee,height:ie}=G.getBoundingClientRect(),pe=G.cloneNode(!0);pe.style.backgroundColor="#000";const se=`<svg xmlns="http://www.w3.org/2000/svg" width="${ee}" height="${ie}">
        <foreignObject width="100%" height="100%">
          <div xmlns="http://www.w3.org/1999/xhtml">${new XMLSerializer().serializeToString(pe)}</div>
        </foreignObject>
      </svg>`,fe=new Image,Re=new Blob([se],{type:"image/svg+xml;charset=utf-8"}),ve=URL.createObjectURL(Re);fe.onload=()=>{const _e=document.createElement("canvas");_e.width=ee*2,_e.height=ie*2;const ze=_e.getContext("2d");ze.scale(2,2),ze.drawImage(fe,0,0),URL.revokeObjectURL(ve),_e.toBlob(ge=>{if(!ge)return;const we=document.createElement("a");we.download="mind-map.png",we.href=URL.createObjectURL(ge),we.click(),URL.revokeObjectURL(we.href),N({title:"PNG exported"})},"image/png")},fe.onerror=()=>{URL.revokeObjectURL(ve),N({title:"Export failed",variant:"destructive"})},fe.src=ve}catch(G){N({title:"Export failed",description:String(G),variant:"destructive"})}},[N]),ae=T.useCallback(()=>{if(i.length===0){N({title:"Nothing to export",description:"Add nodes first",variant:"destructive"});return}const G=new Map;i.forEach((se,fe)=>{G.set(se.id,`N${fe+1}`)});const ee=i.map(se=>({...se,id:G.get(se.id)||se.id,data:{...se.data,label:String(se.data?.label||se.id)}})),ie=s.filter(se=>G.has(se.source)&&G.has(se.target)).map(se=>({...se,source:G.get(se.source)||se.source,target:G.get(se.target)||se.target})),pe=yn(ee,ie,c);navigator.clipboard.writeText(pe),N({title:"Mermaid copied to clipboard"})},[i,s,c,N]),Ae=T.useCallback(G=>{const ee=G.trim();if(!ee)return;const ie=Cb(ee),pe=ie.nodes.map((ve,_e)=>({...ve,id:`mm-import-${_e+1}`,type:"mindmapShape",data:{label:String(ve.data?.label||ve.id),colorIdx:0,shape:"rectangle"},style:Wn("rectangle")})),se=new Map;ie.nodes.forEach((ve,_e)=>{se.set(ve.id,`mm-import-${_e+1}`)});const fe=ie.edges.map((ve,_e)=>{const ze=se.get(ve.source),ge=se.get(ve.target);return!ze||!ge?null:{id:`mm-import-e-${_e+1}`,source:ze,target:ge,...hc}}).filter(ve=>ve!==null),Re=Tt(pe,fe,{direction:ie.direction});d(ie.direction),o(Re),u(fe),h(pe.length),m(!0),N({title:"Mermaid imported",description:`${pe.length} nodes`})},[o,u,N]),Me=T.useCallback(async()=>{const G=Eb(i[0]?.data?.label||"Untitled Canvas"),ee=`Brain Canvas/${G}`,ie=`${ee}.md`,pe=`${ee}.layout.json`,se=`${ee}.strokes.json`,fe=new Map;i.forEach((he,qr)=>fe.set(he.id,`N${qr+1}`));const Re=i.map(he=>({...he,id:fe.get(he.id)||he.id,data:{...he.data,label:String(he.data?.label||he.id)}})),ve=s.filter(he=>fe.has(he.source)&&fe.has(he.target)).map(he=>({...he,source:fe.get(he.source)||he.source,target:fe.get(he.target)||he.target})),_e=yn(Re,ve,c),ze=JSON.stringify({nodes:i.map(he=>({id:he.id,type:he.type,position:he.position,data:he.data,style:he.style})),edges:s.map(he=>({id:he.id,source:he.source,target:he.target,style:he.style,markerEnd:he.markerEnd})),meta:{direction:c,updated:new Date().toISOString()}},null,2),ge=JSON.stringify({strokes:g,updated:new Date().toISOString()},null,2),we=Sb({mode:"mindmap",title:G,mermaid:_e,layoutPath:pe,strokesPath:se});try{await st.obsidian.saveFile(pe,ze),await st.obsidian.saveFile(se,ge),await st.obsidian.saveFile(ie,we),N({title:"Saved to vault",description:ie}),m(!1)}catch(he){N({title:"Save failed",description:String(he),variant:"destructive"})}},[i,s,g,c,N]),je=T.useCallback(G=>{_(ee=>[...ee,G]),m(!0)},[]);T.useEffect(()=>{r?.({mode:"mindmap",isDirty:p,nodeCount:i.length,edgeCount:s.length,canUndo:!1,canRedo:!1,supportsMermaid:!0,supportsDraw:!0,selectedLabels:i.filter(G=>G.selected).map(G=>String(G.data?.label||G.id))})},[r,p,i,s]),T.useEffect(()=>{if(!(!n||n.target!=="mindmap")&&n.id!==A.current)switch(A.current=n.id,n.type){case"save":Me();break;case"export_png":le();break;case"export_mermaid":ae();break;case"import_mermaid":{const G=typeof n.payload=="string"?n.payload.trim():"";G?(Ae(G),C(G),x(!1)):x(!0);break}case"add_node":V("rectangle");break;case"delete_selected":B();break;case"auto_layout":te();break;case"toggle_direction":ce();break;case"toggle_draw":v(G=>!G);break}},[n,Me,le,ae,Ae,V,B,te,ce]);const Ue=F.filter(G=>M.has(G.courseId));return E.jsxs("div",{className:"flex h-full",onPaste:re,children:[E.jsx("div",{className:"w-[160px] shrink-0 border-r border-secondary/30 bg-black/60",children:E.jsx(Zv,{className:"h-full",children:E.jsxs("div",{className:"p-3 space-y-4",children:[E.jsxs("div",{children:[E.jsx("div",{className:"font-arcade text-xs text-primary mb-2",children:"COURSES"}),L.map(G=>E.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[E.jsx(Vt,{checked:M.has(G.id),onCheckedChange:()=>W(G.id),className:"border-cyan-500 data-[state=checked]:bg-cyan-500"}),E.jsx("span",{className:"font-terminal text-xs text-cyan-300",children:G.name})]},G.id))]}),Ue.length>0&&E.jsxs("div",{children:[E.jsx("div",{className:"font-arcade text-xs text-yellow-400 mb-2",children:"MODULES"}),E.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer mb-1",children:[E.jsx(Vt,{checked:O.size===0,onCheckedChange:()=>R(new Set),className:"border-yellow-500 data-[state=checked]:bg-yellow-500"}),E.jsx("span",{className:"font-terminal text-xs text-yellow-200",children:"All Modules"})]}),Ue.map(G=>E.jsxs("label",{className:"flex items-center gap-2 py-0.5 cursor-pointer",children:[E.jsx(Vt,{checked:O.size===0||O.has(G.id),onCheckedChange:()=>Q(G.id),className:"border-yellow-500 data-[state=checked]:bg-yellow-500"}),E.jsx("span",{className:"font-terminal text-xs text-yellow-100 truncate",children:G.name})]},G.id))]}),E.jsx("div",{children:E.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[E.jsx(Vt,{checked:P,onCheckedChange:G=>j(!!G),className:"border-green-500 data-[state=checked]:bg-green-500"}),E.jsx("span",{className:"font-terminal text-xs text-green-300",children:"Show LOs"})]})}),E.jsxs("div",{className:"pt-2 border-t border-secondary/30 space-y-1",children:[E.jsx("div",{className:"font-arcade text-xs text-muted-foreground mb-1",children:"LEGEND"}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-3 h-3 rounded-sm border-2 border-cyan-400 bg-cyan-400/15"}),E.jsx("span",{className:"font-terminal text-xs text-cyan-300",children:"Course"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-3 h-3 rounded-sm border border-yellow-400 bg-yellow-400/12"}),E.jsx("span",{className:"font-terminal text-xs text-yellow-300",children:"Module"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-3 h-3 rounded-sm border border-green-400 bg-green-400/8"}),E.jsx("span",{className:"font-terminal text-xs text-green-300",children:"LO"})]})]}),E.jsx("div",{className:"pt-2 border-t border-secondary/30",children:E.jsxs(de,{size:"sm",variant:"outline",className:"w-full h-7 text-xs font-terminal border-primary/50 text-primary",onClick:U,children:["Seed Map (",Z.nodes.length,")"]})})]})})}),E.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[!e&&E.jsx(eN,{onSeedMap:U,onAddNode:V,onDeleteSelected:B,onSetNodeColor:K,onSetEdgeColor:J,onSetShape:oe,onAutoLayout:te,onToggleDirection:ce,direction:c,drawMode:b,onToggleDraw:()=>v(G=>!G),onExportPng:le,onSaveToVault:Me,nodeCount:i.length,edgeCount:s.length,isDirty:p}),y&&E.jsxs("div",{className:"shrink-0 px-3 py-2 border-b border-primary/20 bg-black/40 flex flex-col gap-2",children:[E.jsx("p",{className:"font-arcade text-xs text-primary",children:"PASTE MERMAID TO IMPORT"}),E.jsx("textarea",{value:w,onChange:G=>C(G.target.value),placeholder:`graph LR
  A[Course] --> B[Module]`,className:"min-h-[64px] w-full px-2 py-1.5 font-mono text-xs bg-black/60 border border-primary/30 rounded-none text-foreground placeholder:text-muted-foreground resize-y",rows:4}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx(de,{size:"sm",className:"rounded-none font-terminal text-xs",disabled:!w.trim(),onClick:()=>{Ae(w),x(!1)},children:"Import"}),E.jsx(de,{size:"sm",variant:"outline",className:"rounded-none font-terminal text-xs border-primary/30",onClick:()=>x(!1),children:"Cancel"})]})]}),E.jsxs("div",{className:"flex-1 min-h-0 relative",ref:S,children:[E.jsx(tN,{active:b,strokes:g,onStrokeAdd:je}),E.jsxs(p0,{nodes:i,edges:s,onNodesChange:q,onEdgesChange:$,onConnect:H,nodeTypes:Jk,defaultEdgeOptions:hc,fitView:!0,className:"bg-black/80",proOptions:{hideAttribution:!0},children:[E.jsx(y0,{color:"hsl(var(--primary) / 0.1)",gap:20}),E.jsx(_0,{className:"!bg-black !border-primary [&_button]:!bg-black/80 [&_button]:!border-primary/50 [&_button]:!text-primary"}),E.jsx(w0,{className:"!bg-black/80 !border-primary",nodeColor:"hsl(var(--primary))",maskColor:"rgba(0,0,0,0.5)"})]}),i.length===0&&E.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-terminal text-xs text-muted-foreground pointer-events-none",children:'Select courses & click "Seed Map", or add nodes manually'})]})]})]})}function iN(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=a.call(r)).done)&&(u.push(i.value),u.length!==n);l=!0);}catch(d){c=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return u}}function oN(e,n,r){return n=hN(n),n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function sv(e,n){return uN(e)||iN(e,n)||kb(e,n)||fN()}function aN(e){return sN(e)||cN(e)||kb(e)||lN()}function sN(e){if(Array.isArray(e))return Rc(e)}function uN(e){if(Array.isArray(e))return e}function cN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kb(e,n){if(e){if(typeof e=="string")return Rc(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rc(e,n)}}function Rc(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i}function lN(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dN(e,n){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function hN(e){var n=dN(e,"string");return typeof n=="symbol"?n:String(n)}var pN=function(n,r){var i=new Set(r);return Object.assign.apply(Object,[{}].concat(aN(Object.entries(n).filter(function(o){var a=sv(o,1),s=a[0];return!i.has(s)}).map(function(o){var a=sv(o,2),s=a[0],u=a[1];return oN({},s,u)}))))};function Ic(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function gN(e){if(Array.isArray(e))return e}function mN(e){if(Array.isArray(e))return Ic(e)}function vN(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yN(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(u.push(i.value),u.length!==n);l=!0);}catch(d){c=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return u}}function bN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _N(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xN(e,n){return gN(e)||yN(e,n)||Nb(e,n)||bN()}function uv(e){return mN(e)||vN(e)||Nb(e)||_N()}function Nb(e,n){if(e){if(typeof e=="string")return Ic(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ic(e,n):void 0}}function wN(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.wrapperElementType,i=r===void 0?"div":r,o=n.nodeMapper,a=o===void 0?function(d){return d}:o,s=n.methodNames,u=s===void 0?[]:s,l=n.initPropNames,c=l===void 0?[]:l;return T.forwardRef(function(d,f){var h=T.useRef(),p=T.useMemo(function(){var v=Object.fromEntries(c.filter(function(g){return d.hasOwnProperty(g)}).map(function(g){return[g,d[g]]}));return e(v)},[]);cv(function(){p(a(h.current))},T.useLayoutEffect),cv(function(){return p._destructor instanceof Function?p._destructor:void 0});var m=T.useCallback(function(v){for(var g=arguments.length,_=new Array(g>1?g-1:0),y=1;y<g;y++)_[y-1]=arguments[y];return p[v]instanceof Function?p[v].apply(p,_):void 0},[p]),b=T.useRef({});return Object.keys(pN(d,[].concat(uv(u),uv(c)))).filter(function(v){return b.current[v]!==d[v]}).forEach(function(v){return m(v,d[v])}),b.current=d,T.useImperativeHandle(f,function(){return Object.fromEntries(u.map(function(v){return[v,function(){for(var g=arguments.length,_=new Array(g),y=0;y<g;y++)_[y]=arguments[y];return m.apply(void 0,[v].concat(_))}]}))},[m]),Gv.createElement(i,{ref:h})})}function cv(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:T.useEffect,r=T.useRef(),i=T.useRef(!1),o=T.useRef(!1),a=T.useState(0),s=xN(a,2);s[0];var u=s[1];i.current&&(o.current=!0),n(function(){return i.current||(r.current=e(),i.current=!0),u(function(l){return l+1}),function(){o.current&&r.current&&r.current()}},[])}function CN(e,n){let r=0;for(let i of e)(i=+i)&&(r+=i);return r}var pc=function(){return cx.Date.now()},EN="Expected a function",SN=Math.max,kN=Math.min;function Mb(e,n,r){var i,o,a,s,u,l,c=0,d=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(EN);n=Vl(n)||0,Kv(r)&&(d=!!r.leading,f="maxWait"in r,a=f?SN(Vl(r.maxWait)||0,n):a,h="trailing"in r?!!r.trailing:h);function p(C){var S=i,k=o;return i=o=void 0,c=C,s=e.apply(k,S),s}function m(C){return c=C,u=setTimeout(g,n),d?p(C):s}function b(C){var S=C-l,k=C-c,A=n-S;return f?kN(A,a-k):A}function v(C){var S=C-l,k=C-c;return l===void 0||S>=n||S<0||f&&k>=a}function g(){var C=pc();if(v(C))return _(C);u=setTimeout(g,b(C))}function _(C){return u=void 0,h&&i?p(C):(i=o=void 0,s)}function y(){u!==void 0&&clearTimeout(u),c=0,i=l=o=u=void 0}function x(){return u===void 0?s:_(pc())}function w(){var C=pc(),S=v(C);if(i=arguments,o=this,l=C,S){if(u===void 0)return m(l);if(f)return clearTimeout(u),u=setTimeout(g,n),p(l)}return u===void 0&&(u=setTimeout(g,n)),s}return w.cancel=y,w.flush=x,w}var NN="Expected a function";function MN(e,n,r){var i=!0,o=!0;if(typeof e!="function")throw new TypeError(NN);return Kv(r)&&(i="leading"in r?!!r.leading:i,o="trailing"in r?!!r.trailing:o),Mb(e,n,{leading:i,maxWait:n,trailing:o})}var Ot=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return .5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return e===0?0:Math.pow(1024,e-1)},Out:function(e){return e===1?1:1-Math.pow(2,-10*e)},InOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return e===0?0:e===1?1:-Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI)},Out:function(e){return e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e-.1)*5*Math.PI)+1},InOut:function(e){return e===0?0:e===1?1:(e*=2,e<1?-.5*Math.pow(2,10*(e-1))*Math.sin((e-1.1)*5*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin((e-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(e){var n=1.70158;return e===1?1:e*e*((n+1)*e-n)},Out:function(e){var n=1.70158;return e===0?0:--e*e*((n+1)*e+n)+1},InOut:function(e){var n=2.5949095;return(e*=2)<1?.5*(e*e*((n+1)*e-n)):.5*((e-=2)*e*((n+1)*e+n)+2)}}),Bounce:Object.freeze({In:function(e){return 1-Ot.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?Ot.Bounce.In(e*2)*.5:Ot.Bounce.Out(e*2-1)*.5+.5}}),generatePow:function(e){return e===void 0&&(e=4),e=e<Number.EPSILON?Number.EPSILON:e,e=e>1e4?1e4:e,{In:function(n){return Math.pow(n,e)},Out:function(n){return 1-Math.pow(1-n,e)},InOut:function(n){return n<.5?Math.pow(n*2,e)/2:(1-Math.pow(2-n*2,e))/2+.5}}}}),gn=function(){return performance.now()},Ab=(function(){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];this._tweens={},this._tweensAddedDuringUpdate={},this.add.apply(this,n)}return e.prototype.getAll=function(){var n=this;return Object.keys(this._tweens).map(function(r){return n._tweens[r]})},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];for(var o=0,a=r;o<a.length;o++){var s=a[o];(n=s._group)===null||n===void 0||n.remove(s),s._group=this,this._tweens[s.getId()]=s,this._tweensAddedDuringUpdate[s.getId()]=s}},e.prototype.remove=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];a._group=void 0,delete this._tweens[a.getId()],delete this._tweensAddedDuringUpdate[a.getId()]}},e.prototype.allStopped=function(){return this.getAll().every(function(n){return!n.isPlaying()})},e.prototype.update=function(n,r){n===void 0&&(n=gn()),r===void 0&&(r=!0);var i=Object.keys(this._tweens);if(i.length!==0)for(;i.length>0;){this._tweensAddedDuringUpdate={};for(var o=0;o<i.length;o++){var a=this._tweens[i[o]],s=!r;a&&a.update(n,s)===!1&&!r&&this.remove(a)}i=Object.keys(this._tweensAddedDuringUpdate)}},e})(),Tc={Linear:function(e,n){var r=e.length-1,i=r*n,o=Math.floor(i),a=Tc.Utils.Linear;return n<0?a(e[0],e[1],i):n>1?a(e[r],e[r-1],r-i):a(e[o],e[o+1>r?r:o+1],i-o)},Utils:{Linear:function(e,n,r){return(n-e)*r+e}}},Rb=(function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e})(),Pc=new Ab,lv=(function(){function e(n,r){this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=Ot.Linear.None,this._interpolationFunction=Tc.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=Rb.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1,this._object=n,typeof r=="object"?(this._group=r,r.add(this)):r===!0&&(this._group=Pc,Pc.add(this))}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(n,r){if(r===void 0&&(r=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=n,this._propertiesAreSetUp=!1,this._duration=r<0?0:r,this},e.prototype.duration=function(n){return n===void 0&&(n=1e3),this._duration=n<0?0:n,this},e.prototype.dynamic=function(n){return n===void 0&&(n=!1),this._isDynamic=n,this},e.prototype.start=function(n,r){if(n===void 0&&(n=gn()),r===void 0&&(r=!1),this._isPlaying)return this;if(this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var i in this._valuesStartRepeat)this._swapEndStartRepeatValues(i),this._valuesStart[i]=this._valuesStartRepeat[i]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=n,this._startTime+=this._delayTime,!this._propertiesAreSetUp||r){if(this._propertiesAreSetUp=!0,!this._isDynamic){var o={};for(var a in this._valuesEnd)o[a]=this._valuesEnd[a];this._valuesEnd=o}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,r)}return this},e.prototype.startFromCurrentValues=function(n){return this.start(n,!0)},e.prototype._setupProperties=function(n,r,i,o,a){for(var s in i){var u=n[s],l=Array.isArray(u),c=l?"array":typeof u,d=!l&&Array.isArray(i[s]);if(!(c==="undefined"||c==="function")){if(d){var f=i[s];if(f.length===0)continue;for(var h=[u],p=0,m=f.length;p<m;p+=1){var b=this._handleRelativeValue(u,f[p]);if(isNaN(b)){d=!1,console.warn("Found invalid interpolation list. Skipping.");break}h.push(b)}d&&(i[s]=h)}if((c==="object"||l)&&u&&!d){r[s]=l?[]:{};var v=u;for(var g in v)r[s][g]=v[g];o[s]=l?[]:{};var f=i[s];if(!this._isDynamic){var _={};for(var g in f)_[g]=f[g];i[s]=f=_}this._setupProperties(v,r[s],f,o[s],a)}else(typeof r[s]>"u"||a)&&(r[s]=u),l||(r[s]*=1),d?o[s]=i[s].slice().reverse():o[s]=r[s]||0}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(this._startTime+this._duration),this},e.prototype.pause=function(n){return n===void 0&&(n=gn()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=n,this)},e.prototype.resume=function(n){return n===void 0&&(n=gn()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=n-this._pauseStart,this._pauseStart=0,this)},e.prototype.stopChainedTweens=function(){for(var n=0,r=this._chainedTweens.length;n<r;n++)this._chainedTweens[n].stop();return this},e.prototype.group=function(n){return n?(n.add(this),this):(console.warn("tween.group() without args has been removed, use group.add(tween) instead."),this)},e.prototype.remove=function(){var n;return(n=this._group)===null||n===void 0||n.remove(this),this},e.prototype.delay=function(n){return n===void 0&&(n=0),this._delayTime=n,this},e.prototype.repeat=function(n){return n===void 0&&(n=0),this._initialRepeat=n,this._repeat=n,this},e.prototype.repeatDelay=function(n){return this._repeatDelayTime=n,this},e.prototype.yoyo=function(n){return n===void 0&&(n=!1),this._yoyo=n,this},e.prototype.easing=function(n){return n===void 0&&(n=Ot.Linear.None),this._easingFunction=n,this},e.prototype.interpolation=function(n){return n===void 0&&(n=Tc.Linear),this._interpolationFunction=n,this},e.prototype.chain=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return this._chainedTweens=n,this},e.prototype.onStart=function(n){return this._onStartCallback=n,this},e.prototype.onEveryStart=function(n){return this._onEveryStartCallback=n,this},e.prototype.onUpdate=function(n){return this._onUpdateCallback=n,this},e.prototype.onRepeat=function(n){return this._onRepeatCallback=n,this},e.prototype.onComplete=function(n){return this._onCompleteCallback=n,this},e.prototype.onStop=function(n){return this._onStopCallback=n,this},e.prototype.update=function(n,r){var i=this,o;if(n===void 0&&(n=gn()),r===void 0&&(r=e.autoStartOnUpdate),this._isPaused)return!0;var a;if(!this._goToEnd&&!this._isPlaying)if(r)this.start(n,!0);else return!1;if(this._goToEnd=!1,n<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var s=n-this._startTime,u=this._duration+((o=this._repeatDelayTime)!==null&&o!==void 0?o:this._delayTime),l=this._duration+this._repeat*u,c=function(){if(i._duration===0||s>l)return 1;var b=Math.trunc(s/u),v=s-b*u,g=Math.min(v/i._duration,1);return g===0&&s===i._duration?1:g},d=c(),f=this._easingFunction(d);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,f),this._onUpdateCallback&&this._onUpdateCallback(this._object,d),this._duration===0||s>=this._duration)if(this._repeat>0){var h=Math.min(Math.trunc((s-this._duration)/u)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=h);for(a in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[a]=="string"&&(this._valuesStartRepeat[a]=this._valuesStartRepeat[a]+parseFloat(this._valuesEnd[a])),this._yoyo&&this._swapEndStartRepeatValues(a),this._valuesStart[a]=this._valuesStartRepeat[a];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=u*h,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,m=this._chainedTweens.length;p<m;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(n,r,i,o){for(var a in i)if(r[a]!==void 0){var s=r[a]||0,u=i[a],l=Array.isArray(n[a]),c=Array.isArray(u),d=!l&&c;d?n[a]=this._interpolationFunction(u,o):typeof u=="object"&&u?this._updateProperties(n[a],s,u,o):(u=this._handleRelativeValue(s,u),typeof u=="number"&&(n[a]=s+(u-s)*o))}},e.prototype._handleRelativeValue=function(n,r){return typeof r!="string"?r:r.charAt(0)==="+"||r.charAt(0)==="-"?n+parseFloat(r):parseFloat(r)},e.prototype._swapEndStartRepeatValues=function(n){var r=this._valuesStartRepeat[n],i=this._valuesEnd[n];typeof i=="string"?this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(i):this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=r},e.autoStartOnUpdate=!1,e})();Rb.nextId;var lt=Pc;lt.getAll.bind(lt);lt.removeAll.bind(lt);lt.add.bind(lt);lt.remove.bind(lt);lt.update.bind(lt);function fv(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function AN(e){if(Array.isArray(e))return e}function RN(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function IN(e,n,r){return Object.defineProperty(e,"prototype",{writable:!1}),e}function TN(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(u.push(i.value),u.length!==n);l=!0);}catch(d){c=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return u}}function PN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ON(e,n){return AN(e)||TN(e,n)||jN(e,n)||PN()}function jN(e,n){if(e){if(typeof e=="string")return fv(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fv(e,n):void 0}}var qN=IN(function e(n,r){var i=r.default,o=i===void 0?null:i,a=r.triggerUpdate,s=a===void 0?!0:a,u=r.onChange,l=u===void 0?function(c,d){}:u;RN(this,e),this.name=n,this.defaultVal=o,this.triggerUpdate=s,this.onChange=l});function Nl(e){var n=e.stateInit,r=n===void 0?function(){return{}}:n,i=e.props,o=i===void 0?{}:i,a=e.methods,s=a===void 0?{}:a,u=e.aliases,l=u===void 0?{}:u,c=e.init,d=c===void 0?function(){}:c,f=e.update,h=f===void 0?function(){}:f,p=Object.keys(o).map(function(m){return new qN(m,o[m])});return function m(){for(var b=arguments.length,v=new Array(b),g=0;g<b;g++)v[g]=arguments[g];var _=!!(this instanceof m&&this.constructor),y=_?v.shift():void 0,x=v[0],w=x===void 0?{}:x,C=Object.assign({},r instanceof Function?r(w):r,{initialised:!1}),S={};function k(M){return A(M,w),N(),k}var A=function(I,O){d.call(k,I,C,O),C.initialised=!0},N=Mb(function(){C.initialised&&(h.call(k,C,S),S={})},1);return p.forEach(function(M){k[M.name]=I(M);function I(O){var R=O.name,P=O.triggerUpdate,j=P===void 0?!1:P,L=O.onChange,z=L===void 0?function(Z,W){}:L,F=O.defaultVal,Y=F===void 0?null:F;return function(Z){var W=C[R];if(!arguments.length)return W;var Q=Z===void 0?Y:Z;return C[R]=Q,z.call(k,Q,C,W),!S.hasOwnProperty(R)&&(S[R]=W),j&&N(),k}}}),Object.keys(s).forEach(function(M){k[M]=function(){for(var I,O=arguments.length,R=new Array(O),P=0;P<O;P++)R[P]=arguments[P];return(I=s[M]).call.apply(I,[k,C].concat(R))}}),Object.entries(l).forEach(function(M){var I=ON(M,2),O=I[0],R=I[1];return k[O]=k[R]}),k.resetProps=function(){return p.forEach(function(M){k[M.name](M.defaultVal)}),k},k.resetProps(),C._rerender=N,_&&y&&k(y),k}}var ye=(function(e){return typeof e=="function"?e:typeof e=="string"?function(n){return n[e]}:function(n){return e}});function rr(e){"@babel/helpers - typeof";return rr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rr(e)}var DN=/^\s+/,LN=/\s+$/;function ue(e,n){if(e=e||"",n=n||{},e instanceof ue)return e;if(!(this instanceof ue))return new ue(e,n);var r=zN(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=Math.round(100*this._a)/100,this._format=n.format||r.format,this._gradientType=n.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=r.ok}ue.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var n=this.toRgb();return(n.r*299+n.g*587+n.b*114)/1e3},getLuminance:function(){var n=this.toRgb(),r,i,o,a,s,u;return r=n.r/255,i=n.g/255,o=n.b/255,r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),i<=.03928?s=i/12.92:s=Math.pow((i+.055)/1.055,2.4),o<=.03928?u=o/12.92:u=Math.pow((o+.055)/1.055,2.4),.2126*a+.7152*s+.0722*u},setAlpha:function(n){return this._a=Ib(n),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var n=hv(this._r,this._g,this._b);return{h:n.h*360,s:n.s,v:n.v,a:this._a}},toHsvString:function(){var n=hv(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.v*100);return this._a==1?"hsv("+r+", "+i+"%, "+o+"%)":"hsva("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var n=dv(this._r,this._g,this._b);return{h:n.h*360,s:n.s,l:n.l,a:this._a}},toHslString:function(){var n=dv(this._r,this._g,this._b),r=Math.round(n.h*360),i=Math.round(n.s*100),o=Math.round(n.l*100);return this._a==1?"hsl("+r+", "+i+"%, "+o+"%)":"hsla("+r+", "+i+"%, "+o+"%, "+this._roundA+")"},toHex:function(n){return pv(this._r,this._g,this._b,n)},toHexString:function(n){return"#"+this.toHex(n)},toHex8:function(n){return HN(this._r,this._g,this._b,this._a,n)},toHex8String:function(n){return"#"+this.toHex8(n)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(Ce(this._r,255)*100)+"%",g:Math.round(Ce(this._g,255)*100)+"%",b:Math.round(Ce(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(Ce(this._r,255)*100)+"%, "+Math.round(Ce(this._g,255)*100)+"%, "+Math.round(Ce(this._b,255)*100)+"%)":"rgba("+Math.round(Ce(this._r,255)*100)+"%, "+Math.round(Ce(this._g,255)*100)+"%, "+Math.round(Ce(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:tM[pv(this._r,this._g,this._b,!0)]||!1},toFilter:function(n){var r="#"+gv(this._r,this._g,this._b,this._a),i=r,o=this._gradientType?"GradientType = 1, ":"";if(n){var a=ue(n);i="#"+gv(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+r+",endColorstr="+i+")"},toString:function(n){var r=!!n;n=n||this._format;var i=!1,o=this._a<1&&this._a>=0,a=!r&&o&&(n==="hex"||n==="hex6"||n==="hex3"||n==="hex4"||n==="hex8"||n==="name");return a?n==="name"&&this._a===0?this.toName():this.toRgbString():(n==="rgb"&&(i=this.toRgbString()),n==="prgb"&&(i=this.toPercentageRgbString()),(n==="hex"||n==="hex6")&&(i=this.toHexString()),n==="hex3"&&(i=this.toHexString(!0)),n==="hex4"&&(i=this.toHex8String(!0)),n==="hex8"&&(i=this.toHex8String()),n==="name"&&(i=this.toName()),n==="hsl"&&(i=this.toHslString()),n==="hsv"&&(i=this.toHsvString()),i||this.toHexString())},clone:function(){return ue(this.toString())},_applyModification:function(n,r){var i=n.apply(null,[this].concat([].slice.call(r)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(WN,arguments)},brighten:function(){return this._applyModification(YN,arguments)},darken:function(){return this._applyModification(ZN,arguments)},desaturate:function(){return this._applyModification(UN,arguments)},saturate:function(){return this._applyModification(VN,arguments)},greyscale:function(){return this._applyModification(GN,arguments)},spin:function(){return this._applyModification(KN,arguments)},_applyCombination:function(n,r){return n.apply(null,[this].concat([].slice.call(r)))},analogous:function(){return this._applyCombination(JN,arguments)},complement:function(){return this._applyCombination(XN,arguments)},monochromatic:function(){return this._applyCombination(eM,arguments)},splitcomplement:function(){return this._applyCombination(QN,arguments)},triad:function(){return this._applyCombination(mv,[3])},tetrad:function(){return this._applyCombination(mv,[4])}};ue.fromRatio=function(e,n){if(rr(e)=="object"){var r={};for(var i in e)e.hasOwnProperty(i)&&(i==="a"?r[i]=e[i]:r[i]=mn(e[i]));e=r}return ue(e,n)};function zN(e){var n={r:0,g:0,b:0},r=1,i=null,o=null,a=null,s=!1,u=!1;return typeof e=="string"&&(e=oM(e)),rr(e)=="object"&&(dt(e.r)&&dt(e.g)&&dt(e.b)?(n=FN(e.r,e.g,e.b),s=!0,u=String(e.r).substr(-1)==="%"?"prgb":"rgb"):dt(e.h)&&dt(e.s)&&dt(e.v)?(i=mn(e.s),o=mn(e.v),n=BN(e.h,i,o),s=!0,u="hsv"):dt(e.h)&&dt(e.s)&&dt(e.l)&&(i=mn(e.s),a=mn(e.l),n=$N(e.h,i,a),s=!0,u="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=Ib(r),{ok:s,format:e.format||u,r:Math.min(255,Math.max(n.r,0)),g:Math.min(255,Math.max(n.g,0)),b:Math.min(255,Math.max(n.b,0)),a:r}}function FN(e,n,r){return{r:Ce(e,255)*255,g:Ce(n,255)*255,b:Ce(r,255)*255}}function dv(e,n,r){e=Ce(e,255),n=Ce(n,255),r=Ce(r,255);var i=Math.max(e,n,r),o=Math.min(e,n,r),a,s,u=(i+o)/2;if(i==o)a=s=0;else{var l=i-o;switch(s=u>.5?l/(2-i-o):l/(i+o),i){case e:a=(n-r)/l+(n<r?6:0);break;case n:a=(r-e)/l+2;break;case r:a=(e-n)/l+4;break}a/=6}return{h:a,s,l:u}}function $N(e,n,r){var i,o,a;e=Ce(e,360),n=Ce(n,100),r=Ce(r,100);function s(c,d,f){return f<0&&(f+=1),f>1&&(f-=1),f<1/6?c+(d-c)*6*f:f<1/2?d:f<2/3?c+(d-c)*(2/3-f)*6:c}if(n===0)i=o=a=r;else{var u=r<.5?r*(1+n):r+n-r*n,l=2*r-u;i=s(l,u,e+1/3),o=s(l,u,e),a=s(l,u,e-1/3)}return{r:i*255,g:o*255,b:a*255}}function hv(e,n,r){e=Ce(e,255),n=Ce(n,255),r=Ce(r,255);var i=Math.max(e,n,r),o=Math.min(e,n,r),a,s,u=i,l=i-o;if(s=i===0?0:l/i,i==o)a=0;else{switch(i){case e:a=(n-r)/l+(n<r?6:0);break;case n:a=(r-e)/l+2;break;case r:a=(e-n)/l+4;break}a/=6}return{h:a,s,v:u}}function BN(e,n,r){e=Ce(e,360)*6,n=Ce(n,100),r=Ce(r,100);var i=Math.floor(e),o=e-i,a=r*(1-n),s=r*(1-o*n),u=r*(1-(1-o)*n),l=i%6,c=[r,s,a,a,u,r][l],d=[u,r,r,s,a,a][l],f=[a,a,u,r,r,s][l];return{r:c*255,g:d*255,b:f*255}}function pv(e,n,r,i){var o=[tt(Math.round(e).toString(16)),tt(Math.round(n).toString(16)),tt(Math.round(r).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function HN(e,n,r,i,o){var a=[tt(Math.round(e).toString(16)),tt(Math.round(n).toString(16)),tt(Math.round(r).toString(16)),tt(Tb(i))];return o&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function gv(e,n,r,i){var o=[tt(Tb(i)),tt(Math.round(e).toString(16)),tt(Math.round(n).toString(16)),tt(Math.round(r).toString(16))];return o.join("")}ue.equals=function(e,n){return!e||!n?!1:ue(e).toRgbString()==ue(n).toRgbString()};ue.random=function(){return ue.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function UN(e,n){n=n===0?0:n||10;var r=ue(e).toHsl();return r.s-=n/100,r.s=Tr(r.s),ue(r)}function VN(e,n){n=n===0?0:n||10;var r=ue(e).toHsl();return r.s+=n/100,r.s=Tr(r.s),ue(r)}function GN(e){return ue(e).desaturate(100)}function WN(e,n){n=n===0?0:n||10;var r=ue(e).toHsl();return r.l+=n/100,r.l=Tr(r.l),ue(r)}function YN(e,n){n=n===0?0:n||10;var r=ue(e).toRgb();return r.r=Math.max(0,Math.min(255,r.r-Math.round(255*-(n/100)))),r.g=Math.max(0,Math.min(255,r.g-Math.round(255*-(n/100)))),r.b=Math.max(0,Math.min(255,r.b-Math.round(255*-(n/100)))),ue(r)}function ZN(e,n){n=n===0?0:n||10;var r=ue(e).toHsl();return r.l-=n/100,r.l=Tr(r.l),ue(r)}function KN(e,n){var r=ue(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,ue(r)}function XN(e){var n=ue(e).toHsl();return n.h=(n.h+180)%360,ue(n)}function mv(e,n){if(isNaN(n)||n<=0)throw new Error("Argument to polyad must be a positive number");for(var r=ue(e).toHsl(),i=[ue(e)],o=360/n,a=1;a<n;a++)i.push(ue({h:(r.h+a*o)%360,s:r.s,l:r.l}));return i}function QN(e){var n=ue(e).toHsl(),r=n.h;return[ue(e),ue({h:(r+72)%360,s:n.s,l:n.l}),ue({h:(r+216)%360,s:n.s,l:n.l})]}function JN(e,n,r){n=n||6,r=r||30;var i=ue(e).toHsl(),o=360/r,a=[ue(e)];for(i.h=(i.h-(o*n>>1)+720)%360;--n;)i.h=(i.h+o)%360,a.push(ue(i));return a}function eM(e,n){n=n||6;for(var r=ue(e).toHsv(),i=r.h,o=r.s,a=r.v,s=[],u=1/n;n--;)s.push(ue({h:i,s:o,v:a})),a=(a+u)%1;return s}ue.mix=function(e,n,r){r=r===0?0:r||50;var i=ue(e).toRgb(),o=ue(n).toRgb(),a=r/100,s={r:(o.r-i.r)*a+i.r,g:(o.g-i.g)*a+i.g,b:(o.b-i.b)*a+i.b,a:(o.a-i.a)*a+i.a};return ue(s)};ue.readability=function(e,n){var r=ue(e),i=ue(n);return(Math.max(r.getLuminance(),i.getLuminance())+.05)/(Math.min(r.getLuminance(),i.getLuminance())+.05)};ue.isReadable=function(e,n,r){var i=ue.readability(e,n),o,a;switch(a=!1,o=aM(r),o.level+o.size){case"AAsmall":case"AAAlarge":a=i>=4.5;break;case"AAlarge":a=i>=3;break;case"AAAsmall":a=i>=7;break}return a};ue.mostReadable=function(e,n,r){var i=null,o=0,a,s,u,l;r=r||{},s=r.includeFallbackColors,u=r.level,l=r.size;for(var c=0;c<n.length;c++)a=ue.readability(e,n[c]),a>o&&(o=a,i=ue(n[c]));return ue.isReadable(e,i,{level:u,size:l})||!s?i:(r.includeFallbackColors=!1,ue.mostReadable(e,["#fff","#000"],r))};var Oc=ue.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},tM=ue.hexNames=nM(Oc);function nM(e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[e[r]]=r);return n}function Ib(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ce(e,n){rM(e)&&(e="100%");var r=iM(e);return e=Math.min(n,Math.max(0,parseFloat(e))),r&&(e=parseInt(e*n,10)/100),Math.abs(e-n)<1e-6?1:e%n/parseFloat(n)}function Tr(e){return Math.min(1,Math.max(0,e))}function Ve(e){return parseInt(e,16)}function rM(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function iM(e){return typeof e=="string"&&e.indexOf("%")!=-1}function tt(e){return e.length==1?"0"+e:""+e}function mn(e){return e<=1&&(e=e*100+"%"),e}function Tb(e){return Math.round(parseFloat(e)*255).toString(16)}function vv(e){return Ve(e)/255}var Qe=(function(){var e="[-\\+]?\\d+%?",n="[-\\+]?\\d*\\.\\d+%?",r="(?:"+n+")|(?:"+e+")",i="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?",o="[\\s|\\(]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")[,|\\s]+("+r+")\\s*\\)?";return{CSS_UNIT:new RegExp(r),rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+o),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+o),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+o),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();function dt(e){return!!Qe.CSS_UNIT.exec(e)}function oM(e){e=e.replace(DN,"").replace(LN,"").toLowerCase();var n=!1;if(Oc[e])e=Oc[e],n=!0;else if(e=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var r;return(r=Qe.rgb.exec(e))?{r:r[1],g:r[2],b:r[3]}:(r=Qe.rgba.exec(e))?{r:r[1],g:r[2],b:r[3],a:r[4]}:(r=Qe.hsl.exec(e))?{h:r[1],s:r[2],l:r[3]}:(r=Qe.hsla.exec(e))?{h:r[1],s:r[2],l:r[3],a:r[4]}:(r=Qe.hsv.exec(e))?{h:r[1],s:r[2],v:r[3]}:(r=Qe.hsva.exec(e))?{h:r[1],s:r[2],v:r[3],a:r[4]}:(r=Qe.hex8.exec(e))?{r:Ve(r[1]),g:Ve(r[2]),b:Ve(r[3]),a:vv(r[4]),format:n?"name":"hex8"}:(r=Qe.hex6.exec(e))?{r:Ve(r[1]),g:Ve(r[2]),b:Ve(r[3]),format:n?"name":"hex"}:(r=Qe.hex4.exec(e))?{r:Ve(r[1]+""+r[1]),g:Ve(r[2]+""+r[2]),b:Ve(r[3]+""+r[3]),a:vv(r[4]+""+r[4]),format:n?"name":"hex8"}:(r=Qe.hex3.exec(e))?{r:Ve(r[1]+""+r[1]),g:Ve(r[2]+""+r[2]),b:Ve(r[3]+""+r[3]),format:n?"name":"hex"}:!1}function aM(e){var n,r;return e=e||{level:"AA",size:"small"},n=(e.level||"AA").toUpperCase(),r=(e.size||"small").toLowerCase(),n!=="AA"&&n!=="AAA"&&(n="AA"),r!=="small"&&r!=="large"&&(r="small"),{level:n,size:r}}function jc(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function sM(e){if(Array.isArray(e))return jc(e)}function Pb(e,n,r){if(typeof e=="function"?e===n:e.has(n))return arguments.length<3?n:r;throw new TypeError("Private element is not present on this object")}function uM(e,n){if(n.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cM(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function Ge(e,n){return e.get(Pb(e,n))}function yv(e,n,r){uM(e,n),n.set(e,r)}function bv(e,n,r){return e.set(Pb(e,n),r),r}function lM(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,mM(i.key),i)}}function fM(e,n,r){return n&&lM(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function dM(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pM(e){return sM(e)||dM(e)||vM(e)||hM()}function gM(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function mM(e){var n=gM(e,"string");return typeof n=="symbol"?n:n+""}function vM(e,n){if(e){if(typeof e=="string")return jc(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jc(e,n):void 0}}var yM=123,bM=function(n){return"#".concat(Math.min(n,Math.pow(2,24)).toString(16).padStart(6,"0"))},Ob=function(n,r,i){return(n<<16)+(r<<8)+i},_M=function(n){var r=ue(n).toRgb(),i=r.r,o=r.g,a=r.b;return Ob(i,o,a)},_v=function(n,r){return n*yM%Math.pow(2,r)},At=new WeakMap,ht=new WeakMap,xM=(function(){function e(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:6;cM(this,e),yv(this,At,void 0),yv(this,ht,void 0),bv(ht,this,n),this.reset()}return fM(e,[{key:"reset",value:function(){bv(At,this,["__reserved for background__"])}},{key:"register",value:function(r){if(Ge(At,this).length>=Math.pow(2,24-Ge(ht,this)))return null;var i=Ge(At,this).length,o=_v(i,Ge(ht,this)),a=bM(i+(o<<24-Ge(ht,this)));return Ge(At,this).push(r),a}},{key:"lookup",value:function(r){if(!r)return null;var i=typeof r=="string"?_M(r):Ob.apply(void 0,pM(r));if(!i)return null;var o=i&Math.pow(2,24-Ge(ht,this))-1,a=i>>24-Ge(ht,this)&Math.pow(2,Ge(ht,this))-1;return _v(o,Ge(ht,this))!==a||o>=Ge(At,this).length?null:Ge(At,this)[o]}}])})(),zn,Ee,jb,qb,It,xv,Db,Lb,zb,Ml,qc,Dc,Mn={},Fb=[],wM=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Pr=Array.isArray;function ut(e,n){for(var r in n)e[r]=n[r];return e}function Al(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function CM(e,n,r){var i,o,a,s={};for(a in n)a=="key"?i=n[a]:a=="ref"?o=n[a]:s[a]=n[a];if(arguments.length>2&&(s.children=arguments.length>3?zn.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(a in e.defaultProps)s[a]===void 0&&(s[a]=e.defaultProps[a]);return bn(e,s,i,o,null)}function bn(e,n,r,i,o){var a={type:e,props:n,key:r,ref:i,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++jb,__i:-1,__u:0};return o==null&&Ee.vnode!=null&&Ee.vnode(a),a}function Or(e){return e.children}function Qn(e,n){this.props=e,this.context=n}function Jt(e,n){if(n==null)return e.__?Jt(e.__,e.__i+1):null;for(var r;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null)return r.__e;return typeof e.type=="function"?Jt(e):null}function $b(e){var n,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if((r=e.__k[n])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return $b(e)}}function wv(e){(!e.__d&&(e.__d=!0)&&It.push(e)&&!ir.__r++||xv!=Ee.debounceRendering)&&((xv=Ee.debounceRendering)||Db)(ir)}function ir(){for(var e,n,r,i,o,a,s,u=1;It.length;)It.length>u&&It.sort(Lb),e=It.shift(),u=It.length,e.__d&&(r=void 0,i=void 0,o=(i=(n=e).__v).__e,a=[],s=[],n.__P&&((r=ut({},i)).__v=i.__v+1,Ee.vnode&&Ee.vnode(r),Rl(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[o]:null,a,o??Jt(i),!!(32&i.__u),s),r.__v=i.__v,r.__.__k[r.__i]=r,Ub(a,r,s),i.__e=i.__=null,r.__e!=o&&$b(r)));ir.__r=0}function Bb(e,n,r,i,o,a,s,u,l,c,d){var f,h,p,m,b,v,g,_=i&&i.__k||Fb,y=n.length;for(l=EM(r,n,_,l,y),f=0;f<y;f++)(p=r.__k[f])!=null&&(h=p.__i==-1?Mn:_[p.__i]||Mn,p.__i=f,v=Rl(e,p,h,o,a,s,u,l,c,d),m=p.__e,p.ref&&h.ref!=p.ref&&(h.ref&&Il(h.ref,null,p),d.push(p.ref,p.__c||m,p)),b==null&&m!=null&&(b=m),(g=!!(4&p.__u))||h.__k===p.__k?l=Hb(p,l,e,g):typeof p.type=="function"&&v!==void 0?l=v:m&&(l=m.nextSibling),p.__u&=-7);return r.__e=b,l}function EM(e,n,r,i,o){var a,s,u,l,c,d=r.length,f=d,h=0;for(e.__k=new Array(o),a=0;a<o;a++)(s=n[a])!=null&&typeof s!="boolean"&&typeof s!="function"?(typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?s=e.__k[a]=bn(null,s,null,null,null):Pr(s)?s=e.__k[a]=bn(Or,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?s=e.__k[a]=bn(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):e.__k[a]=s,l=a+h,s.__=e,s.__b=e.__b+1,u=null,(c=s.__i=SM(s,r,l,f))!=-1&&(f--,(u=r[c])&&(u.__u|=2)),u==null||u.__v==null?(c==-1&&(o>d?h--:o<d&&h++),typeof s.type!="function"&&(s.__u|=4)):c!=l&&(c==l-1?h--:c==l+1?h++:(c>l?h--:h++,s.__u|=4))):e.__k[a]=null;if(f)for(a=0;a<d;a++)(u=r[a])!=null&&(2&u.__u)==0&&(u.__e==i&&(i=Jt(u)),Gb(u,u));return i}function Hb(e,n,r,i){var o,a;if(typeof e.type=="function"){for(o=e.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=e,n=Hb(o[a],n,r,i));return n}e.__e!=n&&(i&&(n&&e.type&&!n.parentNode&&(n=Jt(e)),r.insertBefore(e.__e,n||null)),n=e.__e);do n=n&&n.nextSibling;while(n!=null&&n.nodeType==8);return n}function SM(e,n,r,i){var o,a,s,u=e.key,l=e.type,c=n[r],d=c!=null&&(2&c.__u)==0;if(c===null&&u==null||d&&u==c.key&&l==c.type)return r;if(i>(d?1:0)){for(o=r-1,a=r+1;o>=0||a<n.length;)if((c=n[s=o>=0?o--:a++])!=null&&(2&c.__u)==0&&u==c.key&&l==c.type)return s}return-1}function Cv(e,n,r){n[0]=="-"?e.setProperty(n,r??""):e[n]=r==null?"":typeof r!="number"||wM.test(n)?r:r+"px"}function Yn(e,n,r,i,o){var a,s;e:if(n=="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(n in i)r&&n in r||Cv(e.style,n,"");if(r)for(n in r)i&&r[n]==i[n]||Cv(e.style,n,r[n])}else if(n[0]=="o"&&n[1]=="n")a=n!=(n=n.replace(zb,"$1")),s=n.toLowerCase(),n=s in e||n=="onFocusOut"||n=="onFocusIn"?s.slice(2):n.slice(2),e.l||(e.l={}),e.l[n+a]=r,r?i?r.u=i.u:(r.u=Ml,e.addEventListener(n,a?Dc:qc,a)):e.removeEventListener(n,a?Dc:qc,a);else{if(o=="http://www.w3.org/2000/svg")n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(n!="width"&&n!="height"&&n!="href"&&n!="list"&&n!="form"&&n!="tabIndex"&&n!="download"&&n!="rowSpan"&&n!="colSpan"&&n!="role"&&n!="popover"&&n in e)try{e[n]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&n[4]!="-"?e.removeAttribute(n):e.setAttribute(n,n=="popover"&&r==1?"":r))}}function Ev(e){return function(n){if(this.l){var r=this.l[n.type+e];if(n.t==null)n.t=Ml++;else if(n.t<r.u)return;return r(Ee.event?Ee.event(n):n)}}}function Rl(e,n,r,i,o,a,s,u,l,c){var d,f,h,p,m,b,v,g,_,y,x,w,C,S,k,A,N,M=n.type;if(n.constructor!==void 0)return null;128&r.__u&&(l=!!(32&r.__u),a=[u=n.__e=r.__e]),(d=Ee.__b)&&d(n);e:if(typeof M=="function")try{if(g=n.props,_="prototype"in M&&M.prototype.render,y=(d=M.contextType)&&i[d.__c],x=d?y?y.props.value:d.__:i,r.__c?v=(f=n.__c=r.__c).__=f.__E:(_?n.__c=f=new M(g,x):(n.__c=f=new Qn(g,x),f.constructor=M,f.render=NM),y&&y.sub(f),f.state||(f.state={}),f.__n=i,h=f.__d=!0,f.__h=[],f._sb=[]),_&&f.__s==null&&(f.__s=f.state),_&&M.getDerivedStateFromProps!=null&&(f.__s==f.state&&(f.__s=ut({},f.__s)),ut(f.__s,M.getDerivedStateFromProps(g,f.__s))),p=f.props,m=f.state,f.__v=n,h)_&&M.getDerivedStateFromProps==null&&f.componentWillMount!=null&&f.componentWillMount(),_&&f.componentDidMount!=null&&f.__h.push(f.componentDidMount);else{if(_&&M.getDerivedStateFromProps==null&&g!==p&&f.componentWillReceiveProps!=null&&f.componentWillReceiveProps(g,x),n.__v==r.__v||!f.__e&&f.shouldComponentUpdate!=null&&f.shouldComponentUpdate(g,f.__s,x)===!1){for(n.__v!=r.__v&&(f.props=g,f.state=f.__s,f.__d=!1),n.__e=r.__e,n.__k=r.__k,n.__k.some(function(I){I&&(I.__=n)}),w=0;w<f._sb.length;w++)f.__h.push(f._sb[w]);f._sb=[],f.__h.length&&s.push(f);break e}f.componentWillUpdate!=null&&f.componentWillUpdate(g,f.__s,x),_&&f.componentDidUpdate!=null&&f.__h.push(function(){f.componentDidUpdate(p,m,b)})}if(f.context=x,f.props=g,f.__P=e,f.__e=!1,C=Ee.__r,S=0,_){for(f.state=f.__s,f.__d=!1,C&&C(n),d=f.render(f.props,f.state,f.context),k=0;k<f._sb.length;k++)f.__h.push(f._sb[k]);f._sb=[]}else do f.__d=!1,C&&C(n),d=f.render(f.props,f.state,f.context),f.state=f.__s;while(f.__d&&++S<25);f.state=f.__s,f.getChildContext!=null&&(i=ut(ut({},i),f.getChildContext())),_&&!h&&f.getSnapshotBeforeUpdate!=null&&(b=f.getSnapshotBeforeUpdate(p,m)),A=d,d!=null&&d.type===Or&&d.key==null&&(A=Vb(d.props.children)),u=Bb(e,Pr(A)?A:[A],n,r,i,o,a,s,u,l,c),f.base=n.__e,n.__u&=-161,f.__h.length&&s.push(f),v&&(f.__E=f.__=null)}catch(I){if(n.__v=null,l||a!=null)if(I.then){for(n.__u|=l?160:128;u&&u.nodeType==8&&u.nextSibling;)u=u.nextSibling;a[a.indexOf(u)]=null,n.__e=u}else{for(N=a.length;N--;)Al(a[N]);Lc(n)}else n.__e=r.__e,n.__k=r.__k,I.then||Lc(n);Ee.__e(I,n,r)}else a==null&&n.__v==r.__v?(n.__k=r.__k,n.__e=r.__e):u=n.__e=kM(r.__e,n,r,i,o,a,s,l,c);return(d=Ee.diffed)&&d(n),128&n.__u?void 0:u}function Lc(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(Lc)}function Ub(e,n,r){for(var i=0;i<r.length;i++)Il(r[i],r[++i],r[++i]);Ee.__c&&Ee.__c(n,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(a){a.call(o)})}catch(a){Ee.__e(a,o.__v)}})}function Vb(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:Pr(e)?e.map(Vb):ut({},e)}function kM(e,n,r,i,o,a,s,u,l){var c,d,f,h,p,m,b,v=r.props||Mn,g=n.props,_=n.type;if(_=="svg"?o="http://www.w3.org/2000/svg":_=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),a!=null){for(c=0;c<a.length;c++)if((p=a[c])&&"setAttribute"in p==!!_&&(_?p.localName==_:p.nodeType==3)){e=p,a[c]=null;break}}if(e==null){if(_==null)return document.createTextNode(g);e=document.createElementNS(o,_,g.is&&g),u&&(Ee.__m&&Ee.__m(n,a),u=!1),a=null}if(_==null)v===g||u&&e.data==g||(e.data=g);else{if(a=a&&zn.call(e.childNodes),!u&&a!=null)for(v={},c=0;c<e.attributes.length;c++)v[(p=e.attributes[c]).name]=p.value;for(c in v)if(p=v[c],c!="children"){if(c=="dangerouslySetInnerHTML")f=p;else if(!(c in g)){if(c=="value"&&"defaultValue"in g||c=="checked"&&"defaultChecked"in g)continue;Yn(e,c,null,p,o)}}for(c in g)p=g[c],c=="children"?h=p:c=="dangerouslySetInnerHTML"?d=p:c=="value"?m=p:c=="checked"?b=p:u&&typeof p!="function"||v[c]===p||Yn(e,c,p,v[c],o);if(d)u||f&&(d.__html==f.__html||d.__html==e.innerHTML)||(e.innerHTML=d.__html),n.__k=[];else if(f&&(e.innerHTML=""),Bb(n.type=="template"?e.content:e,Pr(h)?h:[h],n,r,i,_=="foreignObject"?"http://www.w3.org/1999/xhtml":o,a,s,a?a[0]:r.__k&&Jt(r,0),u,l),a!=null)for(c=a.length;c--;)Al(a[c]);u||(c="value",_=="progress"&&m==null?e.removeAttribute("value"):m!=null&&(m!==e[c]||_=="progress"&&!m||_=="option"&&m!=v[c])&&Yn(e,c,m,v[c],o),c="checked",b!=null&&b!=e[c]&&Yn(e,c,b,v[c],o))}return e}function Il(e,n,r){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&n==null||(e.__u=e(n))}else e.current=n}catch(o){Ee.__e(o,r)}}function Gb(e,n,r){var i,o;if(Ee.unmount&&Ee.unmount(e),(i=e.ref)&&(i.current&&i.current!=e.__e||Il(i,null,n)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){Ee.__e(a,n)}i.base=i.__P=null}if(i=e.__k)for(o=0;o<i.length;o++)i[o]&&Gb(i[o],n,r||typeof e.type!="function");r||Al(e.__e),e.__c=e.__=e.__e=void 0}function NM(e,n,r){return this.constructor(e,r)}function MM(e,n,r){var i,o,a,s;n==document&&(n=document.documentElement),Ee.__&&Ee.__(e,n),o=(i=!1)?null:n.__k,a=[],s=[],Rl(n,e=n.__k=CM(Or,null,[e]),o||Mn,Mn,n.namespaceURI,o?null:n.firstChild?zn.call(n.childNodes):null,a,o?o.__e:n.firstChild,i,s),Ub(a,e,s)}function Wb(e,n,r){var i,o,a,s,u=ut({},e.props);for(a in e.type&&e.type.defaultProps&&(s=e.type.defaultProps),n)a=="key"?i=n[a]:a=="ref"?o=n[a]:u[a]=n[a]===void 0&&s!=null?s[a]:n[a];return arguments.length>2&&(u.children=arguments.length>3?zn.call(arguments,2):r),bn(e.type,u,i||e.key,o||e.ref,null)}zn=Fb.slice,Ee={__e:function(e,n,r,i){for(var o,a,s;n=n.__;)if((o=n.__c)&&!o.__)try{if((a=o.constructor)&&a.getDerivedStateFromError!=null&&(o.setState(a.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,i||{}),s=o.__d),s)return o.__E=o}catch(u){e=u}throw e}},jb=0,qb=function(e){return e!=null&&e.constructor===void 0},Qn.prototype.setState=function(e,n){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ut({},this.state),typeof e=="function"&&(e=e(ut({},r),this.props)),e&&ut(r,e),e!=null&&this.__v&&(n&&this._sb.push(n),wv(this))},Qn.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),wv(this))},Qn.prototype.render=Or,It=[],Db=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Lb=function(e,n){return e.__v.__b-n.__v.__b},ir.__r=0,zb=/(PointerCapture)$|Capture$/i,Ml=0,qc=Ev(!1),Dc=Ev(!0);function Sv(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function AM(e){if(Array.isArray(e))return e}function RM(e,n,r){return(n=qM(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function IM(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(u.push(i.value),u.length!==n);l=!0);}catch(d){c=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return u}}function TM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kv(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function PM(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?kv(Object(r),!0).forEach(function(i){RM(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kv(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function OM(e,n){return AM(e)||IM(e,n)||DM(e,n)||TM()}function jM(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function qM(e){var n=jM(e,"string");return typeof n=="symbol"?n:n+""}function or(e){"@babel/helpers - typeof";return or=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},or(e)}function DM(e,n){if(e){if(typeof e=="string")return Sv(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sv(e,n):void 0}}var zc=function(n){if(or(n)!=="object")return n;var r=Wb(n);if(r.props){var i;r.props=PM({},r.props),r!=null&&(i=r.props)!==null&&i!==void 0&&i.children&&(r.props.children=Array.isArray(r.props.children)?r.props.children.map(zc):zc(r.props.children))}return r},LM=function(n){return qb(Wb(n))},zM=function(n,r){delete r.__k,MM(zc(n),r)};function FM(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var $M=`.float-tooltip-kap {
  position: absolute;
  width: max-content; /* prevent shrinking near right edge */
  max-width: max(50%, 150px);
  padding: 3px 5px;
  border-radius: 3px;
  font: 12px sans-serif;
  color: #eee;
  background: rgba(0,0,0,0.6);
  pointer-events: none;
}
`;FM($M);var BM=Nl({props:{content:{default:!1},offsetX:{triggerUpdate:!1},offsetY:{triggerUpdate:!1}},init:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.style,a=o===void 0?{}:o,s=!!n&&or(n)==="object"&&!!n.node&&typeof n.node=="function",u=De(s?n.node():n);u.style("position")==="static"&&u.style("position","relative"),r.tooltipEl=u.append("div").attr("class","float-tooltip-kap"),Object.entries(a).forEach(function(c){var d=OM(c,2),f=d[0],h=d[1];return r.tooltipEl.style(f,h)}),r.tooltipEl.style("left","-10000px").style("display","none");var l="tooltip-".concat(Math.round(Math.random()*1e12));r.mouseInside=!1,u.on("mousemove.".concat(l),function(c){r.mouseInside=!0;var d=Ye(c),f=u.node(),h=f.offsetWidth,p=f.offsetHeight,m=[r.offsetX===null||r.offsetX===void 0?"-".concat(d[0]/h*100,"%"):typeof r.offsetX=="number"?"calc(-50% + ".concat(r.offsetX,"px)"):r.offsetX,r.offsetY===null||r.offsetY===void 0?p>130&&p-d[1]<100?"calc(-100% - 6px)":"21px":typeof r.offsetY=="number"?r.offsetY<0?"calc(-100% - ".concat(Math.abs(r.offsetY),"px)"):"".concat(r.offsetY,"px"):r.offsetY];r.tooltipEl.style("left",d[0]+"px").style("top",d[1]+"px").style("transform","translate(".concat(m.join(","),")")),r.content&&r.tooltipEl.style("display","inline")}),u.on("mouseover.".concat(l),function(){r.mouseInside=!0,r.content&&r.tooltipEl.style("display","inline")}),u.on("mouseout.".concat(l),function(){r.mouseInside=!1,r.tooltipEl.style("display","none")})},update:function(n){n.tooltipEl.style("display",n.content&&n.mouseInside?"inline":"none"),n.content?n.content instanceof HTMLElement?(n.tooltipEl.text(""),n.tooltipEl.append(function(){return n.content})):typeof n.content=="string"?n.tooltipEl.html(n.content):LM(n.content)?(n.tooltipEl.text(""),zM(n.content,n.tooltipEl.node())):(n.tooltipEl.style("display","none"),console.warn("Tooltip content is invalid, skipping.",n.content,n.content.toString())):n.tooltipEl.text("")}});function HM(e,n,r){var i,o=1;e==null&&(e=0),n==null&&(n=0),r==null&&(r=0);function a(){var s,u=i.length,l,c=0,d=0,f=0;for(s=0;s<u;++s)l=i[s],c+=l.x||0,d+=l.y||0,f+=l.z||0;for(c=(c/u-e)*o,d=(d/u-n)*o,f=(f/u-r)*o,s=0;s<u;++s)l=i[s],c&&(l.x-=c),d&&(l.y-=d),f&&(l.z-=f)}return a.initialize=function(s){i=s},a.x=function(s){return arguments.length?(e=+s,a):e},a.y=function(s){return arguments.length?(n=+s,a):n},a.z=function(s){return arguments.length?(r=+s,a):r},a.strength=function(s){return arguments.length?(o=+s,a):o},a}function UM(e){const n=+this._x.call(null,e);return Yb(this.cover(n),n,e)}function Yb(e,n,r){if(isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,u=e._x1,l,c,d,f,h;if(!o)return e._root=a,e;for(;o.length;)if((d=n>=(l=(s+u)/2))?s=l:u=l,i=o,!(o=o[f=+d]))return i[f]=a,e;if(c=+e._x.call(null,o.data),n===c)return a.next=o,i?i[f]=a:e._root=a,e;do i=i?i[f]=new Array(2):e._root=new Array(2),(d=n>=(l=(s+u)/2))?s=l:u=l;while((f=+d)==(h=+(c>=l)));return i[h]=o,i[f]=a,e}function VM(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n);let i=1/0,o=-1/0;for(let a=0,s;a<n;++a)isNaN(s=+this._x.call(null,e[a]))||(r[a]=s,s<i&&(i=s),s>o&&(o=s));if(i>o)return this;this.cover(i).cover(o);for(let a=0;a<n;++a)Yb(this,r[a],e[a]);return this}function GM(e){if(isNaN(e=+e))return this;var n=this._x0,r=this._x1;if(isNaN(n))r=(n=Math.floor(e))+1;else{for(var i=r-n||1,o=this._root,a,s;n>e||e>=r;)switch(s=+(e<n),a=new Array(2),a[s]=o,o=a,i*=2,s){case 0:r=n+i;break;case 1:n=r-i;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._x1=r,this}function WM(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function YM(e){return arguments.length?this.cover(+e[0][0]).cover(+e[1][0]):isNaN(this._x0)?void 0:[[this._x0],[this._x1]]}function vt(e,n,r){this.node=e,this.x0=n,this.x1=r}function ZM(e,n){var r,i=this._x0,o,a,s=this._x1,u=[],l=this._root,c,d;for(l&&u.push(new vt(l,i,s)),n==null?n=1/0:(i=e-n,s=e+n);c=u.pop();)if(!(!(l=c.node)||(o=c.x0)>s||(a=c.x1)<i))if(l.length){var f=(o+a)/2;u.push(new vt(l[1],f,a),new vt(l[0],o,f)),(d=+(e>=f))&&(c=u[u.length-1],u[u.length-1]=u[u.length-1-d],u[u.length-1-d]=c)}else{var h=Math.abs(e-+this._x.call(null,l.data));h<n&&(n=h,i=e-h,s=e+h,r=l.data)}return r}function KM(e){if(isNaN(l=+this._x.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,u=this._x1,l,c,d,f,h;if(!r)return this;if(r.length)for(;;){if((d=l>=(c=(s+u)/2))?s=c:u=c,n=r,!(r=r[f=+d]))return this;if(!r.length)break;n[f+1&1]&&(i=n,h=f)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[f]=a:delete n[f],(r=n[0]||n[1])&&r===(n[1]||n[0])&&!r.length&&(i?i[h]=r:this._root=r),this):(this._root=a,this)}function XM(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function QM(){return this._root}function JM(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function eA(e){var n=[],r,i=this._root,o,a,s;for(i&&n.push(new vt(i,this._x0,this._x1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.x1)&&i.length){var u=(a+s)/2;(o=i[1])&&n.push(new vt(o,u,s)),(o=i[0])&&n.push(new vt(o,a,u))}return this}function tA(e){var n=[],r=[],i;for(this._root&&n.push(new vt(this._root,this._x0,this._x1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,u=i.x1,l=(s+u)/2;(a=o[0])&&n.push(new vt(a,s,l)),(a=o[1])&&n.push(new vt(a,l,u))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.x1);return this}function nA(e){return e[0]}function rA(e){return arguments.length?(this._x=e,this):this._x}function Zb(e,n){var r=new Tl(n??nA,NaN,NaN);return e==null?r:r.addAll(e)}function Tl(e,n,r){this._x=e,this._x0=n,this._x1=r,this._root=void 0}function Nv(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var He=Zb.prototype=Tl.prototype;He.copy=function(){var e=new Tl(this._x,this._x0,this._x1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Nv(n),e;for(r=[{source:n,target:e._root=new Array(2)}];n=r.pop();)for(var o=0;o<2;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(2)}):n.target[o]=Nv(i));return e};He.add=UM;He.addAll=VM;He.cover=GM;He.data=WM;He.extent=YM;He.find=ZM;He.remove=KM;He.removeAll=XM;He.root=QM;He.size=JM;He.visit=eA;He.visitAfter=tA;He.x=rA;function iA(e){const n=+this._x.call(null,e),r=+this._y.call(null,e);return Kb(this.cover(n,r),n,r,e)}function Kb(e,n,r,i){if(isNaN(n)||isNaN(r))return e;var o,a=e._root,s={data:i},u=e._x0,l=e._y0,c=e._x1,d=e._y1,f,h,p,m,b,v,g,_;if(!a)return e._root=s,e;for(;a.length;)if((b=n>=(f=(u+c)/2))?u=f:c=f,(v=r>=(h=(l+d)/2))?l=h:d=h,o=a,!(a=a[g=v<<1|b]))return o[g]=s,e;if(p=+e._x.call(null,a.data),m=+e._y.call(null,a.data),n===p&&r===m)return s.next=a,o?o[g]=s:e._root=s,e;do o=o?o[g]=new Array(4):e._root=new Array(4),(b=n>=(f=(u+c)/2))?u=f:c=f,(v=r>=(h=(l+d)/2))?l=h:d=h;while((g=v<<1|b)===(_=(m>=h)<<1|p>=f));return o[_]=a,o[g]=s,e}function oA(e){var n,r,i=e.length,o,a,s=new Array(i),u=new Array(i),l=1/0,c=1/0,d=-1/0,f=-1/0;for(r=0;r<i;++r)isNaN(o=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(s[r]=o,u[r]=a,o<l&&(l=o),o>d&&(d=o),a<c&&(c=a),a>f&&(f=a));if(l>d||c>f)return this;for(this.cover(l,c).cover(d,f),r=0;r<i;++r)Kb(this,s[r],u[r],e[r]);return this}function aA(e,n){if(isNaN(e=+e)||isNaN(n=+n))return this;var r=this._x0,i=this._y0,o=this._x1,a=this._y1;if(isNaN(r))o=(r=Math.floor(e))+1,a=(i=Math.floor(n))+1;else{for(var s=o-r||1,u=this._root,l,c;r>e||e>=o||i>n||n>=a;)switch(c=(n<i)<<1|e<r,l=new Array(4),l[c]=u,u=l,s*=2,c){case 0:o=r+s,a=i+s;break;case 1:r=o-s,a=i+s;break;case 2:o=r+s,i=a-s;break;case 3:r=o-s,i=a-s;break}this._root&&this._root.length&&(this._root=u)}return this._x0=r,this._y0=i,this._x1=o,this._y1=a,this}function sA(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function uA(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Fe(e,n,r,i,o){this.node=e,this.x0=n,this.y0=r,this.x1=i,this.y1=o}function cA(e,n,r){var i,o=this._x0,a=this._y0,s,u,l,c,d=this._x1,f=this._y1,h=[],p=this._root,m,b;for(p&&h.push(new Fe(p,o,a,d,f)),r==null?r=1/0:(o=e-r,a=n-r,d=e+r,f=n+r,r*=r);m=h.pop();)if(!(!(p=m.node)||(s=m.x0)>d||(u=m.y0)>f||(l=m.x1)<o||(c=m.y1)<a))if(p.length){var v=(s+l)/2,g=(u+c)/2;h.push(new Fe(p[3],v,g,l,c),new Fe(p[2],s,g,v,c),new Fe(p[1],v,u,l,g),new Fe(p[0],s,u,v,g)),(b=(n>=g)<<1|e>=v)&&(m=h[h.length-1],h[h.length-1]=h[h.length-1-b],h[h.length-1-b]=m)}else{var _=e-+this._x.call(null,p.data),y=n-+this._y.call(null,p.data),x=_*_+y*y;if(x<r){var w=Math.sqrt(r=x);o=e-w,a=n-w,d=e+w,f=n+w,i=p.data}}return i}function lA(e){if(isNaN(d=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,u=this._y0,l=this._x1,c=this._y1,d,f,h,p,m,b,v,g;if(!r)return this;if(r.length)for(;;){if((m=d>=(h=(s+l)/2))?s=h:l=h,(b=f>=(p=(u+c)/2))?u=p:c=p,n=r,!(r=r[v=b<<1|m]))return this;if(!r.length)break;(n[v+1&3]||n[v+2&3]||n[v+3&3])&&(i=n,g=v)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[v]=a:delete n[v],(r=n[0]||n[1]||n[2]||n[3])&&r===(n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[g]=r:this._root=r),this):(this._root=a,this)}function fA(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function dA(){return this._root}function hA(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function pA(e){var n=[],r,i=this._root,o,a,s,u,l;for(i&&n.push(new Fe(i,this._x0,this._y0,this._x1,this._y1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.y0,u=r.x1,l=r.y1)&&i.length){var c=(a+u)/2,d=(s+l)/2;(o=i[3])&&n.push(new Fe(o,c,d,u,l)),(o=i[2])&&n.push(new Fe(o,a,d,c,l)),(o=i[1])&&n.push(new Fe(o,c,s,u,d)),(o=i[0])&&n.push(new Fe(o,a,s,c,d))}return this}function gA(e){var n=[],r=[],i;for(this._root&&n.push(new Fe(this._root,this._x0,this._y0,this._x1,this._y1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,u=i.y0,l=i.x1,c=i.y1,d=(s+l)/2,f=(u+c)/2;(a=o[0])&&n.push(new Fe(a,s,u,d,f)),(a=o[1])&&n.push(new Fe(a,d,u,l,f)),(a=o[2])&&n.push(new Fe(a,s,f,d,c)),(a=o[3])&&n.push(new Fe(a,d,f,l,c))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function mA(e){return e[0]}function vA(e){return arguments.length?(this._x=e,this):this._x}function yA(e){return e[1]}function bA(e){return arguments.length?(this._y=e,this):this._y}function Xb(e,n,r){var i=new Pl(n??mA,r??yA,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function Pl(e,n,r,i,o,a){this._x=e,this._y=n,this._x0=r,this._y0=i,this._x1=o,this._y1=a,this._root=void 0}function Mv(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var $e=Xb.prototype=Pl.prototype;$e.copy=function(){var e=new Pl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Mv(n),e;for(r=[{source:n,target:e._root=new Array(4)}];n=r.pop();)for(var o=0;o<4;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(4)}):n.target[o]=Mv(i));return e};$e.add=iA;$e.addAll=oA;$e.cover=aA;$e.data=sA;$e.extent=uA;$e.find=cA;$e.remove=lA;$e.removeAll=fA;$e.root=dA;$e.size=hA;$e.visit=pA;$e.visitAfter=gA;$e.x=vA;$e.y=bA;function _A(e){const n=+this._x.call(null,e),r=+this._y.call(null,e),i=+this._z.call(null,e);return Qb(this.cover(n,r,i),n,r,i,e)}function Qb(e,n,r,i,o){if(isNaN(n)||isNaN(r)||isNaN(i))return e;var a,s=e._root,u={data:o},l=e._x0,c=e._y0,d=e._z0,f=e._x1,h=e._y1,p=e._z1,m,b,v,g,_,y,x,w,C,S,k;if(!s)return e._root=u,e;for(;s.length;)if((x=n>=(m=(l+f)/2))?l=m:f=m,(w=r>=(b=(c+h)/2))?c=b:h=b,(C=i>=(v=(d+p)/2))?d=v:p=v,a=s,!(s=s[S=C<<2|w<<1|x]))return a[S]=u,e;if(g=+e._x.call(null,s.data),_=+e._y.call(null,s.data),y=+e._z.call(null,s.data),n===g&&r===_&&i===y)return u.next=s,a?a[S]=u:e._root=u,e;do a=a?a[S]=new Array(8):e._root=new Array(8),(x=n>=(m=(l+f)/2))?l=m:f=m,(w=r>=(b=(c+h)/2))?c=b:h=b,(C=i>=(v=(d+p)/2))?d=v:p=v;while((S=C<<2|w<<1|x)===(k=(y>=v)<<2|(_>=b)<<1|g>=m));return a[k]=s,a[S]=u,e}function xA(e){Array.isArray(e)||(e=Array.from(e));const n=e.length,r=new Float64Array(n),i=new Float64Array(n),o=new Float64Array(n);let a=1/0,s=1/0,u=1/0,l=-1/0,c=-1/0,d=-1/0;for(let f=0,h,p,m,b;f<n;++f)isNaN(p=+this._x.call(null,h=e[f]))||isNaN(m=+this._y.call(null,h))||isNaN(b=+this._z.call(null,h))||(r[f]=p,i[f]=m,o[f]=b,p<a&&(a=p),p>l&&(l=p),m<s&&(s=m),m>c&&(c=m),b<u&&(u=b),b>d&&(d=b));if(a>l||s>c||u>d)return this;this.cover(a,s,u).cover(l,c,d);for(let f=0;f<n;++f)Qb(this,r[f],i[f],o[f],e[f]);return this}function wA(e,n,r){if(isNaN(e=+e)||isNaN(n=+n)||isNaN(r=+r))return this;var i=this._x0,o=this._y0,a=this._z0,s=this._x1,u=this._y1,l=this._z1;if(isNaN(i))s=(i=Math.floor(e))+1,u=(o=Math.floor(n))+1,l=(a=Math.floor(r))+1;else{for(var c=s-i||1,d=this._root,f,h;i>e||e>=s||o>n||n>=u||a>r||r>=l;)switch(h=(r<a)<<2|(n<o)<<1|e<i,f=new Array(8),f[h]=d,d=f,c*=2,h){case 0:s=i+c,u=o+c,l=a+c;break;case 1:i=s-c,u=o+c,l=a+c;break;case 2:s=i+c,o=u-c,l=a+c;break;case 3:i=s-c,o=u-c,l=a+c;break;case 4:s=i+c,u=o+c,a=l-c;break;case 5:i=s-c,u=o+c,a=l-c;break;case 6:s=i+c,o=u-c,a=l-c;break;case 7:i=s-c,o=u-c,a=l-c;break}this._root&&this._root.length&&(this._root=d)}return this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=u,this._z1=l,this}function CA(){var e=[];return this.visit(function(n){if(!n.length)do e.push(n.data);while(n=n.next)}),e}function EA(e){return arguments.length?this.cover(+e[0][0],+e[0][1],+e[0][2]).cover(+e[1][0],+e[1][1],+e[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function be(e,n,r,i,o,a,s){this.node=e,this.x0=n,this.y0=r,this.z0=i,this.x1=o,this.y1=a,this.z1=s}function SA(e,n,r,i){var o,a=this._x0,s=this._y0,u=this._z0,l,c,d,f,h,p,m=this._x1,b=this._y1,v=this._z1,g=[],_=this._root,y,x;for(_&&g.push(new be(_,a,s,u,m,b,v)),i==null?i=1/0:(a=e-i,s=n-i,u=r-i,m=e+i,b=n+i,v=r+i,i*=i);y=g.pop();)if(!(!(_=y.node)||(l=y.x0)>m||(c=y.y0)>b||(d=y.z0)>v||(f=y.x1)<a||(h=y.y1)<s||(p=y.z1)<u))if(_.length){var w=(l+f)/2,C=(c+h)/2,S=(d+p)/2;g.push(new be(_[7],w,C,S,f,h,p),new be(_[6],l,C,S,w,h,p),new be(_[5],w,c,S,f,C,p),new be(_[4],l,c,S,w,C,p),new be(_[3],w,C,d,f,h,S),new be(_[2],l,C,d,w,h,S),new be(_[1],w,c,d,f,C,S),new be(_[0],l,c,d,w,C,S)),(x=(r>=S)<<2|(n>=C)<<1|e>=w)&&(y=g[g.length-1],g[g.length-1]=g[g.length-1-x],g[g.length-1-x]=y)}else{var k=e-+this._x.call(null,_.data),A=n-+this._y.call(null,_.data),N=r-+this._z.call(null,_.data),M=k*k+A*A+N*N;if(M<i){var I=Math.sqrt(i=M);a=e-I,s=n-I,u=r-I,m=e+I,b=n+I,v=r+I,o=_.data}}return o}const kA=(e,n,r,i,o,a)=>Math.sqrt((e-i)**2+(n-o)**2+(r-a)**2);function NA(e,n,r,i){const o=[],a=e-i,s=n-i,u=r-i,l=e+i,c=n+i,d=r+i;return this.visit((f,h,p,m,b,v,g)=>{if(!f.length)do{const _=f.data;kA(e,n,r,this._x(_),this._y(_),this._z(_))<=i&&o.push(_)}while(f=f.next);return h>l||p>c||m>d||b<a||v<s||g<u}),o}function MA(e){if(isNaN(h=+this._x.call(null,e))||isNaN(p=+this._y.call(null,e))||isNaN(m=+this._z.call(null,e)))return this;var n,r=this._root,i,o,a,s=this._x0,u=this._y0,l=this._z0,c=this._x1,d=this._y1,f=this._z1,h,p,m,b,v,g,_,y,x,w,C;if(!r)return this;if(r.length)for(;;){if((_=h>=(b=(s+c)/2))?s=b:c=b,(y=p>=(v=(u+d)/2))?u=v:d=v,(x=m>=(g=(l+f)/2))?l=g:f=g,n=r,!(r=r[w=x<<2|y<<1|_]))return this;if(!r.length)break;(n[w+1&7]||n[w+2&7]||n[w+3&7]||n[w+4&7]||n[w+5&7]||n[w+6&7]||n[w+7&7])&&(i=n,C=w)}for(;r.data!==e;)if(o=r,!(r=r.next))return this;return(a=r.next)&&delete r.next,o?(a?o.next=a:delete o.next,this):n?(a?n[w]=a:delete n[w],(r=n[0]||n[1]||n[2]||n[3]||n[4]||n[5]||n[6]||n[7])&&r===(n[7]||n[6]||n[5]||n[4]||n[3]||n[2]||n[1]||n[0])&&!r.length&&(i?i[C]=r:this._root=r),this):(this._root=a,this)}function AA(e){for(var n=0,r=e.length;n<r;++n)this.remove(e[n]);return this}function RA(){return this._root}function IA(){var e=0;return this.visit(function(n){if(!n.length)do++e;while(n=n.next)}),e}function TA(e){var n=[],r,i=this._root,o,a,s,u,l,c,d;for(i&&n.push(new be(i,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));r=n.pop();)if(!e(i=r.node,a=r.x0,s=r.y0,u=r.z0,l=r.x1,c=r.y1,d=r.z1)&&i.length){var f=(a+l)/2,h=(s+c)/2,p=(u+d)/2;(o=i[7])&&n.push(new be(o,f,h,p,l,c,d)),(o=i[6])&&n.push(new be(o,a,h,p,f,c,d)),(o=i[5])&&n.push(new be(o,f,s,p,l,h,d)),(o=i[4])&&n.push(new be(o,a,s,p,f,h,d)),(o=i[3])&&n.push(new be(o,f,h,u,l,c,p)),(o=i[2])&&n.push(new be(o,a,h,u,f,c,p)),(o=i[1])&&n.push(new be(o,f,s,u,l,h,p)),(o=i[0])&&n.push(new be(o,a,s,u,f,h,p))}return this}function PA(e){var n=[],r=[],i;for(this._root&&n.push(new be(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));i=n.pop();){var o=i.node;if(o.length){var a,s=i.x0,u=i.y0,l=i.z0,c=i.x1,d=i.y1,f=i.z1,h=(s+c)/2,p=(u+d)/2,m=(l+f)/2;(a=o[0])&&n.push(new be(a,s,u,l,h,p,m)),(a=o[1])&&n.push(new be(a,h,u,l,c,p,m)),(a=o[2])&&n.push(new be(a,s,p,l,h,d,m)),(a=o[3])&&n.push(new be(a,h,p,l,c,d,m)),(a=o[4])&&n.push(new be(a,s,u,m,h,p,f)),(a=o[5])&&n.push(new be(a,h,u,m,c,p,f)),(a=o[6])&&n.push(new be(a,s,p,m,h,d,f)),(a=o[7])&&n.push(new be(a,h,p,m,c,d,f))}r.push(i)}for(;i=r.pop();)e(i.node,i.x0,i.y0,i.z0,i.x1,i.y1,i.z1);return this}function OA(e){return e[0]}function jA(e){return arguments.length?(this._x=e,this):this._x}function qA(e){return e[1]}function DA(e){return arguments.length?(this._y=e,this):this._y}function LA(e){return e[2]}function zA(e){return arguments.length?(this._z=e,this):this._z}function Jb(e,n,r,i){var o=new Ol(n??OA,r??qA,i??LA,NaN,NaN,NaN,NaN,NaN,NaN);return e==null?o:o.addAll(e)}function Ol(e,n,r,i,o,a,s,u,l){this._x=e,this._y=n,this._z=r,this._x0=i,this._y0=o,this._z0=a,this._x1=s,this._y1=u,this._z1=l,this._root=void 0}function Av(e){for(var n={data:e.data},r=n;e=e.next;)r=r.next={data:e.data};return n}var Oe=Jb.prototype=Ol.prototype;Oe.copy=function(){var e=new Ol(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),n=this._root,r,i;if(!n)return e;if(!n.length)return e._root=Av(n),e;for(r=[{source:n,target:e._root=new Array(8)}];n=r.pop();)for(var o=0;o<8;++o)(i=n.source[o])&&(i.length?r.push({source:i,target:n.target[o]=new Array(8)}):n.target[o]=Av(i));return e};Oe.add=_A;Oe.addAll=xA;Oe.cover=wA;Oe.data=CA;Oe.extent=EA;Oe.find=SA;Oe.findAllWithinRadius=NA;Oe.remove=MA;Oe.removeAll=AA;Oe.root=RA;Oe.size=IA;Oe.visit=TA;Oe.visitAfter=PA;Oe.x=jA;Oe.y=DA;Oe.z=zA;function mt(e){return function(){return e}}function gt(e){return(e()-.5)*1e-6}function FA(e){return e.index}function Rv(e,n){var r=e.get(n);if(!r)throw new Error("node not found: "+n);return r}function $A(e){var n=FA,r=h,i,o=mt(30),a,s,u,l,c,d,f=1;e==null&&(e=[]);function h(g){return 1/Math.min(l[g.source.index],l[g.target.index])}function p(g){for(var _=0,y=e.length;_<f;++_)for(var x=0,w,C,S,k=0,A=0,N=0,M,I;x<y;++x)w=e[x],C=w.source,S=w.target,k=S.x+S.vx-C.x-C.vx||gt(d),u>1&&(A=S.y+S.vy-C.y-C.vy||gt(d)),u>2&&(N=S.z+S.vz-C.z-C.vz||gt(d)),M=Math.sqrt(k*k+A*A+N*N),M=(M-a[x])/M*g*i[x],k*=M,A*=M,N*=M,S.vx-=k*(I=c[x]),u>1&&(S.vy-=A*I),u>2&&(S.vz-=N*I),C.vx+=k*(I=1-I),u>1&&(C.vy+=A*I),u>2&&(C.vz+=N*I)}function m(){if(s){var g,_=s.length,y=e.length,x=new Map(s.map((C,S)=>[n(C,S,s),C])),w;for(g=0,l=new Array(_);g<y;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Rv(x,w.source)),typeof w.target!="object"&&(w.target=Rv(x,w.target)),l[w.source.index]=(l[w.source.index]||0)+1,l[w.target.index]=(l[w.target.index]||0)+1;for(g=0,c=new Array(y);g<y;++g)w=e[g],c[g]=l[w.source.index]/(l[w.source.index]+l[w.target.index]);i=new Array(y),b(),a=new Array(y),v()}}function b(){if(s)for(var g=0,_=e.length;g<_;++g)i[g]=+r(e[g],g,e)}function v(){if(s)for(var g=0,_=e.length;g<_;++g)a[g]=+o(e[g],g,e)}return p.initialize=function(g,..._){s=g,d=_.find(y=>typeof y=="function")||Math.random,u=_.find(y=>[1,2,3].includes(y))||2,m()},p.links=function(g){return arguments.length?(e=g,m(),p):e},p.id=function(g){return arguments.length?(n=g,p):n},p.iterations=function(g){return arguments.length?(f=+g,p):f},p.strength=function(g){return arguments.length?(r=typeof g=="function"?g:mt(+g),b(),p):r},p.distance=function(g){return arguments.length?(o=typeof g=="function"?g:mt(+g),v(),p):o},p}const BA=1664525,HA=1013904223,Iv=4294967296;function UA(){let e=1;return()=>(e=(BA*e+HA)%Iv)/Iv}var Tv=3;function gc(e){return e.x}function Pv(e){return e.y}function VA(e){return e.z}var GA=10,WA=Math.PI*(3-Math.sqrt(5)),YA=Math.PI*20/(9+Math.sqrt(221));function ZA(e,n){n=n||2;var r=Math.min(Tv,Math.max(1,Math.round(n))),i,o=1,a=.001,s=1-Math.pow(a,1/300),u=0,l=.6,c=new Map,d=lx(p),f=Vc("tick","end"),h=UA();e==null&&(e=[]);function p(){m(),f.call("tick",i),o<a&&(d.stop(),f.call("end",i))}function m(g){var _,y=e.length,x;g===void 0&&(g=1);for(var w=0;w<g;++w)for(o+=(u-o)*s,c.forEach(function(C){C(o)}),_=0;_<y;++_)x=e[_],x.fx==null?x.x+=x.vx*=l:(x.x=x.fx,x.vx=0),r>1&&(x.fy==null?x.y+=x.vy*=l:(x.y=x.fy,x.vy=0)),r>2&&(x.fz==null?x.z+=x.vz*=l:(x.z=x.fz,x.vz=0));return i}function b(){for(var g=0,_=e.length,y;g<_;++g){if(y=e[g],y.index=g,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),y.fz!=null&&(y.z=y.fz),isNaN(y.x)||r>1&&isNaN(y.y)||r>2&&isNaN(y.z)){var x=GA*(r>2?Math.cbrt(.5+g):r>1?Math.sqrt(.5+g):g),w=g*WA,C=g*YA;r===1?y.x=x:r===2?(y.x=x*Math.cos(w),y.y=x*Math.sin(w)):(y.x=x*Math.sin(w)*Math.cos(C),y.y=x*Math.cos(w),y.z=x*Math.sin(w)*Math.sin(C))}(isNaN(y.vx)||r>1&&isNaN(y.vy)||r>2&&isNaN(y.vz))&&(y.vx=0,r>1&&(y.vy=0),r>2&&(y.vz=0))}}function v(g){return g.initialize&&g.initialize(e,h,r),g}return b(),i={tick:m,restart:function(){return d.restart(p),i},stop:function(){return d.stop(),i},numDimensions:function(g){return arguments.length?(r=Math.min(Tv,Math.max(1,Math.round(g))),c.forEach(v),i):r},nodes:function(g){return arguments.length?(e=g,b(),c.forEach(v),i):e},alpha:function(g){return arguments.length?(o=+g,i):o},alphaMin:function(g){return arguments.length?(a=+g,i):a},alphaDecay:function(g){return arguments.length?(s=+g,i):+s},alphaTarget:function(g){return arguments.length?(u=+g,i):u},velocityDecay:function(g){return arguments.length?(l=1-g,i):1-l},randomSource:function(g){return arguments.length?(h=g,c.forEach(v),i):h},force:function(g,_){return arguments.length>1?(_==null?c.delete(g):c.set(g,v(_)),i):c.get(g)},find:function(){var g=Array.prototype.slice.call(arguments),_=g.shift()||0,y=(r>1?g.shift():null)||0,x=(r>2?g.shift():null)||0,w=g.shift()||1/0,C=0,S=e.length,k,A,N,M,I,O;for(w*=w,C=0;C<S;++C)I=e[C],k=_-I.x,A=y-(I.y||0),N=x-(I.z||0),M=k*k+A*A+N*N,M<w&&(O=I,w=M);return O},on:function(g,_){return arguments.length>1?(f.on(g,_),i):f.on(g)}}}function KA(){var e,n,r,i,o,a=mt(-30),s,u=1,l=1/0,c=.81;function d(m){var b,v=e.length,g=(n===1?Zb(e,gc):n===2?Xb(e,gc,Pv):n===3?Jb(e,gc,Pv,VA):null).visitAfter(h);for(o=m,b=0;b<v;++b)r=e[b],g.visit(p)}function f(){if(e){var m,b=e.length,v;for(s=new Array(b),m=0;m<b;++m)v=e[m],s[v.index]=+a(v,m,e)}}function h(m){var b=0,v,g,_=0,y,x,w,C,S=m.length;if(S){for(y=x=w=C=0;C<S;++C)(v=m[C])&&(g=Math.abs(v.value))&&(b+=v.value,_+=g,y+=g*(v.x||0),x+=g*(v.y||0),w+=g*(v.z||0));b*=Math.sqrt(4/S),m.x=y/_,n>1&&(m.y=x/_),n>2&&(m.z=w/_)}else{v=m,v.x=v.data.x,n>1&&(v.y=v.data.y),n>2&&(v.z=v.data.z);do b+=s[v.data.index];while(v=v.next)}m.value=b}function p(m,b,v,g,_){if(!m.value)return!0;var y=[v,g,_][n-1],x=m.x-r.x,w=n>1?m.y-r.y:0,C=n>2?m.z-r.z:0,S=y-b,k=x*x+w*w+C*C;if(S*S/c<k)return k<l&&(x===0&&(x=gt(i),k+=x*x),n>1&&w===0&&(w=gt(i),k+=w*w),n>2&&C===0&&(C=gt(i),k+=C*C),k<u&&(k=Math.sqrt(u*k)),r.vx+=x*m.value*o/k,n>1&&(r.vy+=w*m.value*o/k),n>2&&(r.vz+=C*m.value*o/k)),!0;if(m.length||k>=l)return;(m.data!==r||m.next)&&(x===0&&(x=gt(i),k+=x*x),n>1&&w===0&&(w=gt(i),k+=w*w),n>2&&C===0&&(C=gt(i),k+=C*C),k<u&&(k=Math.sqrt(u*k)));do m.data!==r&&(S=s[m.data.index]*o/k,r.vx+=x*S,n>1&&(r.vy+=w*S),n>2&&(r.vz+=C*S));while(m=m.next)}return d.initialize=function(m,...b){e=m,i=b.find(v=>typeof v=="function")||Math.random,n=b.find(v=>[1,2,3].includes(v))||2,f()},d.strength=function(m){return arguments.length?(a=typeof m=="function"?m:mt(+m),f(),d):a},d.distanceMin=function(m){return arguments.length?(u=m*m,d):Math.sqrt(u)},d.distanceMax=function(m){return arguments.length?(l=m*m,d):Math.sqrt(l)},d.theta=function(m){return arguments.length?(c=m*m,d):Math.sqrt(c)},d}function XA(e,n,r,i){var o,a,s=mt(.1),u,l;typeof e!="function"&&(e=mt(+e)),n==null&&(n=0),r==null&&(r=0),i==null&&(i=0);function c(f){for(var h=0,p=o.length;h<p;++h){var m=o[h],b=m.x-n||1e-6,v=(m.y||0)-r||1e-6,g=(m.z||0)-i||1e-6,_=Math.sqrt(b*b+v*v+g*g),y=(l[h]-_)*u[h]*f/_;m.vx+=b*y,a>1&&(m.vy+=v*y),a>2&&(m.vz+=g*y)}}function d(){if(o){var f,h=o.length;for(u=new Array(h),l=new Array(h),f=0;f<h;++f)l[f]=+e(o[f],f,o),u[f]=isNaN(l[f])?0:+s(o[f],f,o)}}return c.initialize=function(f,...h){o=f,a=h.find(p=>[1,2,3].includes(p))||2,d()},c.strength=function(f){return arguments.length?(s=typeof f=="function"?f:mt(+f),d(),c):s},c.radius=function(f){return arguments.length?(e=typeof f=="function"?f:mt(+f),d(),c):e},c.x=function(f){return arguments.length?(n=+f,c):n},c.y=function(f){return arguments.length?(r=+f,c):r},c.z=function(f){return arguments.length?(i=+f,c):i},c}const{abs:sn,cos:pt,sin:Ht,acos:QA,atan2:un,sqrt:Ct,pow:We}=Math;function cn(e){return e<0?-We(-e,1/3):We(e,1/3)}const e_=Math.PI,Zn=2*e_,Et=e_/2,JA=1e-6,mc=Number.MAX_SAFE_INTEGER||9007199254740991,vc=Number.MIN_SAFE_INTEGER||-9007199254740991,eR={x:0,y:0,z:0},X={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,n){const r=n(e);let i=r.x*r.x+r.y*r.y;return typeof r.z<"u"&&(i+=r.z*r.z),Ct(i)},compute:function(e,n,r){if(e===0)return n[0].t=0,n[0];const i=n.length-1;if(e===1)return n[i].t=1,n[i];const o=1-e;let a=n;if(i===0)return n[0].t=e,n[0];if(i===1){const u={x:o*a[0].x+e*a[1].x,y:o*a[0].y+e*a[1].y,t:e};return r&&(u.z=o*a[0].z+e*a[1].z),u}if(i<4){let u=o*o,l=e*e,c,d,f,h=0;i===2?(a=[a[0],a[1],a[2],eR],c=u,d=o*e*2,f=l):i===3&&(c=u*o,d=u*e*3,f=o*l*3,h=e*l);const p={x:c*a[0].x+d*a[1].x+f*a[2].x+h*a[3].x,y:c*a[0].y+d*a[1].y+f*a[2].y+h*a[3].y,t:e};return r&&(p.z=c*a[0].z+d*a[1].z+f*a[2].z+h*a[3].z),p}const s=JSON.parse(JSON.stringify(n));for(;s.length>1;){for(let u=0;u<s.length-1;u++)s[u]={x:s[u].x+(s[u+1].x-s[u].x)*e,y:s[u].y+(s[u+1].y-s[u].y)*e},typeof s[u].z<"u"&&(s[u].z=s[u].z+(s[u+1].z-s[u].z)*e);s.splice(s.length-1,1)}return s[0].t=e,s[0]},computeWithRatios:function(e,n,r,i){const o=1-e,a=r,s=n;let u=a[0],l=a[1],c=a[2],d=a[3],f;if(u*=o,l*=e,s.length===2)return f=u+l,{x:(u*s[0].x+l*s[1].x)/f,y:(u*s[0].y+l*s[1].y)/f,z:i?(u*s[0].z+l*s[1].z)/f:!1,t:e};if(u*=o,l*=2*o,c*=e*e,s.length===3)return f=u+l+c,{x:(u*s[0].x+l*s[1].x+c*s[2].x)/f,y:(u*s[0].y+l*s[1].y+c*s[2].y)/f,z:i?(u*s[0].z+l*s[1].z+c*s[2].z)/f:!1,t:e};if(u*=o,l*=1.5*o,c*=3*o,d*=e*e*e,s.length===4)return f=u+l+c+d,{x:(u*s[0].x+l*s[1].x+c*s[2].x+d*s[3].x)/f,y:(u*s[0].y+l*s[1].y+c*s[2].y+d*s[3].y)/f,z:i?(u*s[0].z+l*s[1].z+c*s[2].z+d*s[3].z)/f:!1,t:e}},derive:function(e,n){const r=[];for(let i=e,o=i.length,a=o-1;o>1;o--,a--){const s=[];for(let u=0,l;u<a;u++)l={x:a*(i[u+1].x-i[u].x),y:a*(i[u+1].y-i[u].y)},n&&(l.z=a*(i[u+1].z-i[u].z)),s.push(l);r.push(s),i=s}return r},between:function(e,n,r){return n<=e&&e<=r||X.approximately(e,n)||X.approximately(e,r)},approximately:function(e,n,r){return sn(e-n)<=(r||JA)},length:function(e){const r=X.Tvalues.length;let i=0;for(let o=0,a;o<r;o++)a=.5*X.Tvalues[o]+.5,i+=X.Cvalues[o]*X.arcfn(a,e);return .5*i},map:function(e,n,r,i,o){const a=r-n,s=o-i,u=e-n,l=u/a;return i+s*l},lerp:function(e,n,r){const i={x:n.x+e*(r.x-n.x),y:n.y+e*(r.y-n.y)};return n.z!==void 0&&r.z!==void 0&&(i.z=n.z+e*(r.z-n.z)),i},pointToString:function(e){let n=e.x+"/"+e.y;return typeof e.z<"u"&&(n+="/"+e.z),n},pointsToString:function(e){return"["+e.map(X.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,n,r){const i=n.x-e.x,o=n.y-e.y,a=r.x-e.x,s=r.y-e.y,u=i*s-o*a,l=i*a+o*s;return un(u,l)},round:function(e,n){const r=""+e,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+n))},dist:function(e,n){const r=e.x-n.x,i=e.y-n.y;return Ct(r*r+i*i)},closest:function(e,n){let r=We(2,63),i,o;return e.forEach(function(a,s){o=X.dist(n,a),o<r&&(r=o,i=s)}),{mdist:r,mpos:i}},abcratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=We(e,n)+We(1-e,n),i=r-1;return sn(i/r)},projectionratio:function(e,n){if(n!==2&&n!==3)return!1;if(typeof e>"u")e=.5;else if(e===0||e===1)return e;const r=We(1-e,n),i=We(e,n)+r;return r/i},lli8:function(e,n,r,i,o,a,s,u){const l=(e*i-n*r)*(o-s)-(e-r)*(o*u-a*s),c=(e*i-n*r)*(a-u)-(n-i)*(o*u-a*s),d=(e-r)*(a-u)-(n-i)*(o-s);return d==0?!1:{x:l/d,y:c/d}},lli4:function(e,n,r,i){const o=e.x,a=e.y,s=n.x,u=n.y,l=r.x,c=r.y,d=i.x,f=i.y;return X.lli8(o,a,s,u,l,c,d,f)},lli:function(e,n){return X.lli4(e,e.c,n,n.c)},makeline:function(e,n){return new xe(e.x,e.y,(e.x+n.x)/2,(e.y+n.y)/2,n.x,n.y)},findbbox:function(e){let n=mc,r=mc,i=vc,o=vc;return e.forEach(function(a){const s=a.bbox();n>s.x.min&&(n=s.x.min),r>s.y.min&&(r=s.y.min),i<s.x.max&&(i=s.x.max),o<s.y.max&&(o=s.y.max)}),{x:{min:n,mid:(n+i)/2,max:i,size:i-n},y:{min:r,mid:(r+o)/2,max:o,size:o-r}}},shapeintersections:function(e,n,r,i,o){if(!X.bboxoverlap(n,i))return[];const a=[],s=[e.startcap,e.forward,e.back,e.endcap],u=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(l){l.virtual||u.forEach(function(c){if(c.virtual)return;const d=l.intersects(c,o);d.length>0&&(d.c1=l,d.c2=c,d.s1=e,d.s2=r,a.push(d))})}),a},makeshape:function(e,n,r){const i=n.points.length,o=e.points.length,a=X.makeline(n.points[i-1],e.points[0]),s=X.makeline(e.points[o-1],n.points[0]),u={startcap:a,forward:e,back:n,endcap:s,bbox:X.findbbox([a,e,n,s])};return u.intersections=function(l){return X.shapeintersections(u,u.bbox,l,l.bbox,r)},u},getminmax:function(e,n,r){if(!r)return{min:0,max:0};let i=mc,o=vc,a,s;r.indexOf(0)===-1&&(r=[0].concat(r)),r.indexOf(1)===-1&&r.push(1);for(let u=0,l=r.length;u<l;u++)a=r[u],s=e.get(a),s[n]<i&&(i=s[n]),s[n]>o&&(o=s[n]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,n){const r=n.p1.x,i=n.p1.y,o=-un(n.p2.y-i,n.p2.x-r),a=function(s){return{x:(s.x-r)*pt(o)-(s.y-i)*Ht(o),y:(s.x-r)*Ht(o)+(s.y-i)*pt(o)}};return e.map(a)},roots:function(e,n){n=n||{p1:{x:0,y:0},p2:{x:1,y:0}};const r=e.length-1,i=X.align(e,n),o=function(S){return 0<=S&&S<=1};if(r===2){const S=i[0].y,k=i[1].y,A=i[2].y,N=S-2*k+A;if(N!==0){const M=-Ct(k*k-S*A),I=-S+k,O=-(M+I)/N,R=-(-M+I)/N;return[O,R].filter(o)}else if(k!==A&&N===0)return[(2*k-A)/(2*k-2*A)].filter(o);return[]}const a=i[0].y,s=i[1].y,u=i[2].y,l=i[3].y;let c=-a+3*s-3*u+l,d=3*a-6*s+3*u,f=-3*a+3*s,h=a;if(X.approximately(c,0)){if(X.approximately(d,0))return X.approximately(f,0)?[]:[-h/f].filter(o);const S=Ct(f*f-4*d*h),k=2*d;return[(S-f)/k,(-f-S)/k].filter(o)}d/=c,f/=c,h/=c;const p=(3*f-d*d)/3,m=p/3,b=(2*d*d*d-9*d*f+27*h)/27,v=b/2,g=v*v+m*m*m;let _,y,x,w,C;if(g<0){const S=-p/3,k=S*S*S,A=Ct(k),N=-b/(2*A),M=N<-1?-1:N>1?1:N,I=QA(M),O=cn(A),R=2*O;return x=R*pt(I/3)-d/3,w=R*pt((I+Zn)/3)-d/3,C=R*pt((I+2*Zn)/3)-d/3,[x,w,C].filter(o)}else{if(g===0)return _=v<0?cn(-v):-cn(v),x=2*_-d/3,w=-_-d/3,[x,w].filter(o);{const S=Ct(g);return _=cn(-v+S),y=cn(v+S),[_-y-d/3].filter(o)}}},droots:function(e){if(e.length===3){const n=e[0],r=e[1],i=e[2],o=n-2*r+i;if(o!==0){const a=-Ct(r*r-n*i),s=-n+r,u=-(a+s)/o,l=-(-a+s)/o;return[u,l]}else if(r!==i&&o===0)return[(2*r-i)/(2*(r-i))];return[]}if(e.length===2){const n=e[0],r=e[1];return n!==r?[n/(n-r)]:[]}return[]},curvature:function(e,n,r,i,o){let a,s,u,l,c=0,d=0;const f=X.compute(e,n),h=X.compute(e,r),p=f.x*f.x+f.y*f.y;if(i?(a=Ct(We(f.y*h.z-h.y*f.z,2)+We(f.z*h.x-h.z*f.x,2)+We(f.x*h.y-h.x*f.y,2)),s=We(p+f.z*f.z,3/2)):(a=f.x*h.y-f.y*h.x,s=We(p,3/2)),a===0||s===0)return{k:0,r:0};if(c=a/s,d=s/a,!o){const m=X.curvature(e-.001,n,r,i,!0).k,b=X.curvature(e+.001,n,r,i,!0).k;l=(b-c+(c-m))/2,u=(sn(b-c)+sn(c-m))/2}return{k:c,r:d,dk:l,adk:u}},inflections:function(e){if(e.length<4)return[];const n=X.align(e,{p1:e[0],p2:e.slice(-1)[0]}),r=n[2].x*n[1].y,i=n[3].x*n[1].y,o=n[1].x*n[2].y,a=n[3].x*n[2].y,s=18*(-3*r+2*i+3*o-a),u=18*(3*r-i-3*o),l=18*(o-r);if(X.approximately(s,0)){if(!X.approximately(u,0)){let h=-l/u;if(0<=h&&h<=1)return[h]}return[]}const c=2*s;if(X.approximately(c,0))return[];const d=u*u-4*s*l;if(d<0)return[];const f=Math.sqrt(d);return[(f-u)/c,-(u+f)/c].filter(function(h){return 0<=h&&h<=1})},bboxoverlap:function(e,n){const r=["x","y"],i=r.length;for(let o=0,a,s,u,l;o<i;o++)if(a=r[o],s=e[a].mid,u=n[a].mid,l=(e[a].size+n[a].size)/2,sn(s-u)>=l)return!1;return!0},expandbox:function(e,n){n.x.min<e.x.min&&(e.x.min=n.x.min),n.y.min<e.y.min&&(e.y.min=n.y.min),n.z&&n.z.min<e.z.min&&(e.z.min=n.z.min),n.x.max>e.x.max&&(e.x.max=n.x.max),n.y.max>e.y.max&&(e.y.max=n.y.max),n.z&&n.z.max>e.z.max&&(e.z.max=n.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,n,r){const i=e.bbox(),o=n.bbox(),a=1e5,s=r||.5;if(i.x.size+i.y.size<s&&o.x.size+o.y.size<s)return[(a*(e._t1+e._t2)/2|0)/a+"/"+(a*(n._t1+n._t2)/2|0)/a];let u=e.split(.5),l=n.split(.5),c=[{left:u.left,right:l.left},{left:u.left,right:l.right},{left:u.right,right:l.right},{left:u.right,right:l.left}];c=c.filter(function(f){return X.bboxoverlap(f.left.bbox(),f.right.bbox())});let d=[];return c.length===0||(c.forEach(function(f){d=d.concat(X.pairiteration(f.left,f.right,s))}),d=d.filter(function(f,h){return d.indexOf(f)===h})),d},getccenter:function(e,n,r){const i=n.x-e.x,o=n.y-e.y,a=r.x-n.x,s=r.y-n.y,u=i*pt(Et)-o*Ht(Et),l=i*Ht(Et)+o*pt(Et),c=a*pt(Et)-s*Ht(Et),d=a*Ht(Et)+s*pt(Et),f=(e.x+n.x)/2,h=(e.y+n.y)/2,p=(n.x+r.x)/2,m=(n.y+r.y)/2,b=f+u,v=h+l,g=p+c,_=m+d,y=X.lli8(f,h,b,v,p,m,g,_),x=X.dist(y,e);let w=un(e.y-y.y,e.x-y.x),C=un(n.y-y.y,n.x-y.x),S=un(r.y-y.y,r.x-y.x),k;return w<S?((w>C||C>S)&&(w+=Zn),w>S&&(k=S,S=w,w=k)):S<C&&C<w?(k=S,S=w,w=k):S+=Zn,y.s=w,y.e=S,y.r=x,y},numberSort:function(e,n){return e-n}};class _n{constructor(n){this.curves=[],this._3d=!1,n&&(this.curves=n,this._3d=this.curves[0]._3d)}valueOf(){return this.toString()}toString(){return"["+this.curves.map(function(n){return X.pointsToString(n.points)}).join(", ")+"]"}addCurve(n){this.curves.push(n),this._3d=this._3d||n._3d}length(){return this.curves.map(function(n){return n.length()}).reduce(function(n,r){return n+r})}curve(n){return this.curves[n]}bbox(){const n=this.curves;for(var r=n[0].bbox(),i=1;i<n.length;i++)X.expandbox(r,n[i].bbox());return r}offset(n){const r=[];return this.curves.forEach(function(i){r.push(...i.offset(n))}),new _n(r)}}const{abs:ln,min:Ov,max:jv,cos:tR,sin:nR,acos:rR,sqrt:fn}=Math,iR=Math.PI;class xe{constructor(n){let r=n&&n.forEach?n:Array.from(arguments).slice(),i=!1;if(typeof r[0]=="object"){i=r.length;const p=[];r.forEach(function(m){["x","y","z"].forEach(function(b){typeof m[b]<"u"&&p.push(m[b])})}),r=p}let o=!1;const a=r.length;if(i){if(i>4){if(arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(a!==6&&a!==8&&a!==9&&a!==12&&arguments.length!==1)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");const s=this._3d=!o&&(a===9||a===12)||n&&n[0]&&typeof n[0].z<"u",u=this.points=[];for(let p=0,m=s?3:2;p<a;p+=m){var l={x:r[p],y:r[p+1]};s&&(l.z=r[p+2]),u.push(l)}const c=this.order=u.length-1,d=this.dims=["x","y"];s&&d.push("z"),this.dimlen=d.length;const f=X.align(u,{p1:u[0],p2:u[c]}),h=X.dist(u[0],u[c]);this._linear=f.reduce((p,m)=>p+ln(m.y),0)<h/50,this._lut=[],this._t1=0,this._t2=1,this.update()}static quadraticFromPoints(n,r,i,o){if(typeof o>"u"&&(o=.5),o===0)return new xe(r,r,i);if(o===1)return new xe(n,r,r);const a=xe.getABC(2,n,r,i,o);return new xe(n,a.A,i)}static cubicFromPoints(n,r,i,o,a){typeof o>"u"&&(o=.5);const s=xe.getABC(3,n,r,i,o);typeof a>"u"&&(a=X.dist(r,s.C));const u=a*(1-o)/o,l=X.dist(n,i),c=(i.x-n.x)/l,d=(i.y-n.y)/l,f=a*c,h=a*d,p=u*c,m=u*d,b={x:r.x-f,y:r.y-h},v={x:r.x+p,y:r.y+m},g=s.A,_={x:g.x+(b.x-g.x)/(1-o),y:g.y+(b.y-g.y)/(1-o)},y={x:g.x+(v.x-g.x)/o,y:g.y+(v.y-g.y)/o},x={x:n.x+(_.x-n.x)/o,y:n.y+(_.y-n.y)/o},w={x:i.x+(y.x-i.x)/(1-o),y:i.y+(y.y-i.y)/(1-o)};return new xe(n,x,w,i)}static getUtils(){return X}getUtils(){return xe.getUtils()}static get PolyBezier(){return _n}valueOf(){return this.toString()}toString(){return X.pointsToString(this.points)}toSVG(){if(this._3d)return!1;const n=this.points,r=n[0].x,i=n[0].y,o=["M",r,i,this.order===2?"Q":"C"];for(let a=1,s=n.length;a<s;a++)o.push(n[a].x),o.push(n[a].y);return o.join(" ")}setRatios(n){if(n.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=n,this._lut=[]}verify(){const n=this.coordDigest();n!==this._print&&(this._print=n,this.update())}coordDigest(){return this.points.map(function(n,r){return""+r+n.x+n.y+(n.z?n.z:0)}).join("")}update(){this._lut=[],this.dpoints=X.derive(this.points,this._3d),this.computedirection()}computedirection(){const n=this.points,r=X.angle(n[0],n[this.order],n[1]);this.clockwise=r>0}length(){return X.length(this.derivative.bind(this))}static getABC(n=2,r,i,o,a=.5){const s=X.projectionratio(a,n),u=1-s,l={x:s*r.x+u*o.x,y:s*r.y+u*o.y},c=X.abcratio(a,n);return{A:{x:i.x+(i.x-l.x)/c,y:i.y+(i.y-l.y)/c},B:i,C:l,S:r,E:o}}getABC(n,r){r=r||this.get(n);let i=this.points[0],o=this.points[this.order];return xe.getABC(this.order,i,r,o,n)}getLUT(n){if(this.verify(),n=n||100,this._lut.length===n+1)return this._lut;this._lut=[],n++,this._lut=[];for(let r=0,i,o;r<n;r++)o=r/(n-1),i=this.compute(o),i.t=o,this._lut.push(i);return this._lut}on(n,r){r=r||5;const i=this.getLUT(),o=[];for(let a=0,s,u=0;a<i.length;a++)s=i[a],X.dist(s,n)<r&&(o.push(s),u+=a/i.length);return o.length?t/=o.length:!1}project(n){const r=this.getLUT(),i=r.length-1,o=X.closest(r,n),a=o.mpos,s=(a-1)/i,u=(a+1)/i,l=.1/i;let c=o.mdist,d=s,f=d,h;c+=1;for(let p;d<u+l;d+=l)h=this.compute(d),p=X.dist(n,h),p<c&&(c=p,f=d);return f=f<0?0:f>1?1:f,h=this.compute(f),h.t=f,h.d=c,h}get(n){return this.compute(n)}point(n){return this.points[n]}compute(n){return this.ratios?X.computeWithRatios(n,this.points,this.ratios,this._3d):X.compute(n,this.points,this._3d,this.ratios)}raise(){const n=this.points,r=[n[0]],i=n.length;for(let o=1,a,s;o<i;o++)a=n[o],s=n[o-1],r[o]={x:(i-o)/i*a.x+o/i*s.x,y:(i-o)/i*a.y+o/i*s.y};return r[i]=n[i-1],new xe(r)}derivative(n){return X.compute(n,this.dpoints[0],this._3d)}dderivative(n){return X.compute(n,this.dpoints[1],this._3d)}align(){let n=this.points;return new xe(X.align(n,{p1:n[0],p2:n[n.length-1]}))}curvature(n){return X.curvature(n,this.dpoints[0],this.dpoints[1],this._3d)}inflections(){return X.inflections(this.points)}normal(n){return this._3d?this.__normal3(n):this.__normal2(n)}__normal2(n){const r=this.derivative(n),i=fn(r.x*r.x+r.y*r.y);return{t:n,x:-r.y/i,y:r.x/i}}__normal3(n){const r=this.derivative(n),i=this.derivative(n+.01),o=fn(r.x*r.x+r.y*r.y+r.z*r.z),a=fn(i.x*i.x+i.y*i.y+i.z*i.z);r.x/=o,r.y/=o,r.z/=o,i.x/=a,i.y/=a,i.z/=a;const s={x:i.y*r.z-i.z*r.y,y:i.z*r.x-i.x*r.z,z:i.x*r.y-i.y*r.x},u=fn(s.x*s.x+s.y*s.y+s.z*s.z);s.x/=u,s.y/=u,s.z/=u;const l=[s.x*s.x,s.x*s.y-s.z,s.x*s.z+s.y,s.x*s.y+s.z,s.y*s.y,s.y*s.z-s.x,s.x*s.z-s.y,s.y*s.z+s.x,s.z*s.z];return{t:n,x:l[0]*r.x+l[1]*r.y+l[2]*r.z,y:l[3]*r.x+l[4]*r.y+l[5]*r.z,z:l[6]*r.x+l[7]*r.y+l[8]*r.z}}hull(n){let r=this.points,i=[],o=[],a=0;for(o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],this.order===3&&(o[a++]=r[3]);r.length>1;){i=[];for(let s=0,u,l=r.length-1;s<l;s++)u=X.lerp(n,r[s],r[s+1]),o[a++]=u,i.push(u);r=i}return o}split(n,r){if(n===0&&r)return this.split(r).left;if(r===1)return this.split(n).right;const i=this.hull(n),o={left:this.order===2?new xe([i[0],i[3],i[5]]):new xe([i[0],i[4],i[7],i[9]]),right:this.order===2?new xe([i[5],i[4],i[2]]):new xe([i[9],i[8],i[6],i[3]]),span:i};return o.left._t1=X.map(0,0,1,this._t1,this._t2),o.left._t2=X.map(n,0,1,this._t1,this._t2),o.right._t1=X.map(n,0,1,this._t1,this._t2),o.right._t2=X.map(1,0,1,this._t1,this._t2),r?(r=X.map(r,n,1,0,1),o.right.split(r).left):o}extrema(){const n={};let r=[];return this.dims.forEach((function(i){let o=function(s){return s[i]},a=this.dpoints[0].map(o);n[i]=X.droots(a),this.order===3&&(a=this.dpoints[1].map(o),n[i]=n[i].concat(X.droots(a))),n[i]=n[i].filter(function(s){return s>=0&&s<=1}),r=r.concat(n[i].sort(X.numberSort))}).bind(this)),n.values=r.sort(X.numberSort).filter(function(i,o){return r.indexOf(i)===o}),n}bbox(){const n=this.extrema(),r={};return this.dims.forEach((function(i){r[i]=X.getminmax(this,i,n[i])}).bind(this)),r}overlaps(n){const r=this.bbox(),i=n.bbox();return X.bboxoverlap(r,i)}offset(n,r){if(typeof r<"u"){const i=this.get(n),o=this.normal(n),a={c:i,n:o,x:i.x+o.x*r,y:i.y+o.y*r};return this._3d&&(a.z=i.z+o.z*r),a}if(this._linear){const i=this.normal(0),o=this.points.map(function(a){const s={x:a.x+n*i.x,y:a.y+n*i.y};return a.z&&i.z&&(s.z=a.z+n*i.z),s});return[new xe(o)]}return this.reduce().map(function(i){return i._linear?i.offset(n)[0]:i.scale(n)})}simple(){if(this.order===3){const o=X.angle(this.points[0],this.points[3],this.points[1]),a=X.angle(this.points[0],this.points[3],this.points[2]);if(o>0&&a<0||o<0&&a>0)return!1}const n=this.normal(0),r=this.normal(1);let i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),ln(rR(i))<iR/3}reduce(){let n,r=0,i=0,o=.01,a,s=[],u=[],l=this.extrema().values;for(l.indexOf(0)===-1&&(l=[0].concat(l)),l.indexOf(1)===-1&&l.push(1),r=l[0],n=1;n<l.length;n++)i=l[n],a=this.split(r,i),a._t1=r,a._t2=i,s.push(a),r=i;return s.forEach(function(c){for(r=0,i=0;i<=1;)for(i=r+o;i<=1+o;i+=o)if(a=c.split(r,i),!a.simple()){if(i-=o,ln(r-i)<o)return[];a=c.split(r,i),a._t1=X.map(r,0,1,c._t1,c._t2),a._t2=X.map(i,0,1,c._t1,c._t2),u.push(a),r=i;break}r<1&&(a=c.split(r,1),a._t1=X.map(r,0,1,c._t1,c._t2),a._t2=c._t2,u.push(a))}),u}translate(n,r,i){i=typeof i=="number"?i:r;const o=this.order;let a=this.points.map((s,u)=>(1-u/o)*r+u/o*i);return new xe(this.points.map((s,u)=>({x:s.x+n.x*a[u],y:s.y+n.y*a[u]})))}scale(n){const r=this.order;let i=!1;if(typeof n=="function"&&(i=n),i&&r===2)return this.raise().scale(i);const o=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):n,i?i(1):n);const s=i?i(0):n,u=i?i(1):n,l=[this.offset(0,10),this.offset(1,10)],c=[],d=X.lli4(l[0],l[0].c,l[1],l[1].c);if(!d)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach(function(f){const h=c[f*r]=X.copy(a[f*r]);h.x+=(f?u:s)*l[f].n.x,h.y+=(f?u:s)*l[f].n.y}),i?([0,1].forEach(function(f){if(!(r===2&&f)){var h=a[f+1],p={x:h.x-d.x,y:h.y-d.y},m=i?i((f+1)/r):n;i&&!o&&(m=-m);var b=fn(p.x*p.x+p.y*p.y);p.x/=b,p.y/=b,c[f+1]={x:h.x+m*p.x,y:h.y+m*p.y}}}),new xe(c)):([0,1].forEach(f=>{if(r===2&&f)return;const h=c[f*r],p=this.derivative(f),m={x:h.x+p.x,y:h.y+p.y};c[f+1]=X.lli4(h,m,d,a[f+1])}),new xe(c))}outline(n,r,i,o){if(r=r===void 0?n:r,this._linear){const w=this.normal(0),C=this.points[0],S=this.points[this.points.length-1];let k,A,N;i===void 0&&(i=n,o=r),k={x:C.x+w.x*n,y:C.y+w.y*n},N={x:S.x+w.x*i,y:S.y+w.y*i},A={x:(k.x+N.x)/2,y:(k.y+N.y)/2};const M=[k,A,N];k={x:C.x-w.x*r,y:C.y-w.y*r},N={x:S.x-w.x*o,y:S.y-w.y*o},A={x:(k.x+N.x)/2,y:(k.y+N.y)/2};const I=[N,A,k],O=X.makeline(I[2],M[0]),R=X.makeline(M[2],I[0]),P=[O,new xe(M),R,new xe(I)];return new _n(P)}const a=this.reduce(),s=a.length,u=[];let l=[],c,d=0,f=this.length();const h=typeof i<"u"&&typeof o<"u";function p(w,C,S,k,A){return function(N){const M=k/S,I=(k+A)/S,O=C-w;return X.map(N,0,1,w+M*O,w+I*O)}}a.forEach(function(w){const C=w.length();h?(u.push(w.scale(p(n,i,f,d,C))),l.push(w.scale(p(-r,-o,f,d,C)))):(u.push(w.scale(n)),l.push(w.scale(-r))),d+=C}),l=l.map(function(w){return c=w.points,c[3]?w.points=[c[3],c[2],c[1],c[0]]:w.points=[c[2],c[1],c[0]],w}).reverse();const m=u[0].points[0],b=u[s-1].points[u[s-1].points.length-1],v=l[s-1].points[l[s-1].points.length-1],g=l[0].points[0],_=X.makeline(v,m),y=X.makeline(b,g),x=[_].concat(u).concat([y]).concat(l);return new _n(x)}outlineshapes(n,r,i){r=r||n;const o=this.outline(n,r).curves,a=[];for(let s=1,u=o.length;s<u/2;s++){const l=X.makeshape(o[s],o[u-s],i);l.startcap.virtual=s>1,l.endcap.virtual=s<u/2-1,a.push(l)}return a}intersects(n,r){return n?n.p1&&n.p2?this.lineIntersects(n):(n instanceof xe&&(n=n.reduce()),this.curveintersects(this.reduce(),n,r)):this.selfintersects(r)}lineIntersects(n){const r=Ov(n.p1.x,n.p2.x),i=Ov(n.p1.y,n.p2.y),o=jv(n.p1.x,n.p2.x),a=jv(n.p1.y,n.p2.y);return X.roots(this.points,n).filter(s=>{var u=this.get(s);return X.between(u.x,r,o)&&X.between(u.y,i,a)})}selfintersects(n){const r=this.reduce(),i=r.length-2,o=[];for(let a=0,s,u,l;a<i;a++)u=r.slice(a,a+1),l=r.slice(a+2),s=this.curveintersects(u,l,n),o.push(...s);return o}curveintersects(n,r,i){const o=[];n.forEach(function(s){r.forEach(function(u){s.overlaps(u)&&o.push({left:s,right:u})})});let a=[];return o.forEach(function(s){const u=X.pairiteration(s.left,s.right,i);u.length>0&&(a=a.concat(u))}),a}arcs(n){return n=n||.5,this._iterate(n,[])}_error(n,r,i,o){const a=(o-i)/4,s=this.get(i+a),u=this.get(o-a),l=X.dist(n,r),c=X.dist(n,s),d=X.dist(n,u);return ln(c-l)+ln(d-l)}_iterate(n,r){let i=0,o=1,a;do{a=0,o=1;let s=this.get(i),u,l,c,d,f=!1,h=!1,p,m=o,b=1;do if(h=f,d=c,m=(i+o)/2,u=this.get(m),l=this.get(o),c=X.getccenter(s,u,l),c.interval={start:i,end:o},f=this._error(c,s,i,o)<=n,p=h&&!f,p||(b=o),f){if(o>=1){if(c.interval.end=b=1,d=c,o>1){let g={x:c.x+c.r*tR(c.e),y:c.y+c.r*nR(c.e)};c.e+=X.angle({x:c.x,y:c.y},g,this.get(1))}break}o=o+(o-i)/2}else o=m;while(!p&&a++<100);if(a>=100)break;d=d||c,r.push(d),i=b}while(o<1);return r}}function Fc(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function oR(e){if(Array.isArray(e))return e}function aR(e){if(Array.isArray(e))return Fc(e)}function sR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uR(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(u.push(i.value),u.length!==n);l=!0);}catch(d){c=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return u}}function cR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fR(e,n){if(e==null)return{};var r,i,o=dR(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],n.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function dR(e,n){if(e==null)return{};var r={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(n.includes(i))continue;r[i]=e[i]}return r}function hR(e,n){return oR(e)||uR(e,n)||t_(e,n)||cR()}function pR(e){return aR(e)||sR(e)||t_(e)||lR()}function gR(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function mR(e){var n=gR(e,"string");return typeof n=="symbol"?n:n+""}function t_(e,n){if(e){if(typeof e=="string")return Fc(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fc(e,n):void 0}}var vR=(function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=(n instanceof Array?n.length?n:[void 0]:[n]).map(function(u){return{keyAccessor:u,isProp:!(u instanceof Function)}}),a=e.reduce(function(u,l){var c=u,d=l;return o.forEach(function(f,h){var p=f.keyAccessor,m=f.isProp,b;if(m){var v=d,g=v[p],_=fR(v,[p].map(mR));b=g,d=_}else b=p(d,h);h+1<o.length?(c.hasOwnProperty(b)||(c[b]={}),c=c[b]):r?(c.hasOwnProperty(b)||(c[b]=[]),c[b].push(d)):c[b]=d}),u},{});r instanceof Function&&(function u(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;c===o.length?Object.keys(l).forEach(function(d){return l[d]=r(l[d])}):Object.values(l).forEach(function(d){return u(d,c+1)})})(a);var s=a;return i&&(s=[],(function u(l){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];c.length===o.length?s.push({keys:c,vals:l}):Object.entries(l).forEach(function(d){var f=hR(d,2),h=f[0],p=f[1];return u(p,[].concat(pR(c),[h]))})})(a),n instanceof Array&&n.length===0&&s.length===1&&(s[0].keys=[])),s});const yR=xx("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928");function bR(e,n){n===void 0&&(n={});var r=n.insertAt;if(!(typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",r==="top"&&i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}var _R=`.force-graph-container canvas {
  display: block;
  user-select: none;
  outline: none;
  -webkit-tap-highlight-color: transparent;
}

.force-graph-container .clickable {
  cursor: pointer;
}

.force-graph-container .grabbable {
  cursor: move;
  cursor: grab;
  cursor: -moz-grab;
  cursor: -webkit-grab;
}

.force-graph-container .grabbable:active {
  cursor: grabbing;
  cursor: -moz-grabbing;
  cursor: -webkit-grabbing;
}
`;bR(_R);function $c(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=Array(n);r<n;r++)i[r]=e[r];return i}function xR(e){if(Array.isArray(e))return e}function wR(e){if(Array.isArray(e))return $c(e)}function qv(e,n,r){if(n_())return Reflect.construct.apply(null,arguments);var i=[null];i.push.apply(i,n);var o=new(e.bind.apply(e,i));return o}function An(e,n,r){return(n=MR(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function n_(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n_=function(){return!!e})()}function CR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ER(e,n){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,o,a,s,u=[],l=!0,c=!1;try{if(a=(r=r.call(e)).next,n!==0)for(;!(l=(i=a.call(r)).done)&&(u.push(i.value),u.length!==n);l=!0);}catch(d){c=!0,o=d}finally{try{if(!l&&r.return!=null&&(s=r.return(),Object(s)!==s))return}finally{if(c)throw o}}return u}}function SR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dv(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,i)}return r}function Ut(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?Dv(Object(r),!0).forEach(function(i){An(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Dv(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function xn(e,n){return xR(e)||ER(e,n)||r_(e,n)||SR()}function Ze(e){return wR(e)||CR(e)||r_(e)||kR()}function NR(e,n){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,n);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function MR(e){var n=NR(e,"string");return typeof n=="symbol"?n:n+""}function Bc(e){"@babel/helpers - typeof";return Bc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bc(e)}function r_(e,n){if(e){if(typeof e=="string")return $c(e,n);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$c(e,n):void 0}}var AR=_x(yR);function Lv(e,n,r){!n||typeof r!="string"||e.filter(function(i){return!i[r]}).forEach(function(i){i[r]=AR(n(i))})}function RR(e,n){var r=e.nodes,i=e.links,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.nodeFilter,s=a===void 0?function(){return!0}:a,u=o.onLoopError,l=u===void 0?function(p){throw"Invalid DAG structure! Found cycle in node path: ".concat(p.join(" -> "),".")}:u,c={};r.forEach(function(p){return c[n(p)]={data:p,out:[],depth:-1,skip:!s(p)}}),i.forEach(function(p){var m=p.source,b=p.target,v=x(m),g=x(b);if(!c.hasOwnProperty(v))throw"Missing source node with id: ".concat(v);if(!c.hasOwnProperty(g))throw"Missing target node with id: ".concat(g);var _=c[v],y=c[g];_.out.push(y);function x(w){return Bc(w)==="object"?n(w):w}});var d=[];h(Object.values(c));var f=Object.assign.apply(Object,[{}].concat(Ze(Object.entries(c).filter(function(p){var m=xn(p,2),b=m[1];return!b.skip}).map(function(p){var m=xn(p,2),b=m[0],v=m[1];return An({},b,v.depth)}))));return f;function h(p){for(var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],b=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,v=function(){var x=p[g];if(m.indexOf(x)!==-1){var w=[].concat(Ze(m.slice(m.indexOf(x))),[x]).map(function(C){return n(C.data)});return d.some(function(C){return C.length===w.length&&C.every(function(S,k){return S===w[k]})})||(d.push(w),l(w)),1}b>x.depth&&(x.depth=b,h(x.out,[].concat(Ze(m),[x]),b+(x.skip?0:1)))},g=0,_=p.length;g<_;g++)v()}}var IR=2,qe=function(n,r){return r.onNeedsRedraw&&r.onNeedsRedraw()},zv=function(n,r){if(!r.isShadow){var i=ye(r.linkDirectionalParticles);r.graphData.links.forEach(function(o){var a=Math.round(Math.abs(i(o)));a?o.__photons=Ze(Array(a)).map(function(){return{}}):delete o.__photons})}},ar=Nl({props:{graphData:{default:{nodes:[],links:[]},onChange:function(n,r){r.engineRunning=!1,zv(n,r)}},dagMode:{onChange:function(n,r){!n&&(r.graphData.nodes||[]).forEach(function(i){return i.fx=i.fy=void 0})}},dagLevelDistance:{},dagNodeFilter:{default:function(n){return!0}},onDagError:{triggerUpdate:!1},nodeRelSize:{default:4,triggerUpdate:!1,onChange:qe},nodeId:{default:"id"},nodeVal:{default:"val",triggerUpdate:!1,onChange:qe},nodeColor:{default:"color",triggerUpdate:!1,onChange:qe},nodeAutoColorBy:{},nodeCanvasObject:{triggerUpdate:!1,onChange:qe},nodeCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:qe},nodeVisibility:{default:!0,triggerUpdate:!1,onChange:qe},linkSource:{default:"source"},linkTarget:{default:"target"},linkVisibility:{default:!0,triggerUpdate:!1,onChange:qe},linkColor:{default:"color",triggerUpdate:!1,onChange:qe},linkAutoColorBy:{},linkLineDash:{triggerUpdate:!1,onChange:qe},linkWidth:{default:1,triggerUpdate:!1,onChange:qe},linkCurvature:{default:0,triggerUpdate:!1,onChange:qe},linkCanvasObject:{triggerUpdate:!1,onChange:qe},linkCanvasObjectMode:{default:function(){return"replace"},triggerUpdate:!1,onChange:qe},linkDirectionalArrowLength:{default:0,triggerUpdate:!1,onChange:qe},linkDirectionalArrowColor:{triggerUpdate:!1,onChange:qe},linkDirectionalArrowRelPos:{default:.5,triggerUpdate:!1,onChange:qe},linkDirectionalParticles:{default:0,triggerUpdate:!1,onChange:zv},linkDirectionalParticleSpeed:{default:.01,triggerUpdate:!1},linkDirectionalParticleOffset:{default:0,triggerUpdate:!1},linkDirectionalParticleWidth:{default:4,triggerUpdate:!1},linkDirectionalParticleColor:{triggerUpdate:!1},linkDirectionalParticleCanvasObject:{triggerUpdate:!1},globalScale:{default:1,triggerUpdate:!1},d3AlphaMin:{default:0,triggerUpdate:!1},d3AlphaDecay:{default:.0228,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaDecay(n)}},d3AlphaTarget:{default:0,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.alphaTarget(n)}},d3VelocityDecay:{default:.4,triggerUpdate:!1,onChange:function(n,r){r.forceLayout.velocityDecay(n)}},warmupTicks:{default:0,triggerUpdate:!1},cooldownTicks:{default:1/0,triggerUpdate:!1},cooldownTime:{default:15e3,triggerUpdate:!1},onUpdate:{default:function(){},triggerUpdate:!1},onFinishUpdate:{default:function(){},triggerUpdate:!1},onEngineTick:{default:function(){},triggerUpdate:!1},onEngineStop:{default:function(){},triggerUpdate:!1},onNeedsRedraw:{triggerUpdate:!1},isShadow:{default:!1,triggerUpdate:!1}},methods:{d3Force:function(n,r,i){return i===void 0?n.forceLayout.force(r):(n.forceLayout.force(r,i),this)},d3ReheatSimulation:function(n){return n.forceLayout.alpha(1),this.resetCountdown(),this},resetCountdown:function(n){return n.cntTicks=0,n.startTickTime=new Date,n.engineRunning=!0,this},isEngineRunning:function(n){return!!n.engineRunning},tickFrame:function(n){return!n.isShadow&&r(),o(),!n.isShadow&&a(),!n.isShadow&&s(),i(),this;function r(){n.engineRunning&&(++n.cntTicks>n.cooldownTicks||new Date-n.startTickTime>n.cooldownTime||n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin?(n.engineRunning=!1,n.onEngineStop()):(n.forceLayout.tick(),n.onEngineTick()))}function i(){var u=ye(n.nodeVisibility),l=ye(n.nodeVal),c=ye(n.nodeColor),d=ye(n.nodeCanvasObjectMode),f=n.ctx,h=n.isShadow/n.globalScale,p=n.graphData.nodes.filter(u);f.save(),p.forEach(function(m){var b=d(m);if(n.nodeCanvasObject&&(b==="before"||b==="replace")&&(n.nodeCanvasObject(m,f,n.globalScale),b==="replace")){f.restore();return}var v=Math.sqrt(Math.max(0,l(m)||1))*n.nodeRelSize+h;f.beginPath(),f.arc(m.x,m.y,v,0,2*Math.PI,!1),f.fillStyle=c(m)||"rgba(31, 120, 180, 0.92)",f.fill(),n.nodeCanvasObject&&b==="after"&&n.nodeCanvasObject(m,n.ctx,n.globalScale)}),f.restore()}function o(){var u=ye(n.linkVisibility),l=ye(n.linkColor),c=ye(n.linkWidth),d=ye(n.linkLineDash),f=ye(n.linkCurvature),h=ye(n.linkCanvasObjectMode),p=n.ctx,m=n.isShadow*2,b=n.graphData.links.filter(u);b.forEach(C);var v=[],g=[],_=b;if(n.linkCanvasObject){var y=[],x=[];b.forEach(function(S){return({before:v,after:g,replace:y}[h(S)]||x).push(S)}),_=[].concat(Ze(v),g,x),v=v.concat(y)}p.save(),v.forEach(function(S){return n.linkCanvasObject(S,p,n.globalScale)}),p.restore();var w=vR(_,[l,c,d]);p.save(),Object.entries(w).forEach(function(S){var k=xn(S,2),A=k[0],N=k[1],M=!A||A==="undefined"?"rgba(0,0,0,0.15)":A;Object.entries(N).forEach(function(I){var O=xn(I,2),R=O[0],P=O[1],j=(R||1)/n.globalScale+m;Object.entries(P).forEach(function(L){var z=xn(L,2);z[0];var F=z[1],Y=d(F[0]);p.beginPath(),F.forEach(function(Z){var W=Z.source,Q=Z.target;if(!(!W||!Q||!W.hasOwnProperty("x")||!Q.hasOwnProperty("x"))){p.moveTo(W.x,W.y);var q=Z.__controlPoints;q?p[q.length===2?"quadraticCurveTo":"bezierCurveTo"].apply(p,Ze(q).concat([Q.x,Q.y])):p.lineTo(Q.x,Q.y)}}),p.strokeStyle=M,p.lineWidth=j,p.setLineDash(Y||[]),p.stroke()})})}),p.restore(),p.save(),g.forEach(function(S){return n.linkCanvasObject(S,p,n.globalScale)}),p.restore();function C(S){var k=f(S);if(!k){S.__controlPoints=null;return}var A=S.source,N=S.target;if(!(!A||!N||!A.hasOwnProperty("x")||!N.hasOwnProperty("x"))){var M=Math.sqrt(Math.pow(N.x-A.x,2)+Math.pow(N.y-A.y,2));if(M>0){var I=Math.atan2(N.y-A.y,N.x-A.x),O=M*k,R={x:(A.x+N.x)/2+O*Math.cos(I-Math.PI/2),y:(A.y+N.y)/2+O*Math.sin(I-Math.PI/2)};S.__controlPoints=[R.x,R.y]}else{var P=k*70;S.__controlPoints=[N.x,N.y-P,N.x+P,N.y]}}}}function a(){var u=1.6,l=.2,c=ye(n.linkDirectionalArrowLength),d=ye(n.linkDirectionalArrowRelPos),f=ye(n.linkVisibility),h=ye(n.linkDirectionalArrowColor||n.linkColor),p=ye(n.nodeVal),m=n.ctx;m.save(),n.graphData.links.filter(f).forEach(function(b){var v=c(b);if(!(!v||v<0)){var g=b.source,_=b.target;if(!(!g||!_||!g.hasOwnProperty("x")||!_.hasOwnProperty("x"))){var y=Math.sqrt(Math.max(0,p(g)||1))*n.nodeRelSize,x=Math.sqrt(Math.max(0,p(_)||1))*n.nodeRelSize,w=Math.min(1,Math.max(0,d(b))),C=h(b)||"rgba(0,0,0,0.28)",S=v/u/2,k=b.__controlPoints&&qv(xe,[g.x,g.y].concat(Ze(b.__controlPoints),[_.x,_.y])),A=k?function(j){return k.get(j)}:function(j){return{x:g.x+(_.x-g.x)*j||0,y:g.y+(_.y-g.y)*j||0}},N=k?k.length():Math.sqrt(Math.pow(_.x-g.x,2)+Math.pow(_.y-g.y,2)),M=y+v+(N-y-x-v)*w,I=A(M/N),O=A((M-v)/N),R=A((M-v*(1-l))/N),P=Math.atan2(I.y-O.y,I.x-O.x)-Math.PI/2;m.beginPath(),m.moveTo(I.x,I.y),m.lineTo(O.x+S*Math.cos(P),O.y+S*Math.sin(P)),m.lineTo(R.x,R.y),m.lineTo(O.x-S*Math.cos(P),O.y-S*Math.sin(P)),m.fillStyle=C,m.fill()}}}),m.restore()}function s(){var u=ye(n.linkDirectionalParticles),l=ye(n.linkDirectionalParticleSpeed),c=ye(n.linkDirectionalParticleOffset),d=ye(n.linkDirectionalParticleWidth),f=ye(n.linkVisibility),h=ye(n.linkDirectionalParticleColor||n.linkColor),p=n.ctx;p.save(),n.graphData.links.filter(f).forEach(function(m){var b=u(m);if(!(!m.hasOwnProperty("__photons")||!m.__photons.length)){var v=m.source,g=m.target;if(!(!v||!g||!v.hasOwnProperty("x")||!g.hasOwnProperty("x"))){var _=l(m),y=Math.abs(c(m)),x=m.__photons||[],w=Math.max(0,d(m)/2)/Math.sqrt(n.globalScale),C=h(m)||"rgba(0,0,0,0.28)";p.fillStyle=C;var S=m.__controlPoints?qv(xe,[v.x,v.y].concat(Ze(m.__controlPoints),[g.x,g.y])):null,k=0,A=!1;x.forEach(function(N){var M=!!N.__singleHop;if(N.hasOwnProperty("__progressRatio")||(N.__progressRatio=M?0:(k+y)/b),!M&&k++,N.__progressRatio+=_,N.__progressRatio>=1)if(!M)N.__progressRatio=N.__progressRatio%1;else{A=!0;return}var I=N.__progressRatio,O=S?S.get(I):{x:v.x+(g.x-v.x)*I||0,y:v.y+(g.y-v.y)*I||0};n.linkDirectionalParticleCanvasObject?n.linkDirectionalParticleCanvasObject(O.x,O.y,m,p,n.globalScale):(p.beginPath(),p.arc(O.x,O.y,w,0,2*Math.PI,!1),p.fill())}),A&&(m.__photons=m.__photons.filter(function(N){return!N.__singleHop||N.__progressRatio<=1}))}}}),p.restore()}},emitParticle:function(n,r){return r&&(!r.__photons&&(r.__photons=[]),r.__photons.push({__singleHop:!0})),this}},stateInit:function(){return{forceLayout:ZA().force("link",$A()).force("charge",KA()).force("center",HM()).force("dagRadial",null).stop(),engineRunning:!1}},init:function(n,r){r.ctx=n},update:function(n,r){n.engineRunning=!1,n.onUpdate(),n.nodeAutoColorBy!==null&&Lv(n.graphData.nodes,ye(n.nodeAutoColorBy),n.nodeColor),n.linkAutoColorBy!==null&&Lv(n.graphData.links,ye(n.linkAutoColorBy),n.linkColor),n.graphData.links.forEach(function(h){h.source=h[n.linkSource],h.target=h[n.linkTarget]}),n.forceLayout.stop().alpha(1).nodes(n.graphData.nodes);var i=n.forceLayout.force("link");i&&i.id(function(h){return h[n.nodeId]}).links(n.graphData.links);var o=n.dagMode&&RR(n.graphData,function(h){return h[n.nodeId]},{nodeFilter:n.dagNodeFilter,onLoopError:n.onDagError||void 0}),a=Math.max.apply(Math,Ze(Object.values(o||[]))),s=n.dagLevelDistance||n.graphData.nodes.length/(a||1)*IR*(["radialin","radialout"].indexOf(n.dagMode)!==-1?.7:1);if(["lr","rl","td","bu"].includes(r.dagMode)){var u=["lr","rl"].includes(r.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(h){return delete h[u]})}if(["lr","rl","td","bu"].includes(n.dagMode)){var l=["rl","bu"].includes(n.dagMode),c=function(p){return(o[p[n.nodeId]]-a/2)*s*(l?-1:1)},d=["lr","rl"].includes(n.dagMode)?"fx":"fy";n.graphData.nodes.filter(n.dagNodeFilter).forEach(function(h){return h[d]=c(h)})}n.forceLayout.force("dagRadial",["radialin","radialout"].indexOf(n.dagMode)!==-1?XA(function(h){var p=o[h[n.nodeId]]||-1;return(n.dagMode==="radialin"?a-p:p)*s}).strength(function(h){return n.dagNodeFilter(h)?1:0}):null);for(var f=0;f<n.warmupTicks&&!(n.d3AlphaMin>0&&n.forceLayout.alpha()<n.d3AlphaMin);f++)n.forceLayout.tick();this.resetCountdown(),n.onFinishUpdate()}});function i_(e,n){var r=e instanceof Array?e:[e],i=new n;return i._destructor&&i._destructor(),{linkProp:function(a){return{default:i[a](),onChange:function(u,l){r.forEach(function(c){return l[c][a](u)})},triggerUpdate:!1}},linkMethod:function(a){return function(s){for(var u=arguments.length,l=new Array(u>1?u-1:0),c=1;c<u;c++)l[c-1]=arguments[c];var d=[];return r.forEach(function(f){var h=s[f],p=h[a].apply(h,l);p!==h&&d.push(p)}),d.length?d[0]:this}}}}var TR=800,PR=4,OR=5,o_=i_("forceGraph",ar),jR=i_(["forceGraph","shadowGraph"],ar),qR=Object.assign.apply(Object,Ze(["nodeColor","nodeAutoColorBy","nodeCanvasObject","nodeCanvasObjectMode","linkColor","linkAutoColorBy","linkLineDash","linkWidth","linkCanvasObject","linkCanvasObjectMode","linkDirectionalArrowLength","linkDirectionalArrowColor","linkDirectionalArrowRelPos","linkDirectionalParticles","linkDirectionalParticleSpeed","linkDirectionalParticleOffset","linkDirectionalParticleWidth","linkDirectionalParticleColor","linkDirectionalParticleCanvasObject","dagMode","dagLevelDistance","dagNodeFilter","onDagError","d3AlphaMin","d3AlphaDecay","d3VelocityDecay","warmupTicks","cooldownTicks","cooldownTime","onEngineTick","onEngineStop"].map(function(e){return An({},e,o_.linkProp(e))})).concat(Ze(["nodeRelSize","nodeId","nodeVal","nodeVisibility","linkSource","linkTarget","linkVisibility","linkCurvature"].map(function(e){return An({},e,jR.linkProp(e))})))),DR=Object.assign.apply(Object,Ze(["d3Force","d3ReheatSimulation","emitParticle"].map(function(e){return An({},e,o_.linkMethod(e))})));function yc(e){if(e.canvas){var n=e.canvas.width,r=e.canvas.height;n===300&&r===150&&(n=r=0);var i=window.devicePixelRatio;n/=i,r/=i,[e.canvas,e.shadowCanvas].forEach(function(a){a.style.width="".concat(e.width,"px"),a.style.height="".concat(e.height,"px"),a.width=e.width*i,a.height=e.height*i,!n&&!r&&a.getContext("2d").scale(i,i)});var o=at(e.canvas).k;e.zoom.translateBy(e.zoom.__baseElem,(e.width-n)/2/o,(e.height-r)/2/o),e.needsRedraw=!0}}function a_(e){var n=window.devicePixelRatio;e.setTransform(n,0,0,n,0,0)}function Fv(e,n,r){e.save(),a_(e),e.clearRect(0,0,n,r),e.restore()}var LR=Nl({props:Ut({width:{default:window.innerWidth,onChange:function(n,r){return yc(r)},triggerUpdate:!1},height:{default:window.innerHeight,onChange:function(n,r){return yc(r)},triggerUpdate:!1},graphData:{default:{nodes:[],links:[]},onChange:function(n,r){[n.nodes,n.links].every(function(o){return(o||[]).every(function(a){return!a.hasOwnProperty("__indexColor")})})&&r.colorTracker.reset(),[{type:"Node",objs:n.nodes},{type:"Link",objs:n.links}].forEach(i),r.forceGraph.graphData(n),r.shadowGraph.graphData(n);function i(o){var a=o.type,s=o.objs;s.filter(function(u){if(!u.hasOwnProperty("__indexColor"))return!0;var l=r.colorTracker.lookup(u.__indexColor);return!l||!l.hasOwnProperty("d")||l.d!==u}).forEach(function(u){u.__indexColor=r.colorTracker.register({type:a,d:u})})}},triggerUpdate:!1},backgroundColor:{onChange:function(n,r){r.canvas&&n&&(r.canvas.style.background=n)},triggerUpdate:!1},nodeLabel:{default:"name",triggerUpdate:!1},nodePointerAreaPaint:{onChange:function(n,r){r.shadowGraph.nodeCanvasObject(n?function(i,o,a){return n(i,i.__indexColor,o,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkPointerAreaPaint:{onChange:function(n,r){r.shadowGraph.linkCanvasObject(n?function(i,o,a){return n(i,i.__indexColor,o,a)}:null),r.flushShadowCanvas&&r.flushShadowCanvas()},triggerUpdate:!1},linkLabel:{default:"name",triggerUpdate:!1},linkHoverPrecision:{default:4,triggerUpdate:!1},minZoom:{default:.01,onChange:function(n,r){r.zoom.scaleExtent([n,r.zoom.scaleExtent()[1]])},triggerUpdate:!1},maxZoom:{default:1e3,onChange:function(n,r){r.zoom.scaleExtent([r.zoom.scaleExtent()[0],n])},triggerUpdate:!1},enableNodeDrag:{default:!0,triggerUpdate:!1},enableZoomInteraction:{default:!0,triggerUpdate:!1},enablePanInteraction:{default:!0,triggerUpdate:!1},enableZoomPanInteraction:{default:!0,triggerUpdate:!1},enablePointerInteraction:{default:!0,onChange:function(n,r){r.hoverObj=null},triggerUpdate:!1},autoPauseRedraw:{default:!0,triggerUpdate:!1},onNodeDrag:{default:function(){},triggerUpdate:!1},onNodeDragEnd:{default:function(){},triggerUpdate:!1},onNodeClick:{triggerUpdate:!1},onNodeRightClick:{triggerUpdate:!1},onNodeHover:{triggerUpdate:!1},onLinkClick:{triggerUpdate:!1},onLinkRightClick:{triggerUpdate:!1},onLinkHover:{triggerUpdate:!1},onBackgroundClick:{triggerUpdate:!1},onBackgroundRightClick:{triggerUpdate:!1},showPointerCursor:{default:!0,triggerUpdate:!1},onZoom:{triggerUpdate:!1},onZoomEnd:{triggerUpdate:!1},onRenderFramePre:{triggerUpdate:!1},onRenderFramePost:{triggerUpdate:!1}},qR),aliases:{stopAnimation:"pauseAnimation"},methods:Ut({graph2ScreenCoords:function(n,r,i){var o=at(n.canvas);return{x:r*o.k+o.x,y:i*o.k+o.y}},screen2GraphCoords:function(n,r,i){var o=at(n.canvas);return{x:(r-o.x)/o.k,y:(i-o.y)/o.k}},centerAt:function(n,r,i,o){if(!n.canvas)return null;if(r!==void 0||i!==void 0){var a=Object.assign({},r!==void 0?{x:r}:{},i!==void 0?{y:i}:{});return o?n.tweenGroup.add(new lv(s()).to(a,o).easing(Ot.Quadratic.Out).onUpdate(u).start()):u(a),this}return s();function s(){var l=at(n.canvas);return{x:(n.width/2-l.x)/l.k,y:(n.height/2-l.y)/l.k}}function u(l){var c=l.x,d=l.y;n.zoom.translateTo(n.zoom.__baseElem,c===void 0?s().x:c,d===void 0?s().y:d),n.needsRedraw=!0}},zoom:function(n,r,i){if(!n.canvas)return null;if(r!==void 0)return i?n.tweenGroup.add(new lv({k:o()}).to({k:r},i).easing(Ot.Quadratic.Out).onUpdate(function(s){var u=s.k;return a(u)}).start()):a(r),this;return o();function o(){return at(n.canvas).k}function a(s){n.zoom.scaleTo(n.zoom.__baseElem,s),n.needsRedraw=!0}},zoomToFit:function(n){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,o=arguments.length,a=new Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];var u=this.getGraphBbox.apply(this,a);if(u){var l={x:(u.x[0]+u.x[1])/2,y:(u.y[0]+u.y[1])/2},c=Math.max(1e-12,Math.min(1e12,(n.width-i*2)/(u.x[1]-u.x[0]),(n.height-i*2)/(u.y[1]-u.y[0])));this.centerAt(l.x,l.y,r),this.zoom(c,r)}return this},getGraphBbox:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){return!0},i=ye(n.nodeVal),o=function(u){return Math.sqrt(Math.max(0,i(u)||1))*n.nodeRelSize},a=n.graphData.nodes.filter(r).map(function(s){return{x:s.x,y:s.y,r:o(s)}});return a.length?{x:[Gl(a,function(s){return s.x-s.r}),Wl(a,function(s){return s.x+s.r})],y:[Gl(a,function(s){return s.y-s.r}),Wl(a,function(s){return s.y+s.r})]}:null},pauseAnimation:function(n){return n.animationFrameRequestId&&(cancelAnimationFrame(n.animationFrameRequestId),n.animationFrameRequestId=null),this},resumeAnimation:function(n){return n.animationFrameRequestId||this._animationCycle(),this},_destructor:function(){this.pauseAnimation(),this.graphData({nodes:[],links:[]})}},DR),stateInit:function(){return{lastSetZoom:1,zoom:Xc(),forceGraph:new ar,shadowGraph:new ar().cooldownTicks(0).nodeColor("__indexColor").linkColor("__indexColor").isShadow(!0),colorTracker:new xM,tweenGroup:new Ab}},init:function(n,r){var i=this;n.innerHTML="";var o=document.createElement("div");o.classList.add("force-graph-container"),o.style.position="relative",n.appendChild(o),r.canvas=document.createElement("canvas"),r.backgroundColor&&(r.canvas.style.background=r.backgroundColor),o.appendChild(r.canvas),r.shadowCanvas=document.createElement("canvas");var a=r.canvas.getContext("2d"),s=r.shadowCanvas.getContext("2d",{willReadFrequently:!0}),u={x:-1e12,y:-1e12},l=function(){var f=null,h=window.devicePixelRatio,p=u.x>0&&u.y>0?s.getImageData(u.x*h,u.y*h,1,1):null;return p&&(f=r.colorTracker.lookup(p.data)),f};De(r.canvas).call(Kc().subject(function(){if(!r.enableNodeDrag)return null;var d=l();return d&&d.type==="Node"?d.d:null}).on("start",function(d){var f=d.subject;f.__initialDragPos={x:f.x,y:f.y,fx:f.fx,fy:f.fy},d.active||(f.fx=f.x,f.fy=f.y),r.canvas.classList.add("grabbable")}).on("drag",function(d){var f=d.subject,h=f.__initialDragPos,p=d,m=at(r.canvas).k,b={x:h.x+(p.x-h.x)/m-f.x,y:h.y+(p.y-h.y)/m-f.y};["x","y"].forEach(function(v){return f["f".concat(v)]=f[v]=h[v]+(p[v]-h[v])/m}),!(!f.__dragged&&OR>=Math.sqrt(CN(["x","y"].map(function(v){return Math.pow(d[v]-h[v],2)}))))&&(r.forceGraph.d3AlphaTarget(.3).resetCountdown(),r.isPointerDragging=!0,f.__dragged=!0,r.onNodeDrag(f,b))}).on("end",function(d){var f=d.subject,h=f.__initialDragPos,p={x:f.x-h.x,y:f.y-h.y};h.fx===void 0&&(f.fx=void 0),h.fy===void 0&&(f.fy=void 0),delete f.__initialDragPos,r.forceGraph.d3AlphaTarget()&&r.forceGraph.d3AlphaTarget(0).resetCountdown(),r.canvas.classList.remove("grabbable"),r.isPointerDragging=!1,f.__dragged&&(delete f.__dragged,r.onNodeDragEnd(f,p))})),r.zoom(r.zoom.__baseElem=De(r.canvas)),r.zoom.__baseElem.on("dblclick.zoom",null),r.zoom.filter(function(d){return!d.button&&r.enableZoomPanInteraction&&(d.type!=="wheel"||ye(r.enableZoomInteraction)(d))&&(d.type==="wheel"||ye(r.enablePanInteraction)(d))}).on("zoom",function(d){var f=d.transform;[a,s].forEach(function(h){a_(h),h.translate(f.x,f.y),h.scale(f.k,f.k)}),r.isPointerDragging=!0,r.onZoom&&r.onZoom(Ut(Ut({},f),i.centerAt())),r.needsRedraw=!0}).on("end",function(d){r.isPointerDragging=!1,r.onZoomEnd&&r.onZoomEnd(Ut(Ut({},d.transform),i.centerAt()))}),yc(r),r.forceGraph.onNeedsRedraw(function(){return r.needsRedraw=!0}).onFinishUpdate(function(){at(r.canvas).k===r.lastSetZoom&&r.graphData.nodes.length&&(r.zoom.scaleTo(r.zoom.__baseElem,r.lastSetZoom=PR/Math.cbrt(r.graphData.nodes.length)),r.needsRedraw=!0)}),r.tooltip=new BM(o),["pointermove","pointerdown"].forEach(function(d){return o.addEventListener(d,function(f){d==="pointerdown"&&(r.isPointerPressed=!0,r.pointerDownEvent=f),!r.isPointerDragging&&f.type==="pointermove"&&r.onBackgroundClick&&(f.pressure>0||r.isPointerPressed)&&(f.pointerType==="mouse"||f.movementX===void 0||[f.movementX,f.movementY].some(function(m){return Math.abs(m)>1}))&&(r.isPointerDragging=!0);var h=p(o);u.x=f.pageX-h.left,u.y=f.pageY-h.top;function p(m){var b=m.getBoundingClientRect(),v=window.pageXOffset||document.documentElement.scrollLeft,g=window.pageYOffset||document.documentElement.scrollTop;return{top:b.top+g,left:b.left+v}}},{passive:!0})}),o.addEventListener("pointerup",function(d){if(r.isPointerPressed){if(r.isPointerPressed=!1,r.isPointerDragging){r.isPointerDragging=!1;return}var f=[d,r.pointerDownEvent];requestAnimationFrame(function(){if(d.button===0)if(r.hoverObj){var h=r["on".concat(r.hoverObj.type,"Click")];h&&h.apply(void 0,[r.hoverObj.d].concat(f))}else r.onBackgroundClick&&r.onBackgroundClick.apply(r,f);if(d.button===2)if(r.hoverObj){var p=r["on".concat(r.hoverObj.type,"RightClick")];p&&p.apply(void 0,[r.hoverObj.d].concat(f))}else r.onBackgroundRightClick&&r.onBackgroundRightClick.apply(r,f)})}},{passive:!0}),o.addEventListener("contextmenu",function(d){return!r.onBackgroundRightClick&&!r.onNodeRightClick&&!r.onLinkRightClick?!0:(d.preventDefault(),!1)}),r.forceGraph(a),r.shadowGraph(s);var c=MN(function(){Fv(s,r.width,r.height),r.shadowGraph.linkWidth(function(f){return ye(r.linkWidth)(f)+r.linkHoverPrecision});var d=at(r.canvas);r.shadowGraph.globalScale(d.k).tickFrame()},TR);r.flushShadowCanvas=c.flush,(this._animationCycle=function d(){var f=!r.autoPauseRedraw||!!r.needsRedraw||r.forceGraph.isEngineRunning()||r.graphData.links.some(function(y){return y.__photons&&y.__photons.length});if(r.needsRedraw=!1,r.enablePointerInteraction){var h=r.isPointerDragging?null:l();if(h!==r.hoverObj){var p=r.hoverObj,m=p?p.type:null,b=h?h.type:null;if(m&&m!==b){var v=r["on".concat(m,"Hover")];v&&v(null,p.d)}if(b){var g=r["on".concat(b,"Hover")];g&&g(h.d,m===b?p.d:null)}r.tooltip.content(h&&ye(r["".concat(h.type.toLowerCase(),"Label")])(h.d)||null),r.canvas.classList[(h&&r["on".concat(b,"Click")]||!h&&r.onBackgroundClick)&&ye(r.showPointerCursor)(h?.d)?"add":"remove"]("clickable"),r.hoverObj=h}f&&c()}if(f){Fv(a,r.width,r.height);var _=at(r.canvas).k;r.onRenderFramePre&&r.onRenderFramePre(a,_),r.forceGraph.globalScale(_).tickFrame(),r.onRenderFramePost&&r.onRenderFramePost(a,_)}r.tweenGroup.update(),r.animationFrameRequestId=requestAnimationFrame(d)})()},update:function(n){}}),bc={exports:{}},_c,$v;function zR(){if($v)return _c;$v=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return _c=e,_c}var xc,Bv;function FR(){if(Bv)return xc;Bv=1;var e=zR();function n(){}function r(){}return r.resetWarningCache=n,xc=function(){function i(s,u,l,c,d,f){if(f!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}i.isRequired=i;function o(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:o,element:i,elementType:i,instanceOf:o,node:i,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:r,resetWarningCache:n};return a.PropTypes=a,a},xc}var Hv;function $R(){return Hv||(Hv=1,bc.exports=FR()()),bc.exports}var BR=$R();const D=Wv(BR),jr={width:D.number,height:D.number,graphData:D.shape({nodes:D.arrayOf(D.object).isRequired,links:D.arrayOf(D.object).isRequired}),backgroundColor:D.string,nodeRelSize:D.number,nodeId:D.string,nodeLabel:D.oneOfType([D.string,D.func]),nodeVal:D.oneOfType([D.number,D.string,D.func]),nodeVisibility:D.oneOfType([D.bool,D.string,D.func]),nodeColor:D.oneOfType([D.string,D.func]),nodeAutoColorBy:D.oneOfType([D.string,D.func]),onNodeHover:D.func,onNodeClick:D.func,linkSource:D.string,linkTarget:D.string,linkLabel:D.oneOfType([D.string,D.func]),linkVisibility:D.oneOfType([D.bool,D.string,D.func]),linkColor:D.oneOfType([D.string,D.func]),linkAutoColorBy:D.oneOfType([D.string,D.func]),linkWidth:D.oneOfType([D.number,D.string,D.func]),linkCurvature:D.oneOfType([D.number,D.string,D.func]),linkDirectionalArrowLength:D.oneOfType([D.number,D.string,D.func]),linkDirectionalArrowColor:D.oneOfType([D.string,D.func]),linkDirectionalArrowRelPos:D.oneOfType([D.number,D.string,D.func]),linkDirectionalParticles:D.oneOfType([D.number,D.string,D.func]),linkDirectionalParticleSpeed:D.oneOfType([D.number,D.string,D.func]),linkDirectionalParticleOffset:D.oneOfType([D.number,D.string,D.func]),linkDirectionalParticleWidth:D.oneOfType([D.number,D.string,D.func]),linkDirectionalParticleColor:D.oneOfType([D.string,D.func]),onLinkHover:D.func,onLinkClick:D.func,dagMode:D.oneOf(["td","bu","lr","rl","zin","zout","radialin","radialout"]),dagLevelDistance:D.number,dagNodeFilter:D.func,onDagError:D.func,d3AlphaMin:D.number,d3AlphaDecay:D.number,d3VelocityDecay:D.number,warmupTicks:D.number,cooldownTicks:D.number,cooldownTime:D.number,onEngineTick:D.func,onEngineStop:D.func,getGraphBbox:D.func},s_={zoomToFit:D.func,onNodeRightClick:D.func,onNodeDrag:D.func,onNodeDragEnd:D.func,onLinkRightClick:D.func,linkHoverPrecision:D.number,onBackgroundClick:D.func,onBackgroundRightClick:D.func,showPointerCursor:D.oneOfType([D.bool,D.func]),enablePointerInteraction:D.bool,enableNodeDrag:D.bool},jl={showNavInfo:D.bool,nodeOpacity:D.number,nodeResolution:D.number,nodeThreeObject:D.oneOfType([D.object,D.string,D.func]),nodeThreeObjectExtend:D.oneOfType([D.bool,D.string,D.func]),nodePositionUpdate:D.func,linkOpacity:D.number,linkResolution:D.number,linkCurveRotation:D.oneOfType([D.number,D.string,D.func]),linkMaterial:D.oneOfType([D.object,D.string,D.func]),linkThreeObject:D.oneOfType([D.object,D.string,D.func]),linkThreeObjectExtend:D.oneOfType([D.bool,D.string,D.func]),linkPositionUpdate:D.func,linkDirectionalArrowResolution:D.number,linkDirectionalParticleResolution:D.number,linkDirectionalParticleThreeObject:D.oneOfType([D.object,D.string,D.func]),forceEngine:D.oneOf(["d3","ngraph"]),ngraphPhysics:D.object,numDimensions:D.oneOf([1,2,3])},HR=Object.assign({},jr,s_,{linkLineDash:D.oneOfType([D.arrayOf(D.number),D.string,D.func]),nodeCanvasObjectMode:D.oneOfType([D.string,D.func]),nodeCanvasObject:D.func,nodePointerAreaPaint:D.func,linkCanvasObjectMode:D.oneOfType([D.string,D.func]),linkCanvasObject:D.func,linkPointerAreaPaint:D.func,linkDirectionalParticleCanvasObject:D.func,autoPauseRedraw:D.bool,minZoom:D.number,maxZoom:D.number,enableZoomInteraction:D.oneOfType([D.bool,D.func]),enablePanInteraction:D.oneOfType([D.bool,D.func]),onZoom:D.func,onZoomEnd:D.func,onRenderFramePre:D.func,onRenderFramePost:D.func});Object.assign({},jr,s_,jl,{enableNavigationControls:D.bool,controlType:D.oneOf(["trackball","orbit","fly"]),rendererConfig:D.object,extraRenderers:D.arrayOf(D.shape({render:D.func.isRequired}))});Object.assign({},jr,jl,{nodeDesc:D.oneOfType([D.string,D.func]),linkDesc:D.oneOfType([D.string,D.func])});Object.assign({},jr,jl,{markerAttrs:D.object,yOffset:D.number,glScale:D.number});const ql=wN(LR,{methodNames:["emitParticle","d3Force","d3ReheatSimulation","stopAnimation","pauseAnimation","resumeAnimation","centerAt","zoom","zoomToFit","getGraphBbox","screen2GraphCoords","graph2ScreenCoords"]});ql.displayName="ForceGraph2D";ql.propTypes=HR;const u_=gx;function Uv(e){const n=e.split("/")[0];return u_[n]||"#6366f1"}function UR({onNodeClick:e}){const n=T.useRef(null),r=T.useRef(null),[i,o]=T.useState({nodes:[],links:[]}),[a,s]=T.useState(!0),[u,l]=T.useState(null),[c,d]=T.useState(null),[f,h]=T.useState(null),[p,m]=T.useState(1),[b,v]=T.useState(new Set),[g,_]=T.useState(!1);T.useEffect(()=>{const N=n.current;if(!N)return;const M=()=>{const O=N.getBoundingClientRect();d({width:Math.max(1,Math.floor(O.width)-2),height:Math.max(1,Math.floor(O.height)-2)})};M();const I=new ResizeObserver(M);return I.observe(N),()=>I.disconnect()},[]),T.useEffect(()=>{let N=!1;return s(!0),st.obsidian.getGraph().then(M=>{N||(M.success?o({nodes:M.nodes,links:M.links}):l("Failed to load graph data"),s(!1))}).catch(()=>{N||(l("Network error loading graph"),s(!1))}),()=>{N=!0}},[]);const y=T.useMemo(()=>{const N=new Set;for(const M of i.nodes){const I=M.folder?.split("/")[0]||"(root)";N.add(I)}return Array.from(N).sort()},[i.nodes]);T.useEffect(()=>{y.length>0&&!g&&(_(!0),v(new Set(y)))},[y,g]);const x=T.useMemo(()=>{if(b.size===0||b.size===y.length)return i;const N=new Set,M=i.nodes.filter(O=>{const R=O.folder?.split("/")[0]||"(root)",P=b.has(R);return P&&N.add(O.id),P}),I=i.links.filter(O=>{const R=typeof O.source=="string"?O.source:O.source.id,P=typeof O.target=="string"?O.target:O.target.id;return N.has(R)&&N.has(P)});return{nodes:M,links:I}},[i,b,y.length]),w=N=>{v(M=>{const I=new Set(M);return I.has(N)?I.delete(N):I.add(N),I})},C=T.useCallback(N=>{e?.(N.name)},[e]),S=T.useCallback(N=>{const M=Math.max(.1,Math.min(10,N));m(M);const I=r.current;I?.zoom&&I.zoom(M,200)},[]),k=T.useCallback((N,M,I)=>{const O=N.name,R=Math.max(10/I,2),P=Math.max(4,3+x.links.filter(F=>(typeof F.source=="string"?F.source:F.source.id)===N.id||(typeof F.target=="string"?F.target:F.target.id)===N.id).length*.5),j=Uv(N.folder),L=f?.id===N.id;M.beginPath(),M.arc(N.x||0,N.y||0,P,0,2*Math.PI),M.fillStyle=L?"#ffffff":j,M.fill(),(L||I>.4)&&(M.font=`${R}px monospace`,M.textAlign="center",M.textBaseline="top",M.fillStyle=L?"rgba(255,255,255,1)":"rgba(255,255,255,0.7)",M.fillText(O,N.x||0,(N.y||0)+P+2))},[x.links,f]),A=!a&&!u&&c;return E.jsxs("div",{className:"flex h-full",children:[E.jsx("div",{className:"w-[140px] shrink-0 border-r border-secondary/30 bg-black/60",children:E.jsx(Zv,{className:"h-full",children:E.jsxs("div",{className:"p-3 space-y-3",children:[E.jsx("div",{className:"font-arcade text-xs text-primary mb-2",children:"FOLDERS"}),E.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[E.jsx(Vt,{checked:b.size===y.length,onCheckedChange:N=>{v(N?new Set(y):new Set)},className:"border-primary data-[state=checked]:bg-primary"}),E.jsx("span",{className:"font-terminal text-xs text-primary",children:"All Folders"})]}),y.map(N=>E.jsxs("label",{className:"flex items-center gap-2 py-0.5 cursor-pointer",children:[E.jsx(Vt,{checked:b.has(N),onCheckedChange:()=>w(N),className:"border-primary data-[state=checked]:bg-primary"}),E.jsx("span",{className:"font-terminal text-xs truncate",style:{color:Uv(N==="(root)"?"":N)},children:N})]},N)),E.jsxs("div",{className:"pt-2 border-t border-secondary/30 space-y-1",children:[E.jsx("div",{className:"font-arcade text-xs text-muted-foreground mb-1",children:"COLORS"}),Object.entries(u_).filter(([N])=>N).map(([N,M])=>E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:"w-2.5 h-2.5 rounded-full",style:{backgroundColor:M}}),E.jsx("span",{className:"font-terminal text-xs",style:{color:M},children:N})]},N))]}),E.jsxs("div",{className:"pt-2 border-t border-secondary/30 font-terminal text-xs text-muted-foreground",children:[E.jsxs("div",{children:["Notes: ",x.nodes.length]}),E.jsxs("div",{children:["Links: ",x.links.length]})]})]})})}),E.jsxs("div",{ref:n,className:"flex-1 relative bg-black/80 rounded border border-primary/30 overflow-hidden",children:[a&&E.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-primary font-terminal z-10",children:E.jsx("div",{className:"animate-pulse",children:"SCANNING VAULT CONNECTIONS..."})}),u&&E.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-red-400 font-terminal z-10",children:u}),A&&E.jsxs(E.Fragment,{children:[E.jsxs("div",{className:"absolute top-2 left-2 right-2 z-10 flex items-center justify-between pointer-events-none",children:[E.jsx("div",{className:"flex items-center gap-2 pointer-events-auto",children:E.jsx("button",{onClick:()=>{r.current?.zoomToFit?.(400,40),setTimeout(()=>{const N=r.current;N?.zoom&&m(N.zoom())},450)},className:"px-2 py-0.5 text-xs font-terminal bg-primary/20 border border-primary/40 text-primary hover:bg-primary/30 rounded-none",children:"CENTER"})}),E.jsxs("div",{className:"flex items-center gap-1.5 pointer-events-auto bg-black/70 border border-primary/30 rounded-none px-2 py-1",children:[E.jsx("button",{onClick:()=>S(p/1.3),className:"text-primary hover:text-white font-mono text-sm w-5 h-5 flex items-center justify-center",children:"-"}),E.jsx("input",{type:"range",min:-2.3,max:2.3,step:.01,value:Math.log(p),onChange:N=>S(Math.exp(parseFloat(N.target.value))),className:"w-24 h-1 accent-primary cursor-pointer"}),E.jsx("button",{onClick:()=>S(p*1.3),className:"text-primary hover:text-white font-mono text-sm w-5 h-5 flex items-center justify-center",children:"+"}),E.jsxs("span",{className:"text-xs font-terminal text-primary/50 w-8 text-right",children:[Math.round(p*100),"%"]})]})]}),E.jsx(ql,{ref:r,graphData:x,width:c.width,height:c.height,nodeCanvasObject:k,nodePointerAreaPaint:(N,M,I)=>{I.beginPath(),I.arc(N.x||0,N.y||0,6,0,2*Math.PI),I.fillStyle=M,I.fill()},onNodeClick:C,onNodeHover:N=>h(N),onZoom:({k:N})=>m(N),linkColor:()=>"rgba(255, 80, 80, 0.35)",linkWidth:1.5,backgroundColor:"transparent",cooldownTicks:100,d3AlphaDecay:.02,d3VelocityDecay:.3})]})]})]})}const Kn={mode:"vault",isDirty:!1,nodeCount:0,edgeCount:0,canUndo:!1,canRedo:!1,supportsMermaid:!1,supportsDraw:!1,selectedLabels:[]},VR=[{id:"mindmap",label:"Mind Map"},{id:"structured",label:"Structured"},{id:"freehand",label:"Freehand"},{id:"vault",label:"Vault Graph"}],Vv={mindmap:{...Kn,mode:"mindmap",supportsMermaid:!0,supportsDraw:!0},structured:{...Kn,mode:"structured",supportsMermaid:!0},freehand:{...Kn,mode:"freehand",supportsDraw:!0},vault:{...Kn,mode:"vault"}},GR=[{name:"Simple Mind Map",mermaid:`graph LR
  A[Topic] --> B[Branch A]
  A --> C[Branch B]
  B --> D[Detail]
  C --> E[Detail]`},{name:"Decision Flow",mermaid:`graph TD
  A[Start] --> B{Decision}
  B -->|Yes| C[Action 1]
  B -->|No| D[Action 2]
  C --> E[End]
  D --> E`},{name:"Concept Chain",mermaid:`graph TD
  A[Concept 1] --> B[Concept 2]
  B --> C[Concept 3]
  C --> D[Clinical Link]`}];function CI(){const[e,n]=T.useState("mindmap"),[r,i]=T.useState(null),[o,a]=T.useState(Vv),[s,u]=T.useState(!1),[l,c]=T.useState(""),[d,f]=T.useState(!1),[h,p]=T.useState(!1),m=T.useRef(0),{toast:b}=Hc(),v=o[e]||Vv[e],g=T.useCallback((k,A,N)=>{const M=N||e;m.current+=1,i({id:m.current,target:M,type:k,payload:A})},[e]),_=T.useCallback(k=>{a(A=>({...A,[k.mode]:k}))},[]),y=T.useCallback(()=>{const k=l.trim();if(!k)return;const A=e==="freehand"?"structured":e;if(A==="vault"){b({title:"Import not available",description:"Switch to Mind Map or Structured mode",variant:"destructive"});return}e==="freehand"&&n("structured"),g("import_mermaid",k,A),u(!1),c("")},[l,e,g,b]),x=T.useCallback(async k=>{const A=v.selectedLabels.length>0?v.selectedLabels:[`${e} selection`],N=[`## ${new Date().toISOString()}  ${k}`,`- Mode: ${e}`,`- Labels: ${A.join(", ")}`,""];try{p(!0),await st.obsidian.append("Study Sessions/Brain Canvas Actions.md",`${N.join(`
`)}
`),b({title:"Study action saved",description:k})}catch(M){b({title:"Action failed",description:String(M),variant:"destructive"})}finally{p(!1)}},[v.selectedLabels,e,b]),w=e!=="vault",C=v.supportsMermaid&&e!=="vault",S=T.useMemo(()=>e==="mindmap"?E.jsx(rN,{hideToolbar:!0,externalCommand:r,onStatusChange:_}):e==="structured"?E.jsx(Vk,{hideToolbar:!0,externalCommand:r,onStatusChange:_}):e==="freehand"?E.jsx(Gk,{hideToolbar:!0,externalCommand:r,onStatusChange:_,onImportMermaid:k=>{n("structured"),g("import_mermaid",k,"structured")}}):E.jsx(UR,{}),[e,r,_]);return E.jsxs("div",{className:"flex flex-col h-full",children:[E.jsx("div",{className:"tab-sub-bar",role:"tablist","aria-label":"Canvas mode",children:VR.map(k=>E.jsx("button",{role:"tab","aria-selected":e===k.id,onClick:()=>n(k.id),className:Pe("tab-sub-item",e===k.id&&"active"),children:k.label},k.id))}),E.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-primary/20 bg-black/40 shrink-0 flex-wrap",children:[E.jsx(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none",onClick:()=>g("undo"),disabled:!w||!v.canUndo,title:"Undo",children:E.jsx(Dx,{className:"w-3 h-3"})}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none",onClick:()=>g("redo"),disabled:!w||!v.canRedo,title:"Redo",children:E.jsx(Px,{className:"w-3 h-3"})}),E.jsx("div",{className:"w-px h-4 bg-primary/20"}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none font-terminal text-xs",onClick:()=>g("save"),disabled:!w,title:"Save",children:[E.jsx(Uc,{className:"w-3 h-3 mr-1"}),"Save"]}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none font-terminal text-xs",onClick:()=>u(k=>!k),disabled:!C,title:"Import Mermaid",children:[E.jsx(Mx,{className:"w-3 h-3 mr-1"}),"Import"]}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none font-terminal text-xs",onClick:()=>g("export_mermaid"),disabled:!C,title:"Export Mermaid",children:[E.jsx(Jv,{className:"w-3 h-3 mr-1"}),"Mermaid"]}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none font-terminal text-xs",onClick:()=>g("export_png"),disabled:!w,title:"Export PNG",children:[E.jsx(Wc,{className:"w-3 h-3 mr-1"}),"PNG"]}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none font-terminal text-xs",onClick:()=>g("add_node"),disabled:!w,title:"Add node",children:[E.jsx(sr,{className:"w-3 h-3 mr-1"}),"Add"]}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none font-terminal text-xs",onClick:()=>{const k=window.prompt("Find text");k&&window.find(k)},title:"Search",children:[E.jsx(wx,{className:"w-3 h-3 mr-1"}),"Search"]}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none font-terminal text-xs",onClick:()=>f(k=>!k),disabled:!C,title:"Templates",children:[E.jsx(zx,{className:"w-3 h-3 mr-1"}),"Templates"]}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-7 px-1.5 rounded-none font-terminal text-xs",onClick:()=>b({title:"Canvas settings",description:"Direction, layout, and draw controls live in mode tools."}),title:"Settings",children:[E.jsx(bx,{className:"w-3 h-3 mr-1"}),"Settings"]}),E.jsxs("div",{className:"ml-auto flex items-center gap-2 text-xs font-terminal text-muted-foreground",children:[E.jsxs("span",{children:[v.nodeCount,"N / ",v.edgeCount,"E"]}),E.jsx("span",{className:Pe("w-2 h-2 rounded-full",v.isDirty?"bg-destructive":"bg-success")}),E.jsx("span",{children:v.isDirty?"Unsaved":"Saved"})]})]}),(s||d)&&E.jsxs("div",{className:"shrink-0 px-3 py-2 border-b border-primary/20 bg-black/40 flex flex-col gap-2",children:[s&&E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"font-arcade text-xs text-primary",children:"IMPORT MERMAID"}),E.jsx("textarea",{value:l,onChange:k=>c(k.target.value),placeholder:`graph TD
  A[Topic] --> B[Branch]`,className:"min-h-[72px] w-full px-2 py-1.5 font-mono text-xs bg-black/60 border border-primary/30 rounded-none text-foreground placeholder:text-muted-foreground resize-y",rows:4}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx(de,{size:"sm",className:"rounded-none font-terminal text-xs",onClick:y,disabled:!l.trim(),children:"Import"}),E.jsx(de,{size:"sm",variant:"outline",className:"rounded-none font-terminal text-xs border-primary/30",onClick:()=>u(!1),children:"Cancel"})]})]}),d&&E.jsxs(E.Fragment,{children:[E.jsx("p",{className:"font-arcade text-xs text-primary",children:"TEMPLATES"}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:GR.map(k=>E.jsxs("button",{className:"text-left px-3 py-2 border border-primary/30 hover:border-primary/60 hover:bg-primary/10 rounded-none",onClick:()=>{const A=e==="freehand"?"structured":e;A!=="vault"&&(e==="freehand"&&n("structured"),g("import_mermaid",k.mermaid,A),f(!1))},children:[E.jsx("div",{className:"font-arcade text-xs text-primary",children:k.name}),E.jsx("div",{className:"font-terminal text-xs text-muted-foreground truncate",children:k.mermaid.split(`
`)[0]})]},k.name))})]})]}),E.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-primary/20 bg-black/30 shrink-0 flex-wrap",children:[E.jsx("span",{className:"font-arcade text-[10px] text-muted-foreground mr-1",children:"STUDY TOOLS"}),E.jsxs(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 rounded-none font-terminal text-xs",onClick:()=>void x("Generate Summary"),disabled:h,children:[E.jsx(ux,{className:"w-3 h-3 mr-1"}),"Summary"]}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 rounded-none font-terminal text-xs",onClick:()=>void x("Generate Quiz"),disabled:h,children:"Quiz"}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 rounded-none font-terminal text-xs",onClick:()=>void x("Generate Flashcards"),disabled:h,children:"Cards"}),E.jsx(de,{size:"sm",variant:"ghost",className:"h-6 px-1.5 rounded-none font-terminal text-xs",onClick:()=>void x("Mark Weak Area"),disabled:h,children:"Weak"})]}),E.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:S})]})}export{CI as UnifiedBrainCanvas};
