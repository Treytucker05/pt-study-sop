import{c as Ft,a3 as Jy,a4 as em,n as zp,k as tm,r as O,j as A,Q as It}from"./index-q1LjcoNO.js";import{c as rm,i as Nu,e as Mu,f as nm,g as Au,s as Bt,p as $p,z as Vp,a as Gp,h as im,j as hr,b as om}from"./zoom-tdgUGed2.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const am=[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]],uE=Ft("arrow-left-right",am);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],cE=Ft("arrow-up-down",sm);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const um=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],dE=Ft("layout-grid",um);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],lE=Ft("palette",cm);function ue(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let r=0,n;r<e.length;r++)(n=ue(e[r]))!==""&&(t+=(t&&" ")+n);else for(let r in e)e[r]&&(t+=(t&&" ")+r);return t}function dm(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(o){for(i=0;i<r;++i)n[i]=e[i]*(1-o)+t[i]*o;return n}}function lm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fm(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),o=new Array(r),a;for(a=0;a<n;++a)i[a]=dt(e[a],t[a]);for(;a<r;++a)o[a]=t[a];return function(s){for(a=0;a<n;++a)o[a]=i[a](s);return o}}function hm(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function pm(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=dt(e[i],t[i]):n[i]=t[i];return function(o){for(i in r)n[i]=r[i](o);return n}}function dt(e,t){var r=typeof t,n;return t==null||r==="boolean"?rm(t):(r==="number"?Nu:r==="string"?(n=Au(t))?(t=n,Mu):nm:t instanceof Au?Mu:t instanceof Date?hm:lm(t)?dm:Array.isArray(t)?fm:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?pm:Nu)(e,t)}const xe={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:r,targetHandle:n})=>`Couldn't create edge for ${e} handle id: "${e==="source"?r:n}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},ft=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Up=["Enter"," ","Escape"],Wp={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:r})=>`Moved selected node ${e}. New position, x: ${t}, y: ${r}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Qe;(function(e){e.Strict="strict",e.Loose="loose"})(Qe||(Qe={}));var Be;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Be||(Be={}));var ht;(function(e){e.Partial="partial",e.Full="full"})(ht||(ht={}));const Yp={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null,pointer:null};var Le;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Le||(Le={}));var Pt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Pt||(Pt={}));var X;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(X||(X={}));const Tu={[X.Left]:X.Right,[X.Right]:X.Left,[X.Top]:X.Bottom,[X.Bottom]:X.Top};function Kp(e){return e===null?null:e?"valid":"invalid"}const Zp=e=>"id"in e&&"source"in e&&"target"in e,gm=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),Us=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),yt=(e,t=[0,0])=>{const{width:r,height:n}=Ie(e),i=e.origin??t,o=r*i[0],a=n*i[1];return{x:e.position.x-o,y:e.position.y-a}},vm=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const r=e.reduce((n,i)=>{const o=typeof i=="string";let a=!t.nodeLookup&&!o?i:void 0;t.nodeLookup&&(a=o?t.nodeLookup.get(i):Us(i)?i:t.nodeLookup.get(i.id));const s=a?Ot(a,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Ht(n,s)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return zt(r)},mt=(e,t={})=>{let r={x:1/0,y:1/0,x2:-1/0,y2:-1/0},n=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(r=Ht(r,Ot(i)),n=!0)}),n?zt(r):{x:0,y:0,width:0,height:0}},Ws=(e,t,[r,n,i]=[0,0,1],o=!1,a=!1)=>{const s={..._t(t,[r,n,i]),width:t.width/i,height:t.height/i},c=[];for(const u of e.values()){const{measured:d,selectable:l=!0,hidden:f=!1}=u;if(a&&!l||f)continue;const h=d.width??u.width??u.initialWidth??null,y=d.height??u.height??u.initialHeight??null,v=pt(s,et(u)),g=(h??0)*(y??0),m=o&&v>0;(!u.internals.handleBounds||m||v>=g||u.dragging)&&c.push(u)}return c},ym=(e,t)=>{const r=new Set;return e.forEach(n=>{r.add(n.id)}),t.filter(n=>r.has(n.source)||r.has(n.target))};function mm(e,t){const r=new Map,n=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!n||n.has(i.id))&&r.set(i.id,i)}),r}async function bm({nodes:e,width:t,height:r,panZoom:n,minZoom:i,maxZoom:o},a){if(e.size===0)return Promise.resolve(!0);const s=mm(e,a),c=mt(s),u=Ys(c,t,r,a?.minZoom??i,a?.maxZoom??o,a?.padding??.1);return await n.setViewport(u,{duration:a?.duration,ease:a?.ease,interpolate:a?.interpolate}),Promise.resolve(!0)}function Xp({nodeId:e,nextPosition:t,nodeLookup:r,nodeOrigin:n=[0,0],nodeExtent:i,onError:o}){const a=r.get(e),s=a.parentId?r.get(a.parentId):void 0,{x:c,y:u}=s?s.internals.positionAbsolute:{x:0,y:0},d=a.origin??n;let l=a.extent||i;if(a.extent==="parent"&&!a.expandParent)if(!s)o?.("005",xe.error005());else{const h=s.measured.width,y=s.measured.height;h&&y&&(l=[[c,u],[c+h,u+y]])}else s&&tt(a.extent)&&(l=[[a.extent[0][0]+c,a.extent[0][1]+u],[a.extent[1][0]+c,a.extent[1][1]+u]]);const f=tt(l)?He(t,l,a.measured):t;return(a.measured.width===void 0||a.measured.height===void 0)&&o?.("015",xe.error015()),{position:{x:f.x-c+(a.measured.width??0)*d[0],y:f.y-u+(a.measured.height??0)*d[1]},positionAbsolute:f}}async function _m({nodesToRemove:e=[],edgesToRemove:t=[],nodes:r,edges:n,onBeforeDelete:i}){const o=new Set(e.map(f=>f.id)),a=[];for(const f of r){if(f.deletable===!1)continue;const h=o.has(f.id),y=!h&&f.parentId&&a.find(v=>v.id===f.parentId);(h||y)&&a.push(f)}const s=new Set(t.map(f=>f.id)),c=n.filter(f=>f.deletable!==!1),d=ym(a,c);for(const f of c)s.has(f.id)&&!d.find(y=>y.id===f.id)&&d.push(f);if(!i)return{edges:d,nodes:a};const l=await i({nodes:a,edges:d});return typeof l=="boolean"?l?{edges:d,nodes:a}:{edges:[],nodes:[]}:l}const Je=(e,t=0,r=1)=>Math.min(Math.max(e,t),r),He=(e={x:0,y:0},t,r)=>({x:Je(e.x,t[0][0],t[1][0]-(r?.width??0)),y:Je(e.y,t[0][1],t[1][1]-(r?.height??0))});function Qp(e,t,r){const{width:n,height:i}=Ie(r),{x:o,y:a}=r.internals.positionAbsolute;return He(e,[[o,a],[o+n,a+i]],t)}const Pu=(e,t,r)=>e<t?Je(Math.abs(e-t),1,t)/t:e>r?-Je(Math.abs(e-r),1,t)/t:0,Jp=(e,t,r=15,n=40)=>{const i=Pu(e.x,n,t.width-n)*r,o=Pu(e.y,n,t.height-n)*r;return[i,o]},Ht=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Bs=({x:e,y:t,width:r,height:n})=>({x:e,y:t,x2:e+r,y2:t+n}),zt=({x:e,y:t,x2:r,y2:n})=>({x:e,y:t,width:r-e,height:n-t}),et=(e,t=[0,0])=>{const{x:r,y:n}=Us(e)?e.internals.positionAbsolute:yt(e,t);return{x:r,y:n,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Ot=(e,t=[0,0])=>{const{x:r,y:n}=Us(e)?e.internals.positionAbsolute:yt(e,t);return{x:r,y:n,x2:r+(e.measured?.width??e.width??e.initialWidth??0),y2:n+(e.measured?.height??e.height??e.initialHeight??0)}},eg=(e,t)=>zt(Ht(Bs(e),Bs(t))),pt=(e,t)=>{const r=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),n=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(r*n)},Ou=e=>ve(e.width)&&ve(e.height)&&ve(e.x)&&ve(e.y),ve=e=>!isNaN(e)&&isFinite(e),wm=(e,t)=>{},bt=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),_t=({x:e,y:t},[r,n,i],o=!1,a=[1,1])=>{const s={x:(e-r)/i,y:(t-n)/i};return o?bt(s,a):s},kt=({x:e,y:t},[r,n,i])=>({x:e*i+r,y:t*i+n});function Ke(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(r)}if(typeof e=="string"&&e.endsWith("%")){const r=parseFloat(e);if(!Number.isNaN(r))return Math.floor(t*r*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function xm(e,t,r){if(typeof e=="string"||typeof e=="number"){const n=Ke(e,r),i=Ke(e,t);return{top:n,right:i,bottom:n,left:i,x:i*2,y:n*2}}if(typeof e=="object"){const n=Ke(e.top??e.y??0,r),i=Ke(e.bottom??e.y??0,r),o=Ke(e.left??e.x??0,t),a=Ke(e.right??e.x??0,t);return{top:n,right:a,bottom:i,left:o,x:o+a,y:n+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Em(e,t,r,n,i,o){const{x:a,y:s}=kt(e,[t,r,n]),{x:c,y:u}=kt({x:e.x+e.width,y:e.y+e.height},[t,r,n]),d=i-c,l=o-u;return{left:Math.floor(a),top:Math.floor(s),right:Math.floor(d),bottom:Math.floor(l)}}const Ys=(e,t,r,n,i,o)=>{const a=xm(o,t,r),s=(t-a.x)/e.width,c=(r-a.y)/e.height,u=Math.min(s,c),d=Je(u,n,i),l=e.x+e.width/2,f=e.y+e.height/2,h=t/2-l*d,y=r/2-f*d,v=Em(e,h,y,d,t,r),g={left:Math.min(v.left-a.left,0),top:Math.min(v.top-a.top,0),right:Math.min(v.right-a.right,0),bottom:Math.min(v.bottom-a.bottom,0)};return{x:h-g.left+g.right,y:y-g.top+g.bottom,zoom:d}},gt=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function tt(e){return e!=null&&e!=="parent"}function Ie(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function tg(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function rg(e,t={width:0,height:0},r,n,i){const o={...e},a=n.get(r);if(a){const s=a.origin||i;o.x+=a.internals.positionAbsolute.x-(t.width??0)*s[0],o.y+=a.internals.positionAbsolute.y-(t.height??0)*s[1]}return o}function ku(e,t){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}function Sm(){let e,t;return{promise:new Promise((n,i)=>{e=n,t=i}),resolve:e,reject:t}}function Cm(e){return{...Wp,...e||{}}}function lt(e,{snapGrid:t=[0,0],snapToGrid:r=!1,transform:n,containerBounds:i}){const{x:o,y:a}=ye(e),s=_t({x:o-(i?.left??0),y:a-(i?.top??0)},n),{x:c,y:u}=r?bt(s,t):s;return{xSnapped:c,ySnapped:u,...s}}const Ks=e=>({width:e.offsetWidth,height:e.offsetHeight}),ng=e=>e?.getRootNode?.()||window?.document,qm=["INPUT","SELECT","TEXTAREA"];function ig(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:qm.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const og=e=>"clientX"in e,ye=(e,t)=>{const r=og(e),n=r?e.clientX:e.touches?.[0].clientX,i=r?e.clientY:e.touches?.[0].clientY;return{x:n-(t?.left??0),y:i-(t?.top??0)}},Lu=(e,t,r,n,i)=>{const o=t.querySelectorAll(`.${e}`);return!o||!o.length?null:Array.from(o).map(a=>{const s=a.getBoundingClientRect();return{id:a.getAttribute("data-handleid"),type:e,nodeId:i,position:a.getAttribute("data-handlepos"),x:(s.left-r.left)/n,y:(s.top-r.top)/n,...Ks(a)}})};function ag({sourceX:e,sourceY:t,targetX:r,targetY:n,sourceControlX:i,sourceControlY:o,targetControlX:a,targetControlY:s}){const c=e*.125+i*.375+a*.375+r*.125,u=t*.125+o*.375+s*.375+n*.125,d=Math.abs(c-e),l=Math.abs(u-t);return[c,u,d,l]}function Nt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Du({pos:e,x1:t,y1:r,x2:n,y2:i,c:o}){switch(e){case X.Left:return[t-Nt(t-n,o),r];case X.Right:return[t+Nt(n-t,o),r];case X.Top:return[t,r-Nt(r-i,o)];case X.Bottom:return[t,r+Nt(i-r,o)]}}function sg({sourceX:e,sourceY:t,sourcePosition:r=X.Bottom,targetX:n,targetY:i,targetPosition:o=X.Top,curvature:a=.25}){const[s,c]=Du({pos:r,x1:e,y1:t,x2:n,y2:i,c:a}),[u,d]=Du({pos:o,x1:n,y1:i,x2:e,y2:t,c:a}),[l,f,h,y]=ag({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:s,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${s},${c} ${u},${d} ${n},${i}`,l,f,h,y]}function ug({sourceX:e,sourceY:t,targetX:r,targetY:n}){const i=Math.abs(r-e)/2,o=r<e?r+i:r-i,a=Math.abs(n-t)/2,s=n<t?n+a:n-a;return[o,s,i,a]}function Rm({sourceNode:e,targetNode:t,selected:r=!1,zIndex:n=0,elevateOnSelect:i=!1,zIndexMode:o="basic"}){if(o==="manual")return n;const a=i&&r?n+1e3:n,s=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return a+s}function Im({sourceNode:e,targetNode:t,width:r,height:n,transform:i}){const o=Ht(Ot(e),Ot(t));o.x===o.x2&&(o.x2+=1),o.y===o.y2&&(o.y2+=1);const a={x:-i[0]/i[2],y:-i[1]/i[2],width:r/i[2],height:n/i[2]};return pt(a,zt(o))>0}const Nm=({source:e,sourceHandle:t,target:r,targetHandle:n})=>`xy-edge__${e}${t||""}-${r}${n||""}`,Mm=(e,t)=>t.some(r=>r.source===e.source&&r.target===e.target&&(r.sourceHandle===e.sourceHandle||!r.sourceHandle&&!e.sourceHandle)&&(r.targetHandle===e.targetHandle||!r.targetHandle&&!e.targetHandle)),Am=(e,t,r={})=>{if(!e.source||!e.target)return t;const n=r.getEdgeId||Nm;let i;return Zp(e)?i={...e}:i={...e,id:n(e)},Mm(i,t)?t:(i.sourceHandle===null&&delete i.sourceHandle,i.targetHandle===null&&delete i.targetHandle,t.concat(i))};function cg({sourceX:e,sourceY:t,targetX:r,targetY:n}){const[i,o,a,s]=ug({sourceX:e,sourceY:t,targetX:r,targetY:n});return[`M ${e},${t}L ${r},${n}`,i,o,a,s]}const ju={[X.Left]:{x:-1,y:0},[X.Right]:{x:1,y:0},[X.Top]:{x:0,y:-1},[X.Bottom]:{x:0,y:1}},Tm=({source:e,sourcePosition:t=X.Bottom,target:r})=>t===X.Left||t===X.Right?e.x<r.x?{x:1,y:0}:{x:-1,y:0}:e.y<r.y?{x:0,y:1}:{x:0,y:-1},Fu=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Pm({source:e,sourcePosition:t=X.Bottom,target:r,targetPosition:n=X.Top,center:i,offset:o,stepPosition:a}){const s=ju[t],c=ju[n],u={x:e.x+s.x*o,y:e.y+s.y*o},d={x:r.x+c.x*o,y:r.y+c.y*o},l=Tm({source:u,sourcePosition:t,target:d}),f=l.x!==0?"x":"y",h=l[f];let y=[],v,g;const m={x:0,y:0},b={x:0,y:0},[,,p,_]=ug({sourceX:e.x,sourceY:e.y,targetX:r.x,targetY:r.y});if(s[f]*c[f]===-1){f==="x"?(v=i.x??u.x+(d.x-u.x)*a,g=i.y??(u.y+d.y)/2):(v=i.x??(u.x+d.x)/2,g=i.y??u.y+(d.y-u.y)*a);const w=[{x:v,y:u.y},{x:v,y:d.y}],E=[{x:u.x,y:g},{x:d.x,y:g}];s[f]===h?y=f==="x"?w:E:y=f==="x"?E:w}else{const w=[{x:u.x,y:d.y}],E=[{x:d.x,y:u.y}];if(f==="x"?y=s.x===h?E:w:y=s.y===h?w:E,t===n){const R=Math.abs(e[f]-r[f]);if(R<=o){const M=Math.min(o-1,o-R);s[f]===h?m[f]=(u[f]>e[f]?-1:1)*M:b[f]=(d[f]>r[f]?-1:1)*M}}if(t!==n){const R=f==="x"?"y":"x",M=s[f]===c[R],L=u[R]>d[R],P=u[R]<d[R];(s[f]===1&&(!M&&L||M&&P)||s[f]!==1&&(!M&&P||M&&L))&&(y=f==="x"?w:E)}const q={x:u.x+m.x,y:u.y+m.y},C={x:d.x+b.x,y:d.y+b.y},N=Math.max(Math.abs(q.x-y[0].x),Math.abs(C.x-y[0].x)),S=Math.max(Math.abs(q.y-y[0].y),Math.abs(C.y-y[0].y));N>=S?(v=(q.x+C.x)/2,g=y[0].y):(v=y[0].x,g=(q.y+C.y)/2)}return[[e,{x:u.x+m.x,y:u.y+m.y},...y,{x:d.x+b.x,y:d.y+b.y},r],v,g,p,_]}function Om(e,t,r,n){const i=Math.min(Fu(e,t)/2,Fu(t,r)/2,n),{x:o,y:a}=t;if(e.x===o&&o===r.x||e.y===a&&a===r.y)return`L${o} ${a}`;if(e.y===a){const u=e.x<r.x?-1:1,d=e.y<r.y?1:-1;return`L ${o+i*u},${a}Q ${o},${a} ${o},${a+i*d}`}const s=e.x<r.x?1:-1,c=e.y<r.y?-1:1;return`L ${o},${a+i*c}Q ${o},${a} ${o+i*s},${a}`}function Hs({sourceX:e,sourceY:t,sourcePosition:r=X.Bottom,targetX:n,targetY:i,targetPosition:o=X.Top,borderRadius:a=5,centerX:s,centerY:c,offset:u=20,stepPosition:d=.5}){const[l,f,h,y,v]=Pm({source:{x:e,y:t},sourcePosition:r,target:{x:n,y:i},targetPosition:o,center:{x:s,y:c},offset:u,stepPosition:d});return[l.reduce((m,b,p)=>{let _="";return p>0&&p<l.length-1?_=Om(l[p-1],b,l[p+1],a):_=`${p===0?"M":"L"}${b.x} ${b.y}`,m+=_,m},""),f,h,y,v]}function Bu(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function km(e){const{sourceNode:t,targetNode:r}=e;if(!Bu(t)||!Bu(r))return null;const n=t.internals.handleBounds||Hu(t.handles),i=r.internals.handleBounds||Hu(r.handles),o=zu(n?.source??[],e.sourceHandle),a=zu(e.connectionMode===Qe.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!o||!a)return e.onError?.("008",xe.error008(o?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const s=o?.position||X.Bottom,c=a?.position||X.Top,u=ze(t,o,s),d=ze(r,a,c);return{sourceX:u.x,sourceY:u.y,targetX:d.x,targetY:d.y,sourcePosition:s,targetPosition:c}}function Hu(e){if(!e)return null;const t=[],r=[];for(const n of e)n.width=n.width??1,n.height=n.height??1,n.type==="source"?t.push(n):n.type==="target"&&r.push(n);return{source:t,target:r}}function ze(e,t,r=X.Left,n=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,o=(t?.y??0)+e.internals.positionAbsolute.y,{width:a,height:s}=t??Ie(e);if(n)return{x:i+a/2,y:o+s/2};switch(t?.position??r){case X.Top:return{x:i+a/2,y:o};case X.Right:return{x:i+a,y:o+s/2};case X.Bottom:return{x:i+a/2,y:o+s};case X.Left:return{x:i,y:o+s/2}}}function zu(e,t){return e&&(t?e.find(r=>r.id===t):e[0])||null}function zs(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(n=>`${n}=${e[n]}`).join("&")}`:""}function Lm(e,{id:t,defaultColor:r,defaultMarkerStart:n,defaultMarkerEnd:i}){const o=new Set;return e.reduce((a,s)=>([s.markerStart||n,s.markerEnd||i].forEach(c=>{if(c&&typeof c=="object"){const u=zs(c,t);o.has(u)||(a.push({id:u,color:c.color||r,...c}),o.add(u))}}),a),[]).sort((a,s)=>a.id.localeCompare(s.id))}const dg=1e3,Dm=10,Zs={nodeOrigin:[0,0],nodeExtent:ft,elevateNodesOnSelect:!0,zIndexMode:"basic",defaults:{}},jm={...Zs,checkEquality:!0};function Xs(e,t){const r={...e};for(const n in t)t[n]!==void 0&&(r[n]=t[n]);return r}function Fm(e,t,r){const n=Xs(Zs,r);for(const i of e.values())if(i.parentId)Js(i,e,t,n);else{const o=yt(i,n.nodeOrigin),a=tt(i.extent)?i.extent:n.nodeExtent,s=He(o,a,Ie(i));i.internals.positionAbsolute=s}}function Bm(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const r=[],n=[];for(const i of e.handles){const o={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?r.push(o):i.type==="target"&&n.push(o)}return{source:r,target:n}}function Qs(e){return e==="manual"}function $s(e,t,r,n={}){const i=Xs(jm,n),o={i:0},a=new Map(t),s=i?.elevateNodesOnSelect&&!Qs(i.zIndexMode)?dg:0;let c=e.length>0;t.clear(),r.clear();for(const u of e){let d=a.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const l=yt(u,i.nodeOrigin),f=tt(u.extent)?u.extent:i.nodeExtent,h=He(l,f,Ie(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:h,handleBounds:Bm(u,d),z:lg(u,s,i.zIndexMode),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(c=!1),u.parentId&&Js(d,t,r,n,o)}return c}function Hm(e,t){if(!e.parentId)return;const r=t.get(e.parentId);r?r.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Js(e,t,r,n,i){const{elevateNodesOnSelect:o,nodeOrigin:a,nodeExtent:s,zIndexMode:c}=Xs(Zs,n),u=e.parentId,d=t.get(u);if(!d){console.warn(`Parent node ${u} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Hm(e,r),i&&!d.parentId&&d.internals.rootParentIndex===void 0&&c==="auto"&&(d.internals.rootParentIndex=++i.i,d.internals.z=d.internals.z+i.i*Dm),i&&d.internals.rootParentIndex!==void 0&&(i.i=d.internals.rootParentIndex);const l=o&&!Qs(c)?dg:0,{x:f,y:h,z:y}=zm(e,d,a,s,l,c),{positionAbsolute:v}=e.internals,g=f!==v.x||h!==v.y;(g||y!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:g?{x:f,y:h}:v,z:y}})}function lg(e,t,r){const n=ve(e.zIndex)?e.zIndex:0;return Qs(r)?n:n+(e.selected?t:0)}function zm(e,t,r,n,i,o){const{x:a,y:s}=t.internals.positionAbsolute,c=Ie(e),u=yt(e,r),d=tt(e.extent)?He(u,e.extent,c):u;let l=He({x:a+d.x,y:s+d.y},n,c);e.extent==="parent"&&(l=Qp(l,c,t));const f=lg(e,i,o),h=t.internals.z??0;return{x:l.x,y:l.y,z:h>=f?h+1:f}}function eu(e,t,r,n=[0,0]){const i=[],o=new Map;for(const a of e){const s=t.get(a.parentId);if(!s)continue;const c=o.get(a.parentId)?.expandedRect??et(s),u=eg(c,a.rect);o.set(a.parentId,{expandedRect:u,parent:s})}return o.size>0&&o.forEach(({expandedRect:a,parent:s},c)=>{const u=s.internals.positionAbsolute,d=Ie(s),l=s.origin??n,f=a.x<u.x?Math.round(Math.abs(u.x-a.x)):0,h=a.y<u.y?Math.round(Math.abs(u.y-a.y)):0,y=Math.max(d.width,Math.round(a.width)),v=Math.max(d.height,Math.round(a.height)),g=(y-d.width)*l[0],m=(v-d.height)*l[1];(f>0||h>0||g||m)&&(i.push({id:c,type:"position",position:{x:s.position.x-f+g,y:s.position.y-h+m}}),r.get(c)?.forEach(b=>{e.some(p=>p.id===b.id)||i.push({id:b.id,type:"position",position:{x:b.position.x+f,y:b.position.y+h}})})),(d.width<a.width||d.height<a.height||f||h)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:y+(f?l[0]*f-g:0),height:v+(h?l[1]*h-m:0)}})}),i}function $m(e,t,r,n,i,o,a){const s=n?.querySelector(".xyflow__viewport");let c=!1;if(!s)return{changes:[],updatedInternals:c};const u=[],d=window.getComputedStyle(s),{m22:l}=new window.DOMMatrixReadOnly(d.transform),f=[];for(const h of e.values()){const y=t.get(h.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),c=!0;continue}const v=Ks(h.nodeElement),g=y.measured.width!==v.width||y.measured.height!==v.height;if(!!(v.width&&v.height&&(g||!y.internals.handleBounds||h.force))){const b=h.nodeElement.getBoundingClientRect(),p=tt(y.extent)?y.extent:o;let{positionAbsolute:_}=y.internals;y.parentId&&y.extent==="parent"?_=Qp(_,v,t.get(y.parentId)):p&&(_=He(_,p,v));const x={...y,measured:v,internals:{...y.internals,positionAbsolute:_,handleBounds:{source:Lu("source",h.nodeElement,b,l,y.id),target:Lu("target",h.nodeElement,b,l,y.id)}}};t.set(y.id,x),y.parentId&&Js(x,t,r,{nodeOrigin:i,zIndexMode:a}),c=!0,g&&(u.push({id:y.id,type:"dimensions",dimensions:v}),y.expandParent&&y.parentId&&f.push({id:y.id,parentId:y.parentId,rect:et(x,i)}))}}if(f.length>0){const h=eu(f,t,r,i);u.push(...h)}return{changes:u,updatedInternals:c}}async function Vm({delta:e,panZoom:t,transform:r,translateExtent:n,width:i,height:o}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const a=await t.setViewportConstrained({x:r[0]+e.x,y:r[1]+e.y,zoom:r[2]},[[0,0],[i,o]],n),s=!!a&&(a.x!==r[0]||a.y!==r[1]||a.k!==r[2]);return Promise.resolve(s)}function $u(e,t,r,n,i,o){let a=i;const s=n.get(a)||new Map;n.set(a,s.set(r,t)),a=`${i}-${e}`;const c=n.get(a)||new Map;if(n.set(a,c.set(r,t)),o){a=`${i}-${e}-${o}`;const u=n.get(a)||new Map;n.set(a,u.set(r,t))}}function fg(e,t,r){e.clear(),t.clear();for(const n of r){const{source:i,target:o,sourceHandle:a=null,targetHandle:s=null}=n,c={edgeId:n.id,source:i,target:o,sourceHandle:a,targetHandle:s},u=`${i}-${a}--${o}-${s}`,d=`${o}-${s}--${i}-${a}`;$u("source",c,d,e,i,a),$u("target",c,u,e,o,s),t.set(n.id,n)}}function hg(e,t){if(!e.parentId)return!1;const r=t.get(e.parentId);return r?r.selected?!0:hg(r,t):!1}function Vu(e,t,r){let n=e;do{if(n?.matches?.(t))return!0;if(n===r)return!1;n=n?.parentElement}while(n);return!1}function Gm(e,t,r,n){const i=new Map;for(const[o,a]of e)if((a.selected||a.id===n)&&(!a.parentId||!hg(a,e))&&(a.draggable||t&&typeof a.draggable>"u")){const s=e.get(o);s&&i.set(o,{id:o,position:s.position||{x:0,y:0},distance:{x:r.x-s.internals.positionAbsolute.x,y:r.y-s.internals.positionAbsolute.y},extent:s.extent,parentId:s.parentId,origin:s.origin,expandParent:s.expandParent,internals:{positionAbsolute:s.internals.positionAbsolute||{x:0,y:0}},measured:{width:s.measured.width??0,height:s.measured.height??0}})}return i}function pr({nodeId:e,dragItems:t,nodeLookup:r,dragging:n=!0}){const i=[];for(const[a,s]of t){const c=r.get(a)?.internals.userNode;c&&i.push({...c,position:s.position,dragging:n})}if(!e)return[i[0],i];const o=r.get(e)?.internals.userNode;return[o?{...o,position:t.get(e)?.position||o.position,dragging:n}:i[0],i]}function Um({dragItems:e,snapGrid:t,x:r,y:n}){const i=e.values().next().value;if(!i)return null;const o={x:r-i.distance.x,y:n-i.distance.y},a=bt(o,t);return{x:a.x-o.x,y:a.y-o.y}}function Wm({onNodeMouseDown:e,getStoreItems:t,onDragStart:r,onDrag:n,onDragStop:i}){let o={x:null,y:null},a=0,s=new Map,c=!1,u={x:0,y:0},d=null,l=!1,f=null,h=!1,y=!1,v=null;function g({noDragClassName:b,handleSelector:p,domNode:_,isSelectable:x,nodeId:w,nodeClickDistance:E=0}){f=Bt(_);function q({x:R,y:M}){const{nodeLookup:L,nodeExtent:P,snapGrid:H,snapToGrid:z,nodeOrigin:D,onNodeDrag:B,onSelectionDrag:U,onError:G,updateNodePositions:$}=t();o={x:R,y:M};let Y=!1;const I=s.size>1,T=I&&P?Bs(mt(s)):null,k=I&&z?Um({dragItems:s,snapGrid:H,x:R,y:M}):null;for(const[F,j]of s){if(!L.has(F))continue;let V={x:R-j.distance.x,y:M-j.distance.y};z&&(V=k?{x:Math.round(V.x+k.x),y:Math.round(V.y+k.y)}:bt(V,H));let K=null;if(I&&P&&!j.extent&&T){const{positionAbsolute:W}=j.internals,te=W.x-T.x+P[0][0],Z=W.x+j.measured.width-T.x2+P[1][0],ne=W.y-T.y+P[0][1],ee=W.y+j.measured.height-T.y2+P[1][1];K=[[te,ne],[Z,ee]]}const{position:J,positionAbsolute:Q}=Xp({nodeId:F,nextPosition:V,nodeLookup:L,nodeExtent:K||P,nodeOrigin:D,onError:G});Y=Y||j.position.x!==J.x||j.position.y!==J.y,j.position=J,j.internals.positionAbsolute=Q}if(y=y||Y,!!Y&&($(s,!0),v&&(n||B||!w&&U))){const[F,j]=pr({nodeId:w,dragItems:s,nodeLookup:L});n?.(v,s,F,j),B?.(v,F,j),w||U?.(v,j)}}async function C(){if(!d)return;const{transform:R,panBy:M,autoPanSpeed:L,autoPanOnNodeDrag:P}=t();if(!P){c=!1,cancelAnimationFrame(a);return}const[H,z]=Jp(u,d,L);(H!==0||z!==0)&&(o.x=(o.x??0)-H/R[2],o.y=(o.y??0)-z/R[2],await M({x:H,y:z})&&q(o)),a=requestAnimationFrame(C)}function N(R){const{nodeLookup:M,multiSelectionActive:L,nodesDraggable:P,transform:H,snapGrid:z,snapToGrid:D,selectNodesOnDrag:B,onNodeDragStart:U,onSelectionDragStart:G,unselectNodesAndEdges:$}=t();l=!0,(!B||!x)&&!L&&w&&(M.get(w)?.selected||$()),x&&B&&w&&e?.(w);const Y=lt(R.sourceEvent,{transform:H,snapGrid:z,snapToGrid:D,containerBounds:d});if(o=Y,s=Gm(M,P,Y,w),s.size>0&&(r||U||!w&&G)){const[I,T]=pr({nodeId:w,dragItems:s,nodeLookup:M});r?.(R.sourceEvent,s,I,T),U?.(R.sourceEvent,I,T),w||G?.(R.sourceEvent,T)}}const S=Gp().clickDistance(E).on("start",R=>{const{domNode:M,nodeDragThreshold:L,transform:P,snapGrid:H,snapToGrid:z}=t();d=M?.getBoundingClientRect()||null,h=!1,y=!1,v=R.sourceEvent,L===0&&N(R),o=lt(R.sourceEvent,{transform:P,snapGrid:H,snapToGrid:z,containerBounds:d}),u=ye(R.sourceEvent,d)}).on("drag",R=>{const{autoPanOnNodeDrag:M,transform:L,snapGrid:P,snapToGrid:H,nodeDragThreshold:z,nodeLookup:D}=t(),B=lt(R.sourceEvent,{transform:L,snapGrid:P,snapToGrid:H,containerBounds:d});if(v=R.sourceEvent,(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1||w&&!D.has(w))&&(h=!0),!h){if(!c&&M&&l&&(c=!0,C()),!l){const U=ye(R.sourceEvent,d),G=U.x-u.x,$=U.y-u.y;Math.sqrt(G*G+$*$)>z&&N(R)}(o.x!==B.xSnapped||o.y!==B.ySnapped)&&s&&l&&(u=ye(R.sourceEvent,d),q(B))}}).on("end",R=>{if(!(!l||h)&&(c=!1,l=!1,cancelAnimationFrame(a),s.size>0)){const{nodeLookup:M,updateNodePositions:L,onNodeDragStop:P,onSelectionDragStop:H}=t();if(y&&(L(s,!1),y=!1),i||P||!w&&H){const[z,D]=pr({nodeId:w,dragItems:s,nodeLookup:M,dragging:!1});i?.(R.sourceEvent,s,z,D),P?.(R.sourceEvent,z,D),w||H?.(R.sourceEvent,D)}}}).filter(R=>{const M=R.target;return!R.button&&(!b||!Vu(M,`.${b}`,_))&&(!p||Vu(M,p,_))});f.call(S)}function m(){f?.on(".drag",null)}return{update:g,destroy:m}}function Ym(e,t,r){const n=[],i={x:e.x-r,y:e.y-r,width:r*2,height:r*2};for(const o of t.values())pt(i,et(o))>0&&n.push(o);return n}const Km=250;function Zm(e,t,r,n){let i=[],o=1/0;const a=Ym(e,r,t+Km);for(const s of a){const c=[...s.internals.handleBounds?.source??[],...s.internals.handleBounds?.target??[]];for(const u of c){if(n.nodeId===u.nodeId&&n.type===u.type&&n.id===u.id)continue;const{x:d,y:l}=ze(s,u,u.position,!0),f=Math.sqrt(Math.pow(d-e.x,2)+Math.pow(l-e.y,2));f>t||(f<o?(i=[{...u,x:d,y:l}],o=f):f===o&&i.push({...u,x:d,y:l}))}}if(!i.length)return null;if(i.length>1){const s=n.type==="source"?"target":"source";return i.find(c=>c.type===s)??i[0]}return i[0]}function pg(e,t,r,n,i,o=!1){const a=n.get(e);if(!a)return null;const s=i==="strict"?a.internals.handleBounds?.[t]:[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]],c=(r?s?.find(u=>u.id===r):s?.[0])??null;return c&&o?{...c,...ze(a,c,c.position,!0)}:c}function gg(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Xm(e,t){let r=null;return t?r=!0:e&&!t&&(r=!1),r}const vg=()=>!0;function Qm(e,{connectionMode:t,connectionRadius:r,handleId:n,nodeId:i,edgeUpdaterType:o,isTarget:a,domNode:s,nodeLookup:c,lib:u,autoPanOnConnect:d,flowId:l,panBy:f,cancelConnection:h,onConnectStart:y,onConnect:v,onConnectEnd:g,isValidConnection:m=vg,onReconnectEnd:b,updateConnection:p,getTransform:_,getFromHandle:x,autoPanSpeed:w,dragThreshold:E=1,handleDomNode:q}){const C=ng(e.target);let N=0,S;const{x:R,y:M}=ye(e),L=gg(o,q),P=s?.getBoundingClientRect();let H=!1;if(!P||!L)return;const z=pg(i,L,n,c,t);if(!z)return;let D=ye(e,P),B=!1,U=null,G=!1,$=null;function Y(){if(!d||!P)return;const[J,Q]=Jp(D,P,w);f({x:J,y:Q}),N=requestAnimationFrame(Y)}const I={...z,nodeId:i,type:L,position:z.position},T=c.get(i);let F={inProgress:!0,isValid:null,from:ze(T,I,X.Left,!0),fromHandle:I,fromPosition:I.position,fromNode:T,to:D,toHandle:null,toPosition:Tu[I.position],toNode:null,pointer:D};function j(){H=!0,p(F),y?.(e,{nodeId:i,handleId:n,handleType:L})}E===0&&j();function V(J){if(!H){const{x:ee,y:le}=ye(J),de=ee-R,Se=le-M;if(!(de*de+Se*Se>E*E))return;j()}if(!x()||!I){K(J);return}const Q=_();D=ye(J,P),S=Zm(_t(D,Q,!1,[1,1]),r,c,I),B||(Y(),B=!0);const W=yg(J,{handle:S,connectionMode:t,fromNodeId:i,fromHandleId:n,fromType:a?"target":"source",isValidConnection:m,doc:C,lib:u,flowId:l,nodeLookup:c});$=W.handleDomNode,U=W.connection,G=Xm(!!S,W.isValid);const te=c.get(i),Z=te?ze(te,I,X.Left,!0):F.from,ne={...F,from:Z,isValid:G,to:W.toHandle&&G?kt({x:W.toHandle.x,y:W.toHandle.y},Q):D,toHandle:W.toHandle,toPosition:G&&W.toHandle?W.toHandle.position:Tu[I.position],toNode:W.toHandle?c.get(W.toHandle.nodeId):null,pointer:D};p(ne),F=ne}function K(J){if(!("touches"in J&&J.touches.length>0)){if(H){(S||$)&&U&&G&&v?.(U);const{inProgress:Q,...W}=F,te={...W,toPosition:F.toHandle?F.toPosition:null};g?.(J,te),o&&b?.(J,te)}h(),cancelAnimationFrame(N),B=!1,G=!1,U=null,$=null,C.removeEventListener("mousemove",V),C.removeEventListener("mouseup",K),C.removeEventListener("touchmove",V),C.removeEventListener("touchend",K)}}C.addEventListener("mousemove",V),C.addEventListener("mouseup",K),C.addEventListener("touchmove",V),C.addEventListener("touchend",K)}function yg(e,{handle:t,connectionMode:r,fromNodeId:n,fromHandleId:i,fromType:o,doc:a,lib:s,flowId:c,isValidConnection:u=vg,nodeLookup:d}){const l=o==="target",f=t?a.querySelector(`.${s}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:h,y}=ye(e),v=a.elementFromPoint(h,y),g=v?.classList.contains(`${s}-flow__handle`)?v:f,m={handleDomNode:g,isValid:!1,connection:null,toHandle:null};if(g){const b=gg(void 0,g),p=g.getAttribute("data-nodeid"),_=g.getAttribute("data-handleid"),x=g.classList.contains("connectable"),w=g.classList.contains("connectableend");if(!p||!b)return m;const E={source:l?p:n,sourceHandle:l?_:i,target:l?n:p,targetHandle:l?i:_};m.connection=E;const C=x&&w&&(r===Qe.Strict?l&&b==="source"||!l&&b==="target":p!==n||_!==i);m.isValid=C&&u(E),m.toHandle=pg(p,b,_,d,r,!0)}return m}const Vs={onPointerDown:Qm,isValid:yg};function Jm({domNode:e,panZoom:t,getTransform:r,getViewScale:n}){const i=Bt(e);function o({translateExtent:s,width:c,height:u,zoomStep:d=1,pannable:l=!0,zoomable:f=!0,inversePan:h=!1}){const y=p=>{if(p.sourceEvent.type!=="wheel"||!t)return;const _=r(),x=p.sourceEvent.ctrlKey&&gt()?10:1,w=-p.sourceEvent.deltaY*(p.sourceEvent.deltaMode===1?.05:p.sourceEvent.deltaMode?1:.002)*d,E=_[2]*Math.pow(2,w*x);t.scaleTo(E)};let v=[0,0];const g=p=>{(p.sourceEvent.type==="mousedown"||p.sourceEvent.type==="touchstart")&&(v=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY])},m=p=>{const _=r();if(p.sourceEvent.type!=="mousemove"&&p.sourceEvent.type!=="touchmove"||!t)return;const x=[p.sourceEvent.clientX??p.sourceEvent.touches[0].clientX,p.sourceEvent.clientY??p.sourceEvent.touches[0].clientY],w=[x[0]-v[0],x[1]-v[1]];v=x;const E=n()*Math.max(_[2],Math.log(_[2]))*(h?-1:1),q={x:_[0]-w[0]*E,y:_[1]-w[1]*E},C=[[0,0],[c,u]];t.setViewportConstrained({x:q.x,y:q.y,zoom:_[2]},C,s)},b=Vp().on("start",g).on("zoom",l?m:null).on("zoom.wheel",f?y:null);i.call(b,{})}function a(){i.on("zoom",null)}return{update:o,destroy:a,pointer:$p}}const $t=e=>({x:e.x,y:e.y,zoom:e.k}),gr=({x:e,y:t,zoom:r})=>im.translate(e,t).scale(r),Ze=(e,t)=>e.target.closest(`.${t}`),mg=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),eb=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,vr=(e,t=0,r=eb,n=()=>{})=>{const i=typeof t=="number"&&t>0;return i||n(),i?e.transition().duration(t).ease(r).on("end",n):e},bg=e=>{const t=e.ctrlKey&&gt()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function tb({zoomPanValues:e,noWheelClassName:t,d3Selection:r,d3Zoom:n,panOnScrollMode:i,panOnScrollSpeed:o,zoomOnPinch:a,onPanZoomStart:s,onPanZoom:c,onPanZoomEnd:u}){return d=>{if(Ze(d,t))return d.ctrlKey&&d.preventDefault(),!1;d.preventDefault(),d.stopImmediatePropagation();const l=r.property("__zoom").k||1;if(d.ctrlKey&&a){const g=$p(d),m=bg(d),b=l*Math.pow(2,m);n.scaleTo(r,b,g,d);return}const f=d.deltaMode===1?20:1;let h=i===Be.Vertical?0:d.deltaX*f,y=i===Be.Horizontal?0:d.deltaY*f;!gt()&&d.shiftKey&&i!==Be.Vertical&&(h=d.deltaY*f,y=0),n.translateBy(r,-(h/l)*o,-(y/l)*o,{internal:!0});const v=$t(r.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(c?.(d,v),e.panScrollTimeout=setTimeout(()=>{u?.(d,v),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,s?.(d,v))}}function rb({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:r}){return function(n,i){const o=n.type==="wheel",a=!t&&o&&!n.ctrlKey,s=Ze(n,e);if(n.ctrlKey&&o&&s&&n.preventDefault(),a||s)return null;n.preventDefault(),r.call(this,n,i)}}function nb({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:r}){return n=>{if(n.sourceEvent?.internal)return;const i=$t(n.transform);e.mouseButton=n.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,n.sourceEvent?.type==="mousedown"&&t(!0),r&&r?.(n.sourceEvent,i)}}function ib({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:r,onTransformChange:n,onPanZoom:i}){return o=>{e.usedRightMouseButton=!!(r&&mg(t,e.mouseButton??0)),o.sourceEvent?.sync||n([o.transform.x,o.transform.y,o.transform.k]),i&&!o.sourceEvent?.internal&&i?.(o.sourceEvent,$t(o.transform))}}function ob({zoomPanValues:e,panOnDrag:t,panOnScroll:r,onDraggingChange:n,onPanZoomEnd:i,onPaneContextMenu:o}){return a=>{if(!a.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,o&&mg(t,e.mouseButton??0)&&!e.usedRightMouseButton&&a.sourceEvent&&o(a.sourceEvent),e.usedRightMouseButton=!1,n(!1),i)){const s=$t(a.transform);e.prevViewport=s,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(a.sourceEvent,s)},r?150:0)}}}function ab({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:r,panOnDrag:n,panOnScroll:i,zoomOnDoubleClick:o,userSelectionActive:a,noWheelClassName:s,noPanClassName:c,lib:u,connectionInProgress:d}){return l=>{const f=e||t,h=r&&l.ctrlKey,y=l.type==="wheel";if(l.button===1&&l.type==="mousedown"&&(Ze(l,`${u}-flow__node`)||Ze(l,`${u}-flow__edge`)))return!0;if(!n&&!f&&!i&&!o&&!r||a||d&&!y||Ze(l,s)&&y||Ze(l,c)&&(!y||i&&y&&!e)||!r&&l.ctrlKey&&y)return!1;if(!r&&l.type==="touchstart"&&l.touches?.length>1)return l.preventDefault(),!1;if(!f&&!i&&!h&&y||!n&&(l.type==="mousedown"||l.type==="touchstart")||Array.isArray(n)&&!n.includes(l.button)&&l.type==="mousedown")return!1;const v=Array.isArray(n)&&n.includes(l.button)||!l.button||l.button<=1;return(!l.ctrlKey||y)&&v}}function sb({domNode:e,minZoom:t,maxZoom:r,translateExtent:n,viewport:i,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:s,onDraggingChange:c}){const u={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),l=Vp().scaleExtent([t,r]).translateExtent(n),f=Bt(e).call(l);b({x:i.x,y:i.y,zoom:Je(i.zoom,t,r)},[[0,0],[d.width,d.height]],n);const h=f.on("wheel.zoom"),y=f.on("dblclick.zoom");l.wheelDelta(bg);function v(S,R){return f?new Promise(M=>{l?.interpolate(R?.interpolate==="linear"?dt:hr).transform(vr(f,R?.duration,R?.ease,()=>M(!0)),S)}):Promise.resolve(!1)}function g({noWheelClassName:S,noPanClassName:R,onPaneContextMenu:M,userSelectionActive:L,panOnScroll:P,panOnDrag:H,panOnScrollMode:z,panOnScrollSpeed:D,preventScrolling:B,zoomOnPinch:U,zoomOnScroll:G,zoomOnDoubleClick:$,zoomActivationKeyPressed:Y,lib:I,onTransformChange:T,connectionInProgress:k,paneClickDistance:F,selectionOnDrag:j}){L&&!u.isZoomingOrPanning&&m();const V=P&&!Y&&!L;l.clickDistance(j?1/0:!ve(F)||F<0?0:F);const K=V?tb({zoomPanValues:u,noWheelClassName:S,d3Selection:f,d3Zoom:l,panOnScrollMode:z,panOnScrollSpeed:D,zoomOnPinch:U,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:s}):rb({noWheelClassName:S,preventScrolling:B,d3ZoomHandler:h});if(f.on("wheel.zoom",K,{passive:!1}),!L){const Q=nb({zoomPanValues:u,onDraggingChange:c,onPanZoomStart:a});l.on("start",Q);const W=ib({zoomPanValues:u,panOnDrag:H,onPaneContextMenu:!!M,onPanZoom:o,onTransformChange:T});l.on("zoom",W);const te=ob({zoomPanValues:u,panOnDrag:H,panOnScroll:P,onPaneContextMenu:M,onPanZoomEnd:s,onDraggingChange:c});l.on("end",te)}const J=ab({zoomActivationKeyPressed:Y,panOnDrag:H,zoomOnScroll:G,panOnScroll:P,zoomOnDoubleClick:$,zoomOnPinch:U,userSelectionActive:L,noPanClassName:R,noWheelClassName:S,lib:I,connectionInProgress:k});l.filter(J),$?f.on("dblclick.zoom",y):f.on("dblclick.zoom",null)}function m(){l.on("zoom",null)}async function b(S,R,M){const L=gr(S),P=l?.constrain()(L,R,M);return P&&await v(P),new Promise(H=>H(P))}async function p(S,R){const M=gr(S);return await v(M,R),new Promise(L=>L(M))}function _(S){if(f){const R=gr(S),M=f.property("__zoom");(M.k!==S.zoom||M.x!==S.x||M.y!==S.y)&&l?.transform(f,R,null,{sync:!0})}}function x(){const S=f?om(f.node()):{x:0,y:0,k:1};return{x:S.x,y:S.y,zoom:S.k}}function w(S,R){return f?new Promise(M=>{l?.interpolate(R?.interpolate==="linear"?dt:hr).scaleTo(vr(f,R?.duration,R?.ease,()=>M(!0)),S)}):Promise.resolve(!1)}function E(S,R){return f?new Promise(M=>{l?.interpolate(R?.interpolate==="linear"?dt:hr).scaleBy(vr(f,R?.duration,R?.ease,()=>M(!0)),S)}):Promise.resolve(!1)}function q(S){l?.scaleExtent(S)}function C(S){l?.translateExtent(S)}function N(S){const R=!ve(S)||S<0?0:S;l?.clickDistance(R)}return{update:g,destroy:m,setViewport:p,setViewportConstrained:b,getViewport:x,scaleTo:w,scaleBy:E,setScaleExtent:q,setTranslateExtent:C,syncViewport:_,setClickDistance:N}}var $e;(function(e){e.Line="line",e.Handle="handle"})($e||($e={}));const ub=["top-left","top-right","bottom-left","bottom-right"],cb=["top","right","bottom","left"];function db({width:e,prevWidth:t,height:r,prevHeight:n,affectsX:i,affectsY:o}){const a=e-t,s=r-n,c=[a>0?1:a<0?-1:0,s>0?1:s<0?-1:0];return a&&i&&(c[0]=c[0]*-1),s&&o&&(c[1]=c[1]*-1),c}function Gu(e){const t=e.includes("right")||e.includes("left"),r=e.includes("bottom")||e.includes("top"),n=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:r,affectsX:n,affectsY:i}}function Oe(e,t){return Math.max(0,t-e)}function ke(e,t){return Math.max(0,e-t)}function Mt(e,t,r){return Math.max(0,t-e,e-r)}function Uu(e,t){return e?!t:t}function lb(e,t,r,n,i,o,a,s){let{affectsX:c,affectsY:u}=t;const{isHorizontal:d,isVertical:l}=t,f=d&&l,{xSnapped:h,ySnapped:y}=r,{minWidth:v,maxWidth:g,minHeight:m,maxHeight:b}=n,{x:p,y:_,width:x,height:w,aspectRatio:E}=e;let q=Math.floor(d?h-e.pointerX:0),C=Math.floor(l?y-e.pointerY:0);const N=x+(c?-q:q),S=w+(u?-C:C),R=-o[0]*x,M=-o[1]*w;let L=Mt(N,v,g),P=Mt(S,m,b);if(a){let D=0,B=0;c&&q<0?D=Oe(p+q+R,a[0][0]):!c&&q>0&&(D=ke(p+N+R,a[1][0])),u&&C<0?B=Oe(_+C+M,a[0][1]):!u&&C>0&&(B=ke(_+S+M,a[1][1])),L=Math.max(L,D),P=Math.max(P,B)}if(s){let D=0,B=0;c&&q>0?D=ke(p+q,s[0][0]):!c&&q<0&&(D=Oe(p+N,s[1][0])),u&&C>0?B=ke(_+C,s[0][1]):!u&&C<0&&(B=Oe(_+S,s[1][1])),L=Math.max(L,D),P=Math.max(P,B)}if(i){if(d){const D=Mt(N/E,m,b)*E;if(L=Math.max(L,D),a){let B=0;!c&&!u||c&&!u&&f?B=ke(_+M+N/E,a[1][1])*E:B=Oe(_+M+(c?q:-q)/E,a[0][1])*E,L=Math.max(L,B)}if(s){let B=0;!c&&!u||c&&!u&&f?B=Oe(_+N/E,s[1][1])*E:B=ke(_+(c?q:-q)/E,s[0][1])*E,L=Math.max(L,B)}}if(l){const D=Mt(S*E,v,g)/E;if(P=Math.max(P,D),a){let B=0;!c&&!u||u&&!c&&f?B=ke(p+S*E+R,a[1][0])/E:B=Oe(p+(u?C:-C)*E+R,a[0][0])/E,P=Math.max(P,B)}if(s){let B=0;!c&&!u||u&&!c&&f?B=Oe(p+S*E,s[1][0])/E:B=ke(p+(u?C:-C)*E,s[0][0])/E,P=Math.max(P,B)}}}C=C+(C<0?P:-P),q=q+(q<0?L:-L),i&&(f?N>S*E?C=(Uu(c,u)?-q:q)/E:q=(Uu(c,u)?-C:C)*E:d?(C=q/E,u=c):(q=C*E,c=u));const H=c?p+q:p,z=u?_+C:_;return{width:x+(c?-q:q),height:w+(u?-C:C),x:o[0]*q*(c?-1:1)+H,y:o[1]*C*(u?-1:1)+z}}const _g={width:0,height:0,x:0,y:0},fb={..._g,pointerX:0,pointerY:0,aspectRatio:1};function hb(e){return[[0,0],[e.measured.width,e.measured.height]]}function pb(e,t,r){const n=t.position.x+e.position.x,i=t.position.y+e.position.y,o=e.measured.width??0,a=e.measured.height??0,s=r[0]*o,c=r[1]*a;return[[n-s,i-c],[n+o-s,i+a-c]]}function gb({domNode:e,nodeId:t,getStoreItems:r,onChange:n,onEnd:i}){const o=Bt(e);let a={controlDirection:Gu("bottom-right"),boundaries:{minWidth:0,minHeight:0,maxWidth:Number.MAX_VALUE,maxHeight:Number.MAX_VALUE},resizeDirection:void 0,keepAspectRatio:!1};function s({controlPosition:u,boundaries:d,keepAspectRatio:l,resizeDirection:f,onResizeStart:h,onResize:y,onResizeEnd:v,shouldResize:g}){let m={..._g},b={...fb};a={boundaries:d,resizeDirection:f,keepAspectRatio:l,controlDirection:Gu(u)};let p,_=null,x=[],w,E,q,C=!1;const N=Gp().on("start",S=>{const{nodeLookup:R,transform:M,snapGrid:L,snapToGrid:P,nodeOrigin:H,paneDomNode:z}=r();if(p=R.get(t),!p)return;_=z?.getBoundingClientRect()??null;const{xSnapped:D,ySnapped:B}=lt(S.sourceEvent,{transform:M,snapGrid:L,snapToGrid:P,containerBounds:_});m={width:p.measured.width??0,height:p.measured.height??0,x:p.position.x??0,y:p.position.y??0},b={...m,pointerX:D,pointerY:B,aspectRatio:m.width/m.height},w=void 0,p.parentId&&(p.extent==="parent"||p.expandParent)&&(w=R.get(p.parentId),E=w&&p.extent==="parent"?hb(w):void 0),x=[],q=void 0;for(const[U,G]of R)if(G.parentId===t&&(x.push({id:U,position:{...G.position},extent:G.extent}),G.extent==="parent"||G.expandParent)){const $=pb(G,p,G.origin??H);q?q=[[Math.min($[0][0],q[0][0]),Math.min($[0][1],q[0][1])],[Math.max($[1][0],q[1][0]),Math.max($[1][1],q[1][1])]]:q=$}h?.(S,{...m})}).on("drag",S=>{const{transform:R,snapGrid:M,snapToGrid:L,nodeOrigin:P}=r(),H=lt(S.sourceEvent,{transform:R,snapGrid:M,snapToGrid:L,containerBounds:_}),z=[];if(!p)return;const{x:D,y:B,width:U,height:G}=m,$={},Y=p.origin??P,{width:I,height:T,x:k,y:F}=lb(b,a.controlDirection,H,a.boundaries,a.keepAspectRatio,Y,E,q),j=I!==U,V=T!==G,K=k!==D&&j,J=F!==B&&V;if(!K&&!J&&!j&&!V)return;if((K||J||Y[0]===1||Y[1]===1)&&($.x=K?k:m.x,$.y=J?F:m.y,m.x=$.x,m.y=$.y,x.length>0)){const Z=k-D,ne=F-B;for(const ee of x)ee.position={x:ee.position.x-Z+Y[0]*(I-U),y:ee.position.y-ne+Y[1]*(T-G)},z.push(ee)}if((j||V)&&($.width=j&&(!a.resizeDirection||a.resizeDirection==="horizontal")?I:m.width,$.height=V&&(!a.resizeDirection||a.resizeDirection==="vertical")?T:m.height,m.width=$.width,m.height=$.height),w&&p.expandParent){const Z=Y[0]*($.width??0);$.x&&$.x<Z&&(m.x=Z,b.x=b.x-($.x-Z));const ne=Y[1]*($.height??0);$.y&&$.y<ne&&(m.y=ne,b.y=b.y-($.y-ne))}const Q=db({width:m.width,prevWidth:U,height:m.height,prevHeight:G,affectsX:a.controlDirection.affectsX,affectsY:a.controlDirection.affectsY}),W={...m,direction:Q};g?.(S,W)!==!1&&(C=!0,y?.(S,W),n($,z))}).on("end",S=>{C&&(v?.(S,{...m}),i?.({...m}),C=!1)});o.call(N)}function c(){o.on(".drag",null)}return{update:s,destroy:c}}var yr={exports:{}},mr={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wu;function vb(){if(Wu)return mr;Wu=1;var e=Jy(),t=em();function r(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,o=e.useRef,a=e.useEffect,s=e.useMemo,c=e.useDebugValue;return mr.useSyncExternalStoreWithSelector=function(u,d,l,f,h){var y=o(null);if(y.current===null){var v={hasValue:!1,value:null};y.current=v}else v=y.current;y=s(function(){function m(w){if(!b){if(b=!0,p=w,w=f(w),h!==void 0&&v.hasValue){var E=v.value;if(h(E,w))return _=E}return _=w}if(E=_,n(p,w))return E;var q=f(w);return h!==void 0&&h(E,q)?(p=w,E):(p=w,_=q)}var b=!1,p,_,x=l===void 0?null:l;return[function(){return m(d())},x===null?void 0:function(){return m(x())}]},[d,l,f,h]);var g=i(u,y[0],y[1]);return a(function(){v.hasValue=!0,v.value=g},[g]),c(g),g},mr}var Yu;function yb(){return Yu||(Yu=1,yr.exports=vb()),yr.exports}var mb=yb();const bb=zp(mb),_b={},Ku=e=>{let t;const r=new Set,n=(d,l)=>{const f=typeof d=="function"?d(t):d;if(!Object.is(f,t)){const h=t;t=l??(typeof f!="object"||f===null)?f:Object.assign({},t,f),r.forEach(y=>y(t,h))}},i=()=>t,c={setState:n,getState:i,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(_b?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,i,c);return c},wb=e=>e?Ku(e):Ku,{useDebugValue:xb}=tm,{useSyncExternalStoreWithSelector:Eb}=bb,Sb=e=>e;function wg(e,t=Sb,r){const n=Eb(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return xb(n),n}const Zu=(e,t)=>{const r=wb(e),n=(i,o=t)=>wg(r,i,o);return Object.assign(n,r),n},Cb=(e,t)=>e?Zu(e,t):Zu;function ie(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[n,i]of e)if(!Object.is(i,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(const n of r)if(!Object.prototype.hasOwnProperty.call(t,n)||!Object.is(e[n],t[n]))return!1;return!0}const Vt=O.createContext(null),qb=Vt.Provider,xg=xe.error001();function re(e,t){const r=O.useContext(Vt);if(r===null)throw new Error(xg);return wg(r,e,t)}function oe(){const e=O.useContext(Vt);if(e===null)throw new Error(xg);return O.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const Xu={display:"none"},Rb={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Eg="react-flow__node-desc",Sg="react-flow__edge-desc",Ib="react-flow__aria-live",Nb=e=>e.ariaLiveMessage,Mb=e=>e.ariaLabelConfig;function Ab({rfId:e}){const t=re(Nb);return A.jsx("div",{id:`${Ib}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Rb,children:t})}function Tb({rfId:e,disableKeyboardA11y:t}){const r=re(Mb);return A.jsxs(A.Fragment,{children:[A.jsx("div",{id:`${Eg}-${e}`,style:Xu,children:t?r["node.a11yDescription.default"]:r["node.a11yDescription.keyboardDisabled"]}),A.jsx("div",{id:`${Sg}-${e}`,style:Xu,children:r["edge.a11yDescription.default"]}),!t&&A.jsx(Ab,{rfId:e})]})}const Gt=O.forwardRef(({position:e="top-left",children:t,className:r,style:n,...i},o)=>{const a=`${e}`.split("-");return A.jsx("div",{className:ue(["react-flow__panel",r,...a]),style:n,ref:o,...i,children:t})});Gt.displayName="Panel";function Pb({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:A.jsx(Gt,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:A.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Ob=e=>{const t=[],r=[];for(const[,n]of e.nodeLookup)n.selected&&t.push(n.internals.userNode);for(const[,n]of e.edgeLookup)n.selected&&r.push(n);return{selectedNodes:t,selectedEdges:r}},At=e=>e.id;function kb(e,t){return ie(e.selectedNodes.map(At),t.selectedNodes.map(At))&&ie(e.selectedEdges.map(At),t.selectedEdges.map(At))}function Lb({onSelectionChange:e}){const t=oe(),{selectedNodes:r,selectedEdges:n}=re(Ob,kb);return O.useEffect(()=>{const i={nodes:r,edges:n};e?.(i),t.getState().onSelectionChangeHandlers.forEach(o=>o(i))},[r,n,e]),null}const Db=e=>!!e.onSelectionChangeHandlers;function jb({onSelectionChange:e}){const t=re(Db);return e||t?A.jsx(Lb,{onSelectionChange:e}):null}const Cg=[0,0],Fb={x:0,y:0,zoom:1},Bb=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","ariaLabelConfig","zIndexMode"],Qu=[...Bb,"rfId"],Hb=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges}),Ju={translateExtent:ft,nodeOrigin:Cg,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1"};function zb(e){const{setNodes:t,setEdges:r,setMinZoom:n,setMaxZoom:i,setTranslateExtent:o,setNodeExtent:a,reset:s,setDefaultNodesAndEdges:c}=re(Hb,ie),u=oe();O.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{d.current=Ju,s()}),[]);const d=O.useRef(Ju);return O.useEffect(()=>{for(const l of Qu){const f=e[l],h=d.current[l];f!==h&&(typeof e[l]>"u"||(l==="nodes"?t(f):l==="edges"?r(f):l==="minZoom"?n(f):l==="maxZoom"?i(f):l==="translateExtent"?o(f):l==="nodeExtent"?a(f):l==="ariaLabelConfig"?u.setState({ariaLabelConfig:Cm(f)}):l==="fitView"?u.setState({fitViewQueued:f}):l==="fitViewOptions"?u.setState({fitViewOptions:f}):u.setState({[l]:f})))}d.current=e},Qu.map(l=>e[l])),null}function ec(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function $b(e){const[t,r]=O.useState(e==="system"?null:e);return O.useEffect(()=>{if(e!=="system"){r(e);return}const n=ec(),i=()=>r(n?.matches?"dark":"light");return i(),n?.addEventListener("change",i),()=>{n?.removeEventListener("change",i)}},[e]),t!==null?t:ec()?.matches?"dark":"light"}const tc=typeof document<"u"?document:null;function vt(e=null,t={target:tc,actInsideInputWithModifier:!0}){const[r,n]=O.useState(!1),i=O.useRef(!1),o=O.useRef(new Set([])),[a,s]=O.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(l=>typeof l=="string").map(l=>l.replace("+",`
`).replace(`

`,`
+`).split(`
`)),d=u.reduce((l,f)=>l.concat(...f),[]);return[u,d]}return[[],[]]},[e]);return O.useEffect(()=>{const c=t?.target??tc,u=t?.actInsideInputWithModifier??!0;if(e!==null){const d=h=>{if(i.current=h.ctrlKey||h.metaKey||h.shiftKey||h.altKey,(!i.current||i.current&&!u)&&ig(h))return!1;const v=nc(h.code,s);if(o.current.add(h[v]),rc(a,o.current,!1)){const g=h.composedPath?.()?.[0]||h.target,m=g?.nodeName==="BUTTON"||g?.nodeName==="A";t.preventDefault!==!1&&(i.current||!m)&&h.preventDefault(),n(!0)}},l=h=>{const y=nc(h.code,s);rc(a,o.current,!0)?(n(!1),o.current.clear()):o.current.delete(h[y]),h.key==="Meta"&&o.current.clear(),i.current=!1},f=()=>{o.current.clear(),n(!1)};return c?.addEventListener("keydown",d),c?.addEventListener("keyup",l),window.addEventListener("blur",f),window.addEventListener("contextmenu",f),()=>{c?.removeEventListener("keydown",d),c?.removeEventListener("keyup",l),window.removeEventListener("blur",f),window.removeEventListener("contextmenu",f)}}},[e,n]),r}function rc(e,t,r){return e.filter(n=>r||n.length===t.size).some(n=>n.every(i=>t.has(i)))}function nc(e,t){return t.includes(e)?"code":"key"}const Vb=()=>{const e=oe();return O.useMemo(()=>({zoomIn:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:r}=e.getState();return r?r.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,r)=>{const{panZoom:n}=e.getState();return n?n.scaleTo(t,{duration:r?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,r)=>{const{transform:[n,i,o],panZoom:a}=e.getState();return a?(await a.setViewport({x:t.x??n,y:t.y??i,zoom:t.zoom??o},r),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,r,n]=e.getState().transform;return{x:t,y:r,zoom:n}},setCenter:async(t,r,n)=>e.getState().setCenter(t,r,n),fitBounds:async(t,r)=>{const{width:n,height:i,minZoom:o,maxZoom:a,panZoom:s}=e.getState(),c=Ys(t,n,i,o,a,r?.padding??.1);return s?(await s.setViewport(c,{duration:r?.duration,ease:r?.ease,interpolate:r?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,r={})=>{const{transform:n,snapGrid:i,snapToGrid:o,domNode:a}=e.getState();if(!a)return t;const{x:s,y:c}=a.getBoundingClientRect(),u={x:t.x-s,y:t.y-c},d=r.snapGrid??i,l=r.snapToGrid??o;return _t(u,n,l,d)},flowToScreenPosition:t=>{const{transform:r,domNode:n}=e.getState();if(!n)return t;const{x:i,y:o}=n.getBoundingClientRect(),a=kt(t,r);return{x:a.x+i,y:a.y+o}}}),[])};function qg(e,t){const r=[],n=new Map,i=[];for(const o of e)if(o.type==="add"){i.push(o);continue}else if(o.type==="remove"||o.type==="replace")n.set(o.id,[o]);else{const a=n.get(o.id);a?a.push(o):n.set(o.id,[o])}for(const o of t){const a=n.get(o.id);if(!a){r.push(o);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){r.push({...a[0].item});continue}const s={...o};for(const c of a)Gb(c,s);r.push(s)}return i.length&&i.forEach(o=>{o.index!==void 0?r.splice(o.index,0,{...o.item}):r.push({...o.item})}),r}function Gb(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured={...e.dimensions},e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Rg(e,t){return qg(e,t)}function Ig(e,t){return qg(e,t)}function Fe(e,t){return{id:e,type:"select",selected:t}}function Xe(e,t=new Set,r=!1){const n=[];for(const[i,o]of e){const a=t.has(i);!(o.selected===void 0&&!a)&&o.selected!==a&&(r&&(o.selected=a),n.push(Fe(o.id,a)))}return n}function ic({items:e=[],lookup:t}){const r=[],n=new Map(e.map(i=>[i.id,i]));for(const[i,o]of e.entries()){const a=t.get(o.id),s=a?.internals?.userNode??a;s!==void 0&&s!==o&&r.push({id:o.id,item:o,type:"replace"}),s===void 0&&r.push({item:o,type:"add",index:i})}for(const[i]of t)n.get(i)===void 0&&r.push({id:i,type:"remove"});return r}function oc(e){return{id:e.id,type:"remove"}}const ac=e=>gm(e),Ub=e=>Zp(e);function Ng(e){return O.forwardRef(e)}const Wb=typeof window<"u"?O.useLayoutEffect:O.useEffect;function sc(e){const[t,r]=O.useState(BigInt(0)),[n]=O.useState(()=>Yb(()=>r(i=>i+BigInt(1))));return Wb(()=>{const i=n.get();i.length&&(e(i),n.reset())},[t]),n}function Yb(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:r=>{t.push(r),e()}}}const Mg=O.createContext(null);function Kb({children:e}){const t=oe(),r=O.useCallback(s=>{const{nodes:c=[],setNodes:u,hasDefaultNodes:d,onNodesChange:l,nodeLookup:f,fitViewQueued:h,onNodesChangeMiddlewareMap:y}=t.getState();let v=c;for(const m of s)v=typeof m=="function"?m(v):m;let g=ic({items:v,lookup:f});for(const m of y.values())g=m(g);d&&u(v),g.length>0?l?.(g):h&&window.requestAnimationFrame(()=>{const{fitViewQueued:m,nodes:b,setNodes:p}=t.getState();m&&p(b)})},[]),n=sc(r),i=O.useCallback(s=>{const{edges:c=[],setEdges:u,hasDefaultEdges:d,onEdgesChange:l,edgeLookup:f}=t.getState();let h=c;for(const y of s)h=typeof y=="function"?y(h):y;d?u(h):l&&l(ic({items:h,lookup:f}))},[]),o=sc(i),a=O.useMemo(()=>({nodeQueue:n,edgeQueue:o}),[]);return A.jsx(Mg.Provider,{value:a,children:e})}function Zb(){const e=O.useContext(Mg);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Xb=e=>!!e.panZoom;function tu(){const e=Vb(),t=oe(),r=Zb(),n=re(Xb),i=O.useMemo(()=>{const o=l=>t.getState().nodeLookup.get(l),a=l=>{r.nodeQueue.push(l)},s=l=>{r.edgeQueue.push(l)},c=l=>{const{nodeLookup:f,nodeOrigin:h}=t.getState(),y=ac(l)?l:f.get(l.id),v=y.parentId?rg(y.position,y.measured,y.parentId,f,h):y.position,g={...y,position:v,width:y.measured?.width??y.width,height:y.measured?.height??y.height};return et(g)},u=(l,f,h={replace:!1})=>{a(y=>y.map(v=>{if(v.id===l){const g=typeof f=="function"?f(v):f;return h.replace&&ac(g)?g:{...v,...g}}return v}))},d=(l,f,h={replace:!1})=>{s(y=>y.map(v=>{if(v.id===l){const g=typeof f=="function"?f(v):f;return h.replace&&Ub(g)?g:{...v,...g}}return v}))};return{getNodes:()=>t.getState().nodes.map(l=>({...l})),getNode:l=>o(l)?.internals.userNode,getInternalNode:o,getEdges:()=>{const{edges:l=[]}=t.getState();return l.map(f=>({...f}))},getEdge:l=>t.getState().edgeLookup.get(l),setNodes:a,setEdges:s,addNodes:l=>{const f=Array.isArray(l)?l:[l];r.nodeQueue.push(h=>[...h,...f])},addEdges:l=>{const f=Array.isArray(l)?l:[l];r.edgeQueue.push(h=>[...h,...f])},toObject:()=>{const{nodes:l=[],edges:f=[],transform:h}=t.getState(),[y,v,g]=h;return{nodes:l.map(m=>({...m})),edges:f.map(m=>({...m})),viewport:{x:y,y:v,zoom:g}}},deleteElements:async({nodes:l=[],edges:f=[]})=>{const{nodes:h,edges:y,onNodesDelete:v,onEdgesDelete:g,triggerNodeChanges:m,triggerEdgeChanges:b,onDelete:p,onBeforeDelete:_}=t.getState(),{nodes:x,edges:w}=await _m({nodesToRemove:l,edgesToRemove:f,nodes:h,edges:y,onBeforeDelete:_}),E=w.length>0,q=x.length>0;if(E){const C=w.map(oc);g?.(w),b(C)}if(q){const C=x.map(oc);v?.(x),m(C)}return(q||E)&&p?.({nodes:x,edges:w}),{deletedNodes:x,deletedEdges:w}},getIntersectingNodes:(l,f=!0,h)=>{const y=Ou(l),v=y?l:c(l),g=h!==void 0;return v?(h||t.getState().nodes).filter(m=>{const b=t.getState().nodeLookup.get(m.id);if(b&&!y&&(m.id===l.id||!b.internals.positionAbsolute))return!1;const p=et(g?m:b),_=pt(p,v);return f&&_>0||_>=p.width*p.height||_>=v.width*v.height}):[]},isNodeIntersecting:(l,f,h=!0)=>{const v=Ou(l)?l:c(l);if(!v)return!1;const g=pt(v,f);return h&&g>0||g>=f.width*f.height||g>=v.width*v.height},updateNode:u,updateNodeData:(l,f,h={replace:!1})=>{u(l,y=>{const v=typeof f=="function"?f(y):f;return h.replace?{...y,data:v}:{...y,data:{...y.data,...v}}},h)},updateEdge:d,updateEdgeData:(l,f,h={replace:!1})=>{d(l,y=>{const v=typeof f=="function"?f(y):f;return h.replace?{...y,data:v}:{...y,data:{...y.data,...v}}},h)},getNodesBounds:l=>{const{nodeLookup:f,nodeOrigin:h}=t.getState();return vm(l,{nodeLookup:f,nodeOrigin:h})},getHandleConnections:({type:l,id:f,nodeId:h})=>Array.from(t.getState().connectionLookup.get(`${h}-${l}${f?`-${f}`:""}`)?.values()??[]),getNodeConnections:({type:l,handleId:f,nodeId:h})=>Array.from(t.getState().connectionLookup.get(`${h}${l?f?`-${l}-${f}`:`-${l}`:""}`)?.values()??[]),fitView:async l=>{const f=t.getState().fitViewResolver??Sm();return t.setState({fitViewQueued:!0,fitViewOptions:l,fitViewResolver:f}),r.nodeQueue.push(h=>[...h]),f.promise}}},[]);return O.useMemo(()=>({...i,...e,viewportInitialized:n}),[n])}const uc=e=>e.selected,Qb=typeof window<"u"?window:void 0;function Jb({deleteKeyCode:e,multiSelectionKeyCode:t}){const r=oe(),{deleteElements:n}=tu(),i=vt(e,{actInsideInputWithModifier:!1}),o=vt(t,{target:Qb});O.useEffect(()=>{if(i){const{edges:a,nodes:s}=r.getState();n({nodes:s.filter(uc),edges:a.filter(uc)}),r.setState({nodesSelectionActive:!1})}},[i]),O.useEffect(()=>{r.setState({multiSelectionActive:o})},[o])}function e_(e){const t=oe();O.useEffect(()=>{const r=()=>{if(!e.current||!(e.current.checkVisibility?.()??!0))return!1;const n=Ks(e.current);(n.height===0||n.width===0)&&t.getState().onError?.("004",xe.error004()),t.setState({width:n.width||500,height:n.height||500})};if(e.current){r(),window.addEventListener("resize",r);const n=new ResizeObserver(()=>r());return n.observe(e.current),()=>{window.removeEventListener("resize",r),n&&e.current&&n.unobserve(e.current)}}},[])}const Ut={position:"absolute",width:"100%",height:"100%",top:0,left:0},t_=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib,connectionInProgress:e.connection.inProgress});function r_({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:r=!0,panOnScroll:n=!1,panOnScrollSpeed:i=.5,panOnScrollMode:o=Be.Free,zoomOnDoubleClick:a=!0,panOnDrag:s=!0,defaultViewport:c,translateExtent:u,minZoom:d,maxZoom:l,zoomActivationKeyCode:f,preventScrolling:h=!0,children:y,noWheelClassName:v,noPanClassName:g,onViewportChange:m,isControlledViewport:b,paneClickDistance:p,selectionOnDrag:_}){const x=oe(),w=O.useRef(null),{userSelectionActive:E,lib:q,connectionInProgress:C}=re(t_,ie),N=vt(f),S=O.useRef();e_(w);const R=O.useCallback(M=>{m?.({x:M[0],y:M[1],zoom:M[2]}),b||x.setState({transform:M})},[m,b]);return O.useEffect(()=>{if(w.current){S.current=sb({domNode:w.current,minZoom:d,maxZoom:l,translateExtent:u,viewport:c,onDraggingChange:H=>x.setState({paneDragging:H}),onPanZoomStart:(H,z)=>{const{onViewportChangeStart:D,onMoveStart:B}=x.getState();B?.(H,z),D?.(z)},onPanZoom:(H,z)=>{const{onViewportChange:D,onMove:B}=x.getState();B?.(H,z),D?.(z)},onPanZoomEnd:(H,z)=>{const{onViewportChangeEnd:D,onMoveEnd:B}=x.getState();B?.(H,z),D?.(z)}});const{x:M,y:L,zoom:P}=S.current.getViewport();return x.setState({panZoom:S.current,transform:[M,L,P],domNode:w.current.closest(".react-flow")}),()=>{S.current?.destroy()}}},[]),O.useEffect(()=>{S.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:r,panOnScroll:n,panOnScrollSpeed:i,panOnScrollMode:o,zoomOnDoubleClick:a,panOnDrag:s,zoomActivationKeyPressed:N,preventScrolling:h,noPanClassName:g,userSelectionActive:E,noWheelClassName:v,lib:q,onTransformChange:R,connectionInProgress:C,selectionOnDrag:_,paneClickDistance:p})},[e,t,r,n,i,o,a,s,N,h,g,E,v,q,R,C,_,p]),A.jsx("div",{className:"react-flow__renderer",ref:w,style:Ut,children:y})}const n_=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function i_(){const{userSelectionActive:e,userSelectionRect:t}=re(n_,ie);return e&&t?A.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const br=(e,t)=>r=>{r.target===t.current&&e?.(r)},o_=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function a_({isSelecting:e,selectionKeyPressed:t,selectionMode:r=ht.Full,panOnDrag:n,paneClickDistance:i,selectionOnDrag:o,onSelectionStart:a,onSelectionEnd:s,onPaneClick:c,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:l,onPaneMouseMove:f,onPaneMouseLeave:h,children:y}){const v=oe(),{userSelectionActive:g,elementsSelectable:m,dragging:b,connectionInProgress:p}=re(o_,ie),_=m&&(e||g),x=O.useRef(null),w=O.useRef(),E=O.useRef(new Set),q=O.useRef(new Set),C=O.useRef(!1),N=D=>{if(C.current||p){C.current=!1;return}c?.(D),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},S=D=>{if(Array.isArray(n)&&n?.includes(2)){D.preventDefault();return}u?.(D)},R=d?D=>d(D):void 0,M=D=>{C.current&&(D.stopPropagation(),C.current=!1)},L=D=>{const{domNode:B}=v.getState();if(w.current=B?.getBoundingClientRect(),!w.current)return;const U=D.target===x.current;if(!U&&!!D.target.closest(".nokey")||!e||!(o&&U||t)||D.button!==0||!D.isPrimary)return;D.target?.setPointerCapture?.(D.pointerId),C.current=!1;const{x:Y,y:I}=ye(D.nativeEvent,w.current);v.setState({userSelectionRect:{width:0,height:0,startX:Y,startY:I,x:Y,y:I}}),U||(D.stopPropagation(),D.preventDefault())},P=D=>{const{userSelectionRect:B,transform:U,nodeLookup:G,edgeLookup:$,connectionLookup:Y,triggerNodeChanges:I,triggerEdgeChanges:T,defaultEdgeOptions:k,resetSelectedElements:F}=v.getState();if(!w.current||!B)return;const{x:j,y:V}=ye(D.nativeEvent,w.current),{startX:K,startY:J}=B;if(!C.current){const ne=t?0:i;if(Math.hypot(j-K,V-J)<=ne)return;F(),a?.(D)}C.current=!0;const Q={startX:K,startY:J,x:j<K?j:K,y:V<J?V:J,width:Math.abs(j-K),height:Math.abs(V-J)},W=E.current,te=q.current;E.current=new Set(Ws(G,Q,U,r===ht.Partial,!0).map(ne=>ne.id)),q.current=new Set;const Z=k?.selectable??!0;for(const ne of E.current){const ee=Y.get(ne);if(ee)for(const{edgeId:le}of ee.values()){const de=$.get(le);de&&(de.selectable??Z)&&q.current.add(le)}}if(!ku(W,E.current)){const ne=Xe(G,E.current,!0);I(ne)}if(!ku(te,q.current)){const ne=Xe($,q.current);T(ne)}v.setState({userSelectionRect:Q,userSelectionActive:!0,nodesSelectionActive:!1})},H=D=>{D.button===0&&(D.target?.releasePointerCapture?.(D.pointerId),!g&&D.target===x.current&&v.getState().userSelectionRect&&N?.(D),v.setState({userSelectionActive:!1,userSelectionRect:null}),C.current&&(s?.(D),v.setState({nodesSelectionActive:E.current.size>0})))},z=n===!0||Array.isArray(n)&&n.includes(0);return A.jsxs("div",{className:ue(["react-flow__pane",{draggable:z,dragging:b,selection:e}]),onClick:_?void 0:br(N,x),onContextMenu:br(S,x),onWheel:br(R,x),onPointerEnter:_?void 0:l,onPointerMove:_?P:f,onPointerUp:_?H:void 0,onPointerDownCapture:_?L:void 0,onClickCapture:_?M:void 0,onPointerLeave:h,ref:x,style:Ut,children:[y,A.jsx(i_,{})]})}function Gs({id:e,store:t,unselect:r=!1,nodeRef:n}){const{addSelectedNodes:i,unselectNodesAndEdges:o,multiSelectionActive:a,nodeLookup:s,onError:c}=t.getState(),u=s.get(e);if(!u){c?.("012",xe.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(r||u.selected&&a)&&(o({nodes:[u],edges:[]}),requestAnimationFrame(()=>n?.current?.blur())):i([e])}function Ag({nodeRef:e,disabled:t=!1,noDragClassName:r,handleSelector:n,nodeId:i,isSelectable:o,nodeClickDistance:a}){const s=oe(),[c,u]=O.useState(!1),d=O.useRef();return O.useEffect(()=>{d.current=Wm({getStoreItems:()=>s.getState(),onNodeMouseDown:l=>{Gs({id:l,store:s,nodeRef:e})},onDragStart:()=>{u(!0)},onDragStop:()=>{u(!1)}})},[]),O.useEffect(()=>{if(t)d.current?.destroy();else if(e.current)return d.current?.update({noDragClassName:r,handleSelector:n,domNode:e.current,isSelectable:o,nodeId:i,nodeClickDistance:a}),()=>{d.current?.destroy()}},[r,n,t,o,e,i]),c}const s_=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Tg(){const e=oe();return O.useCallback(r=>{const{nodeExtent:n,snapToGrid:i,snapGrid:o,nodesDraggable:a,onError:s,updateNodePositions:c,nodeLookup:u,nodeOrigin:d}=e.getState(),l=new Map,f=s_(a),h=i?o[0]:5,y=i?o[1]:5,v=r.direction.x*h*r.factor,g=r.direction.y*y*r.factor;for(const[,m]of u){if(!f(m))continue;let b={x:m.internals.positionAbsolute.x+v,y:m.internals.positionAbsolute.y+g};i&&(b=bt(b,o));const{position:p,positionAbsolute:_}=Xp({nodeId:m.id,nextPosition:b,nodeLookup:u,nodeExtent:n,nodeOrigin:d,onError:s});m.position=p,m.internals.positionAbsolute=_,l.set(m.id,m)}c(l)},[])}const ru=O.createContext(null),u_=ru.Provider;ru.Consumer;const Pg=()=>O.useContext(ru),c_=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),d_=(e,t,r)=>n=>{const{connectionClickStartHandle:i,connectionMode:o,connection:a}=n,{fromHandle:s,toHandle:c,isValid:u}=a,d=c?.nodeId===e&&c?.id===t&&c?.type===r;return{connectingFrom:s?.nodeId===e&&s?.id===t&&s?.type===r,connectingTo:d,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===r,isPossibleEndHandle:o===Qe.Strict?s?.type!==r:e!==s?.nodeId||t!==s?.id,connectionInProcess:!!s,clickConnectionInProcess:!!i,valid:d&&u}};function l_({type:e="source",position:t=X.Top,isValidConnection:r,isConnectable:n=!0,isConnectableStart:i=!0,isConnectableEnd:o=!0,id:a,onConnect:s,children:c,className:u,onMouseDown:d,onTouchStart:l,...f},h){const y=a||null,v=e==="target",g=oe(),m=Pg(),{connectOnClick:b,noPanClassName:p,rfId:_}=re(c_,ie),{connectingFrom:x,connectingTo:w,clickConnecting:E,isPossibleEndHandle:q,connectionInProcess:C,clickConnectionInProcess:N,valid:S}=re(d_(m,y,e),ie);m||g.getState().onError?.("010",xe.error010());const R=P=>{const{defaultEdgeOptions:H,onConnect:z,hasDefaultEdges:D}=g.getState(),B={...H,...P};if(D){const{edges:U,setEdges:G}=g.getState();G(Am(B,U))}z?.(B),s?.(B)},M=P=>{if(!m)return;const H=og(P.nativeEvent);if(i&&(H&&P.button===0||!H)){const z=g.getState();Vs.onPointerDown(P.nativeEvent,{handleDomNode:P.currentTarget,autoPanOnConnect:z.autoPanOnConnect,connectionMode:z.connectionMode,connectionRadius:z.connectionRadius,domNode:z.domNode,nodeLookup:z.nodeLookup,lib:z.lib,isTarget:v,handleId:y,nodeId:m,flowId:z.rfId,panBy:z.panBy,cancelConnection:z.cancelConnection,onConnectStart:z.onConnectStart,onConnectEnd:z.onConnectEnd,updateConnection:z.updateConnection,onConnect:R,isValidConnection:r||z.isValidConnection,getTransform:()=>g.getState().transform,getFromHandle:()=>g.getState().connection.fromHandle,autoPanSpeed:z.autoPanSpeed,dragThreshold:z.connectionDragThreshold})}H?d?.(P):l?.(P)},L=P=>{const{onClickConnectStart:H,onClickConnectEnd:z,connectionClickStartHandle:D,connectionMode:B,isValidConnection:U,lib:G,rfId:$,nodeLookup:Y,connection:I}=g.getState();if(!m||!D&&!i)return;if(!D){H?.(P.nativeEvent,{nodeId:m,handleId:y,handleType:e}),g.setState({connectionClickStartHandle:{nodeId:m,type:e,id:y}});return}const T=ng(P.target),k=r||U,{connection:F,isValid:j}=Vs.isValid(P.nativeEvent,{handle:{nodeId:m,id:y,type:e},connectionMode:B,fromNodeId:D.nodeId,fromHandleId:D.id||null,fromType:D.type,isValidConnection:k,flowId:$,doc:T,lib:G,nodeLookup:Y});j&&F&&R(F);const V=structuredClone(I);delete V.inProgress,V.toPosition=V.toHandle?V.toHandle.position:null,z?.(P,V),g.setState({connectionClickStartHandle:null})};return A.jsx("div",{"data-handleid":y,"data-nodeid":m,"data-handlepos":t,"data-id":`${_}-${m}-${y}-${e}`,className:ue(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",p,u,{source:!v,target:v,connectable:n,connectablestart:i,connectableend:o,clickconnecting:E,connectingfrom:x,connectingto:w,valid:S,connectionindicator:n&&(!C||q)&&(C||N?o:i)}]),onMouseDown:M,onTouchStart:M,onClick:b?L:void 0,ref:h,...f,children:c})}const Lt=O.memo(Ng(l_));function f_({data:e,isConnectable:t,sourcePosition:r=X.Bottom}){return A.jsxs(A.Fragment,{children:[e?.label,A.jsx(Lt,{type:"source",position:r,isConnectable:t})]})}function h_({data:e,isConnectable:t,targetPosition:r=X.Top,sourcePosition:n=X.Bottom}){return A.jsxs(A.Fragment,{children:[A.jsx(Lt,{type:"target",position:r,isConnectable:t}),e?.label,A.jsx(Lt,{type:"source",position:n,isConnectable:t})]})}function p_(){return null}function g_({data:e,isConnectable:t,targetPosition:r=X.Top}){return A.jsxs(A.Fragment,{children:[A.jsx(Lt,{type:"target",position:r,isConnectable:t}),e?.label]})}const Dt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},cc={input:f_,default:h_,output:g_,group:p_};function v_(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const y_=e=>{const{width:t,height:r,x:n,y:i}=mt(e.nodeLookup,{filter:o=>!!o.selected});return{width:ve(t)?t:null,height:ve(r)?r:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${n}px,${i}px)`}};function m_({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:r}){const n=oe(),{width:i,height:o,transformString:a,userSelectionActive:s}=re(y_,ie),c=Tg(),u=O.useRef(null);if(O.useEffect(()=>{r||u.current?.focus({preventScroll:!0})},[r]),Ag({nodeRef:u}),s||!i||!o)return null;const d=e?f=>{const h=n.getState().nodes.filter(y=>y.selected);e(f,h)}:void 0,l=f=>{Object.prototype.hasOwnProperty.call(Dt,f.key)&&(f.preventDefault(),c({direction:Dt[f.key],factor:f.shiftKey?4:1}))};return A.jsx("div",{className:ue(["react-flow__nodesselection","react-flow__container",t]),style:{transform:a},children:A.jsx("div",{ref:u,className:"react-flow__nodesselection-rect",onContextMenu:d,tabIndex:r?void 0:-1,onKeyDown:r?void 0:l,style:{width:i,height:o}})})}const dc=typeof window<"u"?window:void 0,b_=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function Og({children:e,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,paneClickDistance:s,deleteKeyCode:c,selectionKeyCode:u,selectionOnDrag:d,selectionMode:l,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:y,panActivationKeyCode:v,zoomActivationKeyCode:g,elementsSelectable:m,zoomOnScroll:b,zoomOnPinch:p,panOnScroll:_,panOnScrollSpeed:x,panOnScrollMode:w,zoomOnDoubleClick:E,panOnDrag:q,defaultViewport:C,translateExtent:N,minZoom:S,maxZoom:R,preventScrolling:M,onSelectionContextMenu:L,noWheelClassName:P,noPanClassName:H,disableKeyboardA11y:z,onViewportChange:D,isControlledViewport:B}){const{nodesSelectionActive:U,userSelectionActive:G}=re(b_,ie),$=vt(u,{target:dc}),Y=vt(v,{target:dc}),I=Y||q,T=Y||_,k=d&&I!==!0,F=$||G||k;return Jb({deleteKeyCode:c,multiSelectionKeyCode:y}),A.jsx(r_,{onPaneContextMenu:o,elementsSelectable:m,zoomOnScroll:b,zoomOnPinch:p,panOnScroll:T,panOnScrollSpeed:x,panOnScrollMode:w,zoomOnDoubleClick:E,panOnDrag:!$&&I,defaultViewport:C,translateExtent:N,minZoom:S,maxZoom:R,zoomActivationKeyCode:g,preventScrolling:M,noWheelClassName:P,noPanClassName:H,onViewportChange:D,isControlledViewport:B,paneClickDistance:s,selectionOnDrag:k,children:A.jsxs(a_,{onSelectionStart:f,onSelectionEnd:h,onPaneClick:t,onPaneMouseEnter:r,onPaneMouseMove:n,onPaneMouseLeave:i,onPaneContextMenu:o,onPaneScroll:a,panOnDrag:I,isSelecting:!!F,selectionMode:l,selectionKeyPressed:$,paneClickDistance:s,selectionOnDrag:k,children:[e,U&&A.jsx(m_,{onSelectionContextMenu:L,noPanClassName:H,disableKeyboardA11y:z})]})})}Og.displayName="FlowRenderer";const __=O.memo(Og),w_=e=>t=>e?Ws(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(r=>r.id):Array.from(t.nodeLookup.keys());function x_(e){return re(O.useCallback(w_(e),[e]),ie)}const E_=e=>e.updateNodeInternals;function S_(){const e=re(E_),[t]=O.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(r=>{const n=new Map;r.forEach(i=>{const o=i.target.getAttribute("data-id");n.set(o,{id:o,nodeElement:i.target,force:!0})}),e(n)}));return O.useEffect(()=>()=>{t?.disconnect()},[t]),t}function C_({node:e,nodeType:t,hasDimensions:r,resizeObserver:n}){const i=oe(),o=O.useRef(null),a=O.useRef(null),s=O.useRef(e.sourcePosition),c=O.useRef(e.targetPosition),u=O.useRef(t),d=r&&!!e.internals.handleBounds;return O.useEffect(()=>{o.current&&!e.hidden&&(!d||a.current!==o.current)&&(a.current&&n?.unobserve(a.current),n?.observe(o.current),a.current=o.current)},[d,e.hidden]),O.useEffect(()=>()=>{a.current&&(n?.unobserve(a.current),a.current=null)},[]),O.useEffect(()=>{if(o.current){const l=u.current!==t,f=s.current!==e.sourcePosition,h=c.current!==e.targetPosition;(l||f||h)&&(u.current=t,s.current=e.sourcePosition,c.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:o.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),o}function q_({id:e,onClick:t,onMouseEnter:r,onMouseMove:n,onMouseLeave:i,onContextMenu:o,onDoubleClick:a,nodesDraggable:s,elementsSelectable:c,nodesConnectable:u,nodesFocusable:d,resizeObserver:l,noDragClassName:f,noPanClassName:h,disableKeyboardA11y:y,rfId:v,nodeTypes:g,nodeClickDistance:m,onError:b}){const{node:p,internals:_,isParent:x}=re(j=>{const V=j.nodeLookup.get(e),K=j.parentLookup.has(e);return{node:V,internals:V.internals,isParent:K}},ie);let w=p.type||"default",E=g?.[w]||cc[w];E===void 0&&(b?.("003",xe.error003(w)),w="default",E=g?.default||cc.default);const q=!!(p.draggable||s&&typeof p.draggable>"u"),C=!!(p.selectable||c&&typeof p.selectable>"u"),N=!!(p.connectable||u&&typeof p.connectable>"u"),S=!!(p.focusable||d&&typeof p.focusable>"u"),R=oe(),M=tg(p),L=C_({node:p,nodeType:w,hasDimensions:M,resizeObserver:l}),P=Ag({nodeRef:L,disabled:p.hidden||!q,noDragClassName:f,handleSelector:p.dragHandle,nodeId:e,isSelectable:C,nodeClickDistance:m}),H=Tg();if(p.hidden)return null;const z=Ie(p),D=v_(p),B=C||q||t||r||n||i,U=r?j=>r(j,{..._.userNode}):void 0,G=n?j=>n(j,{..._.userNode}):void 0,$=i?j=>i(j,{..._.userNode}):void 0,Y=o?j=>o(j,{..._.userNode}):void 0,I=a?j=>a(j,{..._.userNode}):void 0,T=j=>{const{selectNodesOnDrag:V,nodeDragThreshold:K}=R.getState();C&&(!V||!q||K>0)&&Gs({id:e,store:R,nodeRef:L}),t&&t(j,{..._.userNode})},k=j=>{if(!(ig(j.nativeEvent)||y)){if(Up.includes(j.key)&&C){const V=j.key==="Escape";Gs({id:e,store:R,unselect:V,nodeRef:L})}else if(q&&p.selected&&Object.prototype.hasOwnProperty.call(Dt,j.key)){j.preventDefault();const{ariaLabelConfig:V}=R.getState();R.setState({ariaLiveMessage:V["node.a11yDescription.ariaLiveMessage"]({direction:j.key.replace("Arrow","").toLowerCase(),x:~~_.positionAbsolute.x,y:~~_.positionAbsolute.y})}),H({direction:Dt[j.key],factor:j.shiftKey?4:1})}}},F=()=>{if(y||!L.current?.matches(":focus-visible"))return;const{transform:j,width:V,height:K,autoPanOnNodeFocus:J,setCenter:Q}=R.getState();if(!J)return;Ws(new Map([[e,p]]),{x:0,y:0,width:V,height:K},j,!0).length>0||Q(p.position.x+z.width/2,p.position.y+z.height/2,{zoom:j[2]})};return A.jsx("div",{className:ue(["react-flow__node",`react-flow__node-${w}`,{[h]:q},p.className,{selected:p.selected,selectable:C,parent:x,draggable:q,dragging:P}]),ref:L,style:{zIndex:_.z,transform:`translate(${_.positionAbsolute.x}px,${_.positionAbsolute.y}px)`,pointerEvents:B?"all":"none",visibility:M?"visible":"hidden",...p.style,...D},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:U,onMouseMove:G,onMouseLeave:$,onContextMenu:Y,onClick:T,onDoubleClick:I,onKeyDown:S?k:void 0,tabIndex:S?0:void 0,onFocus:S?F:void 0,role:p.ariaRole??(S?"group":void 0),"aria-roledescription":"node","aria-describedby":y?void 0:`${Eg}-${v}`,"aria-label":p.ariaLabel,...p.domAttributes,children:A.jsx(u_,{value:e,children:A.jsx(E,{id:e,data:p.data,type:w,positionAbsoluteX:_.positionAbsolute.x,positionAbsoluteY:_.positionAbsolute.y,selected:p.selected??!1,selectable:C,draggable:q,deletable:p.deletable??!0,isConnectable:N,sourcePosition:p.sourcePosition,targetPosition:p.targetPosition,dragging:P,dragHandle:p.dragHandle,zIndex:_.z,parentId:p.parentId,...z})})})}var R_=O.memo(q_);const I_=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function kg(e){const{nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:i,onError:o}=re(I_,ie),a=x_(e.onlyRenderVisibleElements),s=S_();return A.jsx("div",{className:"react-flow__nodes",style:Ut,children:a.map(c=>A.jsx(R_,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:s,nodesDraggable:t,nodesConnectable:r,nodesFocusable:n,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:o},c))})}kg.displayName="NodeRenderer";const N_=O.memo(kg);function M_(e){return re(O.useCallback(r=>{if(!e)return r.edges.map(i=>i.id);const n=[];if(r.width&&r.height)for(const i of r.edges){const o=r.nodeLookup.get(i.source),a=r.nodeLookup.get(i.target);o&&a&&Im({sourceNode:o,targetNode:a,width:r.width,height:r.height,transform:r.transform})&&n.push(i.id)}return n},[e]),ie)}const A_=({color:e="none",strokeWidth:t=1})=>{const r={strokeWidth:t,...e&&{stroke:e}};return A.jsx("polyline",{className:"arrow",style:r,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},T_=({color:e="none",strokeWidth:t=1})=>{const r={strokeWidth:t,...e&&{stroke:e,fill:e}};return A.jsx("polyline",{className:"arrowclosed",style:r,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},lc={[Pt.Arrow]:A_,[Pt.ArrowClosed]:T_};function P_(e){const t=oe();return O.useMemo(()=>Object.prototype.hasOwnProperty.call(lc,e)?lc[e]:(t.getState().onError?.("009",xe.error009(e)),null),[e])}const O_=({id:e,type:t,color:r,width:n=12.5,height:i=12.5,markerUnits:o="strokeWidth",strokeWidth:a,orient:s="auto-start-reverse"})=>{const c=P_(t);return c?A.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${n}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:o,orient:s,refX:"0",refY:"0",children:A.jsx(c,{color:r,strokeWidth:a})}):null},Lg=({defaultColor:e,rfId:t})=>{const r=re(o=>o.edges),n=re(o=>o.defaultEdgeOptions),i=O.useMemo(()=>Lm(r,{id:t,defaultColor:e,defaultMarkerStart:n?.markerStart,defaultMarkerEnd:n?.markerEnd}),[r,n,t,e]);return i.length?A.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:A.jsx("defs",{children:i.map(o=>A.jsx(O_,{id:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient},o.id))})}):null};Lg.displayName="MarkerDefinitions";var k_=O.memo(Lg);function Dg({x:e,y:t,label:r,labelStyle:n,labelShowBg:i=!0,labelBgStyle:o,labelBgPadding:a=[2,4],labelBgBorderRadius:s=2,children:c,className:u,...d}){const[l,f]=O.useState({x:1,y:0,width:0,height:0}),h=ue(["react-flow__edge-textwrapper",u]),y=O.useRef(null);return O.useEffect(()=>{if(y.current){const v=y.current.getBBox();f({x:v.x,y:v.y,width:v.width,height:v.height})}},[r]),r?A.jsxs("g",{transform:`translate(${e-l.width/2} ${t-l.height/2})`,className:h,visibility:l.width?"visible":"hidden",...d,children:[i&&A.jsx("rect",{width:l.width+2*a[0],x:-a[0],y:-a[1],height:l.height+2*a[1],className:"react-flow__edge-textbg",style:o,rx:s,ry:s}),A.jsx("text",{className:"react-flow__edge-text",y:l.height/2,dy:"0.3em",ref:y,style:n,children:r}),c]}):null}Dg.displayName="EdgeText";const L_=O.memo(Dg);function Wt({path:e,labelX:t,labelY:r,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:c,interactionWidth:u=20,...d}){return A.jsxs(A.Fragment,{children:[A.jsx("path",{...d,d:e,fill:"none",className:ue(["react-flow__edge-path",d.className])}),u?A.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:u,className:"react-flow__edge-interaction"}):null,n&&ve(t)&&ve(r)?A.jsx(L_,{x:t,y:r,label:n,labelStyle:i,labelShowBg:o,labelBgStyle:a,labelBgPadding:s,labelBgBorderRadius:c}):null]})}function fc({pos:e,x1:t,y1:r,x2:n,y2:i}){return e===X.Left||e===X.Right?[.5*(t+n),r]:[t,.5*(r+i)]}function jg({sourceX:e,sourceY:t,sourcePosition:r=X.Bottom,targetX:n,targetY:i,targetPosition:o=X.Top}){const[a,s]=fc({pos:r,x1:e,y1:t,x2:n,y2:i}),[c,u]=fc({pos:o,x1:n,y1:i,x2:e,y2:t}),[d,l,f,h]=ag({sourceX:e,sourceY:t,targetX:n,targetY:i,sourceControlX:a,sourceControlY:s,targetControlX:c,targetControlY:u});return[`M${e},${t} C${a},${s} ${c},${u} ${n},${i}`,d,l,f,h]}function Fg(e){return O.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:o,sourcePosition:a,targetPosition:s,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:h,style:y,markerEnd:v,markerStart:g,interactionWidth:m})=>{const[b,p,_]=jg({sourceX:r,sourceY:n,sourcePosition:a,targetX:i,targetY:o,targetPosition:s}),x=e.isInternal?void 0:t;return A.jsx(Wt,{id:x,path:b,labelX:p,labelY:_,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:h,style:y,markerEnd:v,markerStart:g,interactionWidth:m})})}const D_=Fg({isInternal:!1}),Bg=Fg({isInternal:!0});D_.displayName="SimpleBezierEdge";Bg.displayName="SimpleBezierEdgeInternal";function Hg(e){return O.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:o,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,sourcePosition:h=X.Bottom,targetPosition:y=X.Top,markerEnd:v,markerStart:g,pathOptions:m,interactionWidth:b})=>{const[p,_,x]=Hs({sourceX:r,sourceY:n,sourcePosition:h,targetX:i,targetY:o,targetPosition:y,borderRadius:m?.borderRadius,offset:m?.offset,stepPosition:m?.stepPosition}),w=e.isInternal?void 0:t;return A.jsx(Wt,{id:w,path:p,labelX:_,labelY:x,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:v,markerStart:g,interactionWidth:b})})}const zg=Hg({isInternal:!1}),$g=Hg({isInternal:!0});zg.displayName="SmoothStepEdge";$g.displayName="SmoothStepEdgeInternal";function Vg(e){return O.memo(({id:t,...r})=>{const n=e.isInternal?void 0:t;return A.jsx(zg,{...r,id:n,pathOptions:O.useMemo(()=>({borderRadius:0,offset:r.pathOptions?.offset}),[r.pathOptions?.offset])})})}const j_=Vg({isInternal:!1}),Gg=Vg({isInternal:!0});j_.displayName="StepEdge";Gg.displayName="StepEdgeInternal";function Ug(e){return O.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:o,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:h,markerStart:y,interactionWidth:v})=>{const[g,m,b]=cg({sourceX:r,sourceY:n,targetX:i,targetY:o}),p=e.isInternal?void 0:t;return A.jsx(Wt,{id:p,path:g,labelX:m,labelY:b,label:a,labelStyle:s,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:l,style:f,markerEnd:h,markerStart:y,interactionWidth:v})})}const F_=Ug({isInternal:!1}),Wg=Ug({isInternal:!0});F_.displayName="StraightEdge";Wg.displayName="StraightEdgeInternal";function Yg(e){return O.memo(({id:t,sourceX:r,sourceY:n,targetX:i,targetY:o,sourcePosition:a=X.Bottom,targetPosition:s=X.Top,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:h,style:y,markerEnd:v,markerStart:g,pathOptions:m,interactionWidth:b})=>{const[p,_,x]=sg({sourceX:r,sourceY:n,sourcePosition:a,targetX:i,targetY:o,targetPosition:s,curvature:m?.curvature}),w=e.isInternal?void 0:t;return A.jsx(Wt,{id:w,path:p,labelX:_,labelY:x,label:c,labelStyle:u,labelShowBg:d,labelBgStyle:l,labelBgPadding:f,labelBgBorderRadius:h,style:y,markerEnd:v,markerStart:g,interactionWidth:b})})}const B_=Yg({isInternal:!1}),Kg=Yg({isInternal:!0});B_.displayName="BezierEdge";Kg.displayName="BezierEdgeInternal";const hc={default:Kg,straight:Wg,step:Gg,smoothstep:$g,simplebezier:Bg},pc={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},H_=(e,t,r)=>r===X.Left?e-t:r===X.Right?e+t:e,z_=(e,t,r)=>r===X.Top?e-t:r===X.Bottom?e+t:e,gc="react-flow__edgeupdater";function vc({position:e,centerX:t,centerY:r,radius:n=10,onMouseDown:i,onMouseEnter:o,onMouseOut:a,type:s}){return A.jsx("circle",{onMouseDown:i,onMouseEnter:o,onMouseOut:a,className:ue([gc,`${gc}-${s}`]),cx:H_(t,n,e),cy:z_(r,n,e),r:n,stroke:"transparent",fill:"transparent"})}function $_({isReconnectable:e,reconnectRadius:t,edge:r,sourceX:n,sourceY:i,targetX:o,targetY:a,sourcePosition:s,targetPosition:c,onReconnect:u,onReconnectStart:d,onReconnectEnd:l,setReconnecting:f,setUpdateHover:h}){const y=oe(),v=(_,x)=>{if(_.button!==0)return;const{autoPanOnConnect:w,domNode:E,isValidConnection:q,connectionMode:C,connectionRadius:N,lib:S,onConnectStart:R,onConnectEnd:M,cancelConnection:L,nodeLookup:P,rfId:H,panBy:z,updateConnection:D}=y.getState(),B=x.type==="target",U=(Y,I)=>{f(!1),l?.(Y,r,x.type,I)},G=Y=>u?.(r,Y),$=(Y,I)=>{f(!0),d?.(_,r,x.type),R?.(Y,I)};Vs.onPointerDown(_.nativeEvent,{autoPanOnConnect:w,connectionMode:C,connectionRadius:N,domNode:E,handleId:x.id,nodeId:x.nodeId,nodeLookup:P,isTarget:B,edgeUpdaterType:x.type,lib:S,flowId:H,cancelConnection:L,panBy:z,isValidConnection:q,onConnect:G,onConnectStart:$,onConnectEnd:M,onReconnectEnd:U,updateConnection:D,getTransform:()=>y.getState().transform,getFromHandle:()=>y.getState().connection.fromHandle,dragThreshold:y.getState().connectionDragThreshold,handleDomNode:_.currentTarget})},g=_=>v(_,{nodeId:r.target,id:r.targetHandle??null,type:"target"}),m=_=>v(_,{nodeId:r.source,id:r.sourceHandle??null,type:"source"}),b=()=>h(!0),p=()=>h(!1);return A.jsxs(A.Fragment,{children:[(e===!0||e==="source")&&A.jsx(vc,{position:s,centerX:n,centerY:i,radius:t,onMouseDown:g,onMouseEnter:b,onMouseOut:p,type:"source"}),(e===!0||e==="target")&&A.jsx(vc,{position:c,centerX:o,centerY:a,radius:t,onMouseDown:m,onMouseEnter:b,onMouseOut:p,type:"target"})]})}function V_({id:e,edgesFocusable:t,edgesReconnectable:r,elementsSelectable:n,onClick:i,onDoubleClick:o,onContextMenu:a,onMouseEnter:s,onMouseMove:c,onMouseLeave:u,reconnectRadius:d,onReconnect:l,onReconnectStart:f,onReconnectEnd:h,rfId:y,edgeTypes:v,noPanClassName:g,onError:m,disableKeyboardA11y:b}){let p=re(Q=>Q.edgeLookup.get(e));const _=re(Q=>Q.defaultEdgeOptions);p=_?{..._,...p}:p;let x=p.type||"default",w=v?.[x]||hc[x];w===void 0&&(m?.("011",xe.error011(x)),x="default",w=v?.default||hc.default);const E=!!(p.focusable||t&&typeof p.focusable>"u"),q=typeof l<"u"&&(p.reconnectable||r&&typeof p.reconnectable>"u"),C=!!(p.selectable||n&&typeof p.selectable>"u"),N=O.useRef(null),[S,R]=O.useState(!1),[M,L]=O.useState(!1),P=oe(),{zIndex:H,sourceX:z,sourceY:D,targetX:B,targetY:U,sourcePosition:G,targetPosition:$}=re(O.useCallback(Q=>{const W=Q.nodeLookup.get(p.source),te=Q.nodeLookup.get(p.target);if(!W||!te)return{zIndex:p.zIndex,...pc};const Z=km({id:e,sourceNode:W,targetNode:te,sourceHandle:p.sourceHandle||null,targetHandle:p.targetHandle||null,connectionMode:Q.connectionMode,onError:m});return{zIndex:Rm({selected:p.selected,zIndex:p.zIndex,sourceNode:W,targetNode:te,elevateOnSelect:Q.elevateEdgesOnSelect,zIndexMode:Q.zIndexMode}),...Z||pc}},[p.source,p.target,p.sourceHandle,p.targetHandle,p.selected,p.zIndex]),ie),Y=O.useMemo(()=>p.markerStart?`url('#${zs(p.markerStart,y)}')`:void 0,[p.markerStart,y]),I=O.useMemo(()=>p.markerEnd?`url('#${zs(p.markerEnd,y)}')`:void 0,[p.markerEnd,y]);if(p.hidden||z===null||D===null||B===null||U===null)return null;const T=Q=>{const{addSelectedEdges:W,unselectNodesAndEdges:te,multiSelectionActive:Z}=P.getState();C&&(P.setState({nodesSelectionActive:!1}),p.selected&&Z?(te({nodes:[],edges:[p]}),N.current?.blur()):W([e])),i&&i(Q,p)},k=o?Q=>{o(Q,{...p})}:void 0,F=a?Q=>{a(Q,{...p})}:void 0,j=s?Q=>{s(Q,{...p})}:void 0,V=c?Q=>{c(Q,{...p})}:void 0,K=u?Q=>{u(Q,{...p})}:void 0,J=Q=>{if(!b&&Up.includes(Q.key)&&C){const{unselectNodesAndEdges:W,addSelectedEdges:te}=P.getState();Q.key==="Escape"?(N.current?.blur(),W({edges:[p]})):te([e])}};return A.jsx("svg",{style:{zIndex:H},children:A.jsxs("g",{className:ue(["react-flow__edge",`react-flow__edge-${x}`,p.className,g,{selected:p.selected,animated:p.animated,inactive:!C&&!i,updating:S,selectable:C}]),onClick:T,onDoubleClick:k,onContextMenu:F,onMouseEnter:j,onMouseMove:V,onMouseLeave:K,onKeyDown:E?J:void 0,tabIndex:E?0:void 0,role:p.ariaRole??(E?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":p.ariaLabel===null?void 0:p.ariaLabel||`Edge from ${p.source} to ${p.target}`,"aria-describedby":E?`${Sg}-${y}`:void 0,ref:N,...p.domAttributes,children:[!M&&A.jsx(w,{id:e,source:p.source,target:p.target,type:p.type,selected:p.selected,animated:p.animated,selectable:C,deletable:p.deletable??!0,label:p.label,labelStyle:p.labelStyle,labelShowBg:p.labelShowBg,labelBgStyle:p.labelBgStyle,labelBgPadding:p.labelBgPadding,labelBgBorderRadius:p.labelBgBorderRadius,sourceX:z,sourceY:D,targetX:B,targetY:U,sourcePosition:G,targetPosition:$,data:p.data,style:p.style,sourceHandleId:p.sourceHandle,targetHandleId:p.targetHandle,markerStart:Y,markerEnd:I,pathOptions:"pathOptions"in p?p.pathOptions:void 0,interactionWidth:p.interactionWidth}),q&&A.jsx($_,{edge:p,isReconnectable:q,reconnectRadius:d,onReconnect:l,onReconnectStart:f,onReconnectEnd:h,sourceX:z,sourceY:D,targetX:B,targetY:U,sourcePosition:G,targetPosition:$,setUpdateHover:R,setReconnecting:L})]})})}var G_=O.memo(V_);const U_=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Zg({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:r,edgeTypes:n,noPanClassName:i,onReconnect:o,onEdgeContextMenu:a,onEdgeMouseEnter:s,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,reconnectRadius:l,onEdgeDoubleClick:f,onReconnectStart:h,onReconnectEnd:y,disableKeyboardA11y:v}){const{edgesFocusable:g,edgesReconnectable:m,elementsSelectable:b,onError:p}=re(U_,ie),_=M_(t);return A.jsxs("div",{className:"react-flow__edges",children:[A.jsx(k_,{defaultColor:e,rfId:r}),_.map(x=>A.jsx(G_,{id:x,edgesFocusable:g,edgesReconnectable:m,elementsSelectable:b,noPanClassName:i,onReconnect:o,onContextMenu:a,onMouseEnter:s,onMouseMove:c,onMouseLeave:u,onClick:d,reconnectRadius:l,onDoubleClick:f,onReconnectStart:h,onReconnectEnd:y,rfId:r,onError:p,edgeTypes:n,disableKeyboardA11y:v},x))]})}Zg.displayName="EdgeRenderer";const W_=O.memo(Zg),Y_=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function K_({children:e}){const t=re(Y_);return A.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Z_(e){const t=tu(),r=O.useRef(!1);O.useEffect(()=>{!r.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),r.current=!0)},[e,t.viewportInitialized])}const X_=e=>e.panZoom?.syncViewport;function Q_(e){const t=re(X_),r=oe();return O.useEffect(()=>{e&&(t?.(e),r.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function J_(e){return e.connection.inProgress?{...e.connection,to:_t(e.connection.to,e.transform)}:{...e.connection}}function e0(e){return J_}function t0(e){const t=e0();return re(t,ie)}const r0=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function n0({containerStyle:e,style:t,type:r,component:n}){const{nodesConnectable:i,width:o,height:a,isValid:s,inProgress:c}=re(r0,ie);return!(o&&i&&c)?null:A.jsx("svg",{style:e,width:o,height:a,className:"react-flow__connectionline react-flow__container",children:A.jsx("g",{className:ue(["react-flow__connection",Kp(s)]),children:A.jsx(Xg,{style:t,type:r,CustomComponent:n,isValid:s})})})}const Xg=({style:e,type:t=Le.Bezier,CustomComponent:r,isValid:n})=>{const{inProgress:i,from:o,fromNode:a,fromHandle:s,fromPosition:c,to:u,toNode:d,toHandle:l,toPosition:f,pointer:h}=t0();if(!i)return;if(r)return A.jsx(r,{connectionLineType:t,connectionLineStyle:e,fromNode:a,fromHandle:s,fromX:o.x,fromY:o.y,toX:u.x,toY:u.y,fromPosition:c,toPosition:f,connectionStatus:Kp(n),toNode:d,toHandle:l,pointer:h});let y="";const v={sourceX:o.x,sourceY:o.y,sourcePosition:c,targetX:u.x,targetY:u.y,targetPosition:f};switch(t){case Le.Bezier:[y]=sg(v);break;case Le.SimpleBezier:[y]=jg(v);break;case Le.Step:[y]=Hs({...v,borderRadius:0});break;case Le.SmoothStep:[y]=Hs(v);break;default:[y]=cg(v)}return A.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};Xg.displayName="ConnectionLine";const i0={};function yc(e=i0){O.useRef(e),oe(),O.useEffect(()=>{},[e])}function o0(){oe(),O.useRef(!1),O.useEffect(()=>{},[])}function Qg({nodeTypes:e,edgeTypes:t,onInit:r,onNodeClick:n,onEdgeClick:i,onNodeDoubleClick:o,onEdgeDoubleClick:a,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,onSelectionContextMenu:l,onSelectionStart:f,onSelectionEnd:h,connectionLineType:y,connectionLineStyle:v,connectionLineComponent:g,connectionLineContainerStyle:m,selectionKeyCode:b,selectionOnDrag:p,selectionMode:_,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:E,deleteKeyCode:q,onlyRenderVisibleElements:C,elementsSelectable:N,defaultViewport:S,translateExtent:R,minZoom:M,maxZoom:L,preventScrolling:P,defaultMarkerColor:H,zoomOnScroll:z,zoomOnPinch:D,panOnScroll:B,panOnScrollSpeed:U,panOnScrollMode:G,zoomOnDoubleClick:$,panOnDrag:Y,onPaneClick:I,onPaneMouseEnter:T,onPaneMouseMove:k,onPaneMouseLeave:F,onPaneScroll:j,onPaneContextMenu:V,paneClickDistance:K,nodeClickDistance:J,onEdgeContextMenu:Q,onEdgeMouseEnter:W,onEdgeMouseMove:te,onEdgeMouseLeave:Z,reconnectRadius:ne,onReconnect:ee,onReconnectStart:le,onReconnectEnd:de,noDragClassName:Se,noWheelClassName:_e,noPanClassName:fe,disableKeyboardA11y:se,nodeExtent:Ae,rfId:Ce,viewport:Te,onViewportChange:Pe}){return yc(e),yc(t),o0(),Z_(r),Q_(Te),A.jsx(__,{onPaneClick:I,onPaneMouseEnter:T,onPaneMouseMove:k,onPaneMouseLeave:F,onPaneContextMenu:V,onPaneScroll:j,paneClickDistance:K,deleteKeyCode:q,selectionKeyCode:b,selectionOnDrag:p,selectionMode:_,onSelectionStart:f,onSelectionEnd:h,multiSelectionKeyCode:x,panActivationKeyCode:w,zoomActivationKeyCode:E,elementsSelectable:N,zoomOnScroll:z,zoomOnPinch:D,zoomOnDoubleClick:$,panOnScroll:B,panOnScrollSpeed:U,panOnScrollMode:G,panOnDrag:Y,defaultViewport:S,translateExtent:R,minZoom:M,maxZoom:L,onSelectionContextMenu:l,preventScrolling:P,noDragClassName:Se,noWheelClassName:_e,noPanClassName:fe,disableKeyboardA11y:se,onViewportChange:Pe,isControlledViewport:!!Te,children:A.jsxs(K_,{children:[A.jsx(W_,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:a,onReconnect:ee,onReconnectStart:le,onReconnectEnd:de,onlyRenderVisibleElements:C,onEdgeContextMenu:Q,onEdgeMouseEnter:W,onEdgeMouseMove:te,onEdgeMouseLeave:Z,reconnectRadius:ne,defaultMarkerColor:H,noPanClassName:fe,disableKeyboardA11y:se,rfId:Ce}),A.jsx(n0,{style:v,type:y,component:g,containerStyle:m}),A.jsx("div",{className:"react-flow__edgelabel-renderer"}),A.jsx(N_,{nodeTypes:e,onNodeClick:n,onNodeDoubleClick:o,onNodeMouseEnter:s,onNodeMouseMove:c,onNodeMouseLeave:u,onNodeContextMenu:d,nodeClickDistance:J,onlyRenderVisibleElements:C,noPanClassName:fe,noDragClassName:Se,disableKeyboardA11y:se,nodeExtent:Ae,rfId:Ce}),A.jsx("div",{className:"react-flow__viewport-portal"})]})})}Qg.displayName="GraphView";const a0=O.memo(Qg),mc=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:o,fitView:a,fitViewOptions:s,minZoom:c=.5,maxZoom:u=2,nodeOrigin:d,nodeExtent:l,zIndexMode:f="basic"}={})=>{const h=new Map,y=new Map,v=new Map,g=new Map,m=n??t??[],b=r??e??[],p=d??[0,0],_=l??ft;fg(v,g,m);const x=$s(b,h,y,{nodeOrigin:p,nodeExtent:_,zIndexMode:f});let w=[0,0,1];if(a&&i&&o){const E=mt(h,{filter:S=>!!((S.width||S.initialWidth)&&(S.height||S.initialHeight))}),{x:q,y:C,zoom:N}=Ys(E,i,o,c,u,s?.padding??.1);w=[q,C,N]}return{rfId:"1",width:i??0,height:o??0,transform:w,nodes:b,nodesInitialized:x,nodeLookup:h,parentLookup:y,edges:m,edgeLookup:g,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:r!==void 0,hasDefaultEdges:n!==void 0,panZoom:null,minZoom:c,maxZoom:u,translateExtent:ft,nodeExtent:_,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Qe.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:p,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:a??!1,fitViewOptions:s,fitViewResolver:null,connection:{...Yp},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:wm,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Wp,zIndexMode:f,onNodesChangeMiddlewareMap:new Map,onEdgesChangeMiddlewareMap:new Map}},s0=({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:o,fitView:a,fitViewOptions:s,minZoom:c,maxZoom:u,nodeOrigin:d,nodeExtent:l,zIndexMode:f})=>Cb((h,y)=>{async function v(){const{nodeLookup:g,panZoom:m,fitViewOptions:b,fitViewResolver:p,width:_,height:x,minZoom:w,maxZoom:E}=y();m&&(await bm({nodes:g,width:_,height:x,panZoom:m,minZoom:w,maxZoom:E},b),p?.resolve(!0),h({fitViewResolver:null}))}return{...mc({nodes:e,edges:t,width:i,height:o,fitView:a,fitViewOptions:s,minZoom:c,maxZoom:u,nodeOrigin:d,nodeExtent:l,defaultNodes:r,defaultEdges:n,zIndexMode:f}),setNodes:g=>{const{nodeLookup:m,parentLookup:b,nodeOrigin:p,elevateNodesOnSelect:_,fitViewQueued:x,zIndexMode:w}=y(),E=$s(g,m,b,{nodeOrigin:p,nodeExtent:l,elevateNodesOnSelect:_,checkEquality:!0,zIndexMode:w});x&&E?(v(),h({nodes:g,nodesInitialized:E,fitViewQueued:!1,fitViewOptions:void 0})):h({nodes:g,nodesInitialized:E})},setEdges:g=>{const{connectionLookup:m,edgeLookup:b}=y();fg(m,b,g),h({edges:g})},setDefaultNodesAndEdges:(g,m)=>{if(g){const{setNodes:b}=y();b(g),h({hasDefaultNodes:!0})}if(m){const{setEdges:b}=y();b(m),h({hasDefaultEdges:!0})}},updateNodeInternals:g=>{const{triggerNodeChanges:m,nodeLookup:b,parentLookup:p,domNode:_,nodeOrigin:x,nodeExtent:w,debug:E,fitViewQueued:q,zIndexMode:C}=y(),{changes:N,updatedInternals:S}=$m(g,b,p,_,x,w,C);S&&(Fm(b,p,{nodeOrigin:x,nodeExtent:w,zIndexMode:C}),q?(v(),h({fitViewQueued:!1,fitViewOptions:void 0})):h({}),N?.length>0&&(E&&console.log("React Flow: trigger node changes",N),m?.(N)))},updateNodePositions:(g,m=!1)=>{const b=[];let p=[];const{nodeLookup:_,triggerNodeChanges:x,connection:w,updateConnection:E,onNodesChangeMiddlewareMap:q}=y();for(const[C,N]of g){const S=_.get(C),R=!!(S?.expandParent&&S?.parentId&&N?.position),M={id:C,type:"position",position:R?{x:Math.max(0,N.position.x),y:Math.max(0,N.position.y)}:N.position,dragging:m};if(S&&w.inProgress&&w.fromNode.id===S.id){const L=ze(S,w.fromHandle,X.Left,!0);E({...w,from:L})}R&&S.parentId&&b.push({id:C,parentId:S.parentId,rect:{...N.internals.positionAbsolute,width:N.measured.width??0,height:N.measured.height??0}}),p.push(M)}if(b.length>0){const{parentLookup:C,nodeOrigin:N}=y(),S=eu(b,_,C,N);p.push(...S)}for(const C of q.values())p=C(p);x(p)},triggerNodeChanges:g=>{const{onNodesChange:m,setNodes:b,nodes:p,hasDefaultNodes:_,debug:x}=y();if(g?.length){if(_){const w=Rg(g,p);b(w)}x&&console.log("React Flow: trigger node changes",g),m?.(g)}},triggerEdgeChanges:g=>{const{onEdgesChange:m,setEdges:b,edges:p,hasDefaultEdges:_,debug:x}=y();if(g?.length){if(_){const w=Ig(g,p);b(w)}x&&console.log("React Flow: trigger edge changes",g),m?.(g)}},addSelectedNodes:g=>{const{multiSelectionActive:m,edgeLookup:b,nodeLookup:p,triggerNodeChanges:_,triggerEdgeChanges:x}=y();if(m){const w=g.map(E=>Fe(E,!0));_(w);return}_(Xe(p,new Set([...g]),!0)),x(Xe(b))},addSelectedEdges:g=>{const{multiSelectionActive:m,edgeLookup:b,nodeLookup:p,triggerNodeChanges:_,triggerEdgeChanges:x}=y();if(m){const w=g.map(E=>Fe(E,!0));x(w);return}x(Xe(b,new Set([...g]))),_(Xe(p,new Set,!0))},unselectNodesAndEdges:({nodes:g,edges:m}={})=>{const{edges:b,nodes:p,nodeLookup:_,triggerNodeChanges:x,triggerEdgeChanges:w}=y(),E=g||p,q=m||b,C=E.map(S=>{const R=_.get(S.id);return R&&(R.selected=!1),Fe(S.id,!1)}),N=q.map(S=>Fe(S.id,!1));x(C),w(N)},setMinZoom:g=>{const{panZoom:m,maxZoom:b}=y();m?.setScaleExtent([g,b]),h({minZoom:g})},setMaxZoom:g=>{const{panZoom:m,minZoom:b}=y();m?.setScaleExtent([b,g]),h({maxZoom:g})},setTranslateExtent:g=>{y().panZoom?.setTranslateExtent(g),h({translateExtent:g})},resetSelectedElements:()=>{const{edges:g,nodes:m,triggerNodeChanges:b,triggerEdgeChanges:p,elementsSelectable:_}=y();if(!_)return;const x=m.reduce((E,q)=>q.selected?[...E,Fe(q.id,!1)]:E,[]),w=g.reduce((E,q)=>q.selected?[...E,Fe(q.id,!1)]:E,[]);b(x),p(w)},setNodeExtent:g=>{const{nodes:m,nodeLookup:b,parentLookup:p,nodeOrigin:_,elevateNodesOnSelect:x,nodeExtent:w,zIndexMode:E}=y();g[0][0]===w[0][0]&&g[0][1]===w[0][1]&&g[1][0]===w[1][0]&&g[1][1]===w[1][1]||($s(m,b,p,{nodeOrigin:_,nodeExtent:g,elevateNodesOnSelect:x,checkEquality:!1,zIndexMode:E}),h({nodeExtent:g}))},panBy:g=>{const{transform:m,width:b,height:p,panZoom:_,translateExtent:x}=y();return Vm({delta:g,panZoom:_,transform:m,translateExtent:x,width:b,height:p})},setCenter:async(g,m,b)=>{const{width:p,height:_,maxZoom:x,panZoom:w}=y();if(!w)return Promise.resolve(!1);const E=typeof b?.zoom<"u"?b.zoom:x;return await w.setViewport({x:p/2-g*E,y:_/2-m*E,zoom:E},{duration:b?.duration,ease:b?.ease,interpolate:b?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{h({connection:{...Yp}})},updateConnection:g=>{h({connection:g})},reset:()=>h({...mc()})}},Object.is);function u0({initialNodes:e,initialEdges:t,defaultNodes:r,defaultEdges:n,initialWidth:i,initialHeight:o,initialMinZoom:a,initialMaxZoom:s,initialFitViewOptions:c,fitView:u,nodeOrigin:d,nodeExtent:l,zIndexMode:f,children:h}){const[y]=O.useState(()=>s0({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,width:i,height:o,fitView:u,minZoom:a,maxZoom:s,fitViewOptions:c,nodeOrigin:d,nodeExtent:l,zIndexMode:f}));return A.jsx(qb,{value:y,children:A.jsx(Kb,{children:h})})}function c0({children:e,nodes:t,edges:r,defaultNodes:n,defaultEdges:i,width:o,height:a,fitView:s,fitViewOptions:c,minZoom:u,maxZoom:d,nodeOrigin:l,nodeExtent:f,zIndexMode:h}){return O.useContext(Vt)?A.jsx(A.Fragment,{children:e}):A.jsx(u0,{initialNodes:t,initialEdges:r,defaultNodes:n,defaultEdges:i,initialWidth:o,initialHeight:a,fitView:s,initialFitViewOptions:c,initialMinZoom:u,initialMaxZoom:d,nodeOrigin:l,nodeExtent:f,zIndexMode:h,children:e})}const d0={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function l0({nodes:e,edges:t,defaultNodes:r,defaultEdges:n,className:i,nodeTypes:o,edgeTypes:a,onNodeClick:s,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:l,onMoveEnd:f,onConnect:h,onConnectStart:y,onConnectEnd:v,onClickConnectStart:g,onClickConnectEnd:m,onNodeMouseEnter:b,onNodeMouseMove:p,onNodeMouseLeave:_,onNodeContextMenu:x,onNodeDoubleClick:w,onNodeDragStart:E,onNodeDrag:q,onNodeDragStop:C,onNodesDelete:N,onEdgesDelete:S,onDelete:R,onSelectionChange:M,onSelectionDragStart:L,onSelectionDrag:P,onSelectionDragStop:H,onSelectionContextMenu:z,onSelectionStart:D,onSelectionEnd:B,onBeforeDelete:U,connectionMode:G,connectionLineType:$=Le.Bezier,connectionLineStyle:Y,connectionLineComponent:I,connectionLineContainerStyle:T,deleteKeyCode:k="Backspace",selectionKeyCode:F="Shift",selectionOnDrag:j=!1,selectionMode:V=ht.Full,panActivationKeyCode:K="Space",multiSelectionKeyCode:J=gt()?"Meta":"Control",zoomActivationKeyCode:Q=gt()?"Meta":"Control",snapToGrid:W,snapGrid:te,onlyRenderVisibleElements:Z=!1,selectNodesOnDrag:ne,nodesDraggable:ee,autoPanOnNodeFocus:le,nodesConnectable:de,nodesFocusable:Se,nodeOrigin:_e=Cg,edgesFocusable:fe,edgesReconnectable:se,elementsSelectable:Ae=!0,defaultViewport:Ce=Fb,minZoom:Te=.5,maxZoom:Pe=2,translateExtent:qe=ft,preventScrolling:qt=!0,nodeExtent:Ye,defaultMarkerColor:lr="#b1b1b7",zoomOnScroll:Rt=!0,zoomOnPinch:we=!0,panOnScroll:Re=!1,panOnScrollSpeed:ty=.5,panOnScrollMode:ry=Be.Free,zoomOnDoubleClick:ny=!0,panOnDrag:iy=!0,onPaneClick:oy,onPaneMouseEnter:ay,onPaneMouseMove:sy,onPaneMouseLeave:uy,onPaneScroll:cy,onPaneContextMenu:dy,paneClickDistance:ly=1,nodeClickDistance:fy=0,children:hy,onReconnect:py,onReconnectStart:gy,onReconnectEnd:vy,onEdgeContextMenu:yy,onEdgeDoubleClick:my,onEdgeMouseEnter:by,onEdgeMouseMove:_y,onEdgeMouseLeave:wy,reconnectRadius:xy=10,onNodesChange:Ey,onEdgesChange:Sy,noDragClassName:Cy="nodrag",noWheelClassName:qy="nowheel",noPanClassName:wu="nopan",fitView:xu,fitViewOptions:Eu,connectOnClick:Ry,attributionPosition:Iy,proOptions:Ny,defaultEdgeOptions:My,elevateNodesOnSelect:Ay=!0,elevateEdgesOnSelect:Ty=!1,disableKeyboardA11y:Su=!1,autoPanOnConnect:Py,autoPanOnNodeDrag:Oy,autoPanSpeed:ky,connectionRadius:Ly,isValidConnection:Dy,onError:jy,style:Fy,id:Cu,nodeDragThreshold:By,connectionDragThreshold:Hy,viewport:zy,onViewportChange:$y,width:Vy,height:Gy,colorMode:Uy="light",debug:Wy,onScroll:qu,ariaLabelConfig:Yy,zIndexMode:Ru="basic",...Ky},Zy){const fr=Cu||"1",Xy=$b(Uy),Qy=O.useCallback(Iu=>{Iu.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),qu?.(Iu)},[qu]);return A.jsx("div",{"data-testid":"rf__wrapper",...Ky,onScroll:Qy,style:{...Fy,...d0},ref:Zy,className:ue(["react-flow",i,Xy]),id:Cu,role:"application",children:A.jsxs(c0,{nodes:e,edges:t,width:Vy,height:Gy,fitView:xu,fitViewOptions:Eu,minZoom:Te,maxZoom:Pe,nodeOrigin:_e,nodeExtent:Ye,zIndexMode:Ru,children:[A.jsx(a0,{onInit:u,onNodeClick:s,onEdgeClick:c,onNodeMouseEnter:b,onNodeMouseMove:p,onNodeMouseLeave:_,onNodeContextMenu:x,onNodeDoubleClick:w,nodeTypes:o,edgeTypes:a,connectionLineType:$,connectionLineStyle:Y,connectionLineComponent:I,connectionLineContainerStyle:T,selectionKeyCode:F,selectionOnDrag:j,selectionMode:V,deleteKeyCode:k,multiSelectionKeyCode:J,panActivationKeyCode:K,zoomActivationKeyCode:Q,onlyRenderVisibleElements:Z,defaultViewport:Ce,translateExtent:qe,minZoom:Te,maxZoom:Pe,preventScrolling:qt,zoomOnScroll:Rt,zoomOnPinch:we,zoomOnDoubleClick:ny,panOnScroll:Re,panOnScrollSpeed:ty,panOnScrollMode:ry,panOnDrag:iy,onPaneClick:oy,onPaneMouseEnter:ay,onPaneMouseMove:sy,onPaneMouseLeave:uy,onPaneScroll:cy,onPaneContextMenu:dy,paneClickDistance:ly,nodeClickDistance:fy,onSelectionContextMenu:z,onSelectionStart:D,onSelectionEnd:B,onReconnect:py,onReconnectStart:gy,onReconnectEnd:vy,onEdgeContextMenu:yy,onEdgeDoubleClick:my,onEdgeMouseEnter:by,onEdgeMouseMove:_y,onEdgeMouseLeave:wy,reconnectRadius:xy,defaultMarkerColor:lr,noDragClassName:Cy,noWheelClassName:qy,noPanClassName:wu,rfId:fr,disableKeyboardA11y:Su,nodeExtent:Ye,viewport:zy,onViewportChange:$y}),A.jsx(zb,{nodes:e,edges:t,defaultNodes:r,defaultEdges:n,onConnect:h,onConnectStart:y,onConnectEnd:v,onClickConnectStart:g,onClickConnectEnd:m,nodesDraggable:ee,autoPanOnNodeFocus:le,nodesConnectable:de,nodesFocusable:Se,edgesFocusable:fe,edgesReconnectable:se,elementsSelectable:Ae,elevateNodesOnSelect:Ay,elevateEdgesOnSelect:Ty,minZoom:Te,maxZoom:Pe,nodeExtent:Ye,onNodesChange:Ey,onEdgesChange:Sy,snapToGrid:W,snapGrid:te,connectionMode:G,translateExtent:qe,connectOnClick:Ry,defaultEdgeOptions:My,fitView:xu,fitViewOptions:Eu,onNodesDelete:N,onEdgesDelete:S,onDelete:R,onNodeDragStart:E,onNodeDrag:q,onNodeDragStop:C,onSelectionDrag:P,onSelectionDragStart:L,onSelectionDragStop:H,onMove:d,onMoveStart:l,onMoveEnd:f,noPanClassName:wu,nodeOrigin:_e,rfId:fr,autoPanOnConnect:Py,autoPanOnNodeDrag:Oy,autoPanSpeed:ky,onError:jy,connectionRadius:Ly,isValidConnection:Dy,selectNodesOnDrag:ne,nodeDragThreshold:By,connectionDragThreshold:Hy,onBeforeDelete:U,debug:Wy,ariaLabelConfig:Yy,zIndexMode:Ru}),A.jsx(jb,{onSelectionChange:M}),hy,A.jsx(Pb,{proOptions:Ny,position:Iy}),A.jsx(Tb,{rfId:fr,disableKeyboardA11y:Su})]})})}var fE=Ng(l0);function hE(e){const[t,r]=O.useState(e),n=O.useCallback(i=>r(o=>Rg(i,o)),[]);return[t,r,n]}function pE(e){const[t,r]=O.useState(e),n=O.useCallback(i=>r(o=>Ig(i,o)),[]);return[t,r,n]}function f0({dimensions:e,lineWidth:t,variant:r,className:n}){return A.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:ue(["react-flow__background-pattern",r,n])})}function h0({radius:e,className:t}){return A.jsx("circle",{cx:e,cy:e,r:e,className:ue(["react-flow__background-pattern","dots",t])})}var De;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(De||(De={}));const p0={[De.Dots]:1,[De.Lines]:1,[De.Cross]:6},g0=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Jg({id:e,variant:t=De.Dots,gap:r=20,size:n,lineWidth:i=1,offset:o=0,color:a,bgColor:s,style:c,className:u,patternClassName:d}){const l=O.useRef(null),{transform:f,patternId:h}=re(g0,ie),y=n||p0[t],v=t===De.Dots,g=t===De.Cross,m=Array.isArray(r)?r:[r,r],b=[m[0]*f[2]||1,m[1]*f[2]||1],p=y*f[2],_=Array.isArray(o)?o:[o,o],x=g?[p,p]:b,w=[_[0]*f[2]||1+x[0]/2,_[1]*f[2]||1+x[1]/2],E=`${h}${e||""}`;return A.jsxs("svg",{className:ue(["react-flow__background",u]),style:{...c,...Ut,"--xy-background-color-props":s,"--xy-background-pattern-color-props":a},ref:l,"data-testid":"rf__background",children:[A.jsx("pattern",{id:E,x:f[0]%b[0],y:f[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${w[0]},-${w[1]})`,children:v?A.jsx(h0,{radius:p/2,className:d}):A.jsx(f0,{dimensions:x,lineWidth:i,variant:t,className:d})}),A.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${E})`})]})}Jg.displayName="Background";const gE=O.memo(Jg);function v0(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:A.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function y0(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:A.jsx("path",{d:"M0 0h32v4.2H0z"})})}function m0(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:A.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function b0(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:A.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function _0(){return A.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:A.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Tt({children:e,className:t,...r}){return A.jsx("button",{type:"button",className:ue(["react-flow__controls-button",t]),...r,children:e})}const w0=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function ev({style:e,showZoom:t=!0,showFitView:r=!0,showInteractive:n=!0,fitViewOptions:i,onZoomIn:o,onZoomOut:a,onFitView:s,onInteractiveChange:c,className:u,children:d,position:l="bottom-left",orientation:f="vertical","aria-label":h}){const y=oe(),{isInteractive:v,minZoomReached:g,maxZoomReached:m,ariaLabelConfig:b}=re(w0,ie),{zoomIn:p,zoomOut:_,fitView:x}=tu(),w=()=>{p(),o?.()},E=()=>{_(),a?.()},q=()=>{x(i),s?.()},C=()=>{y.setState({nodesDraggable:!v,nodesConnectable:!v,elementsSelectable:!v}),c?.(!v)},N=f==="horizontal"?"horizontal":"vertical";return A.jsxs(Gt,{className:ue(["react-flow__controls",N,u]),position:l,style:e,"data-testid":"rf__controls","aria-label":h??b["controls.ariaLabel"],children:[t&&A.jsxs(A.Fragment,{children:[A.jsx(Tt,{onClick:w,className:"react-flow__controls-zoomin",title:b["controls.zoomIn.ariaLabel"],"aria-label":b["controls.zoomIn.ariaLabel"],disabled:m,children:A.jsx(v0,{})}),A.jsx(Tt,{onClick:E,className:"react-flow__controls-zoomout",title:b["controls.zoomOut.ariaLabel"],"aria-label":b["controls.zoomOut.ariaLabel"],disabled:g,children:A.jsx(y0,{})})]}),r&&A.jsx(Tt,{className:"react-flow__controls-fitview",onClick:q,title:b["controls.fitView.ariaLabel"],"aria-label":b["controls.fitView.ariaLabel"],children:A.jsx(m0,{})}),n&&A.jsx(Tt,{className:"react-flow__controls-interactive",onClick:C,title:b["controls.interactive.ariaLabel"],"aria-label":b["controls.interactive.ariaLabel"],children:v?A.jsx(_0,{}):A.jsx(b0,{})}),d]})}ev.displayName="Controls";const vE=O.memo(ev);function x0({id:e,x:t,y:r,width:n,height:i,style:o,color:a,strokeColor:s,strokeWidth:c,className:u,borderRadius:d,shapeRendering:l,selected:f,onClick:h}){const{background:y,backgroundColor:v}=o||{},g=a||y||v;return A.jsx("rect",{className:ue(["react-flow__minimap-node",{selected:f},u]),x:t,y:r,rx:d,ry:d,width:n,height:i,style:{fill:g,stroke:s,strokeWidth:c},shapeRendering:l,onClick:h?m=>h(m,e):void 0})}const E0=O.memo(x0),S0=e=>e.nodes.map(t=>t.id),_r=e=>e instanceof Function?e:()=>e;function C0({nodeStrokeColor:e,nodeColor:t,nodeClassName:r="",nodeBorderRadius:n=5,nodeStrokeWidth:i,nodeComponent:o=E0,onClick:a}){const s=re(S0,ie),c=_r(t),u=_r(e),d=_r(r),l=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return A.jsx(A.Fragment,{children:s.map(f=>A.jsx(R0,{id:f,nodeColorFunc:c,nodeStrokeColorFunc:u,nodeClassNameFunc:d,nodeBorderRadius:n,nodeStrokeWidth:i,NodeComponent:o,onClick:a,shapeRendering:l},f))})}function q0({id:e,nodeColorFunc:t,nodeStrokeColorFunc:r,nodeClassNameFunc:n,nodeBorderRadius:i,nodeStrokeWidth:o,shapeRendering:a,NodeComponent:s,onClick:c}){const{node:u,x:d,y:l,width:f,height:h}=re(y=>{const{internals:v}=y.nodeLookup.get(e),g=v.userNode,{x:m,y:b}=v.positionAbsolute,{width:p,height:_}=Ie(g);return{node:g,x:m,y:b,width:p,height:_}},ie);return!u||u.hidden||!tg(u)?null:A.jsx(s,{x:d,y:l,width:f,height:h,style:u.style,selected:!!u.selected,className:n(u),color:t(u),borderRadius:i,strokeColor:r(u),strokeWidth:o,shapeRendering:a,onClick:c,id:u.id})}const R0=O.memo(q0);var I0=O.memo(C0);const N0=200,M0=150,A0=e=>!e.hidden,T0=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?eg(mt(e.nodeLookup,{filter:A0}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},P0="react-flow__minimap-desc";function tv({style:e,className:t,nodeStrokeColor:r,nodeColor:n,nodeClassName:i="",nodeBorderRadius:o=5,nodeStrokeWidth:a,nodeComponent:s,bgColor:c,maskColor:u,maskStrokeColor:d,maskStrokeWidth:l,position:f="bottom-right",onClick:h,onNodeClick:y,pannable:v=!1,zoomable:g=!1,ariaLabel:m,inversePan:b,zoomStep:p=1,offsetScale:_=5}){const x=oe(),w=O.useRef(null),{boundingRect:E,viewBB:q,rfId:C,panZoom:N,translateExtent:S,flowWidth:R,flowHeight:M,ariaLabelConfig:L}=re(T0,ie),P=e?.width??N0,H=e?.height??M0,z=E.width/P,D=E.height/H,B=Math.max(z,D),U=B*P,G=B*H,$=_*B,Y=E.x-(U-E.width)/2-$,I=E.y-(G-E.height)/2-$,T=U+$*2,k=G+$*2,F=`${P0}-${C}`,j=O.useRef(0),V=O.useRef();j.current=B,O.useEffect(()=>{if(w.current&&N)return V.current=Jm({domNode:w.current,panZoom:N,getTransform:()=>x.getState().transform,getViewScale:()=>j.current}),()=>{V.current?.destroy()}},[N]),O.useEffect(()=>{V.current?.update({translateExtent:S,width:R,height:M,inversePan:b,pannable:v,zoomStep:p,zoomable:g})},[v,g,b,p,S,R,M]);const K=h?W=>{const[te,Z]=V.current?.pointer(W)||[0,0];h(W,{x:te,y:Z})}:void 0,J=y?O.useCallback((W,te)=>{const Z=x.getState().nodeLookup.get(te).internals.userNode;y(W,Z)},[]):void 0,Q=m??L["minimap.ariaLabel"];return A.jsx(Gt,{position:f,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-stroke-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-width-props":typeof l=="number"?l*B:void 0,"--xy-minimap-node-background-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-width-props":typeof a=="number"?a:void 0},className:ue(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:A.jsxs("svg",{width:P,height:H,viewBox:`${Y} ${I} ${T} ${k}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":F,ref:w,onClick:K,children:[Q&&A.jsx("title",{id:F,children:Q}),A.jsx(I0,{onClick:J,nodeColor:n,nodeStrokeColor:r,nodeBorderRadius:o,nodeClassName:i,nodeStrokeWidth:a,nodeComponent:s}),A.jsx("path",{className:"react-flow__minimap-mask",d:`M${Y-$},${I-$}h${T+$*2}v${k+$*2}h${-T-$*2}z
        M${q.x},${q.y}h${q.width}v${q.height}h${-q.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}tv.displayName="MiniMap";const yE=O.memo(tv),O0=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,k0={[$e.Line]:"right",[$e.Handle]:"bottom-right"};function L0({nodeId:e,position:t,variant:r=$e.Handle,className:n,style:i=void 0,children:o,color:a,minWidth:s=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:l=!1,resizeDirection:f,autoScale:h=!0,shouldResize:y,onResizeStart:v,onResize:g,onResizeEnd:m}){const b=Pg(),p=typeof e=="string"?e:b,_=oe(),x=O.useRef(null),w=r===$e.Handle,E=re(O.useCallback(O0(w&&h),[w,h]),ie),q=O.useRef(null),C=t??k0[r];O.useEffect(()=>{if(!(!x.current||!p))return q.current||(q.current=gb({domNode:x.current,nodeId:p,getStoreItems:()=>{const{nodeLookup:S,transform:R,snapGrid:M,snapToGrid:L,nodeOrigin:P,domNode:H}=_.getState();return{nodeLookup:S,transform:R,snapGrid:M,snapToGrid:L,nodeOrigin:P,paneDomNode:H}},onChange:(S,R)=>{const{triggerNodeChanges:M,nodeLookup:L,parentLookup:P,nodeOrigin:H}=_.getState(),z=[],D={x:S.x,y:S.y},B=L.get(p);if(B&&B.expandParent&&B.parentId){const U=B.origin??H,G=S.width??B.measured.width??0,$=S.height??B.measured.height??0,Y={id:B.id,parentId:B.parentId,rect:{width:G,height:$,...rg({x:S.x??B.position.x,y:S.y??B.position.y},{width:G,height:$},B.parentId,L,U)}},I=eu([Y],L,P,H);z.push(...I),D.x=S.x?Math.max(U[0]*G,S.x):void 0,D.y=S.y?Math.max(U[1]*$,S.y):void 0}if(D.x!==void 0&&D.y!==void 0){const U={id:p,type:"position",position:{...D}};z.push(U)}if(S.width!==void 0&&S.height!==void 0){const G={id:p,type:"dimensions",resizing:!0,setAttributes:f?f==="horizontal"?"width":"height":!0,dimensions:{width:S.width,height:S.height}};z.push(G)}for(const U of R){const G={...U,type:"position"};z.push(G)}M(z)},onEnd:({width:S,height:R})=>{const M={id:p,type:"dimensions",resizing:!1,dimensions:{width:S,height:R}};_.getState().triggerNodeChanges([M])}})),q.current.update({controlPosition:C,boundaries:{minWidth:s,minHeight:c,maxWidth:u,maxHeight:d},keepAspectRatio:l,resizeDirection:f,onResizeStart:v,onResize:g,onResizeEnd:m,shouldResize:y}),()=>{q.current?.destroy()}},[C,s,c,u,d,l,v,g,m,y]);const N=C.split("-");return A.jsx("div",{className:ue(["react-flow__resize-control","nodrag",...N,r,n]),ref:x,style:{...i,scale:E,...a&&{[w?"backgroundColor":"borderColor"]:a}},children:o})}const bc=O.memo(L0);function mE({nodeId:e,isVisible:t=!0,handleClassName:r,handleStyle:n,lineClassName:i,lineStyle:o,color:a,minWidth:s=10,minHeight:c=10,maxWidth:u=Number.MAX_VALUE,maxHeight:d=Number.MAX_VALUE,keepAspectRatio:l=!1,autoScale:f=!0,shouldResize:h,onResizeStart:y,onResize:v,onResizeEnd:g}){return t?A.jsxs(A.Fragment,{children:[cb.map(m=>A.jsx(bc,{className:i,style:o,nodeId:e,position:m,variant:$e.Line,color:a,minWidth:s,minHeight:c,maxWidth:u,maxHeight:d,onResizeStart:y,keepAspectRatio:l,autoScale:f,shouldResize:h,onResize:v,onResizeEnd:g},m)),ub.map(m=>A.jsx(bc,{className:r,style:n,nodeId:e,position:m,color:a,minWidth:s,minHeight:c,maxWidth:u,maxHeight:d,onResizeStart:y,keepAspectRatio:l,autoScale:f,shouldResize:h,onResize:v,onResizeEnd:g},m))]}):null}function nu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var wr,_c;function D0(){if(_c)return wr;_c=1;function e(){this.__data__=[],this.size=0}return wr=e,wr}var xr,wc;function rt(){if(wc)return xr;wc=1;function e(t,r){return t===r||t!==t&&r!==r}return xr=e,xr}var Er,xc;function Yt(){if(xc)return Er;xc=1;var e=rt();function t(r,n){for(var i=r.length;i--;)if(e(r[i][0],n))return i;return-1}return Er=t,Er}var Sr,Ec;function j0(){if(Ec)return Sr;Ec=1;var e=Yt(),t=Array.prototype,r=t.splice;function n(i){var o=this.__data__,a=e(o,i);if(a<0)return!1;var s=o.length-1;return a==s?o.pop():r.call(o,a,1),--this.size,!0}return Sr=n,Sr}var Cr,Sc;function F0(){if(Sc)return Cr;Sc=1;var e=Yt();function t(r){var n=this.__data__,i=e(n,r);return i<0?void 0:n[i][1]}return Cr=t,Cr}var qr,Cc;function B0(){if(Cc)return qr;Cc=1;var e=Yt();function t(r){return e(this.__data__,r)>-1}return qr=t,qr}var Rr,qc;function H0(){if(qc)return Rr;qc=1;var e=Yt();function t(r,n){var i=this.__data__,o=e(i,r);return o<0?(++this.size,i.push([r,n])):i[o][1]=n,this}return Rr=t,Rr}var Ir,Rc;function Kt(){if(Rc)return Ir;Rc=1;var e=D0(),t=j0(),r=F0(),n=B0(),i=H0();function o(a){var s=-1,c=a==null?0:a.length;for(this.clear();++s<c;){var u=a[s];this.set(u[0],u[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,Ir=o,Ir}var Nr,Ic;function z0(){if(Ic)return Nr;Ic=1;var e=Kt();function t(){this.__data__=new e,this.size=0}return Nr=t,Nr}var Mr,Nc;function $0(){if(Nc)return Mr;Nc=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return Mr=e,Mr}var Ar,Mc;function V0(){if(Mc)return Ar;Mc=1;function e(t){return this.__data__.get(t)}return Ar=e,Ar}var Tr,Ac;function G0(){if(Ac)return Tr;Ac=1;function e(t){return this.__data__.has(t)}return Tr=e,Tr}var Pr,Tc;function rv(){if(Tc)return Pr;Tc=1;var e=typeof It=="object"&&It&&It.Object===Object&&It;return Pr=e,Pr}var Or,Pc;function be(){if(Pc)return Or;Pc=1;var e=rv(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Or=r,Or}var kr,Oc;function nt(){if(Oc)return kr;Oc=1;var e=be(),t=e.Symbol;return kr=t,kr}var Lr,kc;function U0(){if(kc)return Lr;kc=1;var e=nt(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;function o(a){var s=r.call(a,i),c=a[i];try{a[i]=void 0;var u=!0}catch{}var d=n.call(a);return u&&(s?a[i]=c:delete a[i]),d}return Lr=o,Lr}var Dr,Lc;function W0(){if(Lc)return Dr;Lc=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Dr=r,Dr}var jr,Dc;function Ve(){if(Dc)return jr;Dc=1;var e=nt(),t=U0(),r=W0(),n="[object Null]",i="[object Undefined]",o=e?e.toStringTag:void 0;function a(s){return s==null?s===void 0?i:n:o&&o in Object(s)?t(s):r(s)}return jr=a,jr}var Fr,jc;function pe(){if(jc)return Fr;jc=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Fr=e,Fr}var Br,Fc;function wt(){if(Fc)return Br;Fc=1;var e=Ve(),t=pe(),r="[object AsyncFunction]",n="[object Function]",i="[object GeneratorFunction]",o="[object Proxy]";function a(s){if(!t(s))return!1;var c=e(s);return c==n||c==i||c==r||c==o}return Br=a,Br}var Hr,Bc;function Y0(){if(Bc)return Hr;Bc=1;var e=be(),t=e["__core-js_shared__"];return Hr=t,Hr}var zr,Hc;function K0(){if(Hc)return zr;Hc=1;var e=Y0(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return zr=r,zr}var $r,zc;function nv(){if(zc)return $r;zc=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return $r=r,$r}var Vr,$c;function Z0(){if($c)return Vr;$c=1;var e=wt(),t=K0(),r=pe(),n=nv(),i=/[\\^$.*+?()[\]{}|]/g,o=/^\[object .+?Constructor\]$/,a=Function.prototype,s=Object.prototype,c=a.toString,u=s.hasOwnProperty,d=RegExp("^"+c.call(u).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function l(f){if(!r(f)||t(f))return!1;var h=e(f)?d:o;return h.test(n(f))}return Vr=l,Vr}var Gr,Vc;function X0(){if(Vc)return Gr;Vc=1;function e(t,r){return t?.[r]}return Gr=e,Gr}var Ur,Gc;function Ge(){if(Gc)return Ur;Gc=1;var e=Z0(),t=X0();function r(n,i){var o=t(n,i);return e(o)?o:void 0}return Ur=r,Ur}var Wr,Uc;function iu(){if(Uc)return Wr;Uc=1;var e=Ge(),t=be(),r=e(t,"Map");return Wr=r,Wr}var Yr,Wc;function Zt(){if(Wc)return Yr;Wc=1;var e=Ge(),t=e(Object,"create");return Yr=t,Yr}var Kr,Yc;function Q0(){if(Yc)return Kr;Yc=1;var e=Zt();function t(){this.__data__=e?e(null):{},this.size=0}return Kr=t,Kr}var Zr,Kc;function J0(){if(Kc)return Zr;Kc=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return Zr=e,Zr}var Xr,Zc;function ew(){if(Zc)return Xr;Zc=1;var e=Zt(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function i(o){var a=this.__data__;if(e){var s=a[o];return s===t?void 0:s}return n.call(a,o)?a[o]:void 0}return Xr=i,Xr}var Qr,Xc;function tw(){if(Xc)return Qr;Xc=1;var e=Zt(),t=Object.prototype,r=t.hasOwnProperty;function n(i){var o=this.__data__;return e?o[i]!==void 0:r.call(o,i)}return Qr=n,Qr}var Jr,Qc;function rw(){if(Qc)return Jr;Qc=1;var e=Zt(),t="__lodash_hash_undefined__";function r(n,i){var o=this.__data__;return this.size+=this.has(n)?0:1,o[n]=e&&i===void 0?t:i,this}return Jr=r,Jr}var en,Jc;function nw(){if(Jc)return en;Jc=1;var e=Q0(),t=J0(),r=ew(),n=tw(),i=rw();function o(a){var s=-1,c=a==null?0:a.length;for(this.clear();++s<c;){var u=a[s];this.set(u[0],u[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,en=o,en}var tn,ed;function iw(){if(ed)return tn;ed=1;var e=nw(),t=Kt(),r=iu();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return tn=n,tn}var rn,td;function ow(){if(td)return rn;td=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return rn=e,rn}var nn,rd;function Xt(){if(rd)return nn;rd=1;var e=ow();function t(r,n){var i=r.__data__;return e(n)?i[typeof n=="string"?"string":"hash"]:i.map}return nn=t,nn}var on,nd;function aw(){if(nd)return on;nd=1;var e=Xt();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return on=t,on}var an,id;function sw(){if(id)return an;id=1;var e=Xt();function t(r){return e(this,r).get(r)}return an=t,an}var sn,od;function uw(){if(od)return sn;od=1;var e=Xt();function t(r){return e(this,r).has(r)}return sn=t,sn}var un,ad;function cw(){if(ad)return un;ad=1;var e=Xt();function t(r,n){var i=e(this,r),o=i.size;return i.set(r,n),this.size+=i.size==o?0:1,this}return un=t,un}var cn,sd;function ou(){if(sd)return cn;sd=1;var e=iw(),t=aw(),r=sw(),n=uw(),i=cw();function o(a){var s=-1,c=a==null?0:a.length;for(this.clear();++s<c;){var u=a[s];this.set(u[0],u[1])}}return o.prototype.clear=e,o.prototype.delete=t,o.prototype.get=r,o.prototype.has=n,o.prototype.set=i,cn=o,cn}var dn,ud;function dw(){if(ud)return dn;ud=1;var e=Kt(),t=iu(),r=ou(),n=200;function i(o,a){var s=this.__data__;if(s instanceof e){var c=s.__data__;if(!t||c.length<n-1)return c.push([o,a]),this.size=++s.size,this;s=this.__data__=new r(c)}return s.set(o,a),this.size=s.size,this}return dn=i,dn}var ln,cd;function Qt(){if(cd)return ln;cd=1;var e=Kt(),t=z0(),r=$0(),n=V0(),i=G0(),o=dw();function a(s){var c=this.__data__=new e(s);this.size=c.size}return a.prototype.clear=t,a.prototype.delete=r,a.prototype.get=n,a.prototype.has=i,a.prototype.set=o,ln=a,ln}var fn,dd;function au(){if(dd)return fn;dd=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i&&r(t[n],n,t)!==!1;);return t}return fn=e,fn}var hn,ld;function iv(){if(ld)return hn;ld=1;var e=Ge(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return hn=t,hn}var pn,fd;function Jt(){if(fd)return pn;fd=1;var e=iv();function t(r,n,i){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):r[n]=i}return pn=t,pn}var gn,hd;function er(){if(hd)return gn;hd=1;var e=Jt(),t=rt(),r=Object.prototype,n=r.hasOwnProperty;function i(o,a,s){var c=o[a];(!(n.call(o,a)&&t(c,s))||s===void 0&&!(a in o))&&e(o,a,s)}return gn=i,gn}var vn,pd;function xt(){if(pd)return vn;pd=1;var e=er(),t=Jt();function r(n,i,o,a){var s=!o;o||(o={});for(var c=-1,u=i.length;++c<u;){var d=i[c],l=a?a(o[d],n[d],d,o,n):void 0;l===void 0&&(l=n[d]),s?t(o,d,l):e(o,d,l)}return o}return vn=r,vn}var yn,gd;function lw(){if(gd)return yn;gd=1;function e(t,r){for(var n=-1,i=Array(t);++n<t;)i[n]=r(n);return i}return yn=e,yn}var mn,vd;function Ee(){if(vd)return mn;vd=1;function e(t){return t!=null&&typeof t=="object"}return mn=e,mn}var bn,yd;function fw(){if(yd)return bn;yd=1;var e=Ve(),t=Ee(),r="[object Arguments]";function n(i){return t(i)&&e(i)==r}return bn=n,bn}var _n,md;function Et(){if(md)return _n;md=1;var e=fw(),t=Ee(),r=Object.prototype,n=r.hasOwnProperty,i=r.propertyIsEnumerable,o=e((function(){return arguments})())?e:function(a){return t(a)&&n.call(a,"callee")&&!i.call(a,"callee")};return _n=o,_n}var wn,bd;function ce(){if(bd)return wn;bd=1;var e=Array.isArray;return wn=e,wn}var st={exports:{}},xn,_d;function hw(){if(_d)return xn;_d=1;function e(){return!1}return xn=e,xn}st.exports;var wd;function it(){return wd||(wd=1,(function(e,t){var r=be(),n=hw(),i=t&&!t.nodeType&&t,o=i&&!0&&e&&!e.nodeType&&e,a=o&&o.exports===i,s=a?r.Buffer:void 0,c=s?s.isBuffer:void 0,u=c||n;e.exports=u})(st,st.exports)),st.exports}var En,xd;function tr(){if(xd)return En;xd=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,i){var o=typeof n;return i=i??e,!!i&&(o=="number"||o!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<i}return En=r,En}var Sn,Ed;function su(){if(Ed)return Sn;Ed=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Sn=t,Sn}var Cn,Sd;function pw(){if(Sd)return Cn;Sd=1;var e=Ve(),t=su(),r=Ee(),n="[object Arguments]",i="[object Array]",o="[object Boolean]",a="[object Date]",s="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",l="[object Object]",f="[object RegExp]",h="[object Set]",y="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",m="[object DataView]",b="[object Float32Array]",p="[object Float64Array]",_="[object Int8Array]",x="[object Int16Array]",w="[object Int32Array]",E="[object Uint8Array]",q="[object Uint8ClampedArray]",C="[object Uint16Array]",N="[object Uint32Array]",S={};S[b]=S[p]=S[_]=S[x]=S[w]=S[E]=S[q]=S[C]=S[N]=!0,S[n]=S[i]=S[g]=S[o]=S[m]=S[a]=S[s]=S[c]=S[u]=S[d]=S[l]=S[f]=S[h]=S[y]=S[v]=!1;function R(M){return r(M)&&t(M.length)&&!!S[e(M)]}return Cn=R,Cn}var qn,Cd;function rr(){if(Cd)return qn;Cd=1;function e(t){return function(r){return t(r)}}return qn=e,qn}var ut={exports:{}};ut.exports;var qd;function uu(){return qd||(qd=1,(function(e,t){var r=rv(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,a=o&&r.process,s=(function(){try{var c=i&&i.require&&i.require("util").types;return c||a&&a.binding&&a.binding("util")}catch{}})();e.exports=s})(ut,ut.exports)),ut.exports}var Rn,Rd;function St(){if(Rd)return Rn;Rd=1;var e=pw(),t=rr(),r=uu(),n=r&&r.isTypedArray,i=n?t(n):e;return Rn=i,Rn}var In,Id;function ov(){if(Id)return In;Id=1;var e=lw(),t=Et(),r=ce(),n=it(),i=tr(),o=St(),a=Object.prototype,s=a.hasOwnProperty;function c(u,d){var l=r(u),f=!l&&t(u),h=!l&&!f&&n(u),y=!l&&!f&&!h&&o(u),v=l||f||h||y,g=v?e(u.length,String):[],m=g.length;for(var b in u)(d||s.call(u,b))&&!(v&&(b=="length"||h&&(b=="offset"||b=="parent")||y&&(b=="buffer"||b=="byteLength"||b=="byteOffset")||i(b,m)))&&g.push(b);return g}return In=c,In}var Nn,Nd;function nr(){if(Nd)return Nn;Nd=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,i=typeof n=="function"&&n.prototype||e;return r===i}return Nn=t,Nn}var Mn,Md;function av(){if(Md)return Mn;Md=1;function e(t,r){return function(n){return t(r(n))}}return Mn=e,Mn}var An,Ad;function gw(){if(Ad)return An;Ad=1;var e=av(),t=e(Object.keys,Object);return An=t,An}var Tn,Td;function cu(){if(Td)return Tn;Td=1;var e=nr(),t=gw(),r=Object.prototype,n=r.hasOwnProperty;function i(o){if(!e(o))return t(o);var a=[];for(var s in Object(o))n.call(o,s)&&s!="constructor"&&a.push(s);return a}return Tn=i,Tn}var Pn,Pd;function Ne(){if(Pd)return Pn;Pd=1;var e=wt(),t=su();function r(n){return n!=null&&t(n.length)&&!e(n)}return Pn=r,Pn}var On,Od;function je(){if(Od)return On;Od=1;var e=ov(),t=cu(),r=Ne();function n(i){return r(i)?e(i):t(i)}return On=n,On}var kn,kd;function vw(){if(kd)return kn;kd=1;var e=xt(),t=je();function r(n,i){return n&&e(i,t(i),n)}return kn=r,kn}var Ln,Ld;function yw(){if(Ld)return Ln;Ld=1;function e(t){var r=[];if(t!=null)for(var n in Object(t))r.push(n);return r}return Ln=e,Ln}var Dn,Dd;function mw(){if(Dd)return Dn;Dd=1;var e=pe(),t=nr(),r=yw(),n=Object.prototype,i=n.hasOwnProperty;function o(a){if(!e(a))return r(a);var s=t(a),c=[];for(var u in a)u=="constructor"&&(s||!i.call(a,u))||c.push(u);return c}return Dn=o,Dn}var jn,jd;function Ue(){if(jd)return jn;jd=1;var e=ov(),t=mw(),r=Ne();function n(i){return r(i)?e(i,!0):t(i)}return jn=n,jn}var Fn,Fd;function bw(){if(Fd)return Fn;Fd=1;var e=xt(),t=Ue();function r(n,i){return n&&e(i,t(i),n)}return Fn=r,Fn}var ct={exports:{}};ct.exports;var Bd;function sv(){return Bd||(Bd=1,(function(e,t){var r=be(),n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===n,a=o?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;function c(u,d){if(d)return u.slice();var l=u.length,f=s?s(l):new u.constructor(l);return u.copy(f),f}e.exports=c})(ct,ct.exports)),ct.exports}var Bn,Hd;function uv(){if(Hd)return Bn;Hd=1;function e(t,r){var n=-1,i=t.length;for(r||(r=Array(i));++n<i;)r[n]=t[n];return r}return Bn=e,Bn}var Hn,zd;function cv(){if(zd)return Hn;zd=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=0,a=[];++n<i;){var s=t[n];r(s,n,t)&&(a[o++]=s)}return a}return Hn=e,Hn}var zn,$d;function dv(){if($d)return zn;$d=1;function e(){return[]}return zn=e,zn}var $n,Vd;function du(){if(Vd)return $n;Vd=1;var e=cv(),t=dv(),r=Object.prototype,n=r.propertyIsEnumerable,i=Object.getOwnPropertySymbols,o=i?function(a){return a==null?[]:(a=Object(a),e(i(a),function(s){return n.call(a,s)}))}:t;return $n=o,$n}var Vn,Gd;function _w(){if(Gd)return Vn;Gd=1;var e=xt(),t=du();function r(n,i){return e(n,t(n),i)}return Vn=r,Vn}var Gn,Ud;function lu(){if(Ud)return Gn;Ud=1;function e(t,r){for(var n=-1,i=r.length,o=t.length;++n<i;)t[o+n]=r[n];return t}return Gn=e,Gn}var Un,Wd;function ir(){if(Wd)return Un;Wd=1;var e=av(),t=e(Object.getPrototypeOf,Object);return Un=t,Un}var Wn,Yd;function lv(){if(Yd)return Wn;Yd=1;var e=lu(),t=ir(),r=du(),n=dv(),i=Object.getOwnPropertySymbols,o=i?function(a){for(var s=[];a;)e(s,r(a)),a=t(a);return s}:n;return Wn=o,Wn}var Yn,Kd;function ww(){if(Kd)return Yn;Kd=1;var e=xt(),t=lv();function r(n,i){return e(n,t(n),i)}return Yn=r,Yn}var Kn,Zd;function fv(){if(Zd)return Kn;Zd=1;var e=lu(),t=ce();function r(n,i,o){var a=i(n);return t(n)?a:e(a,o(n))}return Kn=r,Kn}var Zn,Xd;function hv(){if(Xd)return Zn;Xd=1;var e=fv(),t=du(),r=je();function n(i){return e(i,r,t)}return Zn=n,Zn}var Xn,Qd;function xw(){if(Qd)return Xn;Qd=1;var e=fv(),t=lv(),r=Ue();function n(i){return e(i,r,t)}return Xn=n,Xn}var Qn,Jd;function Ew(){if(Jd)return Qn;Jd=1;var e=Ge(),t=be(),r=e(t,"DataView");return Qn=r,Qn}var Jn,el;function Sw(){if(el)return Jn;el=1;var e=Ge(),t=be(),r=e(t,"Promise");return Jn=r,Jn}var ei,tl;function pv(){if(tl)return ei;tl=1;var e=Ge(),t=be(),r=e(t,"Set");return ei=r,ei}var ti,rl;function Cw(){if(rl)return ti;rl=1;var e=Ge(),t=be(),r=e(t,"WeakMap");return ti=r,ti}var ri,nl;function ot(){if(nl)return ri;nl=1;var e=Ew(),t=iu(),r=Sw(),n=pv(),i=Cw(),o=Ve(),a=nv(),s="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",l="[object WeakMap]",f="[object DataView]",h=a(e),y=a(t),v=a(r),g=a(n),m=a(i),b=o;return(e&&b(new e(new ArrayBuffer(1)))!=f||t&&b(new t)!=s||r&&b(r.resolve())!=u||n&&b(new n)!=d||i&&b(new i)!=l)&&(b=function(p){var _=o(p),x=_==c?p.constructor:void 0,w=x?a(x):"";if(w)switch(w){case h:return f;case y:return s;case v:return u;case g:return d;case m:return l}return _}),ri=b,ri}var ni,il;function qw(){if(il)return ni;il=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n){var i=n.length,o=new n.constructor(i);return i&&typeof n[0]=="string"&&t.call(n,"index")&&(o.index=n.index,o.input=n.input),o}return ni=r,ni}var ii,ol;function gv(){if(ol)return ii;ol=1;var e=be(),t=e.Uint8Array;return ii=t,ii}var oi,al;function fu(){if(al)return oi;al=1;var e=gv();function t(r){var n=new r.constructor(r.byteLength);return new e(n).set(new e(r)),n}return oi=t,oi}var ai,sl;function Rw(){if(sl)return ai;sl=1;var e=fu();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.byteLength)}return ai=t,ai}var si,ul;function Iw(){if(ul)return si;ul=1;var e=/\w*$/;function t(r){var n=new r.constructor(r.source,e.exec(r));return n.lastIndex=r.lastIndex,n}return si=t,si}var ui,cl;function Nw(){if(cl)return ui;cl=1;var e=nt(),t=e?e.prototype:void 0,r=t?t.valueOf:void 0;function n(i){return r?Object(r.call(i)):{}}return ui=n,ui}var ci,dl;function vv(){if(dl)return ci;dl=1;var e=fu();function t(r,n){var i=n?e(r.buffer):r.buffer;return new r.constructor(i,r.byteOffset,r.length)}return ci=t,ci}var di,ll;function Mw(){if(ll)return di;ll=1;var e=fu(),t=Rw(),r=Iw(),n=Nw(),i=vv(),o="[object Boolean]",a="[object Date]",s="[object Map]",c="[object Number]",u="[object RegExp]",d="[object Set]",l="[object String]",f="[object Symbol]",h="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",g="[object Float64Array]",m="[object Int8Array]",b="[object Int16Array]",p="[object Int32Array]",_="[object Uint8Array]",x="[object Uint8ClampedArray]",w="[object Uint16Array]",E="[object Uint32Array]";function q(C,N,S){var R=C.constructor;switch(N){case h:return e(C);case o:case a:return new R(+C);case y:return t(C,S);case v:case g:case m:case b:case p:case _:case x:case w:case E:return i(C,S);case s:return new R;case c:case l:return new R(C);case u:return r(C);case d:return new R;case f:return n(C)}}return di=q,di}var li,fl;function yv(){if(fl)return li;fl=1;var e=pe(),t=Object.create,r=(function(){function n(){}return function(i){if(!e(i))return{};if(t)return t(i);n.prototype=i;var o=new n;return n.prototype=void 0,o}})();return li=r,li}var fi,hl;function mv(){if(hl)return fi;hl=1;var e=yv(),t=ir(),r=nr();function n(i){return typeof i.constructor=="function"&&!r(i)?e(t(i)):{}}return fi=n,fi}var hi,pl;function Aw(){if(pl)return hi;pl=1;var e=ot(),t=Ee(),r="[object Map]";function n(i){return t(i)&&e(i)==r}return hi=n,hi}var pi,gl;function Tw(){if(gl)return pi;gl=1;var e=Aw(),t=rr(),r=uu(),n=r&&r.isMap,i=n?t(n):e;return pi=i,pi}var gi,vl;function Pw(){if(vl)return gi;vl=1;var e=ot(),t=Ee(),r="[object Set]";function n(i){return t(i)&&e(i)==r}return gi=n,gi}var vi,yl;function Ow(){if(yl)return vi;yl=1;var e=Pw(),t=rr(),r=uu(),n=r&&r.isSet,i=n?t(n):e;return vi=i,vi}var yi,ml;function bv(){if(ml)return yi;ml=1;var e=Qt(),t=au(),r=er(),n=vw(),i=bw(),o=sv(),a=uv(),s=_w(),c=ww(),u=hv(),d=xw(),l=ot(),f=qw(),h=Mw(),y=mv(),v=ce(),g=it(),m=Tw(),b=pe(),p=Ow(),_=je(),x=Ue(),w=1,E=2,q=4,C="[object Arguments]",N="[object Array]",S="[object Boolean]",R="[object Date]",M="[object Error]",L="[object Function]",P="[object GeneratorFunction]",H="[object Map]",z="[object Number]",D="[object Object]",B="[object RegExp]",U="[object Set]",G="[object String]",$="[object Symbol]",Y="[object WeakMap]",I="[object ArrayBuffer]",T="[object DataView]",k="[object Float32Array]",F="[object Float64Array]",j="[object Int8Array]",V="[object Int16Array]",K="[object Int32Array]",J="[object Uint8Array]",Q="[object Uint8ClampedArray]",W="[object Uint16Array]",te="[object Uint32Array]",Z={};Z[C]=Z[N]=Z[I]=Z[T]=Z[S]=Z[R]=Z[k]=Z[F]=Z[j]=Z[V]=Z[K]=Z[H]=Z[z]=Z[D]=Z[B]=Z[U]=Z[G]=Z[$]=Z[J]=Z[Q]=Z[W]=Z[te]=!0,Z[M]=Z[L]=Z[Y]=!1;function ne(ee,le,de,Se,_e,fe){var se,Ae=le&w,Ce=le&E,Te=le&q;if(de&&(se=_e?de(ee,Se,_e,fe):de(ee)),se!==void 0)return se;if(!b(ee))return ee;var Pe=v(ee);if(Pe){if(se=f(ee),!Ae)return a(ee,se)}else{var qe=l(ee),qt=qe==L||qe==P;if(g(ee))return o(ee,Ae);if(qe==D||qe==C||qt&&!_e){if(se=Ce||qt?{}:y(ee),!Ae)return Ce?c(ee,i(se,ee)):s(ee,n(se,ee))}else{if(!Z[qe])return _e?ee:{};se=h(ee,qe,Ae)}}fe||(fe=new e);var Ye=fe.get(ee);if(Ye)return Ye;fe.set(ee,se),p(ee)?ee.forEach(function(we){se.add(ne(we,le,de,we,ee,fe))}):m(ee)&&ee.forEach(function(we,Re){se.set(Re,ne(we,le,de,Re,ee,fe))});var lr=Te?Ce?d:u:Ce?x:_,Rt=Pe?void 0:lr(ee);return t(Rt||ee,function(we,Re){Rt&&(Re=we,we=ee[Re]),r(se,Re,ne(we,le,de,Re,ee,fe))}),se}return yi=ne,yi}var mi,bl;function kw(){if(bl)return mi;bl=1;var e=bv(),t=4;function r(n){return e(n,t)}return mi=r,mi}var bi,_l;function hu(){if(_l)return bi;_l=1;function e(t){return function(){return t}}return bi=e,bi}var _i,wl;function Lw(){if(wl)return _i;wl=1;function e(t){return function(r,n,i){for(var o=-1,a=Object(r),s=i(r),c=s.length;c--;){var u=s[t?c:++o];if(n(a[u],u,a)===!1)break}return r}}return _i=e,_i}var wi,xl;function pu(){if(xl)return wi;xl=1;var e=Lw(),t=e();return wi=t,wi}var xi,El;function gu(){if(El)return xi;El=1;var e=pu(),t=je();function r(n,i){return n&&e(n,i,t)}return xi=r,xi}var Ei,Sl;function Dw(){if(Sl)return Ei;Sl=1;var e=Ne();function t(r,n){return function(i,o){if(i==null)return i;if(!e(i))return r(i,o);for(var a=i.length,s=n?a:-1,c=Object(i);(n?s--:++s<a)&&o(c[s],s,c)!==!1;);return i}}return Ei=t,Ei}var Si,Cl;function or(){if(Cl)return Si;Cl=1;var e=gu(),t=Dw(),r=t(e);return Si=r,Si}var Ci,ql;function We(){if(ql)return Ci;ql=1;function e(t){return t}return Ci=e,Ci}var qi,Rl;function _v(){if(Rl)return qi;Rl=1;var e=We();function t(r){return typeof r=="function"?r:e}return qi=t,qi}var Ri,Il;function wv(){if(Il)return Ri;Il=1;var e=au(),t=or(),r=_v(),n=ce();function i(o,a){var s=n(o)?e:t;return s(o,r(a))}return Ri=i,Ri}var Ii,Nl;function xv(){return Nl||(Nl=1,Ii=wv()),Ii}var Ni,Ml;function jw(){if(Ml)return Ni;Ml=1;var e=or();function t(r,n){var i=[];return e(r,function(o,a,s){n(o,a,s)&&i.push(o)}),i}return Ni=t,Ni}var Mi,Al;function Fw(){if(Al)return Mi;Al=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Mi=t,Mi}var Ai,Tl;function Bw(){if(Tl)return Ai;Tl=1;function e(t){return this.__data__.has(t)}return Ai=e,Ai}var Ti,Pl;function Ev(){if(Pl)return Ti;Pl=1;var e=ou(),t=Fw(),r=Bw();function n(i){var o=-1,a=i==null?0:i.length;for(this.__data__=new e;++o<a;)this.add(i[o])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,Ti=n,Ti}var Pi,Ol;function Hw(){if(Ol)return Pi;Ol=1;function e(t,r){for(var n=-1,i=t==null?0:t.length;++n<i;)if(r(t[n],n,t))return!0;return!1}return Pi=e,Pi}var Oi,kl;function Sv(){if(kl)return Oi;kl=1;function e(t,r){return t.has(r)}return Oi=e,Oi}var ki,Ll;function Cv(){if(Ll)return ki;Ll=1;var e=Ev(),t=Hw(),r=Sv(),n=1,i=2;function o(a,s,c,u,d,l){var f=c&n,h=a.length,y=s.length;if(h!=y&&!(f&&y>h))return!1;var v=l.get(a),g=l.get(s);if(v&&g)return v==s&&g==a;var m=-1,b=!0,p=c&i?new e:void 0;for(l.set(a,s),l.set(s,a);++m<h;){var _=a[m],x=s[m];if(u)var w=f?u(x,_,m,s,a,l):u(_,x,m,a,s,l);if(w!==void 0){if(w)continue;b=!1;break}if(p){if(!t(s,function(E,q){if(!r(p,q)&&(_===E||d(_,E,c,u,l)))return p.push(q)})){b=!1;break}}else if(!(_===x||d(_,x,c,u,l))){b=!1;break}}return l.delete(a),l.delete(s),b}return ki=o,ki}var Li,Dl;function zw(){if(Dl)return Li;Dl=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i,o){n[++r]=[o,i]}),n}return Li=e,Li}var Di,jl;function vu(){if(jl)return Di;jl=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(i){n[++r]=i}),n}return Di=e,Di}var ji,Fl;function $w(){if(Fl)return ji;Fl=1;var e=nt(),t=gv(),r=rt(),n=Cv(),i=zw(),o=vu(),a=1,s=2,c="[object Boolean]",u="[object Date]",d="[object Error]",l="[object Map]",f="[object Number]",h="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",m="[object ArrayBuffer]",b="[object DataView]",p=e?e.prototype:void 0,_=p?p.valueOf:void 0;function x(w,E,q,C,N,S,R){switch(q){case b:if(w.byteLength!=E.byteLength||w.byteOffset!=E.byteOffset)return!1;w=w.buffer,E=E.buffer;case m:return!(w.byteLength!=E.byteLength||!S(new t(w),new t(E)));case c:case u:case f:return r(+w,+E);case d:return w.name==E.name&&w.message==E.message;case h:case v:return w==E+"";case l:var M=i;case y:var L=C&a;if(M||(M=o),w.size!=E.size&&!L)return!1;var P=R.get(w);if(P)return P==E;C|=s,R.set(w,E);var H=n(M(w),M(E),C,N,S,R);return R.delete(w),H;case g:if(_)return _.call(w)==_.call(E)}return!1}return ji=x,ji}var Fi,Bl;function Vw(){if(Bl)return Fi;Bl=1;var e=hv(),t=1,r=Object.prototype,n=r.hasOwnProperty;function i(o,a,s,c,u,d){var l=s&t,f=e(o),h=f.length,y=e(a),v=y.length;if(h!=v&&!l)return!1;for(var g=h;g--;){var m=f[g];if(!(l?m in a:n.call(a,m)))return!1}var b=d.get(o),p=d.get(a);if(b&&p)return b==a&&p==o;var _=!0;d.set(o,a),d.set(a,o);for(var x=l;++g<h;){m=f[g];var w=o[m],E=a[m];if(c)var q=l?c(E,w,m,a,o,d):c(w,E,m,o,a,d);if(!(q===void 0?w===E||u(w,E,s,c,d):q)){_=!1;break}x||(x=m=="constructor")}if(_&&!x){var C=o.constructor,N=a.constructor;C!=N&&"constructor"in o&&"constructor"in a&&!(typeof C=="function"&&C instanceof C&&typeof N=="function"&&N instanceof N)&&(_=!1)}return d.delete(o),d.delete(a),_}return Fi=i,Fi}var Bi,Hl;function Gw(){if(Hl)return Bi;Hl=1;var e=Qt(),t=Cv(),r=$w(),n=Vw(),i=ot(),o=ce(),a=it(),s=St(),c=1,u="[object Arguments]",d="[object Array]",l="[object Object]",f=Object.prototype,h=f.hasOwnProperty;function y(v,g,m,b,p,_){var x=o(v),w=o(g),E=x?d:i(v),q=w?d:i(g);E=E==u?l:E,q=q==u?l:q;var C=E==l,N=q==l,S=E==q;if(S&&a(v)){if(!a(g))return!1;x=!0,C=!1}if(S&&!C)return _||(_=new e),x||s(v)?t(v,g,m,b,p,_):r(v,g,E,m,b,p,_);if(!(m&c)){var R=C&&h.call(v,"__wrapped__"),M=N&&h.call(g,"__wrapped__");if(R||M){var L=R?v.value():v,P=M?g.value():g;return _||(_=new e),p(L,P,m,b,_)}}return S?(_||(_=new e),n(v,g,m,b,p,_)):!1}return Bi=y,Bi}var Hi,zl;function qv(){if(zl)return Hi;zl=1;var e=Gw(),t=Ee();function r(n,i,o,a,s){return n===i?!0:n==null||i==null||!t(n)&&!t(i)?n!==n&&i!==i:e(n,i,o,a,r,s)}return Hi=r,Hi}var zi,$l;function Uw(){if($l)return zi;$l=1;var e=Qt(),t=qv(),r=1,n=2;function i(o,a,s,c){var u=s.length,d=u,l=!c;if(o==null)return!d;for(o=Object(o);u--;){var f=s[u];if(l&&f[2]?f[1]!==o[f[0]]:!(f[0]in o))return!1}for(;++u<d;){f=s[u];var h=f[0],y=o[h],v=f[1];if(l&&f[2]){if(y===void 0&&!(h in o))return!1}else{var g=new e;if(c)var m=c(y,v,h,o,a,g);if(!(m===void 0?t(v,y,r|n,c,g):m))return!1}}return!0}return zi=i,zi}var $i,Vl;function Rv(){if(Vl)return $i;Vl=1;var e=pe();function t(r){return r===r&&!e(r)}return $i=t,$i}var Vi,Gl;function Ww(){if(Gl)return Vi;Gl=1;var e=Rv(),t=je();function r(n){for(var i=t(n),o=i.length;o--;){var a=i[o],s=n[a];i[o]=[a,s,e(s)]}return i}return Vi=r,Vi}var Gi,Ul;function Iv(){if(Ul)return Gi;Ul=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Gi=e,Gi}var Ui,Wl;function Yw(){if(Wl)return Ui;Wl=1;var e=Uw(),t=Ww(),r=Iv();function n(i){var o=t(i);return o.length==1&&o[0][2]?r(o[0][0],o[0][1]):function(a){return a===i||e(a,i,o)}}return Ui=n,Ui}var Wi,Yl;function at(){if(Yl)return Wi;Yl=1;var e=Ve(),t=Ee(),r="[object Symbol]";function n(i){return typeof i=="symbol"||t(i)&&e(i)==r}return Wi=n,Wi}var Yi,Kl;function yu(){if(Kl)return Yi;Kl=1;var e=ce(),t=at(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function i(o,a){if(e(o))return!1;var s=typeof o;return s=="number"||s=="symbol"||s=="boolean"||o==null||t(o)?!0:n.test(o)||!r.test(o)||a!=null&&o in Object(a)}return Yi=i,Yi}var Ki,Zl;function Kw(){if(Zl)return Ki;Zl=1;var e=ou(),t="Expected a function";function r(n,i){if(typeof n!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var o=function(){var a=arguments,s=i?i.apply(this,a):a[0],c=o.cache;if(c.has(s))return c.get(s);var u=n.apply(this,a);return o.cache=c.set(s,u)||c,u};return o.cache=new(r.Cache||e),o}return r.Cache=e,Ki=r,Ki}var Zi,Xl;function Zw(){if(Xl)return Zi;Xl=1;var e=Kw(),t=500;function r(n){var i=e(n,function(a){return o.size===t&&o.clear(),a}),o=i.cache;return i}return Zi=r,Zi}var Xi,Ql;function Xw(){if(Ql)return Xi;Ql=1;var e=Zw(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(i){var o=[];return i.charCodeAt(0)===46&&o.push(""),i.replace(t,function(a,s,c,u){o.push(c?u.replace(r,"$1"):s||a)}),o});return Xi=n,Xi}var Qi,Jl;function ar(){if(Jl)return Qi;Jl=1;function e(t,r){for(var n=-1,i=t==null?0:t.length,o=Array(i);++n<i;)o[n]=r(t[n],n,t);return o}return Qi=e,Qi}var Ji,ef;function Qw(){if(ef)return Ji;ef=1;var e=nt(),t=ar(),r=ce(),n=at(),i=e?e.prototype:void 0,o=i?i.toString:void 0;function a(s){if(typeof s=="string")return s;if(r(s))return t(s,a)+"";if(n(s))return o?o.call(s):"";var c=s+"";return c=="0"&&1/s==-1/0?"-0":c}return Ji=a,Ji}var eo,tf;function Nv(){if(tf)return eo;tf=1;var e=Qw();function t(r){return r==null?"":e(r)}return eo=t,eo}var to,rf;function sr(){if(rf)return to;rf=1;var e=ce(),t=yu(),r=Xw(),n=Nv();function i(o,a){return e(o)?o:t(o,a)?[o]:r(n(o))}return to=i,to}var ro,nf;function Ct(){if(nf)return ro;nf=1;var e=at();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return ro=t,ro}var no,of;function ur(){if(of)return no;of=1;var e=sr(),t=Ct();function r(n,i){i=e(i,n);for(var o=0,a=i.length;n!=null&&o<a;)n=n[t(i[o++])];return o&&o==a?n:void 0}return no=r,no}var io,af;function Jw(){if(af)return io;af=1;var e=ur();function t(r,n,i){var o=r==null?void 0:e(r,n);return o===void 0?i:o}return io=t,io}var oo,sf;function ex(){if(sf)return oo;sf=1;function e(t,r){return t!=null&&r in Object(t)}return oo=e,oo}var ao,uf;function Mv(){if(uf)return ao;uf=1;var e=sr(),t=Et(),r=ce(),n=tr(),i=su(),o=Ct();function a(s,c,u){c=e(c,s);for(var d=-1,l=c.length,f=!1;++d<l;){var h=o(c[d]);if(!(f=s!=null&&u(s,h)))break;s=s[h]}return f||++d!=l?f:(l=s==null?0:s.length,!!l&&i(l)&&n(h,l)&&(r(s)||t(s)))}return ao=a,ao}var so,cf;function Av(){if(cf)return so;cf=1;var e=ex(),t=Mv();function r(n,i){return n!=null&&t(n,i,e)}return so=r,so}var uo,df;function tx(){if(df)return uo;df=1;var e=qv(),t=Jw(),r=Av(),n=yu(),i=Rv(),o=Iv(),a=Ct(),s=1,c=2;function u(d,l){return n(d)&&i(l)?o(a(d),l):function(f){var h=t(f,d);return h===void 0&&h===l?r(f,d):e(l,h,s|c)}}return uo=u,uo}var co,lf;function Tv(){if(lf)return co;lf=1;function e(t){return function(r){return r?.[t]}}return co=e,co}var lo,ff;function rx(){if(ff)return lo;ff=1;var e=ur();function t(r){return function(n){return e(n,r)}}return lo=t,lo}var fo,hf;function nx(){if(hf)return fo;hf=1;var e=Tv(),t=rx(),r=yu(),n=Ct();function i(o){return r(o)?e(n(o)):t(o)}return fo=i,fo}var ho,pf;function Me(){if(pf)return ho;pf=1;var e=Yw(),t=tx(),r=We(),n=ce(),i=nx();function o(a){return typeof a=="function"?a:a==null?r:typeof a=="object"?n(a)?t(a[0],a[1]):e(a):i(a)}return ho=o,ho}var po,gf;function Pv(){if(gf)return po;gf=1;var e=cv(),t=jw(),r=Me(),n=ce();function i(o,a){var s=n(o)?e:t;return s(o,r(a,3))}return po=i,po}var go,vf;function ix(){if(vf)return go;vf=1;var e=Object.prototype,t=e.hasOwnProperty;function r(n,i){return n!=null&&t.call(n,i)}return go=r,go}var vo,yf;function Ov(){if(yf)return vo;yf=1;var e=ix(),t=Mv();function r(n,i){return n!=null&&t(n,i,e)}return vo=r,vo}var yo,mf;function ox(){if(mf)return yo;mf=1;var e=cu(),t=ot(),r=Et(),n=ce(),i=Ne(),o=it(),a=nr(),s=St(),c="[object Map]",u="[object Set]",d=Object.prototype,l=d.hasOwnProperty;function f(h){if(h==null)return!0;if(i(h)&&(n(h)||typeof h=="string"||typeof h.splice=="function"||o(h)||s(h)||r(h)))return!h.length;var y=t(h);if(y==c||y==u)return!h.size;if(a(h))return!e(h).length;for(var v in h)if(l.call(h,v))return!1;return!0}return yo=f,yo}var mo,bf;function kv(){if(bf)return mo;bf=1;function e(t){return t===void 0}return mo=e,mo}var bo,_f;function Lv(){if(_f)return bo;_f=1;var e=or(),t=Ne();function r(n,i){var o=-1,a=t(n)?Array(n.length):[];return e(n,function(s,c,u){a[++o]=i(s,c,u)}),a}return bo=r,bo}var _o,wf;function Dv(){if(wf)return _o;wf=1;var e=ar(),t=Me(),r=Lv(),n=ce();function i(o,a){var s=n(o)?e:r;return s(o,t(a,3))}return _o=i,_o}var wo,xf;function ax(){if(xf)return wo;xf=1;function e(t,r,n,i){var o=-1,a=t==null?0:t.length;for(i&&a&&(n=t[++o]);++o<a;)n=r(n,t[o],o,t);return n}return wo=e,wo}var xo,Ef;function sx(){if(Ef)return xo;Ef=1;function e(t,r,n,i,o){return o(t,function(a,s,c){n=i?(i=!1,a):r(n,a,s,c)}),n}return xo=e,xo}var Eo,Sf;function jv(){if(Sf)return Eo;Sf=1;var e=ax(),t=or(),r=Me(),n=sx(),i=ce();function o(a,s,c){var u=i(a)?e:n,d=arguments.length<3;return u(a,r(s,4),c,d,t)}return Eo=o,Eo}var So,Cf;function ux(){if(Cf)return So;Cf=1;var e=Ve(),t=ce(),r=Ee(),n="[object String]";function i(o){return typeof o=="string"||!t(o)&&r(o)&&e(o)==n}return So=i,So}var Co,qf;function cx(){if(qf)return Co;qf=1;var e=Tv(),t=e("length");return Co=t,Co}var qo,Rf;function dx(){if(Rf)return qo;Rf=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,o="\\ufe0e\\ufe0f",a="\\u200d",s=RegExp("["+a+e+i+o+"]");function c(u){return s.test(u)}return qo=c,qo}var Ro,If;function lx(){if(If)return Ro;If=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",i=t+r+n,o="\\ufe0e\\ufe0f",a="["+e+"]",s="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+s+"|"+c+")",d="[^"+e+"]",l="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",h="\\u200d",y=u+"?",v="["+o+"]?",g="(?:"+h+"(?:"+[d,l,f].join("|")+")"+v+y+")*",m=v+y+g,b="(?:"+[d+s+"?",s,l,f,a].join("|")+")",p=RegExp(c+"(?="+c+")|"+b+m,"g");function _(x){for(var w=p.lastIndex=0;p.test(x);)++w;return w}return Ro=_,Ro}var Io,Nf;function fx(){if(Nf)return Io;Nf=1;var e=cx(),t=dx(),r=lx();function n(i){return t(i)?r(i):e(i)}return Io=n,Io}var No,Mf;function hx(){if(Mf)return No;Mf=1;var e=cu(),t=ot(),r=Ne(),n=ux(),i=fx(),o="[object Map]",a="[object Set]";function s(c){if(c==null)return 0;if(r(c))return n(c)?i(c):c.length;var u=t(c);return u==o||u==a?c.size:e(c).length}return No=s,No}var Mo,Af;function px(){if(Af)return Mo;Af=1;var e=au(),t=yv(),r=gu(),n=Me(),i=ir(),o=ce(),a=it(),s=wt(),c=pe(),u=St();function d(l,f,h){var y=o(l),v=y||a(l)||u(l);if(f=n(f,4),h==null){var g=l&&l.constructor;v?h=y?new g:[]:c(l)?h=s(g)?t(i(l)):{}:h={}}return(v?e:r)(l,function(m,b,p){return f(h,m,b,p)}),h}return Mo=d,Mo}var Ao,Tf;function gx(){if(Tf)return Ao;Tf=1;var e=nt(),t=Et(),r=ce(),n=e?e.isConcatSpreadable:void 0;function i(o){return r(o)||t(o)||!!(n&&o&&o[n])}return Ao=i,Ao}var To,Pf;function mu(){if(Pf)return To;Pf=1;var e=lu(),t=gx();function r(n,i,o,a,s){var c=-1,u=n.length;for(o||(o=t),s||(s=[]);++c<u;){var d=n[c];i>0&&o(d)?i>1?r(d,i-1,o,a,s):e(s,d):a||(s[s.length]=d)}return s}return To=r,To}var Po,Of;function vx(){if(Of)return Po;Of=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return Po=e,Po}var Oo,kf;function Fv(){if(kf)return Oo;kf=1;var e=vx(),t=Math.max;function r(n,i,o){return i=t(i===void 0?n.length-1:i,0),function(){for(var a=arguments,s=-1,c=t(a.length-i,0),u=Array(c);++s<c;)u[s]=a[i+s];s=-1;for(var d=Array(i+1);++s<i;)d[s]=a[s];return d[i]=o(u),e(n,this,d)}}return Oo=r,Oo}var ko,Lf;function yx(){if(Lf)return ko;Lf=1;var e=hu(),t=iv(),r=We(),n=t?function(i,o){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(o),writable:!0})}:r;return ko=n,ko}var Lo,Df;function mx(){if(Df)return Lo;Df=1;var e=800,t=16,r=Date.now;function n(i){var o=0,a=0;return function(){var s=r(),c=t-(s-a);if(a=s,c>0){if(++o>=e)return arguments[0]}else o=0;return i.apply(void 0,arguments)}}return Lo=n,Lo}var Do,jf;function Bv(){if(jf)return Do;jf=1;var e=yx(),t=mx(),r=t(e);return Do=r,Do}var jo,Ff;function cr(){if(Ff)return jo;Ff=1;var e=We(),t=Fv(),r=Bv();function n(i,o){return r(t(i,o,e),i+"")}return jo=n,jo}var Fo,Bf;function Hv(){if(Bf)return Fo;Bf=1;function e(t,r,n,i){for(var o=t.length,a=n+(i?1:-1);i?a--:++a<o;)if(r(t[a],a,t))return a;return-1}return Fo=e,Fo}var Bo,Hf;function bx(){if(Hf)return Bo;Hf=1;function e(t){return t!==t}return Bo=e,Bo}var Ho,zf;function _x(){if(zf)return Ho;zf=1;function e(t,r,n){for(var i=n-1,o=t.length;++i<o;)if(t[i]===r)return i;return-1}return Ho=e,Ho}var zo,$f;function wx(){if($f)return zo;$f=1;var e=Hv(),t=bx(),r=_x();function n(i,o,a){return o===o?r(i,o,a):e(i,t,a)}return zo=n,zo}var $o,Vf;function xx(){if(Vf)return $o;Vf=1;var e=wx();function t(r,n){var i=r==null?0:r.length;return!!i&&e(r,n,0)>-1}return $o=t,$o}var Vo,Gf;function Ex(){if(Gf)return Vo;Gf=1;function e(t,r,n){for(var i=-1,o=t==null?0:t.length;++i<o;)if(n(r,t[i]))return!0;return!1}return Vo=e,Vo}var Go,Uf;function Sx(){if(Uf)return Go;Uf=1;function e(){}return Go=e,Go}var Uo,Wf;function Cx(){if(Wf)return Uo;Wf=1;var e=pv(),t=Sx(),r=vu(),n=1/0,i=e&&1/r(new e([,-0]))[1]==n?function(o){return new e(o)}:t;return Uo=i,Uo}var Wo,Yf;function qx(){if(Yf)return Wo;Yf=1;var e=Ev(),t=xx(),r=Ex(),n=Sv(),i=Cx(),o=vu(),a=200;function s(c,u,d){var l=-1,f=t,h=c.length,y=!0,v=[],g=v;if(d)y=!1,f=r;else if(h>=a){var m=u?null:i(c);if(m)return o(m);y=!1,f=n,g=new e}else g=u?[]:v;e:for(;++l<h;){var b=c[l],p=u?u(b):b;if(b=d||b!==0?b:0,y&&p===p){for(var _=g.length;_--;)if(g[_]===p)continue e;u&&g.push(p),v.push(b)}else f(g,p,d)||(g!==v&&g.push(p),v.push(b))}return v}return Wo=s,Wo}var Yo,Kf;function zv(){if(Kf)return Yo;Kf=1;var e=Ne(),t=Ee();function r(n){return t(n)&&e(n)}return Yo=r,Yo}var Ko,Zf;function Rx(){if(Zf)return Ko;Zf=1;var e=mu(),t=cr(),r=qx(),n=zv(),i=t(function(o){return r(e(o,1,n,!0))});return Ko=i,Ko}var Zo,Xf;function Ix(){if(Xf)return Zo;Xf=1;var e=ar();function t(r,n){return e(n,function(i){return r[i]})}return Zo=t,Zo}var Xo,Qf;function $v(){if(Qf)return Xo;Qf=1;var e=Ix(),t=je();function r(n){return n==null?[]:e(n,t(n))}return Xo=r,Xo}var Qo,Jf;function ge(){if(Jf)return Qo;Jf=1;var e;if(typeof nu=="function")try{e={clone:kw(),constant:hu(),each:xv(),filter:Pv(),has:Ov(),isArray:ce(),isEmpty:ox(),isFunction:wt(),isUndefined:kv(),keys:je(),map:Dv(),reduce:jv(),size:hx(),transform:px(),union:Rx(),values:$v()}}catch{}return e||(e=window._),Qo=e,Qo}var Jo,eh;function bu(){if(eh)return Jo;eh=1;var e=ge();Jo=i;var t="\0",r="\0",n="";function i(d){this._isDirected=e.has(d,"directed")?d.directed:!0,this._isMultigraph=e.has(d,"multigraph")?d.multigraph:!1,this._isCompound=e.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(d){return this._label=d,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultNodeLabelFn=d,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var d=this;return e.filter(this.nodes(),function(l){return e.isEmpty(d._in[l])})},i.prototype.sinks=function(){var d=this;return e.filter(this.nodes(),function(l){return e.isEmpty(d._out[l])})},i.prototype.setNodes=function(d,l){var f=arguments,h=this;return e.each(d,function(y){f.length>1?h.setNode(y,l):h.setNode(y)}),this},i.prototype.setNode=function(d,l){return e.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=l),this):(this._nodes[d]=arguments.length>1?l:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},i.prototype.node=function(d){return this._nodes[d]},i.prototype.hasNode=function(d){return e.has(this._nodes,d)},i.prototype.removeNode=function(d){var l=this;if(e.has(this._nodes,d)){var f=function(h){l.removeEdge(l._edgeObjs[h])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],e.each(this.children(d),function(h){l.setParent(h)}),delete this._children[d]),e.each(e.keys(this._in[d]),f),delete this._in[d],delete this._preds[d],e.each(e.keys(this._out[d]),f),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},i.prototype.setParent=function(d,l){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(l))l=r;else{l+="";for(var f=l;!e.isUndefined(f);f=this.parent(f))if(f===d)throw new Error("Setting "+l+" as parent of "+d+" would create a cycle");this.setNode(l)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=l,this._children[l][d]=!0,this},i.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},i.prototype.parent=function(d){if(this._isCompound){var l=this._parent[d];if(l!==r)return l}},i.prototype.children=function(d){if(e.isUndefined(d)&&(d=r),this._isCompound){var l=this._children[d];if(l)return e.keys(l)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}},i.prototype.predecessors=function(d){var l=this._preds[d];if(l)return e.keys(l)},i.prototype.successors=function(d){var l=this._sucs[d];if(l)return e.keys(l)},i.prototype.neighbors=function(d){var l=this.predecessors(d);if(l)return e.union(l,this.successors(d))},i.prototype.isLeaf=function(d){var l;return this.isDirected()?l=this.successors(d):l=this.neighbors(d),l.length===0},i.prototype.filterNodes=function(d){var l=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});l.setGraph(this.graph());var f=this;e.each(this._nodes,function(v,g){d(g)&&l.setNode(g,v)}),e.each(this._edgeObjs,function(v){l.hasNode(v.v)&&l.hasNode(v.w)&&l.setEdge(v,f.edge(v))});var h={};function y(v){var g=f.parent(v);return g===void 0||l.hasNode(g)?(h[v]=g,g):g in h?h[g]:y(g)}return this._isCompound&&e.each(l.nodes(),function(v){l.setParent(v,y(v))}),l},i.prototype.setDefaultEdgeLabel=function(d){return e.isFunction(d)||(d=e.constant(d)),this._defaultEdgeLabelFn=d,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(d,l){var f=this,h=arguments;return e.reduce(d,function(y,v){return h.length>1?f.setEdge(y,v,l):f.setEdge(y,v),v}),this},i.prototype.setEdge=function(){var d,l,f,h,y=!1,v=arguments[0];typeof v=="object"&&v!==null&&"v"in v?(d=v.v,l=v.w,f=v.name,arguments.length===2&&(h=arguments[1],y=!0)):(d=v,l=arguments[1],f=arguments[3],arguments.length>2&&(h=arguments[2],y=!0)),d=""+d,l=""+l,e.isUndefined(f)||(f=""+f);var g=s(this._isDirected,d,l,f);if(e.has(this._edgeLabels,g))return y&&(this._edgeLabels[g]=h),this;if(!e.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(l),this._edgeLabels[g]=y?h:this._defaultEdgeLabelFn(d,l,f);var m=c(this._isDirected,d,l,f);return d=m.v,l=m.w,Object.freeze(m),this._edgeObjs[g]=m,o(this._preds[l],d),o(this._sucs[d],l),this._in[l][g]=m,this._out[d][g]=m,this._edgeCount++,this},i.prototype.edge=function(d,l,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,d,l,f);return this._edgeLabels[h]},i.prototype.hasEdge=function(d,l,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,d,l,f);return e.has(this._edgeLabels,h)},i.prototype.removeEdge=function(d,l,f){var h=arguments.length===1?u(this._isDirected,arguments[0]):s(this._isDirected,d,l,f),y=this._edgeObjs[h];return y&&(d=y.v,l=y.w,delete this._edgeLabels[h],delete this._edgeObjs[h],a(this._preds[l],d),a(this._sucs[d],l),delete this._in[l][h],delete this._out[d][h],this._edgeCount--),this},i.prototype.inEdges=function(d,l){var f=this._in[d];if(f){var h=e.values(f);return l?e.filter(h,function(y){return y.v===l}):h}},i.prototype.outEdges=function(d,l){var f=this._out[d];if(f){var h=e.values(f);return l?e.filter(h,function(y){return y.w===l}):h}},i.prototype.nodeEdges=function(d,l){var f=this.inEdges(d,l);if(f)return f.concat(this.outEdges(d,l))};function o(d,l){d[l]?d[l]++:d[l]=1}function a(d,l){--d[l]||delete d[l]}function s(d,l,f,h){var y=""+l,v=""+f;if(!d&&y>v){var g=y;y=v,v=g}return y+n+v+n+(e.isUndefined(h)?t:h)}function c(d,l,f,h){var y=""+l,v=""+f;if(!d&&y>v){var g=y;y=v,v=g}var m={v:y,w:v};return h&&(m.name=h),m}function u(d,l){return s(d,l.v,l.w,l.name)}return Jo}var ea,th;function Nx(){return th||(th=1,ea="2.1.8"),ea}var ta,rh;function Mx(){return rh||(rh=1,ta={Graph:bu(),version:Nx()}),ta}var ra,nh;function Ax(){if(nh)return ra;nh=1;var e=ge(),t=bu();ra={write:r,read:o};function r(a){var s={options:{directed:a.isDirected(),multigraph:a.isMultigraph(),compound:a.isCompound()},nodes:n(a),edges:i(a)};return e.isUndefined(a.graph())||(s.value=e.clone(a.graph())),s}function n(a){return e.map(a.nodes(),function(s){var c=a.node(s),u=a.parent(s),d={v:s};return e.isUndefined(c)||(d.value=c),e.isUndefined(u)||(d.parent=u),d})}function i(a){return e.map(a.edges(),function(s){var c=a.edge(s),u={v:s.v,w:s.w};return e.isUndefined(s.name)||(u.name=s.name),e.isUndefined(c)||(u.value=c),u})}function o(a){var s=new t(a.options).setGraph(a.value);return e.each(a.nodes,function(c){s.setNode(c.v,c.value),c.parent&&s.setParent(c.v,c.parent)}),e.each(a.edges,function(c){s.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),s}return ra}var na,ih;function Tx(){if(ih)return na;ih=1;var e=ge();na=t;function t(r){var n={},i=[],o;function a(s){e.has(n,s)||(n[s]=!0,o.push(s),e.each(r.successors(s),a),e.each(r.predecessors(s),a))}return e.each(r.nodes(),function(s){o=[],a(s),o.length&&i.push(o)}),i}return na}var ia,oh;function Vv(){if(oh)return ia;oh=1;var e=ge();ia=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(r){return r.key})},t.prototype.has=function(r){return e.has(this._keyIndices,r)},t.prototype.priority=function(r){var n=this._keyIndices[r];if(n!==void 0)return this._arr[n].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(r,n){var i=this._keyIndices;if(r=String(r),!e.has(i,r)){var o=this._arr,a=o.length;return i[r]=a,o.push({key:r,priority:n}),this._decrease(a),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},t.prototype.decrease=function(r,n){var i=this._keyIndices[r];if(n>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[i].priority+" New: "+n);this._arr[i].priority=n,this._decrease(i)},t.prototype._heapify=function(r){var n=this._arr,i=2*r,o=i+1,a=r;i<n.length&&(a=n[i].priority<n[a].priority?i:a,o<n.length&&(a=n[o].priority<n[a].priority?o:a),a!==r&&(this._swap(r,a),this._heapify(a)))},t.prototype._decrease=function(r){for(var n=this._arr,i=n[r].priority,o;r!==0&&(o=r>>1,!(n[o].priority<i));)this._swap(r,o),r=o},t.prototype._swap=function(r,n){var i=this._arr,o=this._keyIndices,a=i[r],s=i[n];i[r]=s,i[n]=a,o[s.key]=r,o[a.key]=n},ia}var oa,ah;function Gv(){if(ah)return oa;ah=1;var e=ge(),t=Vv();oa=n;var r=e.constant(1);function n(o,a,s,c){return i(o,String(a),s||r,c||function(u){return o.outEdges(u)})}function i(o,a,s,c){var u={},d=new t,l,f,h=function(y){var v=y.v!==l?y.v:y.w,g=u[v],m=s(y),b=f.distance+m;if(m<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+y+" Weight: "+m);b<g.distance&&(g.distance=b,g.predecessor=l,d.decrease(v,b))};for(o.nodes().forEach(function(y){var v=y===a?0:Number.POSITIVE_INFINITY;u[y]={distance:v},d.add(y,v)});d.size()>0&&(l=d.removeMin(),f=u[l],f.distance!==Number.POSITIVE_INFINITY);)c(l).forEach(h);return u}return oa}var aa,sh;function Px(){if(sh)return aa;sh=1;var e=Gv(),t=ge();aa=r;function r(n,i,o){return t.transform(n.nodes(),function(a,s){a[s]=e(n,s,i,o)},{})}return aa}var sa,uh;function Uv(){if(uh)return sa;uh=1;var e=ge();sa=t;function t(r){var n=0,i=[],o={},a=[];function s(c){var u=o[c]={onStack:!0,lowlink:n,index:n++};if(i.push(c),r.successors(c).forEach(function(f){e.has(o,f)?o[f].onStack&&(u.lowlink=Math.min(u.lowlink,o[f].index)):(s(f),u.lowlink=Math.min(u.lowlink,o[f].lowlink))}),u.lowlink===u.index){var d=[],l;do l=i.pop(),o[l].onStack=!1,d.push(l);while(c!==l);a.push(d)}}return r.nodes().forEach(function(c){e.has(o,c)||s(c)}),a}return sa}var ua,ch;function Ox(){if(ch)return ua;ch=1;var e=ge(),t=Uv();ua=r;function r(n){return e.filter(t(n),function(i){return i.length>1||i.length===1&&n.hasEdge(i[0],i[0])})}return ua}var ca,dh;function kx(){if(dh)return ca;dh=1;var e=ge();ca=r;var t=e.constant(1);function r(i,o,a){return n(i,o||t,a||function(s){return i.outEdges(s)})}function n(i,o,a){var s={},c=i.nodes();return c.forEach(function(u){s[u]={},s[u][u]={distance:0},c.forEach(function(d){u!==d&&(s[u][d]={distance:Number.POSITIVE_INFINITY})}),a(u).forEach(function(d){var l=d.v===u?d.w:d.v,f=o(d);s[u][l]={distance:f,predecessor:u}})}),c.forEach(function(u){var d=s[u];c.forEach(function(l){var f=s[l];c.forEach(function(h){var y=f[u],v=d[h],g=f[h],m=y.distance+v.distance;m<g.distance&&(g.distance=m,g.predecessor=v.predecessor)})})}),s}return ca}var da,lh;function Wv(){if(lh)return da;lh=1;var e=ge();da=t,t.CycleException=r;function t(n){var i={},o={},a=[];function s(c){if(e.has(o,c))throw new r;e.has(i,c)||(o[c]=!0,i[c]=!0,e.each(n.predecessors(c),s),delete o[c],a.push(c))}if(e.each(n.sinks(),s),e.size(i)!==n.nodeCount())throw new r;return a}function r(){}return r.prototype=new Error,da}var la,fh;function Lx(){if(fh)return la;fh=1;var e=Wv();la=t;function t(r){try{e(r)}catch(n){if(n instanceof e.CycleException)return!1;throw n}return!0}return la}var fa,hh;function Yv(){if(hh)return fa;hh=1;var e=ge();fa=t;function t(n,i,o){e.isArray(i)||(i=[i]);var a=(n.isDirected()?n.successors:n.neighbors).bind(n),s=[],c={};return e.each(i,function(u){if(!n.hasNode(u))throw new Error("Graph does not have node: "+u);r(n,u,o==="post",c,a,s)}),s}function r(n,i,o,a,s,c){e.has(a,i)||(a[i]=!0,o||c.push(i),e.each(s(i),function(u){r(n,u,o,a,s,c)}),o&&c.push(i))}return fa}var ha,ph;function Dx(){if(ph)return ha;ph=1;var e=Yv();ha=t;function t(r,n){return e(r,n,"post")}return ha}var pa,gh;function jx(){if(gh)return pa;gh=1;var e=Yv();pa=t;function t(r,n){return e(r,n,"pre")}return pa}var ga,vh;function Fx(){if(vh)return ga;vh=1;var e=ge(),t=bu(),r=Vv();ga=n;function n(i,o){var a=new t,s={},c=new r,u;function d(f){var h=f.v===u?f.w:f.v,y=c.priority(h);if(y!==void 0){var v=o(f);v<y&&(s[h]=u,c.decrease(h,v))}}if(i.nodeCount()===0)return a;e.each(i.nodes(),function(f){c.add(f,Number.POSITIVE_INFINITY),a.setNode(f)}),c.decrease(i.nodes()[0],0);for(var l=!1;c.size()>0;){if(u=c.removeMin(),e.has(s,u))a.setEdge(u,s[u]);else{if(l)throw new Error("Input graph is not connected: "+i);l=!0}i.nodeEdges(u).forEach(d)}return a}return ga}var va,yh;function Bx(){return yh||(yh=1,va={components:Tx(),dijkstra:Gv(),dijkstraAll:Px(),findCycles:Ox(),floydWarshall:kx(),isAcyclic:Lx(),postorder:Dx(),preorder:jx(),prim:Fx(),tarjan:Uv(),topsort:Wv()}),va}var ya,mh;function Hx(){if(mh)return ya;mh=1;var e=Mx();return ya={Graph:e.Graph,json:Ax(),alg:Bx(),version:e.version},ya}var ma,bh;function me(){if(bh)return ma;bh=1;var e;if(typeof nu=="function")try{e=Hx()}catch{}return e||(e=window.graphlib),ma=e,ma}var ba,_h;function zx(){if(_h)return ba;_h=1;var e=bv(),t=1,r=4;function n(i){return e(i,t|r)}return ba=n,ba}var _a,wh;function dr(){if(wh)return _a;wh=1;var e=rt(),t=Ne(),r=tr(),n=pe();function i(o,a,s){if(!n(s))return!1;var c=typeof a;return(c=="number"?t(s)&&r(a,s.length):c=="string"&&a in s)?e(s[a],o):!1}return _a=i,_a}var wa,xh;function $x(){if(xh)return wa;xh=1;var e=cr(),t=rt(),r=dr(),n=Ue(),i=Object.prototype,o=i.hasOwnProperty,a=e(function(s,c){s=Object(s);var u=-1,d=c.length,l=d>2?c[2]:void 0;for(l&&r(c[0],c[1],l)&&(d=1);++u<d;)for(var f=c[u],h=n(f),y=-1,v=h.length;++y<v;){var g=h[y],m=s[g];(m===void 0||t(m,i[g])&&!o.call(s,g))&&(s[g]=f[g])}return s});return wa=a,wa}var xa,Eh;function Vx(){if(Eh)return xa;Eh=1;var e=Me(),t=Ne(),r=je();function n(i){return function(o,a,s){var c=Object(o);if(!t(o)){var u=e(a,3);o=r(o),a=function(l){return u(c[l],l,c)}}var d=i(o,a,s);return d>-1?c[u?o[d]:d]:void 0}}return xa=n,xa}var Ea,Sh;function Gx(){if(Sh)return Ea;Sh=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Ea=t,Ea}var Sa,Ch;function Ux(){if(Ch)return Sa;Ch=1;var e=Gx(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Sa=r,Sa}var Ca,qh;function Wx(){if(qh)return Ca;qh=1;var e=Ux(),t=pe(),r=at(),n=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,a=/^0o[0-7]+$/i,s=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=t(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var l=o.test(u);return l||a.test(u)?s(u.slice(2),l?2:8):i.test(u)?n:+u}return Ca=c,Ca}var qa,Rh;function Kv(){if(Rh)return qa;Rh=1;var e=Wx(),t=1/0,r=17976931348623157e292;function n(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var o=i<0?-1:1;return o*r}return i===i?i:0}return qa=n,qa}var Ra,Ih;function Yx(){if(Ih)return Ra;Ih=1;var e=Kv();function t(r){var n=e(r),i=n%1;return n===n?i?n-i:n:0}return Ra=t,Ra}var Ia,Nh;function Kx(){if(Nh)return Ia;Nh=1;var e=Hv(),t=Me(),r=Yx(),n=Math.max;function i(o,a,s){var c=o==null?0:o.length;if(!c)return-1;var u=s==null?0:r(s);return u<0&&(u=n(c+u,0)),e(o,t(a,3),u)}return Ia=i,Ia}var Na,Mh;function Zx(){if(Mh)return Na;Mh=1;var e=Vx(),t=Kx(),r=e(t);return Na=r,Na}var Ma,Ah;function Zv(){if(Ah)return Ma;Ah=1;var e=mu();function t(r){var n=r==null?0:r.length;return n?e(r,1):[]}return Ma=t,Ma}var Aa,Th;function Xx(){if(Th)return Aa;Th=1;var e=pu(),t=_v(),r=Ue();function n(i,o){return i==null?i:e(i,t(o),r)}return Aa=n,Aa}var Ta,Ph;function Qx(){if(Ph)return Ta;Ph=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return Ta=e,Ta}var Pa,Oh;function Jx(){if(Oh)return Pa;Oh=1;var e=Jt(),t=gu(),r=Me();function n(i,o){var a={};return o=r(o,3),t(i,function(s,c,u){e(a,c,o(s,c,u))}),a}return Pa=n,Pa}var Oa,kh;function _u(){if(kh)return Oa;kh=1;var e=at();function t(r,n,i){for(var o=-1,a=r.length;++o<a;){var s=r[o],c=n(s);if(c!=null&&(u===void 0?c===c&&!e(c):i(c,u)))var u=c,d=s}return d}return Oa=t,Oa}var ka,Lh;function e1(){if(Lh)return ka;Lh=1;function e(t,r){return t>r}return ka=e,ka}var La,Dh;function t1(){if(Dh)return La;Dh=1;var e=_u(),t=e1(),r=We();function n(i){return i&&i.length?e(i,r,t):void 0}return La=n,La}var Da,jh;function Xv(){if(jh)return Da;jh=1;var e=Jt(),t=rt();function r(n,i,o){(o!==void 0&&!t(n[i],o)||o===void 0&&!(i in n))&&e(n,i,o)}return Da=r,Da}var ja,Fh;function r1(){if(Fh)return ja;Fh=1;var e=Ve(),t=ir(),r=Ee(),n="[object Object]",i=Function.prototype,o=Object.prototype,a=i.toString,s=o.hasOwnProperty,c=a.call(Object);function u(d){if(!r(d)||e(d)!=n)return!1;var l=t(d);if(l===null)return!0;var f=s.call(l,"constructor")&&l.constructor;return typeof f=="function"&&f instanceof f&&a.call(f)==c}return ja=u,ja}var Fa,Bh;function Qv(){if(Bh)return Fa;Bh=1;function e(t,r){if(!(r==="constructor"&&typeof t[r]=="function")&&r!="__proto__")return t[r]}return Fa=e,Fa}var Ba,Hh;function n1(){if(Hh)return Ba;Hh=1;var e=xt(),t=Ue();function r(n){return e(n,t(n))}return Ba=r,Ba}var Ha,zh;function i1(){if(zh)return Ha;zh=1;var e=Xv(),t=sv(),r=vv(),n=uv(),i=mv(),o=Et(),a=ce(),s=zv(),c=it(),u=wt(),d=pe(),l=r1(),f=St(),h=Qv(),y=n1();function v(g,m,b,p,_,x,w){var E=h(g,b),q=h(m,b),C=w.get(q);if(C){e(g,b,C);return}var N=x?x(E,q,b+"",g,m,w):void 0,S=N===void 0;if(S){var R=a(q),M=!R&&c(q),L=!R&&!M&&f(q);N=q,R||M||L?a(E)?N=E:s(E)?N=n(E):M?(S=!1,N=t(q,!0)):L?(S=!1,N=r(q,!0)):N=[]:l(q)||o(q)?(N=E,o(E)?N=y(E):(!d(E)||u(E))&&(N=i(q))):S=!1}S&&(w.set(q,N),_(N,q,p,x,w),w.delete(q)),e(g,b,N)}return Ha=v,Ha}var za,$h;function o1(){if($h)return za;$h=1;var e=Qt(),t=Xv(),r=pu(),n=i1(),i=pe(),o=Ue(),a=Qv();function s(c,u,d,l,f){c!==u&&r(u,function(h,y){if(f||(f=new e),i(h))n(c,u,y,d,s,l,f);else{var v=l?l(a(c,y),h,y+"",c,u,f):void 0;v===void 0&&(v=h),t(c,y,v)}},o)}return za=s,za}var $a,Vh;function a1(){if(Vh)return $a;Vh=1;var e=cr(),t=dr();function r(n){return e(function(i,o){var a=-1,s=o.length,c=s>1?o[s-1]:void 0,u=s>2?o[2]:void 0;for(c=n.length>3&&typeof c=="function"?(s--,c):void 0,u&&t(o[0],o[1],u)&&(c=s<3?void 0:c,s=1),i=Object(i);++a<s;){var d=o[a];d&&n(i,d,a,c)}return i})}return $a=r,$a}var Va,Gh;function s1(){if(Gh)return Va;Gh=1;var e=o1(),t=a1(),r=t(function(n,i,o){e(n,i,o)});return Va=r,Va}var Ga,Uh;function Jv(){if(Uh)return Ga;Uh=1;function e(t,r){return t<r}return Ga=e,Ga}var Ua,Wh;function u1(){if(Wh)return Ua;Wh=1;var e=_u(),t=Jv(),r=We();function n(i){return i&&i.length?e(i,r,t):void 0}return Ua=n,Ua}var Wa,Yh;function c1(){if(Yh)return Wa;Yh=1;var e=_u(),t=Me(),r=Jv();function n(i,o){return i&&i.length?e(i,t(o,2),r):void 0}return Wa=n,Wa}var Ya,Kh;function d1(){if(Kh)return Ya;Kh=1;var e=be(),t=function(){return e.Date.now()};return Ya=t,Ya}var Ka,Zh;function l1(){if(Zh)return Ka;Zh=1;var e=er(),t=sr(),r=tr(),n=pe(),i=Ct();function o(a,s,c,u){if(!n(a))return a;s=t(s,a);for(var d=-1,l=s.length,f=l-1,h=a;h!=null&&++d<l;){var y=i(s[d]),v=c;if(y==="__proto__"||y==="constructor"||y==="prototype")return a;if(d!=f){var g=h[y];v=u?u(g,y,h):void 0,v===void 0&&(v=n(g)?g:r(s[d+1])?[]:{})}e(h,y,v),h=h[y]}return a}return Ka=o,Ka}var Za,Xh;function f1(){if(Xh)return Za;Xh=1;var e=ur(),t=l1(),r=sr();function n(i,o,a){for(var s=-1,c=o.length,u={};++s<c;){var d=o[s],l=e(i,d);a(l,d)&&t(u,r(d,i),l)}return u}return Za=n,Za}var Xa,Qh;function h1(){if(Qh)return Xa;Qh=1;var e=f1(),t=Av();function r(n,i){return e(n,i,function(o,a){return t(n,a)})}return Xa=r,Xa}var Qa,Jh;function p1(){if(Jh)return Qa;Jh=1;var e=Zv(),t=Fv(),r=Bv();function n(i){return r(t(i,void 0,e),i+"")}return Qa=n,Qa}var Ja,ep;function g1(){if(ep)return Ja;ep=1;var e=h1(),t=p1(),r=t(function(n,i){return n==null?{}:e(n,i)});return Ja=r,Ja}var es,tp;function v1(){if(tp)return es;tp=1;var e=Math.ceil,t=Math.max;function r(n,i,o,a){for(var s=-1,c=t(e((i-n)/(o||1)),0),u=Array(c);c--;)u[a?c:++s]=n,n+=o;return u}return es=r,es}var ts,rp;function y1(){if(rp)return ts;rp=1;var e=v1(),t=dr(),r=Kv();function n(i){return function(o,a,s){return s&&typeof s!="number"&&t(o,a,s)&&(a=s=void 0),o=r(o),a===void 0?(a=o,o=0):a=r(a),s=s===void 0?o<a?1:-1:r(s),e(o,a,s,i)}}return ts=n,ts}var rs,np;function m1(){if(np)return rs;np=1;var e=y1(),t=e();return rs=t,rs}var ns,ip;function b1(){if(ip)return ns;ip=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return ns=e,ns}var is,op;function _1(){if(op)return is;op=1;var e=at();function t(r,n){if(r!==n){var i=r!==void 0,o=r===null,a=r===r,s=e(r),c=n!==void 0,u=n===null,d=n===n,l=e(n);if(!u&&!l&&!s&&r>n||s&&c&&d&&!u&&!l||o&&c&&d||!i&&d||!a)return 1;if(!o&&!s&&!l&&r<n||l&&i&&a&&!o&&!s||u&&i&&a||!c&&a||!d)return-1}return 0}return is=t,is}var os,ap;function w1(){if(ap)return os;ap=1;var e=_1();function t(r,n,i){for(var o=-1,a=r.criteria,s=n.criteria,c=a.length,u=i.length;++o<c;){var d=e(a[o],s[o]);if(d){if(o>=u)return d;var l=i[o];return d*(l=="desc"?-1:1)}}return r.index-n.index}return os=t,os}var as,sp;function x1(){if(sp)return as;sp=1;var e=ar(),t=ur(),r=Me(),n=Lv(),i=b1(),o=rr(),a=w1(),s=We(),c=ce();function u(d,l,f){l.length?l=e(l,function(v){return c(v)?function(g){return t(g,v.length===1?v[0]:v)}:v}):l=[s];var h=-1;l=e(l,o(r));var y=n(d,function(v,g,m){var b=e(l,function(p){return p(v)});return{criteria:b,index:++h,value:v}});return i(y,function(v,g){return a(v,g,f)})}return as=u,as}var ss,up;function E1(){if(up)return ss;up=1;var e=mu(),t=x1(),r=cr(),n=dr(),i=r(function(o,a){if(o==null)return[];var s=a.length;return s>1&&n(o,a[0],a[1])?a=[]:s>2&&n(a[0],a[1],a[2])&&(a=[a[0]]),t(o,e(a,1),[])});return ss=i,ss}var us,cp;function S1(){if(cp)return us;cp=1;var e=Nv(),t=0;function r(n){var i=++t;return e(n)+i}return us=r,us}var cs,dp;function C1(){if(dp)return cs;dp=1;function e(t,r,n){for(var i=-1,o=t.length,a=r.length,s={};++i<o;){var c=i<a?r[i]:void 0;n(s,t[i],c)}return s}return cs=e,cs}var ds,lp;function q1(){if(lp)return ds;lp=1;var e=er(),t=C1();function r(n,i){return t(n||[],i||[],e)}return ds=r,ds}var ls,fp;function ae(){if(fp)return ls;fp=1;var e;if(typeof nu=="function")try{e={cloneDeep:zx(),constant:hu(),defaults:$x(),each:xv(),filter:Pv(),find:Zx(),flatten:Zv(),forEach:wv(),forIn:Xx(),has:Ov(),isUndefined:kv(),last:Qx(),map:Dv(),mapValues:Jx(),max:t1(),merge:s1(),min:u1(),minBy:c1(),now:d1(),pick:g1(),range:m1(),reduce:jv(),sortBy:E1(),uniqueId:S1(),values:$v(),zipObject:q1()}}catch{}return e||(e=window._),ls=e,ls}var fs,hp;function R1(){if(hp)return fs;hp=1,fs=e;function e(){var n={};n._next=n._prev=n,this._sentinel=n}e.prototype.dequeue=function(){var n=this._sentinel,i=n._prev;if(i!==n)return t(i),i},e.prototype.enqueue=function(n){var i=this._sentinel;n._prev&&n._next&&t(n),n._next=i._next,i._next._prev=n,i._next=n,n._prev=i},e.prototype.toString=function(){for(var n=[],i=this._sentinel,o=i._prev;o!==i;)n.push(JSON.stringify(o,r)),o=o._prev;return"["+n.join(", ")+"]"};function t(n){n._prev._next=n._next,n._next._prev=n._prev,delete n._next,delete n._prev}function r(n,i){if(n!=="_next"&&n!=="_prev")return i}return fs}var hs,pp;function I1(){if(pp)return hs;pp=1;var e=ae(),t=me().Graph,r=R1();hs=i;var n=e.constant(1);function i(u,d){if(u.nodeCount()<=1)return[];var l=s(u,d||n),f=o(l.graph,l.buckets,l.zeroIdx);return e.flatten(e.map(f,function(h){return u.outEdges(h.v,h.w)}),!0)}function o(u,d,l){for(var f=[],h=d[d.length-1],y=d[0],v;u.nodeCount();){for(;v=y.dequeue();)a(u,d,l,v);for(;v=h.dequeue();)a(u,d,l,v);if(u.nodeCount()){for(var g=d.length-2;g>0;--g)if(v=d[g].dequeue(),v){f=f.concat(a(u,d,l,v,!0));break}}}return f}function a(u,d,l,f,h){var y=h?[]:void 0;return e.forEach(u.inEdges(f.v),function(v){var g=u.edge(v),m=u.node(v.v);h&&y.push({v:v.v,w:v.w}),m.out-=g,c(d,l,m)}),e.forEach(u.outEdges(f.v),function(v){var g=u.edge(v),m=v.w,b=u.node(m);b.in-=g,c(d,l,b)}),u.removeNode(f.v),y}function s(u,d){var l=new t,f=0,h=0;e.forEach(u.nodes(),function(g){l.setNode(g,{v:g,in:0,out:0})}),e.forEach(u.edges(),function(g){var m=l.edge(g.v,g.w)||0,b=d(g),p=m+b;l.setEdge(g.v,g.w,p),h=Math.max(h,l.node(g.v).out+=b),f=Math.max(f,l.node(g.w).in+=b)});var y=e.range(h+f+3).map(function(){return new r}),v=f+1;return e.forEach(l.nodes(),function(g){c(y,v,l.node(g))}),{graph:l,buckets:y,zeroIdx:v}}function c(u,d,l){l.out?l.in?u[l.out-l.in+d].enqueue(l):u[u.length-1].enqueue(l):u[0].enqueue(l)}return hs}var ps,gp;function N1(){if(gp)return ps;gp=1;var e=ae(),t=I1();ps={run:r,undo:i};function r(o){var a=o.graph().acyclicer==="greedy"?t(o,s(o)):n(o);e.forEach(a,function(c){var u=o.edge(c);o.removeEdge(c),u.forwardName=c.name,u.reversed=!0,o.setEdge(c.w,c.v,u,e.uniqueId("rev"))});function s(c){return function(u){return c.edge(u).weight}}}function n(o){var a=[],s={},c={};function u(d){e.has(c,d)||(c[d]=!0,s[d]=!0,e.forEach(o.outEdges(d),function(l){e.has(s,l.w)?a.push(l):u(l.w)}),delete s[d])}return e.forEach(o.nodes(),u),a}function i(o){e.forEach(o.edges(),function(a){var s=o.edge(a);if(s.reversed){o.removeEdge(a);var c=s.forwardName;delete s.reversed,delete s.forwardName,o.setEdge(a.w,a.v,s,c)}})}return ps}var gs,vp;function he(){if(vp)return gs;vp=1;var e=ae(),t=me().Graph;gs={addDummyNode:r,simplify:n,asNonCompoundGraph:i,successorWeights:o,predecessorWeights:a,intersectRect:s,buildLayerMatrix:c,normalizeRanks:u,removeEmptyRanks:d,addBorderNode:l,maxRank:f,partition:h,time:y,notime:v};function r(g,m,b,p){var _;do _=e.uniqueId(p);while(g.hasNode(_));return b.dummy=m,g.setNode(_,b),_}function n(g){var m=new t().setGraph(g.graph());return e.forEach(g.nodes(),function(b){m.setNode(b,g.node(b))}),e.forEach(g.edges(),function(b){var p=m.edge(b.v,b.w)||{weight:0,minlen:1},_=g.edge(b);m.setEdge(b.v,b.w,{weight:p.weight+_.weight,minlen:Math.max(p.minlen,_.minlen)})}),m}function i(g){var m=new t({multigraph:g.isMultigraph()}).setGraph(g.graph());return e.forEach(g.nodes(),function(b){g.children(b).length||m.setNode(b,g.node(b))}),e.forEach(g.edges(),function(b){m.setEdge(b,g.edge(b))}),m}function o(g){var m=e.map(g.nodes(),function(b){var p={};return e.forEach(g.outEdges(b),function(_){p[_.w]=(p[_.w]||0)+g.edge(_).weight}),p});return e.zipObject(g.nodes(),m)}function a(g){var m=e.map(g.nodes(),function(b){var p={};return e.forEach(g.inEdges(b),function(_){p[_.v]=(p[_.v]||0)+g.edge(_).weight}),p});return e.zipObject(g.nodes(),m)}function s(g,m){var b=g.x,p=g.y,_=m.x-b,x=m.y-p,w=g.width/2,E=g.height/2;if(!_&&!x)throw new Error("Not possible to find intersection inside of the rectangle");var q,C;return Math.abs(x)*w>Math.abs(_)*E?(x<0&&(E=-E),q=E*_/x,C=E):(_<0&&(w=-w),q=w,C=w*x/_),{x:b+q,y:p+C}}function c(g){var m=e.map(e.range(f(g)+1),function(){return[]});return e.forEach(g.nodes(),function(b){var p=g.node(b),_=p.rank;e.isUndefined(_)||(m[_][p.order]=b)}),m}function u(g){var m=e.min(e.map(g.nodes(),function(b){return g.node(b).rank}));e.forEach(g.nodes(),function(b){var p=g.node(b);e.has(p,"rank")&&(p.rank-=m)})}function d(g){var m=e.min(e.map(g.nodes(),function(x){return g.node(x).rank})),b=[];e.forEach(g.nodes(),function(x){var w=g.node(x).rank-m;b[w]||(b[w]=[]),b[w].push(x)});var p=0,_=g.graph().nodeRankFactor;e.forEach(b,function(x,w){e.isUndefined(x)&&w%_!==0?--p:p&&e.forEach(x,function(E){g.node(E).rank+=p})})}function l(g,m,b,p){var _={width:0,height:0};return arguments.length>=4&&(_.rank=b,_.order=p),r(g,"border",_,m)}function f(g){return e.max(e.map(g.nodes(),function(m){var b=g.node(m).rank;if(!e.isUndefined(b))return b}))}function h(g,m){var b={lhs:[],rhs:[]};return e.forEach(g,function(p){m(p)?b.lhs.push(p):b.rhs.push(p)}),b}function y(g,m){var b=e.now();try{return m()}finally{console.log(g+" time: "+(e.now()-b)+"ms")}}function v(g,m){return m()}return gs}var vs,yp;function M1(){if(yp)return vs;yp=1;var e=ae(),t=he();vs={run:r,undo:i};function r(o){o.graph().dummyChains=[],e.forEach(o.edges(),function(a){n(o,a)})}function n(o,a){var s=a.v,c=o.node(s).rank,u=a.w,d=o.node(u).rank,l=a.name,f=o.edge(a),h=f.labelRank;if(d!==c+1){o.removeEdge(a);var y,v,g;for(g=0,++c;c<d;++g,++c)f.points=[],v={width:0,height:0,edgeLabel:f,edgeObj:a,rank:c},y=t.addDummyNode(o,"edge",v,"_d"),c===h&&(v.width=f.width,v.height=f.height,v.dummy="edge-label",v.labelpos=f.labelpos),o.setEdge(s,y,{weight:f.weight},l),g===0&&o.graph().dummyChains.push(y),s=y;o.setEdge(s,u,{weight:f.weight},l)}}function i(o){e.forEach(o.graph().dummyChains,function(a){var s=o.node(a),c=s.edgeLabel,u;for(o.setEdge(s.edgeObj,c);s.dummy;)u=o.successors(a)[0],o.removeNode(a),c.points.push({x:s.x,y:s.y}),s.dummy==="edge-label"&&(c.x=s.x,c.y=s.y,c.width=s.width,c.height=s.height),a=u,s=o.node(a)})}return vs}var ys,mp;function jt(){if(mp)return ys;mp=1;var e=ae();ys={longestPath:t,slack:r};function t(n){var i={};function o(a){var s=n.node(a);if(e.has(i,a))return s.rank;i[a]=!0;var c=e.min(e.map(n.outEdges(a),function(u){return o(u.w)-n.edge(u).minlen}));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),s.rank=c}e.forEach(n.sources(),o)}function r(n,i){return n.node(i.w).rank-n.node(i.v).rank-n.edge(i).minlen}return ys}var ms,bp;function ey(){if(bp)return ms;bp=1;var e=ae(),t=me().Graph,r=jt().slack;ms=n;function n(s){var c=new t({directed:!1}),u=s.nodes()[0],d=s.nodeCount();c.setNode(u,{});for(var l,f;i(c,s)<d;)l=o(c,s),f=c.hasNode(l.v)?r(s,l):-r(s,l),a(c,s,f);return c}function i(s,c){function u(d){e.forEach(c.nodeEdges(d),function(l){var f=l.v,h=d===f?l.w:f;!s.hasNode(h)&&!r(c,l)&&(s.setNode(h,{}),s.setEdge(d,h,{}),u(h))})}return e.forEach(s.nodes(),u),s.nodeCount()}function o(s,c){return e.minBy(c.edges(),function(u){if(s.hasNode(u.v)!==s.hasNode(u.w))return r(c,u)})}function a(s,c,u){e.forEach(s.nodes(),function(d){c.node(d).rank+=u})}return ms}var bs,_p;function A1(){if(_p)return bs;_p=1;var e=ae(),t=ey(),r=jt().slack,n=jt().longestPath,i=me().alg.preorder,o=me().alg.postorder,a=he().simplify;bs=s,s.initLowLimValues=l,s.initCutValues=c,s.calcCutValue=d,s.leaveEdge=h,s.enterEdge=y,s.exchangeEdges=v;function s(p){p=a(p),n(p);var _=t(p);l(_),c(_,p);for(var x,w;x=h(_);)w=y(_,p,x),v(_,p,x,w)}function c(p,_){var x=o(p,p.nodes());x=x.slice(0,x.length-1),e.forEach(x,function(w){u(p,_,w)})}function u(p,_,x){var w=p.node(x),E=w.parent;p.edge(x,E).cutvalue=d(p,_,x)}function d(p,_,x){var w=p.node(x),E=w.parent,q=!0,C=_.edge(x,E),N=0;return C||(q=!1,C=_.edge(E,x)),N=C.weight,e.forEach(_.nodeEdges(x),function(S){var R=S.v===x,M=R?S.w:S.v;if(M!==E){var L=R===q,P=_.edge(S).weight;if(N+=L?P:-P,m(p,x,M)){var H=p.edge(x,M).cutvalue;N+=L?-H:H}}}),N}function l(p,_){arguments.length<2&&(_=p.nodes()[0]),f(p,{},1,_)}function f(p,_,x,w,E){var q=x,C=p.node(w);return _[w]=!0,e.forEach(p.neighbors(w),function(N){e.has(_,N)||(x=f(p,_,x,N,w))}),C.low=q,C.lim=x++,E?C.parent=E:delete C.parent,x}function h(p){return e.find(p.edges(),function(_){return p.edge(_).cutvalue<0})}function y(p,_,x){var w=x.v,E=x.w;_.hasEdge(w,E)||(w=x.w,E=x.v);var q=p.node(w),C=p.node(E),N=q,S=!1;q.lim>C.lim&&(N=C,S=!0);var R=e.filter(_.edges(),function(M){return S===b(p,p.node(M.v),N)&&S!==b(p,p.node(M.w),N)});return e.minBy(R,function(M){return r(_,M)})}function v(p,_,x,w){var E=x.v,q=x.w;p.removeEdge(E,q),p.setEdge(w.v,w.w,{}),l(p),c(p,_),g(p,_)}function g(p,_){var x=e.find(p.nodes(),function(E){return!_.node(E).parent}),w=i(p,x);w=w.slice(1),e.forEach(w,function(E){var q=p.node(E).parent,C=_.edge(E,q),N=!1;C||(C=_.edge(q,E),N=!0),_.node(E).rank=_.node(q).rank+(N?C.minlen:-C.minlen)})}function m(p,_,x){return p.hasEdge(_,x)}function b(p,_,x){return x.low<=_.lim&&_.lim<=x.lim}return bs}var _s,wp;function T1(){if(wp)return _s;wp=1;var e=jt(),t=e.longestPath,r=ey(),n=A1();_s=i;function i(c){switch(c.graph().ranker){case"network-simplex":s(c);break;case"tight-tree":a(c);break;case"longest-path":o(c);break;default:s(c)}}var o=t;function a(c){t(c),r(c)}function s(c){n(c)}return _s}var ws,xp;function P1(){if(xp)return ws;xp=1;var e=ae();ws=t;function t(i){var o=n(i);e.forEach(i.graph().dummyChains,function(a){for(var s=i.node(a),c=s.edgeObj,u=r(i,o,c.v,c.w),d=u.path,l=u.lca,f=0,h=d[f],y=!0;a!==c.w;){if(s=i.node(a),y){for(;(h=d[f])!==l&&i.node(h).maxRank<s.rank;)f++;h===l&&(y=!1)}if(!y){for(;f<d.length-1&&i.node(h=d[f+1]).minRank<=s.rank;)f++;h=d[f]}i.setParent(a,h),a=i.successors(a)[0]}})}function r(i,o,a,s){var c=[],u=[],d=Math.min(o[a].low,o[s].low),l=Math.max(o[a].lim,o[s].lim),f,h;f=a;do f=i.parent(f),c.push(f);while(f&&(o[f].low>d||l>o[f].lim));for(h=f,f=s;(f=i.parent(f))!==h;)u.push(f);return{path:c.concat(u.reverse()),lca:h}}function n(i){var o={},a=0;function s(c){var u=a;e.forEach(i.children(c),s),o[c]={low:u,lim:a++}}return e.forEach(i.children(),s),o}return ws}var xs,Ep;function O1(){if(Ep)return xs;Ep=1;var e=ae(),t=he();xs={run:r,cleanup:a};function r(s){var c=t.addDummyNode(s,"root",{},"_root"),u=i(s),d=e.max(e.values(u))-1,l=2*d+1;s.graph().nestingRoot=c,e.forEach(s.edges(),function(h){s.edge(h).minlen*=l});var f=o(s)+1;e.forEach(s.children(),function(h){n(s,c,l,f,d,u,h)}),s.graph().nodeRankFactor=l}function n(s,c,u,d,l,f,h){var y=s.children(h);if(!y.length){h!==c&&s.setEdge(c,h,{weight:0,minlen:u});return}var v=t.addBorderNode(s,"_bt"),g=t.addBorderNode(s,"_bb"),m=s.node(h);s.setParent(v,h),m.borderTop=v,s.setParent(g,h),m.borderBottom=g,e.forEach(y,function(b){n(s,c,u,d,l,f,b);var p=s.node(b),_=p.borderTop?p.borderTop:b,x=p.borderBottom?p.borderBottom:b,w=p.borderTop?d:2*d,E=_!==x?1:l-f[h]+1;s.setEdge(v,_,{weight:w,minlen:E,nestingEdge:!0}),s.setEdge(x,g,{weight:w,minlen:E,nestingEdge:!0})}),s.parent(h)||s.setEdge(c,v,{weight:0,minlen:l+f[h]})}function i(s){var c={};function u(d,l){var f=s.children(d);f&&f.length&&e.forEach(f,function(h){u(h,l+1)}),c[d]=l}return e.forEach(s.children(),function(d){u(d,1)}),c}function o(s){return e.reduce(s.edges(),function(c,u){return c+s.edge(u).weight},0)}function a(s){var c=s.graph();s.removeNode(c.nestingRoot),delete c.nestingRoot,e.forEach(s.edges(),function(u){var d=s.edge(u);d.nestingEdge&&s.removeEdge(u)})}return xs}var Es,Sp;function k1(){if(Sp)return Es;Sp=1;var e=ae(),t=he();Es=r;function r(i){function o(a){var s=i.children(a),c=i.node(a);if(s.length&&e.forEach(s,o),e.has(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(var u=c.minRank,d=c.maxRank+1;u<d;++u)n(i,"borderLeft","_bl",a,c,u),n(i,"borderRight","_br",a,c,u)}}e.forEach(i.children(),o)}function n(i,o,a,s,c,u){var d={width:0,height:0,rank:u,borderType:o},l=c[o][u-1],f=t.addDummyNode(i,"border",d,a);c[o][u]=f,i.setParent(f,s),l&&i.setEdge(l,f,{weight:1})}return Es}var Ss,Cp;function L1(){if(Cp)return Ss;Cp=1;var e=ae();Ss={adjust:t,undo:r};function t(u){var d=u.graph().rankdir.toLowerCase();(d==="lr"||d==="rl")&&n(u)}function r(u){var d=u.graph().rankdir.toLowerCase();(d==="bt"||d==="rl")&&o(u),(d==="lr"||d==="rl")&&(s(u),n(u))}function n(u){e.forEach(u.nodes(),function(d){i(u.node(d))}),e.forEach(u.edges(),function(d){i(u.edge(d))})}function i(u){var d=u.width;u.width=u.height,u.height=d}function o(u){e.forEach(u.nodes(),function(d){a(u.node(d))}),e.forEach(u.edges(),function(d){var l=u.edge(d);e.forEach(l.points,a),e.has(l,"y")&&a(l)})}function a(u){u.y=-u.y}function s(u){e.forEach(u.nodes(),function(d){c(u.node(d))}),e.forEach(u.edges(),function(d){var l=u.edge(d);e.forEach(l.points,c),e.has(l,"x")&&c(l)})}function c(u){var d=u.x;u.x=u.y,u.y=d}return Ss}var Cs,qp;function D1(){if(qp)return Cs;qp=1;var e=ae();Cs=t;function t(r){var n={},i=e.filter(r.nodes(),function(u){return!r.children(u).length}),o=e.max(e.map(i,function(u){return r.node(u).rank})),a=e.map(e.range(o+1),function(){return[]});function s(u){if(!e.has(n,u)){n[u]=!0;var d=r.node(u);a[d.rank].push(u),e.forEach(r.successors(u),s)}}var c=e.sortBy(i,function(u){return r.node(u).rank});return e.forEach(c,s),a}return Cs}var qs,Rp;function j1(){if(Rp)return qs;Rp=1;var e=ae();qs=t;function t(n,i){for(var o=0,a=1;a<i.length;++a)o+=r(n,i[a-1],i[a]);return o}function r(n,i,o){for(var a=e.zipObject(o,e.map(o,function(f,h){return h})),s=e.flatten(e.map(i,function(f){return e.sortBy(e.map(n.outEdges(f),function(h){return{pos:a[h.w],weight:n.edge(h).weight}}),"pos")}),!0),c=1;c<o.length;)c<<=1;var u=2*c-1;c-=1;var d=e.map(new Array(u),function(){return 0}),l=0;return e.forEach(s.forEach(function(f){var h=f.pos+c;d[h]+=f.weight;for(var y=0;h>0;)h%2&&(y+=d[h+1]),h=h-1>>1,d[h]+=f.weight;l+=f.weight*y})),l}return qs}var Rs,Ip;function F1(){if(Ip)return Rs;Ip=1;var e=ae();Rs=t;function t(r,n){return e.map(n,function(i){var o=r.inEdges(i);if(o.length){var a=e.reduce(o,function(s,c){var u=r.edge(c),d=r.node(c.v);return{sum:s.sum+u.weight*d.order,weight:s.weight+u.weight}},{sum:0,weight:0});return{v:i,barycenter:a.sum/a.weight,weight:a.weight}}else return{v:i}})}return Rs}var Is,Np;function B1(){if(Np)return Is;Np=1;var e=ae();Is=t;function t(i,o){var a={};e.forEach(i,function(c,u){var d=a[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:u};e.isUndefined(c.barycenter)||(d.barycenter=c.barycenter,d.weight=c.weight)}),e.forEach(o.edges(),function(c){var u=a[c.v],d=a[c.w];!e.isUndefined(u)&&!e.isUndefined(d)&&(d.indegree++,u.out.push(a[c.w]))});var s=e.filter(a,function(c){return!c.indegree});return r(s)}function r(i){var o=[];function a(u){return function(d){d.merged||(e.isUndefined(d.barycenter)||e.isUndefined(u.barycenter)||d.barycenter>=u.barycenter)&&n(u,d)}}function s(u){return function(d){d.in.push(u),--d.indegree===0&&i.push(d)}}for(;i.length;){var c=i.pop();o.push(c),e.forEach(c.in.reverse(),a(c)),e.forEach(c.out,s(c))}return e.map(e.filter(o,function(u){return!u.merged}),function(u){return e.pick(u,["vs","i","barycenter","weight"])})}function n(i,o){var a=0,s=0;i.weight&&(a+=i.barycenter*i.weight,s+=i.weight),o.weight&&(a+=o.barycenter*o.weight,s+=o.weight),i.vs=o.vs.concat(i.vs),i.barycenter=a/s,i.weight=s,i.i=Math.min(o.i,i.i),o.merged=!0}return Is}var Ns,Mp;function H1(){if(Mp)return Ns;Mp=1;var e=ae(),t=he();Ns=r;function r(o,a){var s=t.partition(o,function(v){return e.has(v,"barycenter")}),c=s.lhs,u=e.sortBy(s.rhs,function(v){return-v.i}),d=[],l=0,f=0,h=0;c.sort(i(!!a)),h=n(d,u,h),e.forEach(c,function(v){h+=v.vs.length,d.push(v.vs),l+=v.barycenter*v.weight,f+=v.weight,h=n(d,u,h)});var y={vs:e.flatten(d,!0)};return f&&(y.barycenter=l/f,y.weight=f),y}function n(o,a,s){for(var c;a.length&&(c=e.last(a)).i<=s;)a.pop(),o.push(c.vs),s++;return s}function i(o){return function(a,s){return a.barycenter<s.barycenter?-1:a.barycenter>s.barycenter?1:o?s.i-a.i:a.i-s.i}}return Ns}var Ms,Ap;function z1(){if(Ap)return Ms;Ap=1;var e=ae(),t=F1(),r=B1(),n=H1();Ms=i;function i(s,c,u,d){var l=s.children(c),f=s.node(c),h=f?f.borderLeft:void 0,y=f?f.borderRight:void 0,v={};h&&(l=e.filter(l,function(x){return x!==h&&x!==y}));var g=t(s,l);e.forEach(g,function(x){if(s.children(x.v).length){var w=i(s,x.v,u,d);v[x.v]=w,e.has(w,"barycenter")&&a(x,w)}});var m=r(g,u);o(m,v);var b=n(m,d);if(h&&(b.vs=e.flatten([h,b.vs,y],!0),s.predecessors(h).length)){var p=s.node(s.predecessors(h)[0]),_=s.node(s.predecessors(y)[0]);e.has(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+p.order+_.order)/(b.weight+2),b.weight+=2}return b}function o(s,c){e.forEach(s,function(u){u.vs=e.flatten(u.vs.map(function(d){return c[d]?c[d].vs:d}),!0)})}function a(s,c){e.isUndefined(s.barycenter)?(s.barycenter=c.barycenter,s.weight=c.weight):(s.barycenter=(s.barycenter*s.weight+c.barycenter*c.weight)/(s.weight+c.weight),s.weight+=c.weight)}return Ms}var As,Tp;function $1(){if(Tp)return As;Tp=1;var e=ae(),t=me().Graph;As=r;function r(i,o,a){var s=n(i),c=new t({compound:!0}).setGraph({root:s}).setDefaultNodeLabel(function(u){return i.node(u)});return e.forEach(i.nodes(),function(u){var d=i.node(u),l=i.parent(u);(d.rank===o||d.minRank<=o&&o<=d.maxRank)&&(c.setNode(u),c.setParent(u,l||s),e.forEach(i[a](u),function(f){var h=f.v===u?f.w:f.v,y=c.edge(h,u),v=e.isUndefined(y)?0:y.weight;c.setEdge(h,u,{weight:i.edge(f).weight+v})}),e.has(d,"minRank")&&c.setNode(u,{borderLeft:d.borderLeft[o],borderRight:d.borderRight[o]}))}),c}function n(i){for(var o;i.hasNode(o=e.uniqueId("_root")););return o}return As}var Ts,Pp;function V1(){if(Pp)return Ts;Pp=1;var e=ae();Ts=t;function t(r,n,i){var o={},a;e.forEach(i,function(s){for(var c=r.parent(s),u,d;c;){if(u=r.parent(c),u?(d=o[u],o[u]=c):(d=a,a=c),d&&d!==c){n.setEdge(d,c);return}c=u}})}return Ts}var Ps,Op;function G1(){if(Op)return Ps;Op=1;var e=ae(),t=D1(),r=j1(),n=z1(),i=$1(),o=V1(),a=me().Graph,s=he();Ps=c;function c(f){var h=s.maxRank(f),y=u(f,e.range(1,h+1),"inEdges"),v=u(f,e.range(h-1,-1,-1),"outEdges"),g=t(f);l(f,g);for(var m=Number.POSITIVE_INFINITY,b,p=0,_=0;_<4;++p,++_){d(p%2?y:v,p%4>=2),g=s.buildLayerMatrix(f);var x=r(f,g);x<m&&(_=0,b=e.cloneDeep(g),m=x)}l(f,b)}function u(f,h,y){return e.map(h,function(v){return i(f,v,y)})}function d(f,h){var y=new a;e.forEach(f,function(v){var g=v.graph().root,m=n(v,g,y,h);e.forEach(m.vs,function(b,p){v.node(b).order=p}),o(v,y,m.vs)})}function l(f,h){e.forEach(h,function(y){e.forEach(y,function(v,g){f.node(v).order=g})})}return Ps}var Os,kp;function U1(){if(kp)return Os;kp=1;var e=ae(),t=me().Graph,r=he();Os={positionX:y,findType1Conflicts:n,findType2Conflicts:i,addConflict:a,hasConflict:s,verticalAlignment:c,horizontalCompaction:u,alignCoordinates:f,findSmallestWidthAlignment:l,balance:h};function n(m,b){var p={};function _(x,w){var E=0,q=0,C=x.length,N=e.last(w);return e.forEach(w,function(S,R){var M=o(m,S),L=M?m.node(M).order:C;(M||S===N)&&(e.forEach(w.slice(q,R+1),function(P){e.forEach(m.predecessors(P),function(H){var z=m.node(H),D=z.order;(D<E||L<D)&&!(z.dummy&&m.node(P).dummy)&&a(p,H,P)})}),q=R+1,E=L)}),w}return e.reduce(b,_),p}function i(m,b){var p={};function _(w,E,q,C,N){var S;e.forEach(e.range(E,q),function(R){S=w[R],m.node(S).dummy&&e.forEach(m.predecessors(S),function(M){var L=m.node(M);L.dummy&&(L.order<C||L.order>N)&&a(p,M,S)})})}function x(w,E){var q=-1,C,N=0;return e.forEach(E,function(S,R){if(m.node(S).dummy==="border"){var M=m.predecessors(S);M.length&&(C=m.node(M[0]).order,_(E,N,R,q,C),N=R,q=C)}_(E,N,E.length,C,w.length)}),E}return e.reduce(b,x),p}function o(m,b){if(m.node(b).dummy)return e.find(m.predecessors(b),function(p){return m.node(p).dummy})}function a(m,b,p){if(b>p){var _=b;b=p,p=_}var x=m[b];x||(m[b]=x={}),x[p]=!0}function s(m,b,p){if(b>p){var _=b;b=p,p=_}return e.has(m[b],p)}function c(m,b,p,_){var x={},w={},E={};return e.forEach(b,function(q){e.forEach(q,function(C,N){x[C]=C,w[C]=C,E[C]=N})}),e.forEach(b,function(q){var C=-1;e.forEach(q,function(N){var S=_(N);if(S.length){S=e.sortBy(S,function(H){return E[H]});for(var R=(S.length-1)/2,M=Math.floor(R),L=Math.ceil(R);M<=L;++M){var P=S[M];w[N]===N&&C<E[P]&&!s(p,N,P)&&(w[P]=N,w[N]=x[N]=x[P],C=E[P])}}})}),{root:x,align:w}}function u(m,b,p,_,x){var w={},E=d(m,b,p,x),q=x?"borderLeft":"borderRight";function C(R,M){for(var L=E.nodes(),P=L.pop(),H={};P;)H[P]?R(P):(H[P]=!0,L.push(P),L=L.concat(M(P))),P=L.pop()}function N(R){w[R]=E.inEdges(R).reduce(function(M,L){return Math.max(M,w[L.v]+E.edge(L))},0)}function S(R){var M=E.outEdges(R).reduce(function(P,H){return Math.min(P,w[H.w]-E.edge(H))},Number.POSITIVE_INFINITY),L=m.node(R);M!==Number.POSITIVE_INFINITY&&L.borderType!==q&&(w[R]=Math.max(w[R],M))}return C(N,E.predecessors.bind(E)),C(S,E.successors.bind(E)),e.forEach(_,function(R){w[R]=w[p[R]]}),w}function d(m,b,p,_){var x=new t,w=m.graph(),E=v(w.nodesep,w.edgesep,_);return e.forEach(b,function(q){var C;e.forEach(q,function(N){var S=p[N];if(x.setNode(S),C){var R=p[C],M=x.edge(R,S);x.setEdge(R,S,Math.max(E(m,N,C),M||0))}C=N})}),x}function l(m,b){return e.minBy(e.values(b),function(p){var _=Number.NEGATIVE_INFINITY,x=Number.POSITIVE_INFINITY;return e.forIn(p,function(w,E){var q=g(m,E)/2;_=Math.max(w+q,_),x=Math.min(w-q,x)}),_-x})}function f(m,b){var p=e.values(b),_=e.min(p),x=e.max(p);e.forEach(["u","d"],function(w){e.forEach(["l","r"],function(E){var q=w+E,C=m[q],N;if(C!==b){var S=e.values(C);N=E==="l"?_-e.min(S):x-e.max(S),N&&(m[q]=e.mapValues(C,function(R){return R+N}))}})})}function h(m,b){return e.mapValues(m.ul,function(p,_){if(b)return m[b.toLowerCase()][_];var x=e.sortBy(e.map(m,_));return(x[1]+x[2])/2})}function y(m){var b=r.buildLayerMatrix(m),p=e.merge(n(m,b),i(m,b)),_={},x;e.forEach(["u","d"],function(E){x=E==="u"?b:e.values(b).reverse(),e.forEach(["l","r"],function(q){q==="r"&&(x=e.map(x,function(R){return e.values(R).reverse()}));var C=(E==="u"?m.predecessors:m.successors).bind(m),N=c(m,x,p,C),S=u(m,x,N.root,N.align,q==="r");q==="r"&&(S=e.mapValues(S,function(R){return-R})),_[E+q]=S})});var w=l(m,_);return f(_,w),h(_,m.graph().align)}function v(m,b,p){return function(_,x,w){var E=_.node(x),q=_.node(w),C=0,N;if(C+=E.width/2,e.has(E,"labelpos"))switch(E.labelpos.toLowerCase()){case"l":N=-E.width/2;break;case"r":N=E.width/2;break}if(N&&(C+=p?N:-N),N=0,C+=(E.dummy?b:m)/2,C+=(q.dummy?b:m)/2,C+=q.width/2,e.has(q,"labelpos"))switch(q.labelpos.toLowerCase()){case"l":N=q.width/2;break;case"r":N=-q.width/2;break}return N&&(C+=p?N:-N),N=0,C}}function g(m,b){return m.node(b).width}return Os}var ks,Lp;function W1(){if(Lp)return ks;Lp=1;var e=ae(),t=he(),r=U1().positionX;ks=n;function n(o){o=t.asNonCompoundGraph(o),i(o),e.forEach(r(o),function(a,s){o.node(s).x=a})}function i(o){var a=t.buildLayerMatrix(o),s=o.graph().ranksep,c=0;e.forEach(a,function(u){var d=e.max(e.map(u,function(l){return o.node(l).height}));e.forEach(u,function(l){o.node(l).y=c+d/2}),c+=d+s})}return ks}var Ls,Dp;function Y1(){if(Dp)return Ls;Dp=1;var e=ae(),t=N1(),r=M1(),n=T1(),i=he().normalizeRanks,o=P1(),a=he().removeEmptyRanks,s=O1(),c=k1(),u=L1(),d=G1(),l=W1(),f=he(),h=me().Graph;Ls=y;function y(I,T){var k=T&&T.debugTiming?f.time:f.notime;k("layout",function(){var F=k("  buildLayoutGraph",function(){return C(I)});k("  runLayout",function(){v(F,k)}),k("  updateInputGraph",function(){g(I,F)})})}function v(I,T){T("    makeSpaceForEdgeLabels",function(){N(I)}),T("    removeSelfEdges",function(){B(I)}),T("    acyclic",function(){t.run(I)}),T("    nestingGraph.run",function(){s.run(I)}),T("    rank",function(){n(f.asNonCompoundGraph(I))}),T("    injectEdgeLabelProxies",function(){S(I)}),T("    removeEmptyRanks",function(){a(I)}),T("    nestingGraph.cleanup",function(){s.cleanup(I)}),T("    normalizeRanks",function(){i(I)}),T("    assignRankMinMax",function(){R(I)}),T("    removeEdgeLabelProxies",function(){M(I)}),T("    normalize.run",function(){r.run(I)}),T("    parentDummyChains",function(){o(I)}),T("    addBorderSegments",function(){c(I)}),T("    order",function(){d(I)}),T("    insertSelfEdges",function(){U(I)}),T("    adjustCoordinateSystem",function(){u.adjust(I)}),T("    position",function(){l(I)}),T("    positionSelfEdges",function(){G(I)}),T("    removeBorderNodes",function(){D(I)}),T("    normalize.undo",function(){r.undo(I)}),T("    fixupEdgeLabelCoords",function(){H(I)}),T("    undoCoordinateSystem",function(){u.undo(I)}),T("    translateGraph",function(){L(I)}),T("    assignNodeIntersects",function(){P(I)}),T("    reversePoints",function(){z(I)}),T("    acyclic.undo",function(){t.undo(I)})}function g(I,T){e.forEach(I.nodes(),function(k){var F=I.node(k),j=T.node(k);F&&(F.x=j.x,F.y=j.y,T.children(k).length&&(F.width=j.width,F.height=j.height))}),e.forEach(I.edges(),function(k){var F=I.edge(k),j=T.edge(k);F.points=j.points,e.has(j,"x")&&(F.x=j.x,F.y=j.y)}),I.graph().width=T.graph().width,I.graph().height=T.graph().height}var m=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},p=["acyclicer","ranker","rankdir","align"],_=["width","height"],x={width:0,height:0},w=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},q=["labelpos"];function C(I){var T=new h({multigraph:!0,compound:!0}),k=Y(I.graph());return T.setGraph(e.merge({},b,$(k,m),e.pick(k,p))),e.forEach(I.nodes(),function(F){var j=Y(I.node(F));T.setNode(F,e.defaults($(j,_),x)),T.setParent(F,I.parent(F))}),e.forEach(I.edges(),function(F){var j=Y(I.edge(F));T.setEdge(F,e.merge({},E,$(j,w),e.pick(j,q)))}),T}function N(I){var T=I.graph();T.ranksep/=2,e.forEach(I.edges(),function(k){var F=I.edge(k);F.minlen*=2,F.labelpos.toLowerCase()!=="c"&&(T.rankdir==="TB"||T.rankdir==="BT"?F.width+=F.labeloffset:F.height+=F.labeloffset)})}function S(I){e.forEach(I.edges(),function(T){var k=I.edge(T);if(k.width&&k.height){var F=I.node(T.v),j=I.node(T.w),V={rank:(j.rank-F.rank)/2+F.rank,e:T};f.addDummyNode(I,"edge-proxy",V,"_ep")}})}function R(I){var T=0;e.forEach(I.nodes(),function(k){var F=I.node(k);F.borderTop&&(F.minRank=I.node(F.borderTop).rank,F.maxRank=I.node(F.borderBottom).rank,T=e.max(T,F.maxRank))}),I.graph().maxRank=T}function M(I){e.forEach(I.nodes(),function(T){var k=I.node(T);k.dummy==="edge-proxy"&&(I.edge(k.e).labelRank=k.rank,I.removeNode(T))})}function L(I){var T=Number.POSITIVE_INFINITY,k=0,F=Number.POSITIVE_INFINITY,j=0,V=I.graph(),K=V.marginx||0,J=V.marginy||0;function Q(W){var te=W.x,Z=W.y,ne=W.width,ee=W.height;T=Math.min(T,te-ne/2),k=Math.max(k,te+ne/2),F=Math.min(F,Z-ee/2),j=Math.max(j,Z+ee/2)}e.forEach(I.nodes(),function(W){Q(I.node(W))}),e.forEach(I.edges(),function(W){var te=I.edge(W);e.has(te,"x")&&Q(te)}),T-=K,F-=J,e.forEach(I.nodes(),function(W){var te=I.node(W);te.x-=T,te.y-=F}),e.forEach(I.edges(),function(W){var te=I.edge(W);e.forEach(te.points,function(Z){Z.x-=T,Z.y-=F}),e.has(te,"x")&&(te.x-=T),e.has(te,"y")&&(te.y-=F)}),V.width=k-T+K,V.height=j-F+J}function P(I){e.forEach(I.edges(),function(T){var k=I.edge(T),F=I.node(T.v),j=I.node(T.w),V,K;k.points?(V=k.points[0],K=k.points[k.points.length-1]):(k.points=[],V=j,K=F),k.points.unshift(f.intersectRect(F,V)),k.points.push(f.intersectRect(j,K))})}function H(I){e.forEach(I.edges(),function(T){var k=I.edge(T);if(e.has(k,"x"))switch((k.labelpos==="l"||k.labelpos==="r")&&(k.width-=k.labeloffset),k.labelpos){case"l":k.x-=k.width/2+k.labeloffset;break;case"r":k.x+=k.width/2+k.labeloffset;break}})}function z(I){e.forEach(I.edges(),function(T){var k=I.edge(T);k.reversed&&k.points.reverse()})}function D(I){e.forEach(I.nodes(),function(T){if(I.children(T).length){var k=I.node(T),F=I.node(k.borderTop),j=I.node(k.borderBottom),V=I.node(e.last(k.borderLeft)),K=I.node(e.last(k.borderRight));k.width=Math.abs(K.x-V.x),k.height=Math.abs(j.y-F.y),k.x=V.x+k.width/2,k.y=F.y+k.height/2}}),e.forEach(I.nodes(),function(T){I.node(T).dummy==="border"&&I.removeNode(T)})}function B(I){e.forEach(I.edges(),function(T){if(T.v===T.w){var k=I.node(T.v);k.selfEdges||(k.selfEdges=[]),k.selfEdges.push({e:T,label:I.edge(T)}),I.removeEdge(T)}})}function U(I){var T=f.buildLayerMatrix(I);e.forEach(T,function(k){var F=0;e.forEach(k,function(j,V){var K=I.node(j);K.order=V+F,e.forEach(K.selfEdges,function(J){f.addDummyNode(I,"selfedge",{width:J.label.width,height:J.label.height,rank:K.rank,order:V+ ++F,e:J.e,label:J.label},"_se")}),delete K.selfEdges})})}function G(I){e.forEach(I.nodes(),function(T){var k=I.node(T);if(k.dummy==="selfedge"){var F=I.node(k.e.v),j=F.x+F.width/2,V=F.y,K=k.x-j,J=F.height/2;I.setEdge(k.e,k.label),I.removeNode(T),k.label.points=[{x:j+2*K/3,y:V-J},{x:j+5*K/6,y:V-J},{x:j+K,y:V},{x:j+5*K/6,y:V+J},{x:j+2*K/3,y:V+J}],k.label.x=k.x,k.label.y=k.y}})}function $(I,T){return e.mapValues(e.pick(I,T),Number)}function Y(I){var T={};return e.forEach(I,function(k,F){T[F.toLowerCase()]=k}),T}return Ls}var Ds,jp;function K1(){if(jp)return Ds;jp=1;var e=ae(),t=he(),r=me().Graph;Ds={debugOrdering:n};function n(i){var o=t.buildLayerMatrix(i),a=new r({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(s){a.setNode(s,{label:s}),a.setParent(s,"layer"+i.node(s).rank)}),e.forEach(i.edges(),function(s){a.setEdge(s.v,s.w,{},s.name)}),e.forEach(o,function(s,c){var u="layer"+c;a.setNode(u,{rank:"same"}),e.reduce(s,function(d,l){return a.setEdge(d,l,{style:"invis"}),l})}),a}return Ds}var js,Fp;function Z1(){return Fp||(Fp=1,js="0.8.5"),js}var Fs,Bp;function X1(){return Bp||(Bp=1,Fs={graphlib:me(),layout:Y1(),debug:K1(),util:{time:he().time,notime:he().notime},version:Z1()}),Fs}var Q1=X1();const Hp=zp(Q1),J1=/^graph\s+(TD|TB|LR|RL|BT)/i,eE=/^\s*(\w+)\["([^"]+)"\]/,tE=/^\s*(\w+)\(["']?([^)"']+)["']?\)/,rE=/^\s*(\w+)\{["']?([^}"']+)["']?\}/,nE=/^\s*(\w+)\s*-->\s*\|([^|]+)\|\s*(\w+)/,iE=/^\s*(\w+)\s*-->\s*(\w+)/,oE=/^\s*(\w+)\s*-->\s*(\w+)\["([^"]+)"\]/;function bE(e){const t=e.split(`
`).map(s=>s.trim()).filter(Boolean);let r="TB";const n=new Map,i=[];let o=0;for(const s of t){const c=s.match(J1);if(c){const v=c[1].toUpperCase();r=v==="LR"||v==="RL"?"LR":"TB";continue}if(/^(subgraph|end|style|class|classDef|linkStyle)\b/i.test(s))continue;const u=s.match(nE);if(u){const[,v,g,m]=u;n.has(v)||n.set(v,v),n.has(m)||n.set(m,m),i.push({id:`e${o++}`,source:v,target:m,label:g.trim()});continue}const d=s.match(oE);if(d){const[,v,g,m]=d;n.has(v)||n.set(v,v),n.set(g,m),i.push({id:`e${o++}`,source:v,target:g});continue}const l=s.match(iE);if(l){const[,v,g]=l;n.has(v)||n.set(v,v),n.has(g)||n.set(g,g),i.push({id:`e${o++}`,source:v,target:g});continue}const f=s.match(eE);if(f){const[,v,g]=f;n.set(v,g);continue}const h=s.match(tE);if(h){const[,v,g]=h;n.set(v,g);continue}const y=s.match(rE);if(y){const[,v,g]=y;n.set(v,g);continue}}return{nodes:Array.from(n.entries()).map(([s,c])=>({id:s,type:"arcade",position:{x:0,y:0},data:{label:c}})),edges:i,direction:r}}function _E(e,t,r="TB"){const n=[`graph ${r}`];for(const i of e){const o=i.data.label||i.id;n.push(`    ${i.id}["${o}"]`)}n.push("");for(const i of t)i.label?n.push(`    ${i.source} -->|${i.label}| ${i.target}`):n.push(`    ${i.source} --> ${i.target}`);return n.join(`
`)}function wE(e,t,r){const{direction:n,nodeWidth:i=180,nodeHeight:o=50,rankSep:a=80,nodeSep:s=40}=r,c=new Hp.graphlib.Graph;c.setDefaultEdgeLabel(()=>({})),c.setGraph({rankdir:n,ranksep:a,nodesep:s});for(const u of e)c.setNode(u.id,{width:i,height:o});for(const u of t)c.setEdge(u.source,u.target);return Hp.layout(c),e.map(u=>{const d=c.node(u.id);return{...u,position:{x:d.x-i/2,y:d.y-o/2}}})}export{cE as A,gE as B,vE as C,Lt as H,dE as L,Pt as M,mE as N,X as P,pE as a,wE as b,Am as c,lE as d,uE as e,yE as f,fE as i,bE as p,_E as t,hE as u};
