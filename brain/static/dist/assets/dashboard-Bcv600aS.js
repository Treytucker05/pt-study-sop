import{c as rt,u as nt,a as ot,r as i,j as e,b as g,d as it,e as cs}from"./index-zrbYRJ__.js";import{u as D,a as m,B as f,G as us,c as lt,R as ms,W as xs,C as ps,T as gs,D as hs,b as dt,P as fs,O as ys,d as bs,e as ct,f as M,L as Ns,g as J,h as _e,i as ee,j as te,k as se,l as ae,I as v,m as Ze,n as ce,o as js,p as vs,q as Ds,S as ws}from"./layout-BP63CjJV.js";import{C as I,a as K,b as Q,B as Oe,c as q}from"./badge-qR6sunCN.js";import{S as ue,a as me,b as xe,c as pe,d as S}from"./select-CIbCbSJy.js";import{t as Je,d as Cs,u as ks,a as Ss,D as As,b as Ts,P as Es,c as _s,e as Ms,C as Is,p as qs,i as he,f as Y,g as Ie,h as fe,j as qe,k as Ps}from"./parseISO-DCLNwiMx.js";import{R as Os}from"./refresh-cw-CkONKAJB.js";import{P as ut}from"./play-DE-z8j-B.js";import{A as Rs,C as Me,T as et}from"./triangle-alert-C_KWRVup.js";import{C as Pe}from"./circle-check-sRgGq6Nw.js";import{P as ge}from"./plus-CisaFkvv.js";import{C as Fs}from"./clock-BD4RFb-h.js";import{C as Ls}from"./index-_UkbIFQl.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Qs=rt("flame",Ks);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Us=rt("list-todo",$s);function zs(s,a){const r=Je(s),l=Je(a),d=tt(r,l),h=Math.abs(Cs(r,l));r.setDate(r.getDate()-d*h);const x=+(tt(r,l)===-d),N=d*(h-x);return N===0?0:N}function tt(s,a){const r=s.getFullYear()-a.getFullYear()||s.getMonth()-a.getMonth()||s.getDate()-a.getDate()||s.getHours()-a.getHours()||s.getMinutes()-a.getMinutes()||s.getSeconds()-a.getSeconds()||s.getMilliseconds()-a.getMilliseconds();return r<0?-1:r>0?1:r}const Gs=[{id:"pending",label:"Queue",hint:"Drop here to keep it pending"},{id:"in_progress",label:"In Progress",hint:"Drop here to mark in-progress"}];function Hs(s){if(!s)return null;try{const a=qs(s);return he(a)?Y(a)?"Today":Ie(a)?"Tomorrow":fe(a)&&!Y(a)?"Overdue":qe(a,"MMM d"):s}catch{return s}}function mt(s){return(s.anchor_text||s.notes||"Untitled task").trim()}function st({id:s,label:a,hint:r,count:l,children:d}){const{isOver:h,setNodeRef:x}=_s({id:s,data:{type:"planner_column",status:s}});return e.jsxs("div",{ref:x,className:g("flex flex-col h-[360px] sm:h-[420px] border border-secondary/40 bg-black/30 rounded-none",h&&"border-primary/70 bg-primary/10"),"aria-label":a,children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-secondary/30",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"font-arcade text-xs text-primary/90 tracking-widest uppercase truncate",children:a}),e.jsx(Oe,{variant:"outline",className:"rounded-none text-xs px-1.5 py-0",children:l})]}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground hidden sm:inline",children:r})]}),e.jsx("div",{className:"flex-1 p-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:d})})]})}function at({task:s,disabled:a,primaryAction:r,onComplete:l}){const{attributes:d,listeners:h,setNodeRef:x,transform:N,isDragging:w}=Ms({id:String(s.id),data:{type:"planner_task",taskId:s.id,status:s.status??"pending"},disabled:a}),y={transform:Is.Translate.toString(N),opacity:w?.6:1},A=Hs(s.scheduled_date),O=A==="Overdue";return e.jsx("div",{ref:x,style:y,className:g("group border border-secondary/40 bg-black/40 hover:border-primary/40 transition-colors rounded-none px-2.5 py-2",w&&"ring-2 ring-primary/50 border-primary/60"),"data-task-id":s.id,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5 text-muted-foreground hover:text-primary cursor-grab active:cursor-grabbing",...d,...h,"aria-label":"Drag task",children:e.jsx(us,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"font-terminal text-xs text-white leading-snug flex-1 min-w-0",children:e.jsx("span",{className:"block truncate",children:mt(s)})}),A&&e.jsx("span",{className:g("font-terminal text-xs px-1.5 py-0.5 border rounded-none shrink-0",O?"text-red-400 border-red-500/40 bg-red-500/10":"text-muted-foreground border-secondary/40"),title:s.scheduled_date||void 0,children:A})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5",children:[s.course_name&&e.jsx("span",{className:"font-terminal text-xs text-cyan-300 border border-cyan-500/30 bg-cyan-500/10 px-1.5 py-0.5 rounded-none",children:s.course_name}),typeof s.planned_minutes=="number"&&s.planned_minutes>0&&e.jsxs("span",{className:"font-terminal text-xs text-muted-foreground border border-secondary/30 bg-secondary/10 px-1.5 py-0.5 rounded-none",children:[s.planned_minutes,"m"]}),typeof s.review_number=="number"&&s.review_number>0&&e.jsxs("span",{className:"font-terminal text-xs text-yellow-300 border border-yellow-500/30 bg-yellow-500/10 px-1.5 py-0.5 rounded-none",children:["R",s.review_number]}),typeof s.priority=="number"&&s.priority>0&&e.jsxs("span",{className:"font-terminal text-xs text-orange-300 border border-orange-500/30 bg-orange-500/10 px-1.5 py-0.5 rounded-none",children:["P",s.priority]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[e.jsxs(f,{size:"sm",variant:"ghost",className:"h-7 px-2 rounded-none font-terminal text-xs",onClick:T=>{T.stopPropagation(),r.onClick()},disabled:a,title:r.title,children:[r.icon,r.label]}),e.jsxs(f,{size:"sm",variant:"ghost",className:"h-7 px-2 rounded-none font-terminal text-xs text-green-400 hover:text-green-300",onClick:T=>{T.stopPropagation(),l()},disabled:a,title:"Complete",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),"Done"]})]})]})})}function Bs({tasks:s}){const a=nt(),{toast:r}=ot(),[l,d]=i.useState(null),h=ks(Ss(Es,{activationConstraint:{distance:8}})),x=D({mutationFn:o=>m.planner.updateTask(o.id,o.data),onMutate:async o=>{await a.cancelQueries({queryKey:["planner-queue"]});const c=a.getQueryData(["planner-queue"]),p=c?c.findIndex(u=>u.id===o.id):-1,j=p>=0&&c?c[p]:void 0;return a.setQueryData(["planner-queue"],u=>{if(!u)return u;const C=u.findIndex(G=>G.id===o.id);if(C===-1)return u;if(o.data.status==="completed")return u.filter(G=>G.id!==o.id);const B=u.slice();return B[C]={...B[C],...o.data},B}),{previousTask:j,previousIndex:p}},onError:(o,c,p)=>{p?.previousTask&&a.setQueryData(["planner-queue"],j=>{const u=(j??[]).slice(),C=u.findIndex(E=>E.id===p.previousTask.id);if(C===-1){const E=p.previousIndex>=0?Math.min(p.previousIndex,u.length):u.length;u.splice(E,0,p.previousTask)}else u[C]=p.previousTask;return u}),r({title:"Update failed",description:String(o),variant:"destructive"})},onSettled:()=>{a.invalidateQueries({queryKey:["planner-queue"]})}}),N=D({mutationFn:()=>m.planner.generate(),onSuccess:o=>{a.invalidateQueries({queryKey:["planner-queue"]}),r({title:"Planner refreshed",description:`${o.tasks_created??0} task(s) created`})},onError:o=>{r({title:"Generate failed",description:String(o),variant:"destructive"})}}),w=i.useMemo(()=>{const o=new Map;for(const c of s)o.set(String(c.id),c);return o},[s]),y=i.useMemo(()=>s.filter(o=>(o.status||"pending")==="pending"),[s]),A=i.useMemo(()=>s.filter(o=>(o.status||"pending")==="in_progress"),[s]),O=o=>[...o].sort((c,p)=>{const j=c.scheduled_date||"",u=p.scheduled_date||"";if(j!==u)return j.localeCompare(u);const C=typeof c.priority=="number"?c.priority:0;return(typeof p.priority=="number"?p.priority:0)-C}),T=i.useMemo(()=>O(y),[y]),H=i.useMemo(()=>O(A),[A]),R=(o,c)=>{x.mutate({id:o,data:{status:c}})},$=o=>{x.mutate({id:o,data:{status:"completed"}})},re=o=>{d(null);const c=o.over?.data.current?.status,p=o.active?.id;if(!c||!p||!Gs.some(C=>C.id===c))return;const j=w.get(String(p));!j||(j.status||"pending")===c||R(j.id,c)},U=l?w.get(l):null,z=x.isPending;return e.jsxs(I,{className:"bg-black/40 border-2 border-primary rounded-none",children:[e.jsx(K,{className:"border-b border-primary/50 p-4",children:e.jsxs(Q,{className:"font-arcade text-sm flex items-center justify-between gap-3",children:[e.jsx("span",{className:"truncate",children:"PLANNER_BOARD"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Oe,{variant:"outline",className:"rounded-none text-xs",children:[s.length," tasks"]}),e.jsxs(f,{size:"sm",variant:"outline",className:"rounded-none font-arcade text-xs border-primary",onClick:()=>N.mutate(),disabled:N.isPending,title:"Generate tasks from recent weak anchors",children:[e.jsx(Os,{className:g("w-3.5 h-3.5 mr-2",N.isPending&&"animate-spin")}),"Refresh"]})]})]})}),e.jsx(q,{className:"p-4",children:e.jsxs(As,{sensors:h,onDragStart:o=>d(String(o.active.id)),onDragCancel:()=>d(null),onDragEnd:re,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(st,{id:"pending",label:"Queue",hint:"Drag to start",count:y.length,children:T.length===0?e.jsx("div",{className:"px-2 py-8 text-center font-terminal text-xs text-muted-foreground",children:"No pending tasks"}):T.map(o=>e.jsx(at,{task:o,disabled:z,primaryAction:{label:"Start",title:"Start",icon:e.jsx(ut,{className:"w-3 h-3 mr-1"}),onClick:()=>R(o.id,"in_progress")},onComplete:()=>$(o.id)},o.id))}),e.jsx(st,{id:"in_progress",label:"In Progress",hint:"Drag back to queue",count:A.length,children:H.length===0?e.jsx("div",{className:"px-2 py-8 text-center font-terminal text-xs text-muted-foreground",children:"Nothing in progress"}):H.map(o=>e.jsx(at,{task:o,disabled:z,primaryAction:{label:"Queue",title:"Move back to queue",icon:e.jsx(Rs,{className:"w-3 h-3 mr-1"}),onClick:()=>R(o.id,"pending")},onComplete:()=>$(o.id)},o.id))})]}),e.jsx(Ts,{children:U?e.jsx("div",{className:"opacity-90 rotate-1",children:e.jsx("div",{className:"border border-primary/60 bg-black/80 px-3 py-2 rounded-none shadow-2xl",children:e.jsx("div",{className:"font-terminal text-xs text-white truncate",children:mt(U)})})}):null})]})})]})}function Vs(s,a,{checkForDefaultPrevented:r=!0}={}){return function(d){if(s?.(d),r===!1||!d.defaultPrevented)return a?.(d)}}var Ws=Symbol("radix.slottable");function Ys(s){const a=({children:r})=>e.jsx(e.Fragment,{children:r});return a.displayName=`${s}.Slottable`,a.__radixId=Ws,a}var xt="AlertDialog",[Xs]=cs(xt,[lt]),P=lt(),pt=s=>{const{__scopeAlertDialog:a,...r}=s,l=P(a);return e.jsx(ms,{...l,...r,modal:!0})};pt.displayName=xt;var Zs="AlertDialogTrigger",Js=i.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=P(r);return e.jsx(bs,{...d,...l,ref:a})});Js.displayName=Zs;var ea="AlertDialogPortal",gt=s=>{const{__scopeAlertDialog:a,...r}=s,l=P(a);return e.jsx(fs,{...l,...r})};gt.displayName=ea;var ta="AlertDialogOverlay",ht=i.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=P(r);return e.jsx(ys,{...d,...l,ref:a})});ht.displayName=ta;var X="AlertDialogContent",[sa,aa]=Xs(X),ra=Ys("AlertDialogContent"),ft=i.forwardRef((s,a)=>{const{__scopeAlertDialog:r,children:l,...d}=s,h=P(r),x=i.useRef(null),N=it(a,x),w=i.useRef(null);return e.jsx(xs,{contentName:X,titleName:yt,docsSlug:"alert-dialog",children:e.jsx(sa,{scope:r,cancelRef:w,children:e.jsxs(ps,{role:"alertdialog",...h,...d,ref:N,onOpenAutoFocus:Vs(d.onOpenAutoFocus,y=>{y.preventDefault(),w.current?.focus({preventScroll:!0})}),onPointerDownOutside:y=>y.preventDefault(),onInteractOutside:y=>y.preventDefault(),children:[e.jsx(ra,{children:l}),e.jsx(oa,{contentRef:x})]})})})});ft.displayName=X;var yt="AlertDialogTitle",bt=i.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=P(r);return e.jsx(gs,{...d,...l,ref:a})});bt.displayName=yt;var Nt="AlertDialogDescription",jt=i.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=P(r);return e.jsx(hs,{...d,...l,ref:a})});jt.displayName=Nt;var na="AlertDialogAction",vt=i.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,d=P(r);return e.jsx(dt,{...d,...l,ref:a})});vt.displayName=na;var Dt="AlertDialogCancel",wt=i.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...l}=s,{cancelRef:d}=aa(Dt,r),h=P(r),x=it(a,d);return e.jsx(dt,{...h,...l,ref:x})});wt.displayName=Dt;var oa=({contentRef:s})=>{const a=`\`${X}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${X}\` by passing a \`${Nt}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${X}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return i.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},ia=pt,la=gt,Ct=ht,kt=ft,St=vt,At=wt,Tt=bt,Et=jt;const da=ia,ca=({children:s})=>e.jsx(la,{container:typeof document<"u"?document.body:void 0,children:s}),_t=i.forwardRef(({className:s,...a},r)=>e.jsx(Ct,{className:g("fixed inset-0 dialog-overlay bg-[var(--surface-2)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:r}));_t.displayName=Ct.displayName;const Mt=i.forwardRef(({className:s,...a},r)=>e.jsxs(ca,{children:[e.jsx(_t,{}),e.jsx(kt,{ref:r,className:g("fixed dialog-center grid w-full max-w-lg max-h-[90vh] gap-4 overflow-y-auto border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg",s),...a})]}));Mt.displayName=kt.displayName;const It=({className:s,...a})=>e.jsx("div",{className:g("flex flex-col space-y-2 text-center sm:text-left",s),...a});It.displayName="AlertDialogHeader";const qt=({className:s,...a})=>e.jsx("div",{className:g("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});qt.displayName="AlertDialogFooter";const Pt=i.forwardRef(({className:s,...a},r)=>e.jsx(Tt,{ref:r,className:g("text-lg font-semibold",s),...a}));Pt.displayName=Tt.displayName;const Ot=i.forwardRef(({className:s,...a},r)=>e.jsx(Et,{ref:r,className:g("text-sm text-muted-foreground",s),...a}));Ot.displayName=Et.displayName;const Rt=i.forwardRef(({className:s,...a},r)=>e.jsx(St,{ref:r,className:g(ct(),s),...a}));Rt.displayName=St.displayName;const Ft=i.forwardRef(({className:s,...a},r)=>e.jsx(At,{ref:r,className:g(ct({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));Ft.displayName=At.displayName;function Da(){const s=nt(),{toast:a}=ot(),[r,l]=i.useState(""),[d,h]=i.useState(!1),[x,N]=i.useState(""),[w,y]=i.useState(""),[A,O]=i.useState(!1),[T,H]=i.useState(null),[R,$]=i.useState(""),[re,U]=i.useState(""),[z,o]=i.useState(null),c={zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},[p,j]=i.useState(0),[u,C]=i.useState(!1),[E,B]=i.useState(""),[G,ne]=i.useState(null),[Z,ye]=i.useState(""),[oe,be]=i.useState(""),[V,Ne]=i.useState(""),[ie,je]=i.useState("none"),[Lt,Re]=i.useState(!1),[ve,Kt]=i.useState("all"),[b,W]=i.useState({title:"",course:"",type:"assignment",dueDate:"",notes:""}),{data:Qt}=M({queryKey:["study-wheel","current"],queryFn:m.studyWheel.getCurrentCourse}),{data:F=[]}=M({queryKey:["courses","active"],queryFn:m.courses.getActive}),{data:Fe=[]}=M({queryKey:["sessions","today"],queryFn:m.todaySessions.get}),{data:$t}=M({queryKey:["streak"],queryFn:m.streak.get}),{data:Le=[]}=M({queryKey:["weakness-queue"],queryFn:m.weaknessQueue.get}),{data:De=[]}=M({queryKey:["academic-deadlines"],queryFn:m.academicDeadlines.getAll}),{data:Ke=[]}=M({queryKey:["planner-queue"],queryFn:m.planner.getQueue}),{data:_=[]}=M({queryKey:["google-task-lists"],queryFn:m.googleTasks.getLists}),{data:Ut=[]}=M({queryKey:["google-tasks"],queryFn:m.googleTasks.getAll});i.useEffect(()=>{if(u||!_.length)return;const t=_.findIndex(n=>n.title?.toLowerCase().includes("school"));t>=0&&j(t),C(!0)},[_,u]);const Qe=D({mutationFn:({courseId:t,mins:n})=>m.studyWheel.completeSession(t,n),onSuccess:()=>{s.invalidateQueries({queryKey:["study-wheel"]}),s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["sessions"]}),s.invalidateQueries({queryKey:["streak"]}),l(""),h(!1),a({title:"Session logged!",description:"Wheel rotated to next course."})},onError:()=>{a({title:"Error",description:"Failed to log session. Please try again.",variant:"destructive"})}}),we=D({mutationFn:({name:t,code:n})=>m.courses.create({name:t,code:n,active:!0,position:F.length}),onSuccess:()=>{s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["study-wheel"]}),N(""),y(""),O(!1),a({title:"Course added!",description:"New course added to the wheel."})},onError:()=>{a({title:"Error",description:"Failed to add course. Please try again.",variant:"destructive"})}}),$e=D({mutationFn:({id:t,name:n,code:k})=>m.courses.update(t,{name:n,code:k}),onSuccess:()=>{s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["study-wheel"]}),H(null),$(""),U(""),a({title:"Course updated!",description:"Course name has been changed."})},onError:()=>{a({title:"Error",description:"Failed to update course. Please try again.",variant:"destructive"})}}),zt=D({mutationFn:t=>m.courses.delete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["courses","active"]}),s.invalidateQueries({queryKey:["study-wheel","current"]}),s.invalidateQueries({queryKey:["study-wheel"]}),a({title:"Course deleted!",description:"Course has been removed from the wheel."})},onError:t=>{console.error("Delete failed:",t),a({title:"Error",description:"Failed to delete course. Please try again.",variant:"destructive"})}}),Ue=D({mutationFn:t=>m.googleTasks.update(t.id,t.listId,{status:t.status==="completed"?"needsAction":"completed"}),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]})}}),ze=D({mutationFn:t=>m.googleTasks.create(t.listId,{title:t.title,status:"needsAction"}),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]}),B("")}}),Ge=D({mutationFn:t=>m.googleTasks.update(t.task.id,t.task.listId,t.data),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]}),ne(null),ye(""),be(""),Ne(""),je("none")}}),He=D({mutationFn:t=>m.googleTasks.delete(t.id,t.listId),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]})}}),Ce=D({mutationFn:t=>m.academicDeadlines.create(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]}),Re(!1),W({title:"",course:"",type:"assignment",dueDate:"",notes:""}),a({title:"Deadline added!",description:"Academic deadline has been created."})},onError:()=>{a({title:"Error",description:"Failed to add deadline.",variant:"destructive"})}}),Gt=D({mutationFn:t=>m.academicDeadlines.toggleComplete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]})}}),Ht=D({mutationFn:t=>m.academicDeadlines.delete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]}),a({title:"Deadline removed",description:"Academic deadline has been deleted."})}}),le=Qt?.currentCourse,Bt=Fe.reduce((t,n)=>t+(n.minutes||0),0),Be=Fe.length,ke=Be>0,Vt=()=>{!le||!r||parseInt(r)<1||Qe.mutate({courseId:le.id,mins:parseInt(r)})},Ve=()=>{x.trim()&&we.mutate({name:x.trim(),code:w.trim()||void 0})},Wt=()=>{!T||!R.trim()||$e.mutate({id:T.id,name:R.trim(),code:re.trim()||null})},Yt=()=>{z&&(zt.mutate(z.id),o(null))},Xt=t=>{H(t),$(t.name),U(t.code??"")},Zt=()=>{!b.title?.trim()||!b.dueDate||Ce.mutate(b)},Jt=t=>{const n=new Date(t);if(!he(n))return"unknown";if(fe(n)&&!Y(n))return"overdue";if(Y(n))return"today";if(Ie(n))return"tomorrow";const k=zs(n,new Date);return k<=3?"soon":k<=7?"week":"later"},es=t=>{switch(t){case"exam":return"ðŸ“";case"quiz":return"â“";case"project":return"ðŸ“‚";default:return"ðŸ“‹"}},ts=t=>{switch(t){case"overdue":return"border-destructive bg-destructive/20 text-destructive";case"today":return"border-urgent bg-urgent/20 text-urgent";case"tomorrow":return"border-warning bg-warning/20 text-warning";case"soon":return"border-secondary bg-secondary/20 text-muted-foreground";default:return"border-secondary/30 text-muted-foreground"}},We={};F.forEach(t=>{We[String(t.id)]=t.name});const de=t=>t?/^\d+$/.test(t)?We[t]||"":t:"",ss=[...new Set([...De.map(t=>de(t.course)).filter(Boolean),...F.map(t=>t.name)])].sort(),as=[...De].filter(t=>ve==="all"||de(t.course)===ve).sort((t,n)=>t.completed!==n.completed?t.completed?1:-1:new Date(t.dueDate).getTime()-new Date(n.dueDate).getTime()),L=_[p],Se=L?Ut.filter(t=>t.listId===L.id):[],rs=Se.filter(t=>t.status!=="completed"),Ae=Se.filter(t=>t.status==="completed"),Ye=()=>{!E.trim()||!L||ze.mutate({listId:L.id,title:E.trim()})},ns=()=>{if(!G||!Z.trim())return;const t={title:Z.trim()};if(oe&&(t.notes=oe),V){const[n,k,Xe]=V.split("-").map(ds=>Number(ds));n&&k&&Xe&&(t.due=new Date(n,k-1,Xe).toISOString())}Ge.mutate({task:G,data:t}),ie!=="none"&&V&&Ce.mutate({title:Z.trim(),type:ie,dueDate:V,course:"",notes:oe||""})},os=t=>{ne(t),ye(t.title),be(t.notes||""),Ne(t.due?t.due.split("T")[0]:""),je("none")},is=t=>{if(!t)return null;const n=new Date(t);return he(n)?Y(n)?"Today":Ie(n)?"Tomorrow":fe(n)?"Overdue":qe(n,"MMM d"):null},Te=new Date,ls=`${Te.getFullYear()}-${String(Te.getMonth()+1).padStart(2,"0")}-${String(Te.getDate()).padStart(2,"0")}`,Ee=Ke.filter(t=>t.scheduled_date&&t.scheduled_date<=ls);return e.jsx(Ns,{children:e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs(I,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(K,{className:"border-b border-secondary/50",children:e.jsxs(Q,{className:"font-arcade text-xs flex items-center justify-between",children:[e.jsx("span",{children:"TODAY'S FOCUS"}),e.jsxs(Oe,{variant:"outline",className:"rounded-none text-xs",children:[Ee.length," tasks"]})]})}),e.jsxs(q,{className:"p-4",children:[Ee.length===0?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No tasks due today"}):e.jsx("ul",{className:"space-y-2 mb-4",children:Ee.slice(0,3).map(t=>e.jsxs("li",{className:"font-terminal text-xs flex items-center gap-2",children:[e.jsx(Me,{className:"w-2 h-2 text-primary"}),e.jsx("span",{className:"truncate",children:t.anchor_text||t.notes||"Untitled task"})]},t.id))}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full rounded-none font-arcade text-xs border-primary",onClick:()=>window.location.href="/brain",children:"Open Brain â†’"})]})]}),e.jsx(Bs,{tasks:Ke}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 grid-rows-[auto]",children:[e.jsxs(I,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(K,{className:"border-b border-primary/50 p-4",children:e.jsxs(Q,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ut,{className:"w-4 h-4"}),"STUDY_WHEEL"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-black/40 border border-secondary px-3 py-1","data-testid":"streak-display",children:[e.jsx(Qs,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-arcade text-sm text-white","data-testid":"text-streak",children:$t?.currentStreak||0}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"DAY STREAK"})]})]})}),e.jsx(q,{className:"p-4",children:F.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"font-terminal text-muted-foreground",children:"No courses added yet. Add courses to start the study wheel."}),e.jsxs(J,{open:A,onOpenChange:O,children:[e.jsx(_e,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"rounded-none border-primary font-arcade","data-testid":"button-add-first-course",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"ADD_COURSE"]})}),e.jsxs(ee,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(te,{children:[e.jsx(se,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(ae,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{placeholder:"Course name (e.g., Anatomy)",value:x,onChange:t=>N(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name"}),e.jsx(v,{placeholder:"Course number (e.g., PHTH 5301)",value:w,onChange:t=>y(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code"}),e.jsx(f,{onClick:Ve,disabled:!x.trim()||we.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course",children:"ADD"})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"font-terminal text-muted-foreground text-sm",children:"â–¶ NEXT UP"}),e.jsx("p",{className:"font-arcade text-2xl text-primary","data-testid":"text-current-course",children:le?.name||"LOADING..."})]}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-md mx-auto",children:[F.map((t,n)=>e.jsxs("div",{className:`flex items-center justify-between px-4 py-2 border transition-all duration-300 ${n===0?"border-primary bg-primary/20 scale-105":"border-secondary/30 opacity-70 hover:opacity-100"}`,style:{transform:n===0?"scale(1.02)":`scale(${1-n*.02})`,opacity:n===0?1:Math.max(.4,1-n*.15)},"data-testid":`wheel-course-${t.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-arcade text-xs w-6 h-6 flex items-center justify-center ${n===0?"bg-primary text-black":"bg-secondary/30 text-muted-foreground"}`,children:n+1}),e.jsx("span",{className:`font-terminal ${n===0?"text-primary font-bold":"text-muted-foreground"}`,children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Xt({id:t.id,name:t.name,code:t.code}),className:"p-1 hover:text-primary transition-colors text-muted-foreground","data-testid":`button-edit-course-${t.id}`,children:e.jsx(Ze,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>o({id:t.id,name:t.name}),className:"p-1 hover:text-destructive transition-colors text-muted-foreground","data-testid":`button-delete-course-${t.id}`,children:e.jsx(ce,{className:"w-4 h-4"})})]})]},t.id)),e.jsxs(J,{open:A,onOpenChange:O,children:[e.jsx(_e,{asChild:!0,children:e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-dashed border-secondary/50 text-muted-foreground hover:border-primary hover:text-primary transition-colors font-terminal","data-testid":"button-add-course-inline",children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"ADD COURSE"]})}),e.jsxs(ee,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(te,{children:[e.jsx(se,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(ae,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{placeholder:"Course name (e.g., Anatomy)",value:x,onChange:t=>N(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name-inline"}),e.jsx(v,{placeholder:"Course number (e.g., PHTH 5301)",value:w,onChange:t=>y(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code-inline"}),e.jsx(f,{onClick:Ve,disabled:!x.trim()||we.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course-inline",children:"ADD"})]})]})]})]}),e.jsx(J,{open:!!T,onOpenChange:t=>{t||(H(null),$(""),U(""))},children:e.jsxs(ee,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(te,{children:[e.jsx(se,{className:"font-arcade",children:"EDIT_COURSE"}),e.jsx(ae,{className:"sr-only",children:"Modify the course details."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{placeholder:"Course name",value:R,onChange:t=>$(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-name"}),e.jsx(v,{placeholder:"Course number (e.g., PHTH 5301)",value:re,onChange:t=>U(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-code"}),e.jsx(f,{onClick:Wt,disabled:!R.trim()||$e.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-edit-course",children:"SAVE"})]})]})}),e.jsx(da,{open:!!z,onOpenChange:t=>!t&&o(null),children:e.jsxs(Mt,{className:"bg-black border-2 border-destructive rounded-none translate-y-0",style:c,children:[e.jsxs(It,{children:[e.jsx(Pt,{className:"font-arcade text-destructive",children:"DELETE_COURSE"}),e.jsxs(Ot,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-primary font-bold",children:z?.name}),"? This action cannot be undone."]})]}),e.jsxs(qt,{className:"gap-2",children:[e.jsx(Ft,{className:"rounded-none border-secondary font-arcade text-xs",children:"CANCEL"}),e.jsx(Rt,{onClick:Yt,className:"rounded-none bg-destructive hover:bg-destructive/80 font-arcade text-xs text-white",children:"DELETE"})]})]})}),d?e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 border border-primary/50 bg-primary/5",children:[e.jsx("p",{className:"font-terminal text-sm text-muted-foreground",children:"Enter minutes studied:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{type:"number",min:"1",value:r,onChange:t=>l(t.target.value),placeholder:"30",className:"w-24 rounded-none border-primary bg-black text-center font-arcade text-xl","data-testid":"input-minutes",autoFocus:!0}),e.jsx("span",{className:"font-terminal text-muted-foreground",children:"MIN"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"outline",onClick:()=>{h(!1),l("")},className:"rounded-none font-arcade border-secondary","data-testid":"button-cancel-session",children:"CANCEL"}),e.jsx(f,{onClick:Vt,disabled:!r||parseInt(r)<1||Qe.isPending,className:"rounded-none font-arcade bg-primary","data-testid":"button-log-session",children:"LOG & ROTATE"})]})]}):e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(f,{onClick:()=>h(!0),className:"w-full rounded-none font-arcade px-8 py-6 text-lg bg-primary hover:bg-primary/80 shadow-[0_0_20px_rgba(255,0,0,0.3)] hover:shadow-[0_0_30px_rgba(255,0,0,0.5)] transition-shadow",disabled:!le,"data-testid":"button-start-session",children:[e.jsx(js,{className:"w-5 h-5 mr-2"}),"COMPLETE SESSION"]})})]})})]}),e.jsxs(I,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(K,{className:"border-b border-primary/50 p-4",children:e.jsxs(Q,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Fs,{className:"w-4 h-4"}),"TODAY"]})}),e.jsxs(q,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Sessions"}),e.jsx("span",{className:"font-arcade text-xl text-white","data-testid":"text-today-sessions",children:Be})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Minutes"}),e.jsx("span",{className:"font-arcade text-xl text-primary","data-testid":"text-today-minutes",children:Bt})]}),e.jsx("div",{className:`p-2 border ${ke?"border-success/50 bg-success/10":"border-urgent/50 bg-urgent/10"}`,children:e.jsx("span",{className:`font-terminal text-xs ${ke?"text-success":"text-urgent"}`,"data-testid":"text-today-status",children:ke?"STREAK MAINTAINED":"NO SESSIONS TODAY - STUDY NOW!"})})]})]}),e.jsxs(I,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(K,{className:"border-b border-primary/50 p-4",children:e.jsxs(Q,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(vs,{className:"w-4 h-4"}),"COURSES"]})}),e.jsx(q,{className:"p-4 max-h-64 overflow-y-auto",children:F.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"No courses yet"}):e.jsx("div",{className:"space-y-3",children:F.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-secondary/30 hover:border-secondary transition-colors","data-testid":`summary-course-${t.id}`,children:[e.jsx("span",{className:"font-terminal text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-terminal",children:[e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:"text-white font-bold","data-testid":`course-sessions-${t.id}`,children:t.totalSessions})," sess"]}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:g("font-bold",t.totalMinutes>0?"text-success":"text-muted-foreground"),"data-testid":`course-minutes-${t.id}`,children:t.totalMinutes})," min"]})]})]},t.id))})})]}),e.jsxs(I,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(K,{className:"border-b border-primary/50 p-4",children:e.jsxs(Q,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-4 h-4"}),"TASKS"]}),_.length>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>j(t=>(t-1+_.length)%_.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(Ps,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-terminal text-xs text-white bg-secondary/40 border border-secondary/60 px-2 py-0.5 min-w-[80px] text-center",children:L?.title||"Tasks"}),e.jsx("button",{onClick:()=>j(t=>(t+1)%_.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(Ls,{className:"w-4 h-4"})})]})]})}),e.jsx(q,{className:"p-4",children:_.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"Connect Google to see your tasks."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{placeholder:L?"Add task...":"Loading task lists...",value:E,onChange:t=>B(t.target.value),onKeyDown:t=>t.key==="Enter"&&Ye(),disabled:!L,className:"rounded-none border-secondary bg-black font-terminal text-sm h-8"}),e.jsx(f,{size:"sm",onClick:Ye,disabled:!L||!E.trim()||ze.isPending,className:"rounded-none font-arcade text-xs h-8 px-3",children:e.jsx(ge,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"max-h-52 overflow-y-auto pr-1",children:Se.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4 text-sm",children:"No tasks in this list."}):e.jsxs("div",{className:"space-y-2",children:[rs.map(t=>{const n=is(t.due),k=t.due&&fe(new Date(t.due))&&!Y(new Date(t.due));return e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-secondary/30 hover:border-primary/50 transition-colors group",children:[e.jsx("button",{onClick:()=>Ue.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded",children:e.jsx(Me,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-terminal text-sm text-white block truncate",children:t.title}),(n||t.notes)&&e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[n&&e.jsx("span",{className:g("font-terminal text-xs",k?"text-destructive":"text-muted-foreground"),children:n}),t.notes&&e.jsx("span",{className:"font-terminal text-xs text-muted-foreground truncate max-w-[120px]",children:t.notes})]})]}),e.jsx("button",{onClick:()=>os(t),className:"p-1 text-muted-foreground hover:text-primary opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(Ze,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>He.mutate(t),className:"p-1 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(ce,{className:"w-3 h-3"})})]},t.id)}),Ae.length>0&&e.jsxs("div",{className:"pt-2 border-t border-secondary/20 mt-2",children:[e.jsxs("p",{className:"font-terminal text-xs text-muted-foreground mb-2",children:["Completed (",Ae.length,")"]}),Ae.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 opacity-50 group hover:opacity-75 transition-opacity",children:[e.jsx("button",{onClick:()=>Ue.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded-none",children:e.jsx(Pe,{className:"w-4 h-4 text-success"})}),e.jsx("span",{className:"font-terminal text-sm text-muted-foreground line-through flex-1 truncate",children:t.title}),e.jsx("button",{onClick:()=>He.mutate(t),className:"p-1 text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ce,{className:"w-3 h-3"})})]},t.id))]})]})})]})})]}),e.jsx(J,{open:!!G,onOpenChange:t=>!t&&ne(null),children:e.jsxs(ee,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(te,{children:[e.jsx(se,{className:"font-arcade",children:"EDIT_TASK"}),e.jsx(ae,{className:"sr-only",children:"Edit the selected task."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Title"}),e.jsx(v,{placeholder:"Task title",value:Z,onChange:t=>ye(t.target.value),className:"rounded-none border-secondary bg-black font-terminal",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Notes"}),e.jsx(v,{placeholder:"Add notes...",value:oe,onChange:t=>be(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Due Date"}),e.jsx(v,{type:"date",value:V,onChange:t=>Ne(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Add to Deadlines"}),e.jsxs(ue,{value:ie,onValueChange:t=>je(t),children:[e.jsx(me,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(xe,{placeholder:"Select type"})}),e.jsxs(pe,{className:"bg-black border-secondary rounded-none",children:[e.jsx(S,{value:"none",children:"NONE - Don't add to deadlines"}),e.jsx(S,{value:"assignment",children:"ðŸ“‹ ASSIGNMENT"}),e.jsx(S,{value:"quiz",children:"â“ QUIZ"}),e.jsx(S,{value:"exam",children:"ðŸ“ EXAM"})]})]}),ie!=="none"&&!V&&e.jsx("p",{className:"font-terminal text-xs text-orange-400 mt-1",children:"âš  Set a due date to add to deadlines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"outline",onClick:()=>ne(null),className:"flex-1 rounded-none font-arcade border-secondary",children:"CANCEL"}),e.jsx(f,{onClick:ns,disabled:!Z.trim()||Ge.isPending,className:"flex-1 rounded-none font-arcade",children:"SAVE"})]})]})]})}),e.jsxs(I,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsxs(K,{className:"border-b border-primary/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ds,{className:"w-4 h-4"}),"DEADLINES"]}),e.jsxs(J,{open:Lt,onOpenChange:Re,children:[e.jsx(_e,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"sm",className:"rounded-none border-primary hover:bg-primary/20 font-arcade text-xs h-7 px-2",children:[e.jsx(ge,{className:"w-3 h-3 mr-1"}),"ADD"]})}),e.jsxs(ee,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(te,{children:[e.jsx(se,{className:"font-arcade",children:"ADD_DEADLINE"}),e.jsx(ae,{className:"sr-only",children:"Add a new academic deadline."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{placeholder:"Title (e.g., Midterm Exam)",value:b.title,onChange:t=>W({...b,title:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsxs(ue,{value:b.type,onValueChange:t=>W({...b,type:t}),children:[e.jsx(me,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(xe,{placeholder:"Select type"})}),e.jsxs(pe,{className:"bg-black border-secondary rounded-none",children:[e.jsx(S,{value:"assignment",children:"ðŸ“‹ Assignment"}),e.jsx(S,{value:"quiz",children:"â“ Quiz"}),e.jsx(S,{value:"exam",children:"ðŸ“ Exam"}),e.jsx(S,{value:"project",children:"ðŸ“‚ Project"})]})]}),e.jsxs(ue,{value:b.course||"none",onValueChange:t=>W({...b,course:t==="none"?"":t}),children:[e.jsx(me,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(xe,{placeholder:"Select course"})}),e.jsxs(pe,{className:"bg-black border-secondary rounded-none",children:[e.jsx(S,{value:"none",children:"No course"}),F.map(t=>e.jsx(S,{value:t.name,children:t.name},t.id))]})]}),e.jsx(v,{type:"date",value:b.dueDate,onChange:t=>W({...b,dueDate:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(v,{placeholder:"Notes (optional)",value:b.notes,onChange:t=>W({...b,notes:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(f,{onClick:Zt,disabled:!b.title?.trim()||!b.dueDate||Ce.isPending,className:"w-full rounded-none font-arcade",children:"ADD_DEADLINE"})]})]})]})]}),e.jsxs(ue,{value:ve,onValueChange:Kt,children:[e.jsx(me,{className:"rounded-none border-secondary bg-black/60 font-terminal text-xs h-7 w-full pl-3 pr-7",children:e.jsx(xe,{})}),e.jsxs(pe,{className:"bg-black border-secondary rounded-none min-w-[200px]",children:[e.jsx(S,{value:"all",children:"ALL COURSES"}),ss.map(t=>e.jsx(S,{value:t,children:t},t))]})]})]}),e.jsx(q,{className:"p-4 max-h-72 overflow-y-auto",children:De.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-8",children:"No deadlines yet. Add assignments, quizzes, and exams to track."}):e.jsx(ws,{className:"h-full",children:e.jsx("div",{className:"space-y-2",children:as.map(t=>{const n=Jt(t.dueDate),k=new Date(t.dueDate);return e.jsxs("div",{className:g("flex items-center gap-3 p-3 border transition-all",t.completed?"border-secondary/20 opacity-50":ts(n)),children:[e.jsx("button",{onClick:()=>Gt.mutate(t.id),className:"flex-shrink-0 p-0.5",children:t.completed?e.jsx(Pe,{className:"w-6 h-6 text-success"}):e.jsx(Me,{className:"w-6 h-6 text-primary/70 hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-lg flex-shrink-0",children:es(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:g("font-terminal text-sm",t.completed&&"line-through"),children:t.title}),de(t.course)&&e.jsx("div",{className:"font-terminal text-xs text-muted-foreground",children:de(t.course)})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:g("px-2 py-1 font-terminal text-xs font-bold text-white",t.completed?"bg-secondary/50":n==="overdue"?"bg-destructive":n==="today"?"bg-urgent":n==="tomorrow"?"bg-warning text-warning-foreground":n==="soon"?"bg-destructive/60":"bg-destructive/40"),children:he(k)?qe(k,"MMM d"):"No date"}),e.jsx("button",{onClick:()=>Ht.mutate(t.id),className:"p-1 text-muted-foreground hover:text-destructive transition-colors",children:e.jsx(ce,{className:"w-4 h-4"})})]})]},t.id)})})})})]}),Le.length>0?e.jsxs(I,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(K,{className:"border-b border-primary/50 p-4",children:e.jsxs(Q,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(et,{className:"w-4 h-4 text-orange-500"}),"WEAKNESS_QUEUE"]})}),e.jsx(q,{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:Le.map(t=>e.jsxs("div",{className:"px-3 py-1 border border-orange-500/50 bg-orange-500/10 font-terminal text-sm text-orange-300","data-testid":`weakness-${t.id}`,children:[t.topic,t.reason&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",t.reason,")"]})]},t.id))})})]}):e.jsx(I,{className:"bg-black/40 border border-secondary/30 rounded-none md:col-span-2",children:e.jsxs(q,{className:"p-3 flex items-center justify-center gap-2",children:[e.jsx(et,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"No flagged weaknesses â€” topics you struggle with will appear here."})]})})]})]})})}export{Da as default};
