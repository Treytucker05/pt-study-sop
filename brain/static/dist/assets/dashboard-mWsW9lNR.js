import{c as at,u as rt,a as nt,r as l,j as e,b as g,d as ot,e as is}from"./index-BlYeaXO_.js";import{u as j,a as m,B as f,G as ds,c as lt,R as cs,W as us,C as ms,T as xs,D as ps,b as it,P as gs,O as hs,d as fs,e as dt,f as T,L as ys,g as Y,h as Ee,i as X,j as Z,k as J,l as ee,I as N,m as Xe,n as ie,o as bs,p as Ns,q as js,S as vs}from"./layout-gVyc4PHV.js";import{C as E,a as O,b as R,B as Pe,c as _}from"./badge-DmmpeIpj.js";import{S as de,a as ce,b as ue,c as me,d as D}from"./select-QEDRTD4h.js";import{t as Ze,d as Ds,u as Cs,a as ws,D as ks,b as Ss,P as As,c as Ts,e as Es,C as _s,p as Ms,i as pe,f as H,g as Me,h as ge,j as qe,k as qs}from"./parseISO-B7QXKjO_.js";import{R as Is}from"./refresh-cw-Z9T9VaPY.js";import{P as ct}from"./play-CgZRxYgt.js";import{A as Ps,C as _e,T as Je}from"./triangle-alert-CvwHK1ZN.js";import{C as Ie}from"./circle-check-D1rv0Lur.js";import{P as xe}from"./plus-SiPH0dyv.js";import{C as Os}from"./clock-CBP5sTFV.js";import{C as Rs}from"./index-k9OrQCuz.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fs=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Ks=at("flame",Fs);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Qs=at("list-todo",Ls);function $s(s,a){const r=Ze(s),i=Ze(a),d=et(r,i),h=Math.abs(Ds(r,i));r.setDate(r.getDate()-d*h);const x=+(et(r,i)===-d),y=d*(h-x);return y===0?0:y}function et(s,a){const r=s.getFullYear()-a.getFullYear()||s.getMonth()-a.getMonth()||s.getDate()-a.getDate()||s.getHours()-a.getHours()||s.getMinutes()-a.getMinutes()||s.getSeconds()-a.getSeconds()||s.getMilliseconds()-a.getMilliseconds();return r<0?-1:r>0?1:r}const Us=[{id:"pending",label:"Queue",hint:"Drop here to keep it pending"},{id:"in_progress",label:"In Progress",hint:"Drop here to mark in-progress"}];function zs(s){if(!s)return null;try{const a=Ms(s);return pe(a)?H(a)?"Today":Me(a)?"Tomorrow":ge(a)&&!H(a)?"Overdue":qe(a,"MMM d"):s}catch{return s}}function ut(s){return(s.anchor_text||s.notes||"Untitled task").trim()}function tt({id:s,label:a,hint:r,count:i,children:d}){const{isOver:h,setNodeRef:x}=Ts({id:s,data:{type:"planner_column",status:s}});return e.jsxs("div",{ref:x,className:g("flex flex-col h-[360px] sm:h-[420px] border border-secondary/40 bg-black/30 rounded-none",h&&"border-primary/70 bg-primary/10"),"aria-label":a,children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-secondary/30",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"font-arcade text-[10px] text-primary/90 tracking-widest uppercase truncate",children:a}),e.jsx(Pe,{variant:"outline",className:"rounded-none text-[9px] px-1.5 py-0",children:i})]}),e.jsx("span",{className:"font-terminal text-[9px] text-muted-foreground hidden sm:inline",children:r})]}),e.jsx("div",{className:"flex-1 p-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:d})})]})}function st({task:s,primaryAction:a,onComplete:r}){const{attributes:i,listeners:d,setNodeRef:h,transform:x,isDragging:y}=Es({id:String(s.id),data:{type:"planner_task",taskId:s.id,status:s.status??"pending"}}),C={transform:_s.Translate.toString(x),opacity:y?.6:1},p=zs(s.scheduled_date),q=p==="Overdue";return e.jsx("div",{ref:h,style:C,className:g("group border border-secondary/40 bg-black/40 hover:border-primary/40 transition-colors rounded-none px-2.5 py-2",y&&"ring-2 ring-primary/50 border-primary/60"),"data-task-id":s.id,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5 text-muted-foreground hover:text-primary cursor-grab active:cursor-grabbing",...i,...d,"aria-label":"Drag task",children:e.jsx(ds,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"font-terminal text-xs text-white leading-snug flex-1 min-w-0",children:e.jsx("span",{className:"block truncate",children:ut(s)})}),p&&e.jsx("span",{className:g("font-terminal text-[10px] px-1.5 py-0.5 border rounded-none shrink-0",q?"text-red-400 border-red-500/40 bg-red-500/10":"text-muted-foreground border-secondary/40"),title:s.scheduled_date||void 0,children:p})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5",children:[s.course_name&&e.jsx("span",{className:"font-terminal text-[10px] text-cyan-300 border border-cyan-500/30 bg-cyan-500/10 px-1.5 py-0.5 rounded-none",children:s.course_name}),typeof s.planned_minutes=="number"&&s.planned_minutes>0&&e.jsxs("span",{className:"font-terminal text-[10px] text-muted-foreground border border-secondary/30 bg-secondary/10 px-1.5 py-0.5 rounded-none",children:[s.planned_minutes,"m"]}),typeof s.review_number=="number"&&s.review_number>0&&e.jsxs("span",{className:"font-terminal text-[10px] text-yellow-300 border border-yellow-500/30 bg-yellow-500/10 px-1.5 py-0.5 rounded-none",children:["R",s.review_number]}),typeof s.priority=="number"&&s.priority>0&&e.jsxs("span",{className:"font-terminal text-[10px] text-orange-300 border border-orange-500/30 bg-orange-500/10 px-1.5 py-0.5 rounded-none",children:["P",s.priority]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[e.jsxs(f,{size:"sm",variant:"ghost",className:"h-7 px-2 rounded-none font-terminal text-[10px]",onClick:w=>{w.stopPropagation(),a.onClick()},title:a.title,children:[a.icon,a.label]}),e.jsxs(f,{size:"sm",variant:"ghost",className:"h-7 px-2 rounded-none font-terminal text-[10px] text-green-400 hover:text-green-300",onClick:w=>{w.stopPropagation(),r()},title:"Complete",children:[e.jsx(Ie,{className:"w-3 h-3 mr-1"}),"Done"]})]})]})})}function Gs({tasks:s}){const a=rt(),{toast:r}=nt(),[i,d]=l.useState(null),h=Cs(ws(As,{activationConstraint:{distance:8}})),x=j({mutationFn:n=>m.planner.updateTask(n.id,n.data),onMutate:async n=>{await a.cancelQueries({queryKey:["planner-queue"]});const u=a.getQueryData(["planner-queue"]);return u&&a.setQueryData(["planner-queue"],()=>{const c=u.slice(),v=c.findIndex(U=>U.id===n.id);if(v===-1)return c;const k={...c[v],...n.data};return n.data.status==="completed"?c.filter(U=>U.id!==n.id):(c[v]=k,c)}),{previous:u}},onError:(n,u,c)=>{c?.previous&&a.setQueryData(["planner-queue"],c.previous),r({title:"Update failed",description:String(n),variant:"destructive"})},onSettled:()=>{a.invalidateQueries({queryKey:["planner-queue"]})}}),y=j({mutationFn:()=>m.planner.generate(),onSuccess:n=>{a.invalidateQueries({queryKey:["planner-queue"]}),r({title:"Planner refreshed",description:`${n.tasks_created??0} task(s) created`})},onError:n=>{r({title:"Generate failed",description:String(n),variant:"destructive"})}}),C=l.useMemo(()=>{const n=new Map;for(const u of s)n.set(String(u.id),u);return n},[s]),p=l.useMemo(()=>s.filter(n=>(n.status||"pending")==="pending"),[s]),q=l.useMemo(()=>s.filter(n=>(n.status||"pending")==="in_progress"),[s]),w=n=>[...n].sort((u,c)=>{const v=u.scheduled_date||"",k=c.scheduled_date||"";if(v!==k)return v.localeCompare(k);const L=typeof u.priority=="number"?u.priority:0;return(typeof c.priority=="number"?c.priority:0)-L}),Q=l.useMemo(()=>w(p),[p]),$=l.useMemo(()=>w(q),[q]),I=(n,u)=>{x.mutate({id:n,data:{status:u}})},F=n=>{x.mutate({id:n,data:{status:"completed"}})},te=n=>{d(null);const u=n.over?.data.current?.status,c=n.active?.id;if(!u||!c||!Us.some(L=>L.id===u))return;const v=C.get(String(c));!v||(v.status||"pending")===u||I(v.id,u)},K=i?C.get(i):null;return e.jsxs(E,{className:"bg-black/40 border-2 border-primary rounded-none",children:[e.jsx(O,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center justify-between gap-3",children:[e.jsx("span",{className:"truncate",children:"PLANNER_BOARD"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Pe,{variant:"outline",className:"rounded-none text-[9px]",children:[s.length," tasks"]}),e.jsxs(f,{size:"sm",variant:"outline",className:"rounded-none font-arcade text-xs border-primary",onClick:()=>y.mutate(),disabled:y.isPending,title:"Generate tasks from recent weak anchors",children:[e.jsx(Is,{className:g("w-3.5 h-3.5 mr-2",y.isPending&&"animate-spin")}),"Refresh"]})]})]})}),e.jsx(_,{className:"p-4",children:e.jsxs(ks,{sensors:h,onDragStart:n=>d(String(n.active.id)),onDragCancel:()=>d(null),onDragEnd:te,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(tt,{id:"pending",label:"Queue",hint:"Drag to start",count:p.length,children:Q.length===0?e.jsx("div",{className:"px-2 py-8 text-center font-terminal text-xs text-muted-foreground",children:"No pending tasks"}):Q.map(n=>e.jsx(st,{task:n,primaryAction:{label:"Start",title:"Start",icon:e.jsx(ct,{className:"w-3 h-3 mr-1"}),onClick:()=>I(n.id,"in_progress")},onComplete:()=>F(n.id)},n.id))}),e.jsx(tt,{id:"in_progress",label:"In Progress",hint:"Drag back to queue",count:q.length,children:$.length===0?e.jsx("div",{className:"px-2 py-8 text-center font-terminal text-xs text-muted-foreground",children:"Nothing in progress"}):$.map(n=>e.jsx(st,{task:n,primaryAction:{label:"Queue",title:"Move back to queue",icon:e.jsx(Ps,{className:"w-3 h-3 mr-1"}),onClick:()=>I(n.id,"pending")},onComplete:()=>F(n.id)},n.id))})]}),e.jsx(Ss,{children:K?e.jsx("div",{className:"opacity-90 rotate-1",children:e.jsx("div",{className:"border border-primary/60 bg-black/80 px-3 py-2 rounded-none shadow-2xl",children:e.jsx("div",{className:"font-terminal text-xs text-white truncate",children:ut(K)})})}):null})]})})]})}function Hs(s,a,{checkForDefaultPrevented:r=!0}={}){return function(d){if(s?.(d),r===!1||!d.defaultPrevented)return a?.(d)}}var Bs=Symbol("radix.slottable");function Vs(s){const a=({children:r})=>e.jsx(e.Fragment,{children:r});return a.displayName=`${s}.Slottable`,a.__radixId=Bs,a}var mt="AlertDialog",[Ws]=is(mt,[lt]),M=lt(),xt=s=>{const{__scopeAlertDialog:a,...r}=s,i=M(a);return e.jsx(cs,{...i,...r,modal:!0})};xt.displayName=mt;var Ys="AlertDialogTrigger",Xs=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(fs,{...d,...i,ref:a})});Xs.displayName=Ys;var Zs="AlertDialogPortal",pt=s=>{const{__scopeAlertDialog:a,...r}=s,i=M(a);return e.jsx(gs,{...i,...r})};pt.displayName=Zs;var Js="AlertDialogOverlay",gt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(hs,{...d,...i,ref:a})});gt.displayName=Js;var B="AlertDialogContent",[ea,ta]=Ws(B),sa=Vs("AlertDialogContent"),ht=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,children:i,...d}=s,h=M(r),x=l.useRef(null),y=ot(a,x),C=l.useRef(null);return e.jsx(us,{contentName:B,titleName:ft,docsSlug:"alert-dialog",children:e.jsx(ea,{scope:r,cancelRef:C,children:e.jsxs(ms,{role:"alertdialog",...h,...d,ref:y,onOpenAutoFocus:Hs(d.onOpenAutoFocus,p=>{p.preventDefault(),C.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(sa,{children:i}),e.jsx(ra,{contentRef:x})]})})})});ht.displayName=B;var ft="AlertDialogTitle",yt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(xs,{...d,...i,ref:a})});yt.displayName=ft;var bt="AlertDialogDescription",Nt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(ps,{...d,...i,ref:a})});Nt.displayName=bt;var aa="AlertDialogAction",jt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(it,{...d,...i,ref:a})});jt.displayName=aa;var vt="AlertDialogCancel",Dt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,{cancelRef:d}=ta(vt,r),h=M(r),x=ot(a,d);return e.jsx(it,{...h,...i,ref:x})});Dt.displayName=vt;var ra=({contentRef:s})=>{const a=`\`${B}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${B}\` by passing a \`${bt}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${B}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},na=xt,oa=pt,Ct=gt,wt=ht,kt=jt,St=Dt,At=yt,Tt=Nt;const la=na,ia=({children:s})=>e.jsx(oa,{container:typeof document<"u"?document.body:void 0,children:s}),Et=l.forwardRef(({className:s,...a},r)=>e.jsx(Ct,{className:g("fixed inset-0 dialog-overlay bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:r}));Et.displayName=Ct.displayName;const _t=l.forwardRef(({className:s,...a},r)=>e.jsxs(ia,{children:[e.jsx(Et,{}),e.jsx(wt,{ref:r,className:g("fixed dialog-center grid w-full max-w-lg max-h-[90vh] gap-4 overflow-y-auto border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg",s),...a})]}));_t.displayName=wt.displayName;const Mt=({className:s,...a})=>e.jsx("div",{className:g("flex flex-col space-y-2 text-center sm:text-left",s),...a});Mt.displayName="AlertDialogHeader";const qt=({className:s,...a})=>e.jsx("div",{className:g("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});qt.displayName="AlertDialogFooter";const It=l.forwardRef(({className:s,...a},r)=>e.jsx(At,{ref:r,className:g("text-lg font-semibold",s),...a}));It.displayName=At.displayName;const Pt=l.forwardRef(({className:s,...a},r)=>e.jsx(Tt,{ref:r,className:g("text-sm text-muted-foreground",s),...a}));Pt.displayName=Tt.displayName;const Ot=l.forwardRef(({className:s,...a},r)=>e.jsx(kt,{ref:r,className:g(dt(),s),...a}));Ot.displayName=kt.displayName;const Rt=l.forwardRef(({className:s,...a},r)=>e.jsx(St,{ref:r,className:g(dt({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));Rt.displayName=St.displayName;function ja(){const s=rt(),{toast:a}=nt(),[r,i]=l.useState(""),[d,h]=l.useState(!1),[x,y]=l.useState(""),[C,p]=l.useState(""),[q,w]=l.useState(!1),[Q,$]=l.useState(null),[I,F]=l.useState(""),[te,K]=l.useState(""),[n,u]=l.useState(null),c={zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},[v,k]=l.useState(0),[L,U]=l.useState(!1),[se,Oe]=l.useState(""),[he,ae]=l.useState(null),[V,fe]=l.useState(""),[re,ye]=l.useState(""),[z,be]=l.useState(""),[ne,Ne]=l.useState("none"),[Ft,Re]=l.useState(!1),[je,Kt]=l.useState("all"),[b,G]=l.useState({title:"",course:"",type:"assignment",dueDate:"",notes:""}),{data:Lt}=T({queryKey:["study-wheel","current"],queryFn:m.studyWheel.getCurrentCourse}),{data:P=[]}=T({queryKey:["courses","active"],queryFn:m.courses.getActive}),{data:Fe=[]}=T({queryKey:["sessions","today"],queryFn:m.todaySessions.get}),{data:Qt}=T({queryKey:["streak"],queryFn:m.streak.get}),{data:Ke=[]}=T({queryKey:["weakness-queue"],queryFn:m.weaknessQueue.get}),{data:ve=[]}=T({queryKey:["academic-deadlines"],queryFn:m.academicDeadlines.getAll}),{data:Le=[]}=T({queryKey:["planner-queue"],queryFn:m.planner.getQueue}),{data:S=[]}=T({queryKey:["google-task-lists"],queryFn:m.googleTasks.getLists}),{data:$t=[]}=T({queryKey:["google-tasks"],queryFn:m.googleTasks.getAll});l.useEffect(()=>{if(L||!S.length)return;const t=S.findIndex(o=>o.title?.toLowerCase().includes("school"));t>=0&&k(t),U(!0)},[S,L]);const Qe=j({mutationFn:({courseId:t,mins:o})=>m.studyWheel.completeSession(t,o),onSuccess:()=>{s.invalidateQueries({queryKey:["study-wheel"]}),s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["sessions"]}),s.invalidateQueries({queryKey:["streak"]}),i(""),h(!1),a({title:"Session logged!",description:"Wheel rotated to next course."})},onError:()=>{a({title:"Error",description:"Failed to log session. Please try again.",variant:"destructive"})}}),De=j({mutationFn:({name:t,code:o})=>m.courses.create({name:t,code:o,active:!0,position:P.length}),onSuccess:()=>{s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["study-wheel"]}),y(""),p(""),w(!1),a({title:"Course added!",description:"New course added to the wheel."})},onError:()=>{a({title:"Error",description:"Failed to add course. Please try again.",variant:"destructive"})}}),$e=j({mutationFn:({id:t,name:o,code:A})=>m.courses.update(t,{name:o,code:A}),onSuccess:()=>{s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["study-wheel"]}),$(null),F(""),K(""),a({title:"Course updated!",description:"Course name has been changed."})},onError:()=>{a({title:"Error",description:"Failed to update course. Please try again.",variant:"destructive"})}}),Ut=j({mutationFn:t=>m.courses.delete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["courses","active"]}),s.invalidateQueries({queryKey:["study-wheel","current"]}),s.invalidateQueries({queryKey:["study-wheel"]}),a({title:"Course deleted!",description:"Course has been removed from the wheel."})},onError:t=>{console.error("Delete failed:",t),a({title:"Error",description:"Failed to delete course. Please try again.",variant:"destructive"})}}),Ue=j({mutationFn:t=>m.googleTasks.update(t.id,t.listId,{status:t.status==="completed"?"needsAction":"completed"}),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]})}}),ze=j({mutationFn:t=>m.googleTasks.create(t.listId,{title:t.title,status:"needsAction"}),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]}),Oe("")}}),Ge=j({mutationFn:t=>m.googleTasks.update(t.task.id,t.task.listId,t.data),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]}),ae(null),fe(""),ye(""),be(""),Ne("none")}}),He=j({mutationFn:t=>m.googleTasks.delete(t.id,t.listId),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]})}}),Ce=j({mutationFn:t=>m.academicDeadlines.create(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]}),Re(!1),G({title:"",course:"",type:"assignment",dueDate:"",notes:""}),a({title:"Deadline added!",description:"Academic deadline has been created."})},onError:()=>{a({title:"Error",description:"Failed to add deadline.",variant:"destructive"})}}),zt=j({mutationFn:t=>m.academicDeadlines.toggleComplete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]})}}),Gt=j({mutationFn:t=>m.academicDeadlines.delete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]}),a({title:"Deadline removed",description:"Academic deadline has been deleted."})}}),oe=Lt?.currentCourse,Ht=Fe.reduce((t,o)=>t+(o.minutes||0),0),Be=Fe.length,we=Be>0,Bt=()=>{!oe||!r||parseInt(r)<1||Qe.mutate({courseId:oe.id,mins:parseInt(r)})},Ve=()=>{x.trim()&&De.mutate({name:x.trim(),code:C.trim()||void 0})},Vt=()=>{!Q||!I.trim()||$e.mutate({id:Q.id,name:I.trim(),code:te.trim()||null})},Wt=()=>{n&&(Ut.mutate(n.id),u(null))},Yt=t=>{$(t),F(t.name),K(t.code??"")},Xt=()=>{!b.title?.trim()||!b.dueDate||Ce.mutate(b)},Zt=t=>{const o=new Date(t);if(!pe(o))return"unknown";if(ge(o)&&!H(o))return"overdue";if(H(o))return"today";if(Me(o))return"tomorrow";const A=$s(o,new Date);return A<=3?"soon":A<=7?"week":"later"},Jt=t=>{switch(t){case"exam":return"ðŸ“";case"quiz":return"â“";case"project":return"ðŸ“‚";default:return"ðŸ“‹"}},es=t=>{switch(t){case"overdue":return"border-red-500 bg-red-500/20 text-red-400";case"today":return"border-orange-500 bg-orange-500/20 text-orange-400";case"tomorrow":return"border-yellow-500 bg-yellow-500/20 text-yellow-400";case"soon":return"border-secondary bg-secondary/20 text-muted-foreground";default:return"border-secondary/30 text-muted-foreground"}},We={};P.forEach(t=>{We[String(t.id)]=t.name});const le=t=>t?/^\d+$/.test(t)?We[t]||"":t:"",ts=[...new Set([...ve.map(t=>le(t.course)).filter(Boolean),...P.map(t=>t.name)])].sort(),ss=[...ve].filter(t=>je==="all"||le(t.course)===je).sort((t,o)=>t.completed!==o.completed?t.completed?1:-1:new Date(t.dueDate).getTime()-new Date(o.dueDate).getTime()),W=S[v],ke=W?$t.filter(t=>t.listId===W.id):[],as=ke.filter(t=>t.status!=="completed"),Se=ke.filter(t=>t.status==="completed"),Ye=()=>{!se.trim()||!W||ze.mutate({listId:W.id,title:se.trim()})},rs=()=>{if(!he||!V.trim())return;const t={title:V.trim()};re&&(t.notes=re),z&&(t.due=new Date(z).toISOString()),Ge.mutate({task:he,data:t}),ne!=="none"&&z&&Ce.mutate({title:V.trim(),type:ne,dueDate:z,course:"",notes:re||""})},ns=t=>{ae(t),fe(t.title),ye(t.notes||""),be(t.due?t.due.split("T")[0]:""),Ne("none")},os=t=>{if(!t)return null;const o=new Date(t);return pe(o)?H(o)?"Today":Me(o)?"Tomorrow":ge(o)?"Overdue":qe(o,"MMM d"):null},Ae=new Date,ls=`${Ae.getFullYear()}-${String(Ae.getMonth()+1).padStart(2,"0")}-${String(Ae.getDate()).padStart(2,"0")}`,Te=Le.filter(t=>t.scheduled_date&&t.scheduled_date<=ls);return e.jsx(ys,{children:e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs(E,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(O,{className:"p-3 border-b border-secondary/50",children:e.jsxs(R,{className:"font-arcade text-xs flex items-center justify-between",children:[e.jsx("span",{children:"TODAY'S FOCUS"}),e.jsxs(Pe,{variant:"outline",className:"rounded-none text-[9px]",children:[Te.length," tasks"]})]})}),e.jsxs(_,{className:"p-4",children:[Te.length===0?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No tasks due today"}):e.jsx("ul",{className:"space-y-2 mb-4",children:Te.slice(0,3).map(t=>e.jsxs("li",{className:"font-terminal text-xs flex items-center gap-2",children:[e.jsx(_e,{className:"w-2 h-2 text-primary"}),e.jsx("span",{className:"truncate",children:t.anchor_text||t.notes||"Untitled task"})]},t.id))}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full rounded-none font-arcade text-xs border-primary",onClick:()=>window.location.href="/brain",children:"Open Brain â†’"})]})]}),e.jsx(Gs,{tasks:Le}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 grid-rows-[auto]",children:[e.jsxs(E,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(O,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"w-4 h-4"}),"STUDY_WHEEL"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-black/40 border border-secondary px-3 py-1","data-testid":"streak-display",children:[e.jsx(Ks,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-arcade text-sm text-white","data-testid":"text-streak",children:Qt?.currentStreak||0}),e.jsx("span",{className:"font-terminal text-[10px] text-muted-foreground",children:"DAY STREAK"})]})]})}),e.jsx(_,{className:"p-4",children:P.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"font-terminal text-muted-foreground",children:"No courses added yet. Add courses to start the study wheel."}),e.jsxs(Y,{open:q,onOpenChange:w,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"rounded-none border-primary font-arcade","data-testid":"button-add-first-course",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"ADD_COURSE"]})}),e.jsxs(X,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(Z,{children:[e.jsx(J,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(ee,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(N,{placeholder:"Course name (e.g., Anatomy)",value:x,onChange:t=>y(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name"}),e.jsx(N,{placeholder:"Course number (e.g., PHTH 5301)",value:C,onChange:t=>p(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code"}),e.jsx(f,{onClick:Ve,disabled:!x.trim()||De.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course",children:"ADD"})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"font-terminal text-muted-foreground text-sm",children:"â–¶ NEXT UP"}),e.jsx("p",{className:"font-arcade text-2xl text-primary","data-testid":"text-current-course",children:oe?.name||"LOADING..."})]}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-md mx-auto",children:[P.map((t,o)=>e.jsxs("div",{className:`flex items-center justify-between px-4 py-2 border transition-all duration-300 ${o===0?"border-primary bg-primary/20 scale-105":"border-secondary/30 opacity-70 hover:opacity-100"}`,style:{transform:o===0?"scale(1.02)":`scale(${1-o*.02})`,opacity:o===0?1:Math.max(.4,1-o*.15)},"data-testid":`wheel-course-${t.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-arcade text-xs w-6 h-6 flex items-center justify-center ${o===0?"bg-primary text-black":"bg-secondary/30 text-muted-foreground"}`,children:o+1}),e.jsx("span",{className:`font-terminal ${o===0?"text-primary font-bold":"text-muted-foreground"}`,children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Yt({id:t.id,name:t.name,code:t.code}),className:"p-1 hover:text-primary transition-colors text-muted-foreground","data-testid":`button-edit-course-${t.id}`,children:e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>u({id:t.id,name:t.name}),className:"p-1 hover:text-red-500 transition-colors text-muted-foreground","data-testid":`button-delete-course-${t.id}`,children:e.jsx(ie,{className:"w-4 h-4"})})]})]},t.id)),e.jsxs(Y,{open:q,onOpenChange:w,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-dashed border-secondary/50 text-muted-foreground hover:border-primary hover:text-primary transition-colors font-terminal","data-testid":"button-add-course-inline",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"ADD COURSE"]})}),e.jsxs(X,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(Z,{children:[e.jsx(J,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(ee,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(N,{placeholder:"Course name (e.g., Anatomy)",value:x,onChange:t=>y(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name-inline"}),e.jsx(N,{placeholder:"Course number (e.g., PHTH 5301)",value:C,onChange:t=>p(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code-inline"}),e.jsx(f,{onClick:Ve,disabled:!x.trim()||De.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course-inline",children:"ADD"})]})]})]})]}),e.jsx(Y,{open:!!Q,onOpenChange:t=>{t||($(null),F(""),K(""))},children:e.jsxs(X,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(Z,{children:[e.jsx(J,{className:"font-arcade",children:"EDIT_COURSE"}),e.jsx(ee,{className:"sr-only",children:"Modify the course details."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(N,{placeholder:"Course name",value:I,onChange:t=>F(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-name"}),e.jsx(N,{placeholder:"Course number (e.g., PHTH 5301)",value:te,onChange:t=>K(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-code"}),e.jsx(f,{onClick:Vt,disabled:!I.trim()||$e.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-edit-course",children:"SAVE"})]})]})}),e.jsx(la,{open:!!n,onOpenChange:t=>!t&&u(null),children:e.jsxs(_t,{className:"bg-black border-2 border-red-500 rounded-none translate-y-0",style:c,children:[e.jsxs(Mt,{children:[e.jsx(It,{className:"font-arcade text-red-500",children:"DELETE_COURSE"}),e.jsxs(Pt,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-primary font-bold",children:n?.name}),"? This action cannot be undone."]})]}),e.jsxs(qt,{className:"gap-2",children:[e.jsx(Rt,{className:"rounded-none border-secondary font-arcade text-xs",children:"CANCEL"}),e.jsx(Ot,{onClick:Wt,className:"rounded-none bg-red-500 hover:bg-red-600 font-arcade text-xs text-white",children:"DELETE"})]})]})}),d?e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 border border-primary/50 bg-primary/5",children:[e.jsx("p",{className:"font-terminal text-sm text-muted-foreground",children:"Enter minutes studied:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(N,{type:"number",min:"1",value:r,onChange:t=>i(t.target.value),placeholder:"30",className:"w-24 rounded-none border-primary bg-black text-center font-arcade text-xl","data-testid":"input-minutes",autoFocus:!0}),e.jsx("span",{className:"font-terminal text-muted-foreground",children:"MIN"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"outline",onClick:()=>{h(!1),i("")},className:"rounded-none font-arcade border-secondary","data-testid":"button-cancel-session",children:"CANCEL"}),e.jsx(f,{onClick:Bt,disabled:!r||parseInt(r)<1||Qe.isPending,className:"rounded-none font-arcade bg-primary","data-testid":"button-log-session",children:"LOG & ROTATE"})]})]}):e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(f,{onClick:()=>h(!0),className:"w-full rounded-none font-arcade px-8 py-6 text-lg bg-primary hover:bg-primary/80 shadow-[0_0_20px_rgba(255,0,0,0.3)] hover:shadow-[0_0_30px_rgba(255,0,0,0.5)] transition-shadow",disabled:!oe,"data-testid":"button-start-session",children:[e.jsx(bs,{className:"w-5 h-5 mr-2"}),"COMPLETE SESSION"]})})]})})]}),e.jsxs(E,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(O,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Os,{className:"w-4 h-4"}),"TODAY"]})}),e.jsxs(_,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Sessions"}),e.jsx("span",{className:"font-arcade text-xl text-white","data-testid":"text-today-sessions",children:Be})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Minutes"}),e.jsx("span",{className:"font-arcade text-xl text-primary","data-testid":"text-today-minutes",children:Ht})]}),e.jsx("div",{className:`p-2 border ${we?"border-green-500/50 bg-green-500/10":"border-orange-500/50 bg-orange-500/10"}`,children:e.jsx("span",{className:`font-terminal text-xs ${we?"text-green-400":"text-orange-400"}`,"data-testid":"text-today-status",children:we?"STREAK MAINTAINED":"NO SESSIONS TODAY - STUDY NOW!"})})]})]}),e.jsxs(E,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(O,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ns,{className:"w-4 h-4"}),"COURSES"]})}),e.jsx(_,{className:"p-4 max-h-64 overflow-y-auto",children:P.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"No courses yet"}):e.jsx("div",{className:"space-y-3",children:P.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-secondary/30 hover:border-secondary transition-colors","data-testid":`summary-course-${t.id}`,children:[e.jsx("span",{className:"font-terminal text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-terminal",children:[e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:"text-white font-bold","data-testid":`course-sessions-${t.id}`,children:t.totalSessions})," sess"]}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:g("font-bold",t.totalMinutes>0?"text-green-400":"text-muted-foreground"),"data-testid":`course-minutes-${t.id}`,children:t.totalMinutes})," min"]})]})]},t.id))})})]}),e.jsxs(E,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(O,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"w-4 h-4"}),"TASKS"]}),S.length>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>k(t=>(t-1+S.length)%S.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(qs,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-terminal text-xs text-white bg-secondary/40 border border-secondary/60 px-2 py-0.5 min-w-[80px] text-center",children:W?.title||"Tasks"}),e.jsx("button",{onClick:()=>k(t=>(t+1)%S.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(Rs,{className:"w-4 h-4"})})]})]})}),e.jsx(_,{className:"p-4",children:S.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"Connect Google to see your tasks."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(N,{placeholder:"Add task...",value:se,onChange:t=>Oe(t.target.value),onKeyDown:t=>t.key==="Enter"&&Ye(),className:"rounded-none border-secondary bg-black font-terminal text-sm h-8"}),e.jsx(f,{size:"sm",onClick:Ye,disabled:!se.trim()||ze.isPending,className:"rounded-none font-arcade text-xs h-8 px-3",children:e.jsx(xe,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"max-h-52 overflow-y-auto pr-1",children:ke.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4 text-sm",children:"No tasks in this list."}):e.jsxs("div",{className:"space-y-2",children:[as.map(t=>{const o=os(t.due),A=t.due&&ge(new Date(t.due))&&!H(new Date(t.due));return e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-secondary/30 hover:border-primary/50 transition-colors group",children:[e.jsx("button",{onClick:()=>Ue.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded",children:e.jsx(_e,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-terminal text-sm text-white block truncate",children:t.title}),(o||t.notes)&&e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[o&&e.jsx("span",{className:g("font-terminal text-xs",A?"text-red-400":"text-muted-foreground"),children:o}),t.notes&&e.jsx("span",{className:"font-terminal text-xs text-muted-foreground truncate max-w-[120px]",children:t.notes})]})]}),e.jsx("button",{onClick:()=>ns(t),className:"p-1 text-muted-foreground hover:text-primary opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(Xe,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>He.mutate(t),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(ie,{className:"w-3 h-3"})})]},t.id)}),Se.length>0&&e.jsxs("div",{className:"pt-2 border-t border-secondary/20 mt-2",children:[e.jsxs("p",{className:"font-terminal text-xs text-muted-foreground mb-2",children:["Completed (",Se.length,")"]}),Se.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 opacity-50 group hover:opacity-75 transition-opacity",children:[e.jsx("button",{onClick:()=>Ue.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded-none",children:e.jsx(Ie,{className:"w-4 h-4 text-green-500"})}),e.jsx("span",{className:"font-terminal text-sm text-muted-foreground line-through flex-1 truncate",children:t.title}),e.jsx("button",{onClick:()=>He.mutate(t),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(ie,{className:"w-3 h-3"})})]},t.id))]})]})})]})})]}),e.jsx(Y,{open:!!he,onOpenChange:t=>!t&&ae(null),children:e.jsxs(X,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(Z,{children:[e.jsx(J,{className:"font-arcade",children:"EDIT_TASK"}),e.jsx(ee,{className:"sr-only",children:"Edit the selected task."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Title"}),e.jsx(N,{placeholder:"Task title",value:V,onChange:t=>fe(t.target.value),className:"rounded-none border-secondary bg-black font-terminal",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Notes"}),e.jsx(N,{placeholder:"Add notes...",value:re,onChange:t=>ye(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Due Date"}),e.jsx(N,{type:"date",value:z,onChange:t=>be(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Add to Deadlines"}),e.jsxs(de,{value:ne,onValueChange:t=>Ne(t),children:[e.jsx(ce,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ue,{placeholder:"Select type"})}),e.jsxs(me,{className:"bg-black border-secondary rounded-none",children:[e.jsx(D,{value:"none",children:"NONE - Don't add to deadlines"}),e.jsx(D,{value:"assignment",children:"ðŸ“‹ ASSIGNMENT"}),e.jsx(D,{value:"quiz",children:"â“ QUIZ"}),e.jsx(D,{value:"exam",children:"ðŸ“ EXAM"})]})]}),ne!=="none"&&!z&&e.jsx("p",{className:"font-terminal text-xs text-orange-400 mt-1",children:"âš  Set a due date to add to deadlines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"outline",onClick:()=>ae(null),className:"flex-1 rounded-none font-arcade border-secondary",children:"CANCEL"}),e.jsx(f,{onClick:rs,disabled:!V.trim()||Ge.isPending,className:"flex-1 rounded-none font-arcade",children:"SAVE"})]})]})]})}),e.jsxs(E,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsxs(O,{className:"border-b border-primary/50 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(js,{className:"w-4 h-4"}),"DEADLINES"]}),e.jsxs(Y,{open:Ft,onOpenChange:Re,children:[e.jsx(Ee,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"sm",className:"rounded-none border-primary hover:bg-primary/20 font-arcade text-[10px] h-7 px-2",children:[e.jsx(xe,{className:"w-3 h-3 mr-1"}),"ADD"]})}),e.jsxs(X,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:c,children:[e.jsxs(Z,{children:[e.jsx(J,{className:"font-arcade",children:"ADD_DEADLINE"}),e.jsx(ee,{className:"sr-only",children:"Add a new academic deadline."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(N,{placeholder:"Title (e.g., Midterm Exam)",value:b.title,onChange:t=>G({...b,title:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsxs(de,{value:b.type,onValueChange:t=>G({...b,type:t}),children:[e.jsx(ce,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ue,{placeholder:"Select type"})}),e.jsxs(me,{className:"bg-black border-secondary rounded-none",children:[e.jsx(D,{value:"assignment",children:"ðŸ“‹ Assignment"}),e.jsx(D,{value:"quiz",children:"â“ Quiz"}),e.jsx(D,{value:"exam",children:"ðŸ“ Exam"}),e.jsx(D,{value:"project",children:"ðŸ“‚ Project"})]})]}),e.jsxs(de,{value:b.course||"none",onValueChange:t=>G({...b,course:t==="none"?"":t}),children:[e.jsx(ce,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ue,{placeholder:"Select course"})}),e.jsxs(me,{className:"bg-black border-secondary rounded-none",children:[e.jsx(D,{value:"none",children:"No course"}),P.map(t=>e.jsx(D,{value:t.name,children:t.name},t.id))]})]}),e.jsx(N,{type:"date",value:b.dueDate,onChange:t=>G({...b,dueDate:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(N,{placeholder:"Notes (optional)",value:b.notes,onChange:t=>G({...b,notes:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(f,{onClick:Xt,disabled:!b.title?.trim()||!b.dueDate||Ce.isPending,className:"w-full rounded-none font-arcade",children:"ADD_DEADLINE"})]})]})]})]}),e.jsxs(de,{value:je,onValueChange:Kt,children:[e.jsx(ce,{className:"rounded-none border-secondary bg-black/60 font-terminal text-xs h-7 w-full pl-3 pr-7",children:e.jsx(ue,{})}),e.jsxs(me,{className:"bg-black border-secondary rounded-none min-w-[200px]",children:[e.jsx(D,{value:"all",children:"ALL COURSES"}),ts.map(t=>e.jsx(D,{value:t,children:t},t))]})]})]}),e.jsx(_,{className:"p-4 max-h-72 overflow-y-auto",children:ve.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-8",children:"No deadlines yet. Add assignments, quizzes, and exams to track."}):e.jsx(vs,{className:"h-full",children:e.jsx("div",{className:"space-y-2",children:ss.map(t=>{const o=Zt(t.dueDate),A=new Date(t.dueDate);return e.jsxs("div",{className:g("flex items-center gap-3 p-3 border transition-all",t.completed?"border-secondary/20 opacity-50":es(o)),children:[e.jsx("button",{onClick:()=>zt.mutate(t.id),className:"flex-shrink-0 p-0.5",children:t.completed?e.jsx(Ie,{className:"w-6 h-6 text-green-500"}):e.jsx(_e,{className:"w-6 h-6 text-primary/70 hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-lg flex-shrink-0",children:Jt(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:g("font-terminal text-sm",t.completed&&"line-through"),children:t.title}),le(t.course)&&e.jsx("div",{className:"font-terminal text-xs text-muted-foreground",children:le(t.course)})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:g("px-2 py-1 font-terminal text-xs font-bold text-white",t.completed?"bg-secondary/50":o==="overdue"?"bg-red-600":o==="today"?"bg-orange-600":o==="tomorrow"?"bg-yellow-600":o==="soon"?"bg-red-800":"bg-red-900"),children:pe(A)?qe(A,"MMM d"):"No date"}),e.jsx("button",{onClick:()=>Gt.mutate(t.id),className:"p-1 text-muted-foreground hover:text-red-500 transition-colors",children:e.jsx(ie,{className:"w-4 h-4"})})]})]},t.id)})})})})]}),Ke.length>0?e.jsxs(E,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(O,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Je,{className:"w-4 h-4 text-orange-500"}),"WEAKNESS_QUEUE"]})}),e.jsx(_,{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:Ke.map(t=>e.jsxs("div",{className:"px-3 py-1 border border-orange-500/50 bg-orange-500/10 font-terminal text-sm text-orange-300","data-testid":`weakness-${t.id}`,children:[t.topic,t.reason&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",t.reason,")"]})]},t.id))})})]}):e.jsx(E,{className:"bg-black/40 border border-secondary/30 rounded-none md:col-span-2",children:e.jsxs(_,{className:"p-3 flex items-center justify-center gap-2",children:[e.jsx(Je,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"No flagged weaknesses â€” topics you struggle with will appear here."})]})})]})]})})}export{ja as default};
