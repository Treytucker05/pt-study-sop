import{c as W,u as Y,a as B,j as t,r as l,d as D,e as U,b as c}from"./index-CCotL82y.js";import{u as A,a as N,h as m,m as j,R as V,W as X,n as J,o as Z,p as ee,q as _,r as te,O as ae,s as se,t as C}from"./layout-B966LvX-.js";import{C as oe,a as re,b as ne,c as le}from"./card-Dvno1_1I.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ie=W("circle",ie);function Me({filter:e="all"}){const a=Y(),{toast:s}=B(),{data:r=[],isLoading:n}=A({queryKey:["planner","queue"],queryFn:m.planner.getQueue}),{data:p}=A({queryKey:["planner","settings"],queryFn:m.planner.getSettings}),d=N({mutationFn:m.planner.generate,onSuccess:o=>{s({title:"Tasks generated",description:`${o.tasks_created} review tasks created`}),a.invalidateQueries({queryKey:["planner","queue"]})},onError:o=>{s({title:"Generation failed",description:o.message,variant:"destructive"})}}),f=N({mutationFn:o=>m.planner.updateTask(o,{status:"completed"}),onSuccess:()=>{a.invalidateQueries({queryKey:["planner","queue"]})}}),x=N({mutationFn:o=>m.planner.updateTask(o,{status:"deferred"}),onSuccess:()=>{a.invalidateQueries({queryKey:["planner","queue"]})}}),u=N({mutationFn:o=>m.planner.updateSettings(o),onSuccess:()=>{a.invalidateQueries({queryKey:["planner","settings"]}),s({title:"Settings saved"})}}),h=new Date().toISOString().slice(0,10),y=r.filter(o=>o.scheduled_date&&o.scheduled_date<=h),v=r.filter(o=>!o.scheduled_date||o.scheduled_date>h);return t.jsxs(oe,{className:"bg-black/40 border-2 border-primary rounded-none",children:[t.jsx(re,{className:"border-b border-primary/50 p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs(ne,{className:"font-arcade text-sm flex items-center gap-2",children:[t.jsx("div",{className:"w-4 h-4 bg-primary inline-block"}),"NEXT_ACTIONS"]}),e==="all"&&t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"font-terminal text-xs text-muted-foreground",children:["Source: ",p?.calendar_source==="google"?"Google":"Local"]}),t.jsx("button",{onClick:()=>u.mutate({calendar_source:p?.calendar_source==="google"?"local":"google"}),className:"px-2 py-1 border border-primary/30 text-xs font-arcade text-muted-foreground hover:text-white rounded-none",children:"TOGGLE"}),t.jsx("button",{onClick:()=>d.mutate(),disabled:d.isPending,className:"px-3 py-1 bg-primary text-black font-arcade text-xs rounded-none hover:bg-primary/80 disabled:opacity-50",children:d.isPending?"...":"GENERATE"})]})]})}),t.jsxs(le,{className:"p-4 space-y-4",children:[n&&t.jsx("div",{className:"font-terminal text-xs text-muted-foreground",children:"Loading queue..."}),!n&&r.length===0&&t.jsxs("div",{className:"font-terminal text-xs text-muted-foreground text-center py-4",children:["No pending tasks. ",e==="all"?"Click GENERATE to create review tasks from weak anchors.":""]}),!n&&e==="today"&&r.length>0&&y.length===0&&t.jsxs("div",{className:"font-terminal text-xs text-muted-foreground text-center py-4",children:["No tasks due today. ",v.length," upcoming."]}),y.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"font-arcade text-xs text-primary mb-2",children:["TODAY (",y.length,")"]}),t.jsx("div",{className:"space-y-2",children:y.map(o=>t.jsx(b,{task:o,onComplete:()=>f.mutate(o.id),onDefer:()=>x.mutate(o.id)},o.id))})]}),e==="all"&&v.length>0&&t.jsxs("div",{children:[t.jsxs("div",{className:"font-arcade text-xs text-muted-foreground mb-2",children:["UPCOMING (",v.length,")"]}),t.jsx("div",{className:"space-y-2",children:v.slice(0,10).map(o=>t.jsx(b,{task:o,onComplete:()=>f.mutate(o.id),onDefer:()=>x.mutate(o.id)},o.id))})]})]})]})}function b({task:e,onComplete:a,onDefer:s}){return t.jsxs("div",{className:"flex items-center justify-between border border-primary/20 bg-black/30 p-2",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"font-terminal text-xs text-white truncate",children:[e.review_number?`R${e.review_number}`:""," ",e.anchor_text||e.notes||"Untitled"]}),t.jsxs("div",{className:"font-terminal text-xs text-muted-foreground flex gap-3",children:[e.course_name&&t.jsx("span",{children:e.course_name}),e.scheduled_date&&t.jsx("span",{children:e.scheduled_date}),e.planned_minutes&&t.jsxs("span",{children:[e.planned_minutes,"m"]})]})]}),t.jsxs("div",{className:"flex gap-1 ml-2",children:[t.jsx("button",{onClick:a,className:"px-2 py-1 text-xs font-arcade bg-green-900/50 text-green-400 border border-green-500/30 hover:bg-green-900 rounded-none",children:"DONE"}),t.jsx("button",{onClick:s,className:"px-2 py-1 text-xs font-arcade bg-yellow-900/50 text-yellow-400 border border-yellow-500/30 hover:bg-yellow-900 rounded-none",children:"DEFER"})]})]})}function de(e,a,{checkForDefaultPrevented:s=!0}={}){return function(n){if(e?.(n),s===!1||!n.defaultPrevented)return a?.(n)}}var ce=Symbol("radix.slottable");function ue(e){const a=({children:s})=>t.jsx(t.Fragment,{children:s});return a.displayName=`${e}.Slottable`,a.__radixId=ce,a}var w="AlertDialog",[pe]=U(w,[j]),i=j(),E=e=>{const{__scopeAlertDialog:a,...s}=e,r=i(a);return t.jsx(V,{...r,...s,modal:!0})};E.displayName=w;var me="AlertDialogTrigger",ge=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...r}=e,n=i(s);return t.jsx(se,{...n,...r,ref:a})});ge.displayName=me;var xe="AlertDialogPortal",R=e=>{const{__scopeAlertDialog:a,...s}=e,r=i(a);return t.jsx(te,{...r,...s})};R.displayName=xe;var fe="AlertDialogOverlay",S=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...r}=e,n=i(s);return t.jsx(ae,{...n,...r,ref:a})});S.displayName=fe;var g="AlertDialogContent",[ye,ve]=pe(g),Ne=ue("AlertDialogContent"),T=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,children:r,...n}=e,p=i(s),d=l.useRef(null),f=D(a,d),x=l.useRef(null);return t.jsx(X,{contentName:g,titleName:O,docsSlug:"alert-dialog",children:t.jsx(ye,{scope:s,cancelRef:x,children:t.jsxs(J,{role:"alertdialog",...p,...n,ref:f,onOpenAutoFocus:de(n.onOpenAutoFocus,u=>{u.preventDefault(),x.current?.focus({preventScroll:!0})}),onPointerDownOutside:u=>u.preventDefault(),onInteractOutside:u=>u.preventDefault(),children:[t.jsx(Ne,{children:r}),t.jsx(Ae,{contentRef:d})]})})})});T.displayName=g;var O="AlertDialogTitle",P=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...r}=e,n=i(s);return t.jsx(Z,{...n,...r,ref:a})});P.displayName=O;var q="AlertDialogDescription",I=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...r}=e,n=i(s);return t.jsx(ee,{...n,...r,ref:a})});I.displayName=q;var he="AlertDialogAction",M=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...r}=e,n=i(s);return t.jsx(_,{...n,...r,ref:a})});M.displayName=he;var $="AlertDialogCancel",F=l.forwardRef((e,a)=>{const{__scopeAlertDialog:s,...r}=e,{cancelRef:n}=ve($,s),p=i(s),d=D(a,n);return t.jsx(_,{...p,...r,ref:d})});F.displayName=$;var Ae=({contentRef:e})=>{const a=`\`${g}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${g}\` by passing a \`${q}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${g}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,e]),null},be=E,De=R,L=S,G=T,k=M,Q=F,K=P,z=I;const $e=be,je=({children:e})=>t.jsx(De,{container:typeof document<"u"?document.body:void 0,children:e}),H=l.forwardRef(({className:e,...a},s)=>t.jsx(L,{className:c("fixed inset-0 z-[100004] bg-black/80 opacity-100 pointer-events-none data-[state=open]:opacity-100 data-[state=closed]:opacity-0 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:s}));H.displayName=L.displayName;const _e=l.forwardRef(({className:e,...a},s)=>t.jsxs(je,{children:[t.jsx(H,{}),t.jsx(G,{ref:s,className:c("fixed left-[50%] top-[50%] z-[100005] grid w-full max-w-lg max-h-[90vh] translate-x-[-50%] translate-y-[-50%] gap-4 overflow-y-auto border bg-background p-6 shadow-lg opacity-100 pointer-events-auto data-[state=open]:opacity-100 data-[state=closed]:opacity-0 duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));_e.displayName=G.displayName;const Ce=({className:e,...a})=>t.jsx("div",{className:c("flex flex-col space-y-2 text-center sm:text-left",e),...a});Ce.displayName="AlertDialogHeader";const we=({className:e,...a})=>t.jsx("div",{className:c("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});we.displayName="AlertDialogFooter";const Ee=l.forwardRef(({className:e,...a},s)=>t.jsx(K,{ref:s,className:c("text-lg font-semibold",e),...a}));Ee.displayName=K.displayName;const Re=l.forwardRef(({className:e,...a},s)=>t.jsx(z,{ref:s,className:c("text-sm text-muted-foreground",e),...a}));Re.displayName=z.displayName;const Se=l.forwardRef(({className:e,...a},s)=>t.jsx(k,{ref:s,className:c(C(),e),...a}));Se.displayName=k.displayName;const Te=l.forwardRef(({className:e,...a},s)=>t.jsx(Q,{ref:s,className:c(C({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));Te.displayName=Q.displayName;export{$e as A,Ie as C,Me as N,_e as a,Ce as b,Ee as c,Re as d,we as e,Te as f,Se as g};
