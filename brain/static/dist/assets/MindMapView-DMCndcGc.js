import{c as K,j as e,b as I,r as a,a as Se}from"./index-Ney09JIT.js";import{M as oe,N as ne,H as R,P as _,d as Ee,L as Me,A as De,e as Oe,u as Le,a as Pe,c as Ie,b as G,i as Re,B as _e,C as Ae,f as Te}from"./mermaid-to-reactflow-CIDMX9_R.js";import{D as ze,t as Be}from"./brain-BL87e_RR.js";import{B as M,n as $e,m as Fe,s as Ve,f as W,a as F,S as qe}from"./layout-DrTDpAPS.js";import{C as V}from"./checkbox-ntfrV4kT.js";import{d as le,e as He}from"./colors-BDuz-soV.js";import{P as Ue}from"./plus-BZkKN-7s.js";import{C as Ge}from"./triangle-alert-AgaXmY6m.js";import{S as We}from"./square-0Cn_Nc41.js";import"./zoom-tdgUGed2.js";import"./refresh-cw-DilKBPoS.js";import"./index-D4azcMu8.js";import"./search-CLYU6h3-.js";import"./file-text-D2AIgzrF.js";import"./index-BYJaSdCW.js";import"./message-square-BM-TphxK.js";import"./tabs-DOiIlW8G.js";import"./select-B6nvumql.js";import"./loader-circle-Cukh0dGl.js";import"./send-CjlLm_ad.js";import"./badge-CxmU_6k5.js";import"./external-link-BJmBFGp1.js";import"./star-BhvJvhcs.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["path",{d:"M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z",key:"1f1r0c"}]],Je=K("diamond",Ke);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],ie=K("hexagon",Xe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M14 9.536V7a4 4 0 0 1 4-4h1.5a.5.5 0 0 1 .5.5V5a4 4 0 0 1-4 4 4 4 0 0 0-4 4c0 2 1 3 1 5a5 5 0 0 1-1 3",key:"139s4v"}],["path",{d:"M4 9a5 5 0 0 1 8 4 5 5 0 0 1-8-4",key:"1dlkgp"}],["path",{d:"M5 21h14",key:"11awu3"}]],Qe=K("sprout",Ye),te=["rectangle","circle","diamond","hexagon"],se=le,Ze="polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%)";function et({shape:i,className:n,children:b}){return i==="circle"?e.jsx("div",{className:I("flex items-center justify-center aspect-square rounded-full",n),children:b}):i==="diamond"?e.jsx("div",{className:I("flex items-center justify-center rotate-45",n),children:e.jsx("div",{className:"-rotate-45",children:b})}):i==="hexagon"?e.jsx("div",{className:I("flex items-center justify-center",n),style:{clipPath:Ze},children:b}):e.jsx("div",{className:I("flex items-center justify-center rounded-md",n),children:b})}function tt({data:i,selected:n,id:b}){const{label:l,colorIdx:N=0,shape:v="rectangle"}=i,f=se[N]||se[0],[k,y]=a.useState(!1),[C,P]=a.useState(l),u=a.useCallback(()=>{if(y(!1),C.trim()&&C!==l){const p=new CustomEvent("mindmap:node-label",{detail:{id:b,label:C.trim()}});window.dispatchEvent(p)}},[C,l,b]),m=a.useCallback(p=>{p.key==="Enter"&&u(),p.key==="Escape"&&(P(l),y(!1))},[u,l]),o="!bg-primary !border-primary !w-2 !h-2";return e.jsxs(e.Fragment,{children:[e.jsx(ne,{isVisible:!!n,minWidth:60,minHeight:30,lineClassName:"!border-primary",handleClassName:"!bg-primary !border-primary !w-2 !h-2"}),e.jsx(R,{type:"target",position:_.Top,className:o}),e.jsx(R,{type:"target",position:_.Left,className:o}),e.jsx(et,{shape:v,className:I("w-full h-full px-3 py-2 border-2 font-terminal text-xs text-center min-w-[60px]",n?"border-primary text-primary ring-1 ring-primary":`${f.border} ${f.text}`,f.bg),children:k?e.jsx("input",{autoFocus:!0,value:C,onChange:p=>P(p.target.value),onBlur:u,onKeyDown:m,className:"bg-transparent border-b border-primary text-center text-xs font-terminal outline-none w-full"}):e.jsx("span",{onDoubleClick:()=>{P(l),y(!0)},children:l})}),e.jsx(R,{type:"source",position:_.Bottom,className:o}),e.jsx(R,{type:"source",position:_.Right,className:o})]})}function st({data:i,selected:n}){const{src:b}=i,l="!bg-primary !border-primary !w-2 !h-2";return e.jsxs(e.Fragment,{children:[e.jsx(ne,{isVisible:!!n,minWidth:50,minHeight:50,keepAspectRatio:!0,lineClassName:"!border-primary",handleClassName:"!bg-primary !border-primary !w-2 !h-2"}),e.jsx(R,{type:"target",position:_.Top,className:l}),e.jsx(R,{type:"target",position:_.Left,className:l}),e.jsx("img",{src:b,alt:"pasted",className:I("w-full h-full object-contain border-2 rounded-md",n?"border-primary ring-1 ring-primary":"border-secondary/50"),draggable:!1}),e.jsx(R,{type:"source",position:_.Bottom,className:l}),e.jsx(R,{type:"source",position:_.Right,className:l})]})}const at={mindmapShape:tt,mindmapImage:st},ae={type:"smoothstep",style:{stroke:"hsl(var(--primary))",strokeWidth:2},markerEnd:{type:oe.ArrowClosed,color:"hsl(var(--primary))"}},re={rectangle:We,circle:Ge,diamond:Je,hexagon:ie},L="h-6 px-1.5 text-xs font-terminal";function rt({onSeedMap:i,onAddNode:n,onDeleteSelected:b,onSetNodeColor:l,onSetEdgeColor:N,onSetShape:v,onAutoLayout:f,onToggleDirection:k,direction:y,drawMode:C,onToggleDraw:P,onExportPng:u,onSaveToVault:m,nodeCount:o,edgeCount:p,isDirty:x}){const[w,D]=a.useState(null);return e.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 border-b border-secondary/30 bg-black/40 shrink-0 flex-wrap",children:[e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:i,title:"Seed from curriculum",children:e.jsx(Qe,{className:"w-3 h-3"})}),e.jsx("div",{className:"w-px h-4 bg-secondary/30"}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:()=>D(w==="add"?null:"add"),title:"Add node",children:e.jsx(Ue,{className:"w-3 h-3"})}),w==="add"&&e.jsx("div",{className:"absolute top-full left-0 mt-1 p-1 bg-black border-2 border-primary/50 z-50 space-y-0.5 min-w-[120px]",children:te.map(c=>{const O=re[c];return e.jsxs("button",{onClick:()=>{n(c),D(null)},className:"flex items-center gap-2 w-full px-2 py-1 text-xs font-terminal text-secondary-foreground hover:bg-primary/20",children:[e.jsx(O,{className:"w-3 h-3"}),c]},c)})})]}),e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:b,title:"Delete selected",children:e.jsx($e,{className:"w-3 h-3"})}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:()=>D(w==="color"?null:"color"),title:"Color selected",children:e.jsx(Ee,{className:"w-3 h-3"})}),w==="color"&&e.jsxs("div",{className:"absolute top-full left-0 mt-1 p-2 bg-black border-2 border-primary/50 z-50 space-y-2 min-w-[160px]",children:[e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"NODE COLORS"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:le.map((c,O)=>e.jsx("button",{onClick:()=>{l(O),D(null)},className:I("w-5 h-5 border-2 rounded-none",c.border,c.bg),title:c.name},c.name))}),e.jsx("p",{className:"font-terminal text-xs text-muted-foreground pt-1",children:"EDGE COLORS"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:He.map(c=>e.jsx("button",{onClick:()=>{N(c.stroke),D(null)},className:"w-5 h-5 border-2 border-secondary/50 rounded-none",style:{backgroundColor:c.stroke},title:c.name},c.name))})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:()=>D(w==="shape"?null:"shape"),title:"Change shape",children:e.jsx(ie,{className:"w-3 h-3"})}),w==="shape"&&e.jsx("div",{className:"absolute top-full left-0 mt-1 p-1 bg-black border-2 border-primary/50 z-50 space-y-0.5 min-w-[120px]",children:te.map(c=>{const O=re[c];return e.jsxs("button",{onClick:()=>{v(c),D(null)},className:"flex items-center gap-2 w-full px-2 py-1 text-xs font-terminal text-secondary-foreground hover:bg-primary/20",children:[e.jsx(O,{className:"w-3 h-3"}),c]},c)})})]}),e.jsx("div",{className:"w-px h-4 bg-secondary/30"}),e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:f,title:"Auto layout",children:e.jsx(Me,{className:"w-3 h-3"})}),e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:k,title:`Direction: ${y}`,children:y==="TB"?e.jsx(De,{className:"w-3 h-3"}):e.jsx(Oe,{className:"w-3 h-3"})}),e.jsx("div",{className:"w-px h-4 bg-secondary/30"}),e.jsx(M,{size:"sm",variant:"ghost",className:I(L,C&&"bg-primary/20 text-primary"),onClick:P,title:"Draw mode",children:e.jsx(Fe,{className:"w-3 h-3"})}),e.jsx("div",{className:"w-px h-4 bg-secondary/30"}),e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:u,title:"Export PNG",children:e.jsx(ze,{className:"w-3 h-3"})}),e.jsx(M,{size:"sm",variant:"ghost",className:L,onClick:m,title:"Save to vault",children:e.jsx(Ve,{className:"w-3 h-3"})}),e.jsxs("div",{className:"ml-auto flex items-center gap-2 text-xs font-terminal text-muted-foreground",children:[e.jsxs("span",{children:[o,"N / ",p,"E"]}),e.jsx("span",{className:I("w-2 h-2 rounded-full",x?"bg-destructive":"bg-success")}),e.jsx("span",{children:x?"Unsaved":"Saved"})]})]})}function ot({active:i,strokes:n,onStrokeAdd:b,penColor:l="#ef4444",penWidth:N=2}){const v=a.useRef(null),f=a.useRef(!1),k=a.useRef([]),y=a.useCallback(()=>{const m=v.current;if(!m)return;const o=m.getContext("2d");if(!o)return;o.clearRect(0,0,m.width,m.height);for(const x of n)if(!(x.points.length<2)){o.beginPath(),o.strokeStyle=x.color,o.lineWidth=x.width,o.lineCap="round",o.lineJoin="round",o.moveTo(x.points[0][0],x.points[0][1]);for(let w=1;w<x.points.length;w++)o.lineTo(x.points[w][0],x.points[w][1]);o.stroke()}const p=k.current;if(p.length>=2){o.beginPath(),o.strokeStyle=l,o.lineWidth=N,o.lineCap="round",o.lineJoin="round",o.moveTo(p[0][0],p[0][1]);for(let x=1;x<p.length;x++)o.lineTo(p[x][0],p[x][1]);o.stroke()}},[n,l,N]);a.useEffect(()=>{const m=v.current;if(!m)return;const o=m.parentElement;if(!o)return;const p=new ResizeObserver(()=>{const x=o.getBoundingClientRect();m.width=x.width,m.height=x.height,y()});return p.observe(o),()=>p.disconnect()},[y]),a.useEffect(()=>{y()},[y]);const C=a.useCallback(m=>{if(!i)return;f.current=!0;const o=v.current?.getBoundingClientRect();o&&(k.current=[[m.clientX-o.left,m.clientY-o.top]],m.target.setPointerCapture(m.pointerId))},[i]),P=a.useCallback(m=>{if(!f.current)return;const o=v.current?.getBoundingClientRect();o&&(k.current.push([m.clientX-o.left,m.clientY-o.top]),y())},[y]),u=a.useCallback(()=>{if(!f.current)return;f.current=!1;const m=k.current;m.length>=2&&b({points:[...m],color:l,width:N}),k.current=[]},[b,l,N]);return e.jsx("canvas",{ref:v,className:"absolute inset-0",style:{zIndex:i?10:0,pointerEvents:i?"auto":"none",cursor:i?"crosshair":"default"},onPointerDown:C,onPointerMove:P,onPointerUp:u})}const nt={course:6,module:4,lo:3},lt={course:"hexagon",module:"rectangle",lo:"circle"};function Lt(){const[i,n,b]=Le([]),[l,N,v]=Pe([]),[f,k]=a.useState("LR"),[y,C]=a.useState(0),[P,u]=a.useState(!1),[m,o]=a.useState(!1),[p,x]=a.useState([]),w=a.useRef(null),D=a.useRef(!1),{toast:c}=Se(),[O,J]=a.useState(new Set),[A,X]=a.useState(new Set),[z,ce]=a.useState(!0),{data:S=[]}=W({queryKey:["courses"],queryFn:()=>F.courses.getActive()}),Y=S.map(t=>t.id).sort(),{data:q=[]}=W({queryKey:["modules","all",Y],queryFn:async()=>(await Promise.all(S.map(r=>F.modules.getByCourse(r.id)))).flat(),enabled:S.length>0}),{data:Q=[]}=W({queryKey:["learningObjectives","all",Y,z],queryFn:async()=>(await Promise.all(S.map(r=>F.learningObjectives.getByCourse(r.id)))).flat(),enabled:S.length>0&&z});a.useEffect(()=>{S.length>0&&!D.current&&(D.current=!0,J(new Set(S.map(t=>t.id))))},[S]);const H=a.useMemo(()=>{const t=[],r=[],s=new Map;for(const g of q){const j=s.get(g.courseId)??[];j.push(g),s.set(g.courseId,j)}const d=new Map;for(const g of Q){if(g.moduleId==null)continue;const j=d.get(g.moduleId)??[];j.push(g),d.set(g.moduleId,j)}for(const g of S){if(!O.has(g.id))continue;const j=`course-${g.id}`;t.push({id:j,name:g.name,type:"course"});const B=s.get(g.id)??[];for(const E of B){if(A.size>0&&!A.has(E.id))continue;const T=`module-${E.id}`;if(t.push({id:T,name:E.name,type:"module"}),r.push({source:j,target:T}),z){const U=d.get(E.id)??[];for(const h of U){const $=`lo-${h.id}`;t.push({id:$,name:`${h.loCode}: ${h.title}`,type:"lo"}),r.push({source:T,target:$})}}}}return{nodes:t,links:r}},[S,q,Q,O,A,z]),de=t=>{J(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})},me=t=>{X(r=>{const s=new Set(r);return s.has(t)?s.delete(t):s.add(t),s})},ue=a.useCallback(t=>{u(!0),b(t)},[b]),pe=a.useCallback(t=>{u(!0),v(t)},[v]),he=a.useCallback(t=>{u(!0),N(r=>Ie(t,r))},[N]);a.useEffect(()=>{const t=r=>{const{id:s,label:d}=r.detail;n(g=>g.map(j=>j.id===s?{...j,data:{...j.data,label:d}}:j)),u(!0)};return window.addEventListener("mindmap:node-label",t),()=>window.removeEventListener("mindmap:node-label",t)},[n]);const Z=a.useCallback(()=>{const{nodes:t,links:r}=H;if(t.length===0){c({title:"No data",description:"Select courses first",variant:"destructive"});return}const s=new Set(i.filter(h=>!h.id.startsWith("course-")&&!h.id.startsWith("module-")&&!h.id.startsWith("lo-")).map(h=>h.id)),d=i.filter(h=>s.has(h.id)),g=l.filter(h=>s.has(h.source)||s.has(h.target)),j=t.map(h=>({id:h.id,type:"mindmapShape",position:{x:0,y:0},data:{label:h.name,colorIdx:nt[h.type]??0,shape:lt[h.type]??"rectangle"},style:{width:180,height:50}})),B=r.map((h,$)=>({id:`seed-e-${$}`,source:h.source,target:h.target,...ae})),E=[...j,...d],T=[...B,...g],U=G(E,T,{direction:f});n(U),N(T),C(E.length),u(!0),c({title:"Map seeded",description:`${t.length} curriculum nodes`})},[H,i,l,f,n,N,c]),xe=a.useCallback(t=>{const r=`mm-${y+1}`;C(d=>d+1);const s={id:r,type:"mindmapShape",position:{x:Math.random()*300+50,y:Math.random()*200+50},data:{label:`Node ${y+1}`,colorIdx:0,shape:t},style:{width:180,height:50}};n(d=>[...d,s]),u(!0)},[y,n]),ge=a.useCallback(()=>{n(t=>t.filter(r=>!r.selected)),N(t=>t.filter(r=>!r.selected)),u(!0)},[n,N]),fe=a.useCallback(t=>{n(r=>r.map(s=>s.selected?{...s,data:{...s.data,colorIdx:t}}:s)),u(!0)},[n]),ye=a.useCallback(t=>{N(r=>r.map(s=>s.selected?{...s,style:{...s.style,stroke:t,strokeWidth:2},markerEnd:{type:oe.ArrowClosed,color:t}}:s)),u(!0)},[N]),be=a.useCallback(t=>{n(r=>r.map(s=>s.selected?{...s,data:{...s.data,shape:t}}:s)),u(!0)},[n]),Ne=a.useCallback(()=>{const t=G(i,l,{direction:f});n(t),u(!0)},[i,l,f,n]),je=a.useCallback(()=>{const t=f==="TB"?"LR":"TB";k(t);const r=G(i,l,{direction:t});n(r),u(!0)},[f,i,l,n]),we=a.useCallback(t=>{const r=t.clipboardData?.items;if(r)for(const s of r){if(!s.type.startsWith("image/"))continue;const d=s.getAsFile();if(!d)continue;const g=new FileReader;g.onload=()=>{const j=`mm-img-${y+1}`;C(E=>E+1);const B={id:j,type:"mindmapImage",position:{x:Math.random()*300+50,y:Math.random()*200+50},data:{src:g.result},style:{width:200,height:150}};n(E=>[...E,B]),u(!0)},g.readAsDataURL(d);break}},[y,n]),Ce=a.useCallback(async()=>{if(w.current)try{const t=w.current.querySelector(".react-flow__viewport");if(!t)return;const r=await Be(t,{backgroundColor:"#000",quality:1}),s=document.createElement("a");s.download="mind-map.png",s.href=r,s.click(),c({title:"PNG exported"})}catch(t){c({title:"Export failed",description:String(t),variant:"destructive"})}},[c]),ve=a.useCallback(async()=>{const t=(i[0]?.data?.label||"Untitled").replace(/[/\\?%*:|"<>]/g,"-"),r=JSON.stringify({nodes:i.map(d=>({id:d.id,type:d.type,position:d.position,data:d.data,style:d.style})),edges:l.map(d=>({id:d.id,source:d.source,target:d.target,style:d.style,markerEnd:d.markerEnd})),drawStrokes:p,meta:{direction:f,created:new Date().toISOString()}},null,2),s=`Mind Maps/${t}.mindmap.json`;try{await F.obsidian.saveFile(s,r),c({title:"Saved to vault",description:s}),u(!1)}catch(d){c({title:"Save failed",description:String(d),variant:"destructive"})}},[i,l,p,f,c]),ke=a.useCallback(t=>{x(r=>[...r,t]),u(!0)},[]),ee=q.filter(t=>O.has(t.courseId));return e.jsxs("div",{className:"flex h-full",onPaste:we,children:[e.jsx("div",{className:"w-[160px] shrink-0 border-r border-secondary/30 bg-black/60",children:e.jsx(qe,{className:"h-full",children:e.jsxs("div",{className:"p-3 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-arcade text-xs text-primary mb-2",children:"COURSES"}),S.map(t=>e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer",children:[e.jsx(V,{checked:O.has(t.id),onCheckedChange:()=>de(t.id),className:"border-cyan-500 data-[state=checked]:bg-cyan-500"}),e.jsx("span",{className:"font-terminal text-xs text-cyan-300",children:t.name})]},t.id))]}),ee.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"font-arcade text-xs text-yellow-400 mb-2",children:"MODULES"}),e.jsxs("label",{className:"flex items-center gap-2 py-1 cursor-pointer mb-1",children:[e.jsx(V,{checked:A.size===0,onCheckedChange:()=>X(new Set),className:"border-yellow-500 data-[state=checked]:bg-yellow-500"}),e.jsx("span",{className:"font-terminal text-xs text-yellow-200",children:"All Modules"})]}),ee.map(t=>e.jsxs("label",{className:"flex items-center gap-2 py-0.5 cursor-pointer",children:[e.jsx(V,{checked:A.size===0||A.has(t.id),onCheckedChange:()=>me(t.id),className:"border-yellow-500 data-[state=checked]:bg-yellow-500"}),e.jsx("span",{className:"font-terminal text-xs text-yellow-100 truncate",children:t.name})]},t.id))]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx(V,{checked:z,onCheckedChange:t=>ce(!!t),className:"border-green-500 data-[state=checked]:bg-green-500"}),e.jsx("span",{className:"font-terminal text-xs text-green-300",children:"Show LOs"})]})}),e.jsxs("div",{className:"pt-2 border-t border-secondary/30 space-y-1",children:[e.jsx("div",{className:"font-arcade text-xs text-muted-foreground mb-1",children:"LEGEND"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm border-2 border-cyan-400 bg-cyan-400/15"}),e.jsx("span",{className:"font-terminal text-xs text-cyan-300",children:"Course"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm border border-yellow-400 bg-yellow-400/12"}),e.jsx("span",{className:"font-terminal text-xs text-yellow-300",children:"Module"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-sm border border-green-400 bg-green-400/8"}),e.jsx("span",{className:"font-terminal text-xs text-green-300",children:"LO"})]})]}),e.jsx("div",{className:"pt-2 border-t border-secondary/30",children:e.jsxs(M,{size:"sm",variant:"outline",className:"w-full h-7 text-xs font-terminal border-primary/50 text-primary",onClick:Z,children:["Seed Map (",H.nodes.length,")"]})})]})})}),e.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[e.jsx(rt,{onSeedMap:Z,onAddNode:xe,onDeleteSelected:ge,onSetNodeColor:fe,onSetEdgeColor:ye,onSetShape:be,onAutoLayout:Ne,onToggleDirection:je,direction:f,drawMode:m,onToggleDraw:()=>o(t=>!t),onExportPng:Ce,onSaveToVault:ve,nodeCount:i.length,edgeCount:l.length,isDirty:P}),e.jsxs("div",{className:"flex-1 min-h-0 relative",ref:w,children:[e.jsx(ot,{active:m,strokes:p,onStrokeAdd:ke}),e.jsxs(Re,{nodes:i,edges:l,onNodesChange:ue,onEdgesChange:pe,onConnect:he,nodeTypes:at,defaultEdgeOptions:ae,fitView:!0,className:"bg-black/80",proOptions:{hideAttribution:!0},children:[e.jsx(_e,{color:"hsl(var(--primary) / 0.1)",gap:20}),e.jsx(Ae,{className:"!bg-black !border-primary [&_button]:!bg-black/80 [&_button]:!border-primary/50 [&_button]:!text-primary"}),e.jsx(Te,{className:"!bg-black/80 !border-primary",nodeColor:"hsl(var(--primary))",maskColor:"rgba(0,0,0,0.5)"})]}),i.length===0&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center font-terminal text-xs text-muted-foreground pointer-events-none",children:'Select courses & click "Seed Map", or add nodes manually'})]})]})]})}export{Lt as MindMapView};
