import{c as et,u as tt,a as st,r as l,j as e,b as h,d as at,e as ns}from"./index-Dhaywojy.js";import{u as D,a as c,B as f,G as os,c as rt,R as ls,W as is,C as ds,T as cs,D as us,b as nt,P as ms,O as xs,d as ps,e as ot,f as E,L as hs,g as W,h as Se,i as Y,j as X,k as Z,l as J,I as v,m as Ve,n as le,o as gs,p as fs,q as ys,S as bs}from"./layout-ark0QPAM.js";import{C as _,a as P,b as R,B as Ie,c as I}from"./badge-DBFFbL-X.js";import{S as ie,a as de,b as ce,c as ue,d as C}from"./select-CCJmPQrZ.js";import{t as We,d as Ns,u as js,a as vs,D as Ds,b as ws,P as Cs,c as ks,e as Ss,C as As,p as Ts,i as xe,f as z,g as Te,h as pe,j as Ee,k as Es}from"./parseISO-dWR6fjiU.js";import{R as _s}from"./refresh-cw-Cs6VII9H.js";import{P as lt}from"./play--7MAZ7XU.js";import{A as Is,C as Ae,T as Ye}from"./triangle-alert-DqikQQZN.js";import{C as _e}from"./circle-check-B_DqzgYs.js";import{P as me}from"./plus-DxJgw2cU.js";import{C as Ms}from"./clock-DXLYIZS7.js";import{C as qs}from"./index-D-29fDg0.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Os=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],Ps=et("flame",Os);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],Fs=et("list-todo",Rs);function Ks(s,a){const r=We(s),i=We(a),d=Xe(r,i),g=Math.abs(Ns(r,i));r.setDate(r.getDate()-d*g);const x=+(Xe(r,i)===-d),y=d*(g-x);return y===0?0:y}function Xe(s,a){const r=s.getFullYear()-a.getFullYear()||s.getMonth()-a.getMonth()||s.getDate()-a.getDate()||s.getHours()-a.getHours()||s.getMinutes()-a.getMinutes()||s.getSeconds()-a.getSeconds()||s.getMilliseconds()-a.getMilliseconds();return r<0?-1:r>0?1:r}const Ls=[{id:"pending",label:"Queue",hint:"Drop here to keep it pending"},{id:"in_progress",label:"In Progress",hint:"Drop here to mark in-progress"}];function Qs(s){if(!s)return null;try{const a=Ts(s);return xe(a)?z(a)?"Today":Te(a)?"Tomorrow":pe(a)&&!z(a)?"Overdue":Ee(a,"MMM d"):s}catch{return s}}function it(s){return(s.anchor_text||s.notes||"Untitled task").trim()}function Ze({id:s,label:a,hint:r,count:i,children:d}){const{isOver:g,setNodeRef:x}=ks({id:s,data:{type:"planner_column",status:s}});return e.jsxs("div",{ref:x,className:h("flex flex-col h-[360px] sm:h-[420px] border border-secondary/40 bg-black/30 rounded-none",g&&"border-primary/70 bg-primary/10"),"aria-label":a,children:[e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 border-b border-secondary/30",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("span",{className:"font-arcade text-[10px] text-primary/90 tracking-widest uppercase truncate",children:a}),e.jsx(Ie,{variant:"outline",className:"rounded-none text-[9px] px-1.5 py-0",children:i})]}),e.jsx("span",{className:"font-terminal text-[9px] text-muted-foreground hidden sm:inline",children:r})]}),e.jsx("div",{className:"flex-1 p-2 overflow-y-auto",children:e.jsx("div",{className:"space-y-2",children:d})})]})}function Je({task:s,primaryAction:a,onComplete:r}){const{attributes:i,listeners:d,setNodeRef:g,transform:x,isDragging:y}=Ss({id:String(s.id),data:{type:"planner_task",taskId:s.id,status:s.status??"pending"}}),k={transform:As.Translate.toString(x),opacity:y?.6:1},p=Qs(s.scheduled_date),q=p==="Overdue";return e.jsx("div",{ref:g,style:k,className:h("group border border-secondary/40 bg-black/40 hover:border-primary/40 transition-colors rounded-none px-2.5 py-2",y&&"ring-2 ring-primary/50 border-primary/60"),"data-task-id":s.id,children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"mt-0.5 text-muted-foreground hover:text-primary cursor-grab active:cursor-grabbing",...i,...d,"aria-label":"Drag task",children:e.jsx(os,{className:"w-4 h-4"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"font-terminal text-xs text-white leading-snug flex-1 min-w-0",children:e.jsx("span",{className:"block truncate",children:it(s)})}),p&&e.jsx("span",{className:h("font-terminal text-[10px] px-1.5 py-0.5 border rounded-none shrink-0",q?"text-red-400 border-red-500/40 bg-red-500/10":"text-muted-foreground border-secondary/40"),title:s.scheduled_date||void 0,children:p})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-1.5",children:[s.course_name&&e.jsx("span",{className:"font-terminal text-[10px] text-cyan-300 border border-cyan-500/30 bg-cyan-500/10 px-1.5 py-0.5 rounded-none",children:s.course_name}),typeof s.planned_minutes=="number"&&s.planned_minutes>0&&e.jsxs("span",{className:"font-terminal text-[10px] text-muted-foreground border border-secondary/30 bg-secondary/10 px-1.5 py-0.5 rounded-none",children:[s.planned_minutes,"m"]}),typeof s.review_number=="number"&&s.review_number>0&&e.jsxs("span",{className:"font-terminal text-[10px] text-yellow-300 border border-yellow-500/30 bg-yellow-500/10 px-1.5 py-0.5 rounded-none",children:["R",s.review_number]}),typeof s.priority=="number"&&s.priority>0&&e.jsxs("span",{className:"font-terminal text-[10px] text-orange-300 border border-orange-500/30 bg-orange-500/10 px-1.5 py-0.5 rounded-none",children:["P",s.priority]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity",children:[e.jsxs(f,{size:"sm",variant:"ghost",className:"h-7 px-2 rounded-none font-terminal text-[10px]",onClick:w=>{w.stopPropagation(),a.onClick()},title:a.title,children:[a.icon,a.label]}),e.jsxs(f,{size:"sm",variant:"ghost",className:"h-7 px-2 rounded-none font-terminal text-[10px] text-green-400 hover:text-green-300",onClick:w=>{w.stopPropagation(),r()},title:"Complete",children:[e.jsx(_e,{className:"w-3 h-3 mr-1"}),"Done"]})]})]})})}function $s({tasks:s}){const a=tt(),{toast:r}=st(),[i,d]=l.useState(null),g=js(vs(Cs,{activationConstraint:{distance:8}})),x=D({mutationFn:n=>c.planner.updateTask(n.id,n.data),onMutate:async n=>{await a.cancelQueries({queryKey:["planner-queue"]});const u=a.getQueryData(["planner-queue"]);return u&&a.setQueryData(["planner-queue"],()=>{const m=u.slice(),j=m.findIndex(S=>S.id===n.id);if(j===-1)return m;const b={...m[j],...n.data};return n.data.status==="completed"?m.filter(S=>S.id!==n.id):(m[j]=b,m)}),{previous:u}},onError:(n,u,m)=>{m?.previous&&a.setQueryData(["planner-queue"],m.previous),r({title:"Update failed",description:String(n),variant:"destructive"})},onSettled:()=>{a.invalidateQueries({queryKey:["planner-queue"]})}}),y=D({mutationFn:()=>c.planner.generate(),onSuccess:n=>{a.invalidateQueries({queryKey:["planner-queue"]}),r({title:"Planner refreshed",description:`${n.tasks_created??0} task(s) created`})},onError:n=>{r({title:"Generate failed",description:String(n),variant:"destructive"})}}),k=l.useMemo(()=>{const n=new Map;for(const u of s)n.set(String(u.id),u);return n},[s]),p=l.useMemo(()=>s.filter(n=>(n.status||"pending")==="pending"),[s]),q=l.useMemo(()=>s.filter(n=>(n.status||"pending")==="in_progress"),[s]),w=n=>[...n].sort((u,m)=>{const j=u.scheduled_date||"",b=m.scheduled_date||"";if(j!==b)return j.localeCompare(b);const H=typeof u.priority=="number"?u.priority:0;return(typeof m.priority=="number"?m.priority:0)-H}),F=(n,u)=>{x.mutate({id:n,data:{status:u}})},L=n=>{x.mutate({id:n,data:{status:"completed"}})},Q=n=>{d(null);const u=n.over?.id,m=n.active?.id;if(!u||!m)return;const j=String(u);if(!Ls.some(S=>S.id===j))return;const b=k.get(String(m));!b||(b.status||"pending")===j||F(b.id,j)},K=i?k.get(i):null;return e.jsxs(_,{className:"bg-black/40 border-2 border-primary rounded-none",children:[e.jsx(P,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center justify-between gap-3",children:[e.jsx("span",{className:"truncate",children:"PLANNER_BOARD"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Ie,{variant:"outline",className:"rounded-none text-[9px]",children:[s.length," tasks"]}),e.jsxs(f,{size:"sm",variant:"outline",className:"rounded-none font-arcade text-xs border-primary",onClick:()=>y.mutate(),disabled:y.isPending,title:"Generate tasks from recent weak anchors",children:[e.jsx(_s,{className:h("w-3.5 h-3.5 mr-2",y.isPending&&"animate-spin")}),"Refresh"]})]})]})}),e.jsx(I,{className:"p-4",children:e.jsxs(Ds,{sensors:g,onDragStart:n=>d(String(n.active.id)),onDragEnd:Q,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Ze,{id:"pending",label:"Queue",hint:"Drag to start",count:p.length,children:w(p).length===0?e.jsx("div",{className:"px-2 py-8 text-center font-terminal text-xs text-muted-foreground",children:"No pending tasks"}):w(p).map(n=>e.jsx(Je,{task:n,primaryAction:{label:"Start",title:"Start",icon:e.jsx(lt,{className:"w-3 h-3 mr-1"}),onClick:()=>F(n.id,"in_progress")},onComplete:()=>L(n.id)},n.id))}),e.jsx(Ze,{id:"in_progress",label:"In Progress",hint:"Drag back to queue",count:q.length,children:w(q).length===0?e.jsx("div",{className:"px-2 py-8 text-center font-terminal text-xs text-muted-foreground",children:"Nothing in progress"}):w(q).map(n=>e.jsx(Je,{task:n,primaryAction:{label:"Queue",title:"Move back to queue",icon:e.jsx(Is,{className:"w-3 h-3 mr-1"}),onClick:()=>F(n.id,"pending")},onComplete:()=>L(n.id)},n.id))})]}),e.jsx(ws,{children:K?e.jsx("div",{className:"opacity-90 rotate-1",children:e.jsx("div",{className:"border border-primary/60 bg-black/80 px-3 py-2 rounded-none shadow-2xl",children:e.jsx("div",{className:"font-terminal text-xs text-white truncate",children:it(K)})})}):null})]})})]})}function Us(s,a,{checkForDefaultPrevented:r=!0}={}){return function(d){if(s?.(d),r===!1||!d.defaultPrevented)return a?.(d)}}var zs=Symbol("radix.slottable");function Gs(s){const a=({children:r})=>e.jsx(e.Fragment,{children:r});return a.displayName=`${s}.Slottable`,a.__radixId=zs,a}var dt="AlertDialog",[Hs]=ns(dt,[rt]),M=rt(),ct=s=>{const{__scopeAlertDialog:a,...r}=s,i=M(a);return e.jsx(ls,{...i,...r,modal:!0})};ct.displayName=dt;var Bs="AlertDialogTrigger",Vs=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(ps,{...d,...i,ref:a})});Vs.displayName=Bs;var Ws="AlertDialogPortal",ut=s=>{const{__scopeAlertDialog:a,...r}=s,i=M(a);return e.jsx(ms,{...i,...r})};ut.displayName=Ws;var Ys="AlertDialogOverlay",mt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(xs,{...d,...i,ref:a})});mt.displayName=Ys;var G="AlertDialogContent",[Xs,Zs]=Hs(G),Js=Gs("AlertDialogContent"),xt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,children:i,...d}=s,g=M(r),x=l.useRef(null),y=at(a,x),k=l.useRef(null);return e.jsx(is,{contentName:G,titleName:pt,docsSlug:"alert-dialog",children:e.jsx(Xs,{scope:r,cancelRef:k,children:e.jsxs(ds,{role:"alertdialog",...g,...d,ref:y,onOpenAutoFocus:Us(d.onOpenAutoFocus,p=>{p.preventDefault(),k.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[e.jsx(Js,{children:i}),e.jsx(ta,{contentRef:x})]})})})});xt.displayName=G;var pt="AlertDialogTitle",ht=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(cs,{...d,...i,ref:a})});ht.displayName=pt;var gt="AlertDialogDescription",ft=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(us,{...d,...i,ref:a})});ft.displayName=gt;var ea="AlertDialogAction",yt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,d=M(r);return e.jsx(nt,{...d,...i,ref:a})});yt.displayName=ea;var bt="AlertDialogCancel",Nt=l.forwardRef((s,a)=>{const{__scopeAlertDialog:r,...i}=s,{cancelRef:d}=Zs(bt,r),g=M(r),x=at(a,d);return e.jsx(nt,{...g,...i,ref:x})});Nt.displayName=bt;var ta=({contentRef:s})=>{const a=`\`${G}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${G}\` by passing a \`${gt}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${G}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return l.useEffect(()=>{document.getElementById(s.current?.getAttribute("aria-describedby"))||console.warn(a)},[a,s]),null},sa=ct,aa=ut,jt=mt,vt=xt,Dt=yt,wt=Nt,Ct=ht,kt=ft;const ra=sa,na=({children:s})=>e.jsx(aa,{container:typeof document<"u"?document.body:void 0,children:s}),St=l.forwardRef(({className:s,...a},r)=>e.jsx(jt,{className:h("fixed inset-0 dialog-overlay bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:r}));St.displayName=jt.displayName;const At=l.forwardRef(({className:s,...a},r)=>e.jsxs(na,{children:[e.jsx(St,{}),e.jsx(vt,{ref:r,className:h("fixed dialog-center grid w-full max-w-lg max-h-[90vh] gap-4 overflow-y-auto border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 sm:rounded-lg",s),...a})]}));At.displayName=vt.displayName;const Tt=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col space-y-2 text-center sm:text-left",s),...a});Tt.displayName="AlertDialogHeader";const Et=({className:s,...a})=>e.jsx("div",{className:h("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});Et.displayName="AlertDialogFooter";const _t=l.forwardRef(({className:s,...a},r)=>e.jsx(Ct,{ref:r,className:h("text-lg font-semibold",s),...a}));_t.displayName=Ct.displayName;const It=l.forwardRef(({className:s,...a},r)=>e.jsx(kt,{ref:r,className:h("text-sm text-muted-foreground",s),...a}));It.displayName=kt.displayName;const Mt=l.forwardRef(({className:s,...a},r)=>e.jsx(Dt,{ref:r,className:h(ot(),s),...a}));Mt.displayName=Dt.displayName;const qt=l.forwardRef(({className:s,...a},r)=>e.jsx(wt,{ref:r,className:h(ot({variant:"outline"}),"mt-2 sm:mt-0",s),...a}));qt.displayName=wt.displayName;function ya(){const s=tt(),{toast:a}=st(),[r,i]=l.useState(""),[d,g]=l.useState(!1),[x,y]=l.useState(""),[k,p]=l.useState(""),[q,w]=l.useState(!1),[F,L]=l.useState(null),[Q,K]=l.useState(""),[n,u]=l.useState(""),[m,j]=l.useState(null),b={zIndex:100005,top:"6rem",left:"50%",transform:"translate(-50%, 0)"},[H,S]=l.useState(0),[Me,Ot]=l.useState(!1),[ee,qe]=l.useState(""),[he,te]=l.useState(null),[B,ge]=l.useState(""),[se,fe]=l.useState(""),[$,ye]=l.useState(""),[ae,be]=l.useState("none"),[Pt,Oe]=l.useState(!1),[Ne,Rt]=l.useState("all"),[N,U]=l.useState({title:"",course:"",type:"assignment",dueDate:"",notes:""}),{data:Ft}=E({queryKey:["study-wheel","current"],queryFn:c.studyWheel.getCurrentCourse}),{data:O=[]}=E({queryKey:["courses","active"],queryFn:c.courses.getActive}),{data:Pe=[]}=E({queryKey:["sessions","today"],queryFn:c.todaySessions.get}),{data:Kt}=E({queryKey:["streak"],queryFn:c.streak.get}),{data:Re=[]}=E({queryKey:["weakness-queue"],queryFn:c.weaknessQueue.get}),{data:je=[]}=E({queryKey:["academic-deadlines"],queryFn:c.academicDeadlines.getAll}),{data:re=[]}=E({queryKey:["planner-queue"],queryFn:c.planner.getQueue}),{data:A=[]}=E({queryKey:["google-task-lists"],queryFn:c.googleTasks.getLists}),{data:Lt=[]}=E({queryKey:["google-tasks"],queryFn:c.googleTasks.getAll});l.useEffect(()=>{if(Me||!A.length)return;const t=A.findIndex(o=>o.title?.toLowerCase().includes("school"));t>=0&&S(t),Ot(!0)},[A,Me]);const Fe=D({mutationFn:({courseId:t,mins:o})=>c.studyWheel.completeSession(t,o),onSuccess:()=>{s.invalidateQueries({queryKey:["study-wheel"]}),s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["sessions"]}),s.invalidateQueries({queryKey:["streak"]}),i(""),g(!1),a({title:"Session logged!",description:"Wheel rotated to next course."})},onError:()=>{a({title:"Error",description:"Failed to log session. Please try again.",variant:"destructive"})}}),ve=D({mutationFn:({name:t,code:o})=>c.courses.create({name:t,code:o,active:!0,position:O.length}),onSuccess:()=>{s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["study-wheel"]}),y(""),p(""),w(!1),a({title:"Course added!",description:"New course added to the wheel."})},onError:()=>{a({title:"Error",description:"Failed to add course. Please try again.",variant:"destructive"})}}),Ke=D({mutationFn:({id:t,name:o,code:T})=>c.courses.update(t,{name:o,code:T}),onSuccess:()=>{s.invalidateQueries({queryKey:["courses"]}),s.invalidateQueries({queryKey:["study-wheel"]}),L(null),K(""),u(""),a({title:"Course updated!",description:"Course name has been changed."})},onError:()=>{a({title:"Error",description:"Failed to update course. Please try again.",variant:"destructive"})}}),Qt=D({mutationFn:t=>c.courses.delete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["courses","active"]}),s.invalidateQueries({queryKey:["study-wheel","current"]}),s.invalidateQueries({queryKey:["study-wheel"]}),a({title:"Course deleted!",description:"Course has been removed from the wheel."})},onError:t=>{console.error("Delete failed:",t),a({title:"Error",description:"Failed to delete course. Please try again.",variant:"destructive"})}}),Le=D({mutationFn:t=>c.googleTasks.update(t.id,t.listId,{status:t.status==="completed"?"needsAction":"completed"}),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]})}}),Qe=D({mutationFn:t=>c.googleTasks.create(t.listId,{title:t.title,status:"needsAction"}),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]}),qe("")}}),$e=D({mutationFn:t=>c.googleTasks.update(t.task.id,t.task.listId,t.data),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]}),te(null),ge(""),fe(""),ye(""),be("none")}}),Ue=D({mutationFn:t=>c.googleTasks.delete(t.id,t.listId),onSuccess:()=>{s.invalidateQueries({queryKey:["google-tasks"]})}}),De=D({mutationFn:t=>c.academicDeadlines.create(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]}),Oe(!1),U({title:"",course:"",type:"assignment",dueDate:"",notes:""}),a({title:"Deadline added!",description:"Academic deadline has been created."})},onError:()=>{a({title:"Error",description:"Failed to add deadline.",variant:"destructive"})}}),$t=D({mutationFn:t=>c.academicDeadlines.toggleComplete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]})}}),Ut=D({mutationFn:t=>c.academicDeadlines.delete(t),onSuccess:()=>{s.invalidateQueries({queryKey:["academic-deadlines"]}),a({title:"Deadline removed",description:"Academic deadline has been deleted."})}}),ne=Ft?.currentCourse,zt=Pe.reduce((t,o)=>t+(o.minutes||0),0),ze=Pe.length,we=ze>0,Gt=()=>{!ne||!r||parseInt(r)<1||Fe.mutate({courseId:ne.id,mins:parseInt(r)})},Ge=()=>{x.trim()&&ve.mutate({name:x.trim(),code:k.trim()||void 0})},Ht=()=>{!F||!Q.trim()||Ke.mutate({id:F.id,name:Q.trim(),code:n.trim()||null})},Bt=()=>{m&&(Qt.mutate(m.id),j(null))},Vt=t=>{L(t),K(t.name),u(t.code??"")},Wt=()=>{!N.title?.trim()||!N.dueDate||De.mutate(N)},Yt=t=>{const o=new Date(t);if(!xe(o))return"unknown";if(pe(o)&&!z(o))return"overdue";if(z(o))return"today";if(Te(o))return"tomorrow";const T=Ks(o,new Date);return T<=3?"soon":T<=7?"week":"later"},Xt=t=>{switch(t){case"exam":return"ðŸ“";case"quiz":return"â“";case"project":return"ðŸ“‚";default:return"ðŸ“‹"}},Zt=t=>{switch(t){case"overdue":return"border-red-500 bg-red-500/20 text-red-400";case"today":return"border-orange-500 bg-orange-500/20 text-orange-400";case"tomorrow":return"border-yellow-500 bg-yellow-500/20 text-yellow-400";case"soon":return"border-secondary bg-secondary/20 text-muted-foreground";default:return"border-secondary/30 text-muted-foreground"}},He={};O.forEach(t=>{He[String(t.id)]=t.name});const oe=t=>t?/^\d+$/.test(t)?He[t]||"":t:"",Jt=[...new Set([...je.map(t=>oe(t.course)).filter(Boolean),...O.map(t=>t.name)])].sort(),es=[...je].filter(t=>Ne==="all"||oe(t.course)===Ne).sort((t,o)=>t.completed!==o.completed?t.completed?1:-1:new Date(t.dueDate).getTime()-new Date(o.dueDate).getTime()),V=A[H],Ce=V?Lt.filter(t=>t.listId===V.id):[],ts=Ce.filter(t=>t.status!=="completed"),ke=Ce.filter(t=>t.status==="completed"),Be=()=>{!ee.trim()||!V||Qe.mutate({listId:V.id,title:ee.trim()})},ss=()=>{if(!he||!B.trim())return;const t={title:B.trim()};se&&(t.notes=se),$&&(t.due=new Date($).toISOString()),$e.mutate({task:he,data:t}),ae!=="none"&&$&&De.mutate({title:B.trim(),type:ae,dueDate:$,course:"",notes:se||""})},as=t=>{te(t),ge(t.title),fe(t.notes||""),ye(t.due?t.due.split("T")[0]:""),be("none")},rs=t=>{if(!t)return null;const o=new Date(t);return xe(o)?z(o)?"Today":Te(o)?"Tomorrow":pe(o)?"Overdue":Ee(o,"MMM d"):null};return e.jsx(hs,{children:e.jsxs("div",{className:"space-y-6 max-w-5xl mx-auto",children:[e.jsxs(_,{className:"bg-black/40 border-2 border-secondary rounded-none",children:[e.jsx(P,{className:"p-3 border-b border-secondary/50",children:e.jsxs(R,{className:"font-arcade text-xs flex items-center justify-between",children:[e.jsx("span",{children:"TODAY'S FOCUS"}),e.jsxs(Ie,{variant:"outline",className:"rounded-none text-[9px]",children:[re.filter(t=>t.scheduled_date&&t.scheduled_date<=new Date().toISOString().slice(0,10)).length," tasks"]})]})}),e.jsxs(I,{className:"p-4",children:[re.filter(t=>t.scheduled_date&&t.scheduled_date<=new Date().toISOString().slice(0,10)).length===0?e.jsx("p",{className:"font-terminal text-xs text-muted-foreground",children:"No tasks due today"}):e.jsx("ul",{className:"space-y-2 mb-4",children:re.filter(t=>t.scheduled_date&&t.scheduled_date<=new Date().toISOString().slice(0,10)).slice(0,3).map(t=>e.jsxs("li",{className:"font-terminal text-xs flex items-center gap-2",children:[e.jsx(Ae,{className:"w-2 h-2 text-primary"}),e.jsx("span",{className:"truncate",children:t.anchor_text||t.notes||"Untitled task"})]},t.id))}),e.jsx(f,{variant:"outline",size:"sm",className:"w-full rounded-none font-arcade text-xs border-primary",onClick:()=>window.location.href="/brain",children:"Open Brain â†’"})]})]}),e.jsx($s,{tasks:re}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 grid-rows-[auto]",children:[e.jsxs(_,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(P,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lt,{className:"w-4 h-4"}),"STUDY_WHEEL"]}),e.jsxs("div",{className:"flex items-center gap-2 bg-black/40 border border-secondary px-3 py-1","data-testid":"streak-display",children:[e.jsx(Ps,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"font-arcade text-sm text-white","data-testid":"text-streak",children:Kt?.currentStreak||0}),e.jsx("span",{className:"font-terminal text-[10px] text-muted-foreground",children:"DAY STREAK"})]})]})}),e.jsx(I,{className:"p-4",children:O.length===0?e.jsxs("div",{className:"text-center py-8 space-y-4",children:[e.jsx("p",{className:"font-terminal text-muted-foreground",children:"No courses added yet. Add courses to start the study wheel."}),e.jsxs(W,{open:q,onOpenChange:w,children:[e.jsx(Se,{asChild:!0,children:e.jsxs(f,{variant:"outline",className:"rounded-none border-primary font-arcade","data-testid":"button-add-first-course",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"ADD_COURSE"]})}),e.jsxs(Y,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:b,children:[e.jsxs(X,{children:[e.jsx(Z,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(J,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{placeholder:"Course name (e.g., Anatomy)",value:x,onChange:t=>y(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name"}),e.jsx(v,{placeholder:"Course number (e.g., PHTH 5301)",value:k,onChange:t=>p(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code"}),e.jsx(f,{onClick:Ge,disabled:!x.trim()||ve.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course",children:"ADD"})]})]})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center space-y-1",children:[e.jsx("p",{className:"font-terminal text-muted-foreground text-sm",children:"â–¶ NEXT UP"}),e.jsx("p",{className:"font-arcade text-2xl text-primary","data-testid":"text-current-course",children:ne?.name||"LOADING..."})]}),e.jsxs("div",{className:"flex flex-col gap-1 max-w-md mx-auto",children:[O.map((t,o)=>e.jsxs("div",{className:`flex items-center justify-between px-4 py-2 border transition-all duration-300 ${o===0?"border-primary bg-primary/20 scale-105":"border-secondary/30 opacity-70 hover:opacity-100"}`,style:{transform:o===0?"scale(1.02)":`scale(${1-o*.02})`,opacity:o===0?1:Math.max(.4,1-o*.15)},"data-testid":`wheel-course-${t.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`font-arcade text-xs w-6 h-6 flex items-center justify-center ${o===0?"bg-primary text-black":"bg-secondary/30 text-muted-foreground"}`,children:o+1}),e.jsx("span",{className:`font-terminal ${o===0?"text-primary font-bold":"text-muted-foreground"}`,children:t.name})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>Vt({id:t.id,name:t.name,code:t.code}),className:"p-1 hover:text-primary transition-colors text-muted-foreground","data-testid":`button-edit-course-${t.id}`,children:e.jsx(Ve,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>j({id:t.id,name:t.name}),className:"p-1 hover:text-red-500 transition-colors text-muted-foreground","data-testid":`button-delete-course-${t.id}`,children:e.jsx(le,{className:"w-4 h-4"})})]})]},t.id)),e.jsxs(W,{open:q,onOpenChange:w,children:[e.jsx(Se,{asChild:!0,children:e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 border border-dashed border-secondary/50 text-muted-foreground hover:border-primary hover:text-primary transition-colors font-terminal","data-testid":"button-add-course-inline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"ADD COURSE"]})}),e.jsxs(Y,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:b,children:[e.jsxs(X,{children:[e.jsx(Z,{className:"font-arcade",children:"ADD_NEW_COURSE"}),e.jsx(J,{className:"sr-only",children:"Enter course details to add a new course."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{placeholder:"Course name (e.g., Anatomy)",value:x,onChange:t=>y(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-name-inline"}),e.jsx(v,{placeholder:"Course number (e.g., PHTH 5301)",value:k,onChange:t=>p(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-course-code-inline"}),e.jsx(f,{onClick:Ge,disabled:!x.trim()||ve.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-add-course-inline",children:"ADD"})]})]})]})]}),e.jsx(W,{open:!!F,onOpenChange:t=>{t||(L(null),K(""),u(""))},children:e.jsxs(Y,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:b,children:[e.jsxs(X,{children:[e.jsx(Z,{className:"font-arcade",children:"EDIT_COURSE"}),e.jsx(J,{className:"sr-only",children:"Modify the course details."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{placeholder:"Course name",value:Q,onChange:t=>K(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-name"}),e.jsx(v,{placeholder:"Course number (e.g., PHTH 5301)",value:n,onChange:t=>u(t.target.value),className:"rounded-none border-secondary bg-black font-terminal","data-testid":"input-edit-course-code"}),e.jsx(f,{onClick:Ht,disabled:!Q.trim()||Ke.isPending,className:"w-full rounded-none font-arcade","data-testid":"button-confirm-edit-course",children:"SAVE"})]})]})}),e.jsx(ra,{open:!!m,onOpenChange:t=>!t&&j(null),children:e.jsxs(At,{className:"bg-black border-2 border-red-500 rounded-none translate-y-0",style:b,children:[e.jsxs(Tt,{children:[e.jsx(_t,{className:"font-arcade text-red-500",children:"DELETE_COURSE"}),e.jsxs(It,{className:"font-terminal text-muted-foreground",children:["Are you sure you want to delete ",e.jsx("span",{className:"text-primary font-bold",children:m?.name}),"? This action cannot be undone."]})]}),e.jsxs(Et,{className:"gap-2",children:[e.jsx(qt,{className:"rounded-none border-secondary font-arcade text-xs",children:"CANCEL"}),e.jsx(Mt,{onClick:Bt,className:"rounded-none bg-red-500 hover:bg-red-600 font-arcade text-xs text-white",children:"DELETE"})]})]})}),d?e.jsxs("div",{className:"flex flex-col items-center gap-4 p-4 border border-primary/50 bg-primary/5",children:[e.jsx("p",{className:"font-terminal text-sm text-muted-foreground",children:"Enter minutes studied:"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(v,{type:"number",min:"1",value:r,onChange:t=>i(t.target.value),placeholder:"30",className:"w-24 rounded-none border-primary bg-black text-center font-arcade text-xl","data-testid":"input-minutes",autoFocus:!0}),e.jsx("span",{className:"font-terminal text-muted-foreground",children:"MIN"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{variant:"outline",onClick:()=>{g(!1),i("")},className:"rounded-none font-arcade border-secondary","data-testid":"button-cancel-session",children:"CANCEL"}),e.jsx(f,{onClick:Gt,disabled:!r||parseInt(r)<1||Fe.isPending,className:"rounded-none font-arcade bg-primary","data-testid":"button-log-session",children:"LOG & ROTATE"})]})]}):e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs(f,{onClick:()=>g(!0),className:"w-full rounded-none font-arcade px-8 py-6 text-lg bg-primary hover:bg-primary/80 shadow-[0_0_20px_rgba(255,0,0,0.3)] hover:shadow-[0_0_30px_rgba(255,0,0,0.5)] transition-shadow",disabled:!ne,"data-testid":"button-start-session",children:[e.jsx(gs,{className:"w-5 h-5 mr-2"}),"COMPLETE SESSION"]})})]})})]}),e.jsxs(_,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(P,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ms,{className:"w-4 h-4"}),"TODAY"]})}),e.jsxs(I,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Sessions"}),e.jsx("span",{className:"font-arcade text-xl text-white","data-testid":"text-today-sessions",children:ze})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-terminal text-muted-foreground",children:"Minutes"}),e.jsx("span",{className:"font-arcade text-xl text-primary","data-testid":"text-today-minutes",children:zt})]}),e.jsx("div",{className:`p-2 border ${we?"border-green-500/50 bg-green-500/10":"border-orange-500/50 bg-orange-500/10"}`,children:e.jsx("span",{className:`font-terminal text-xs ${we?"text-green-400":"text-orange-400"}`,"data-testid":"text-today-status",children:we?"STREAK MAINTAINED":"NO SESSIONS TODAY - STUDY NOW!"})})]})]}),e.jsxs(_,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(P,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(fs,{className:"w-4 h-4"}),"COURSES"]})}),e.jsx(I,{className:"p-4 max-h-64 overflow-y-auto",children:O.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"No courses yet"}):e.jsx("div",{className:"space-y-3",children:O.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-2 border border-secondary/30 hover:border-secondary transition-colors","data-testid":`summary-course-${t.id}`,children:[e.jsx("span",{className:"font-terminal text-white",children:t.name}),e.jsxs("div",{className:"flex items-center gap-4 text-sm font-terminal",children:[e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:"text-white font-bold","data-testid":`course-sessions-${t.id}`,children:t.totalSessions})," sess"]}),e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("span",{className:h("font-bold",t.totalMinutes>0?"text-green-400":"text-muted-foreground"),"data-testid":`course-minutes-${t.id}`,children:t.totalMinutes})," min"]})]})]},t.id))})})]}),e.jsxs(_,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsx(P,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"w-4 h-4"}),"TASKS"]}),A.length>1&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:()=>S(t=>(t-1+A.length)%A.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(Es,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-terminal text-xs text-white bg-secondary/40 border border-secondary/60 px-2 py-0.5 min-w-[80px] text-center",children:V?.title||"Tasks"}),e.jsx("button",{onClick:()=>S(t=>(t+1)%A.length),className:"p-1 hover:bg-white/10 transition-colors",children:e.jsx(qs,{className:"w-4 h-4"})})]})]})}),e.jsx(I,{className:"p-4",children:A.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4",children:"Connect Google to see your tasks."}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{placeholder:"Add task...",value:ee,onChange:t=>qe(t.target.value),onKeyDown:t=>t.key==="Enter"&&Be(),className:"rounded-none border-secondary bg-black font-terminal text-sm h-8"}),e.jsx(f,{size:"sm",onClick:Be,disabled:!ee.trim()||Qe.isPending,className:"rounded-none font-arcade text-xs h-8 px-3",children:e.jsx(me,{className:"w-3 h-3"})})]}),e.jsx("div",{className:"max-h-52 overflow-y-auto pr-1",children:Ce.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-4 text-sm",children:"No tasks in this list."}):e.jsxs("div",{className:"space-y-2",children:[ts.map(t=>{const o=rs(t.due),T=t.due&&pe(new Date(t.due))&&!z(new Date(t.due));return e.jsxs("div",{className:"flex items-center gap-2 p-2 border border-secondary/30 hover:border-primary/50 transition-colors group",children:[e.jsx("button",{onClick:()=>Le.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded",children:e.jsx(Ae,{className:"w-4 h-4 text-muted-foreground group-hover:text-primary"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:"font-terminal text-sm text-white block truncate",children:t.title}),(o||t.notes)&&e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[o&&e.jsx("span",{className:h("font-terminal text-xs",T?"text-red-400":"text-muted-foreground"),children:o}),t.notes&&e.jsx("span",{className:"font-terminal text-xs text-muted-foreground truncate max-w-[120px]",children:t.notes})]})]}),e.jsx("button",{onClick:()=>as(t),className:"p-1 text-muted-foreground hover:text-primary opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(Ve,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>Ue.mutate(t),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity flex-shrink-0",children:e.jsx(le,{className:"w-3 h-3"})})]},t.id)}),ke.length>0&&e.jsxs("div",{className:"pt-2 border-t border-secondary/20 mt-2",children:[e.jsxs("p",{className:"font-terminal text-xs text-muted-foreground mb-2",children:["Completed (",ke.length,")"]}),ke.slice(0,5).map(t=>e.jsxs("div",{className:"flex items-center gap-2 p-2 opacity-50 group hover:opacity-75 transition-opacity",children:[e.jsx("button",{onClick:()=>Le.mutate(t),className:"flex-shrink-0 p-0.5 hover:bg-primary/20 rounded-none",children:e.jsx(_e,{className:"w-4 h-4 text-green-500"})}),e.jsx("span",{className:"font-terminal text-sm text-muted-foreground line-through flex-1 truncate",children:t.title}),e.jsx("button",{onClick:()=>Ue.mutate(t),className:"p-1 text-muted-foreground hover:text-red-500 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(le,{className:"w-3 h-3"})})]},t.id))]})]})})]})})]}),e.jsx(W,{open:!!he,onOpenChange:t=>!t&&te(null),children:e.jsxs(Y,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:b,children:[e.jsxs(X,{children:[e.jsx(Z,{className:"font-arcade",children:"EDIT_TASK"}),e.jsx(J,{className:"sr-only",children:"Edit the selected task."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Title"}),e.jsx(v,{placeholder:"Task title",value:B,onChange:t=>ge(t.target.value),className:"rounded-none border-secondary bg-black font-terminal",autoFocus:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Notes"}),e.jsx(v,{placeholder:"Add notes...",value:se,onChange:t=>fe(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Due Date"}),e.jsx(v,{type:"date",value:$,onChange:t=>ye(t.target.value),className:"rounded-none border-secondary bg-black font-terminal"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-terminal text-xs text-muted-foreground block mb-1",children:"Add to Deadlines"}),e.jsxs(ie,{value:ae,onValueChange:t=>be(t),children:[e.jsx(de,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ce,{placeholder:"Select type"})}),e.jsxs(ue,{className:"bg-black border-secondary rounded-none",children:[e.jsx(C,{value:"none",children:"NONE - Don't add to deadlines"}),e.jsx(C,{value:"assignment",children:"ðŸ“‹ ASSIGNMENT"}),e.jsx(C,{value:"quiz",children:"â“ QUIZ"}),e.jsx(C,{value:"exam",children:"ðŸ“ EXAM"})]})]}),ae!=="none"&&!$&&e.jsx("p",{className:"font-terminal text-xs text-orange-400 mt-1",children:"âš  Set a due date to add to deadlines"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{variant:"outline",onClick:()=>te(null),className:"flex-1 rounded-none font-arcade border-secondary",children:"CANCEL"}),e.jsx(f,{onClick:ss,disabled:!B.trim()||$e.isPending,className:"flex-1 rounded-none font-arcade",children:"SAVE"})]})]})]})}),e.jsxs(_,{className:"bg-black/40 border-2 border-primary rounded-none self-start",children:[e.jsxs(P,{className:"border-b border-primary/50 p-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(ys,{className:"w-4 h-4"}),"DEADLINES"]}),e.jsxs(W,{open:Pt,onOpenChange:Oe,children:[e.jsx(Se,{asChild:!0,children:e.jsxs(f,{variant:"outline",size:"sm",className:"rounded-none border-primary hover:bg-primary/20 font-arcade text-[10px] h-7 px-2",children:[e.jsx(me,{className:"w-3 h-3 mr-1"}),"ADD"]})}),e.jsxs(Y,{className:"bg-black border-2 border-primary rounded-none translate-y-0",style:b,children:[e.jsxs(X,{children:[e.jsx(Z,{className:"font-arcade",children:"ADD_DEADLINE"}),e.jsx(J,{className:"sr-only",children:"Add a new academic deadline."})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsx(v,{placeholder:"Title (e.g., Midterm Exam)",value:N.title,onChange:t=>U({...N,title:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsxs(ie,{value:N.type,onValueChange:t=>U({...N,type:t}),children:[e.jsx(de,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ce,{placeholder:"Select type"})}),e.jsxs(ue,{className:"bg-black border-secondary rounded-none",children:[e.jsx(C,{value:"assignment",children:"ðŸ“‹ Assignment"}),e.jsx(C,{value:"quiz",children:"â“ Quiz"}),e.jsx(C,{value:"exam",children:"ðŸ“ Exam"}),e.jsx(C,{value:"project",children:"ðŸ“‚ Project"})]})]}),e.jsxs(ie,{value:N.course||"none",onValueChange:t=>U({...N,course:t==="none"?"":t}),children:[e.jsx(de,{className:"rounded-none border-secondary bg-black font-terminal",children:e.jsx(ce,{placeholder:"Select course"})}),e.jsxs(ue,{className:"bg-black border-secondary rounded-none",children:[e.jsx(C,{value:"none",children:"No course"}),O.map(t=>e.jsx(C,{value:t.name,children:t.name},t.id))]})]}),e.jsx(v,{type:"date",value:N.dueDate,onChange:t=>U({...N,dueDate:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(v,{placeholder:"Notes (optional)",value:N.notes,onChange:t=>U({...N,notes:t.target.value}),className:"rounded-none border-secondary bg-black font-terminal"}),e.jsx(f,{onClick:Wt,disabled:!N.title?.trim()||!N.dueDate||De.isPending,className:"w-full rounded-none font-arcade",children:"ADD_DEADLINE"})]})]})]})]}),e.jsxs(ie,{value:Ne,onValueChange:Rt,children:[e.jsx(de,{className:"rounded-none border-secondary bg-black/60 font-terminal text-xs h-7 w-full pl-3 pr-7",children:e.jsx(ce,{})}),e.jsxs(ue,{className:"bg-black border-secondary rounded-none min-w-[200px]",children:[e.jsx(C,{value:"all",children:"ALL COURSES"}),Jt.map(t=>e.jsx(C,{value:t,children:t},t))]})]})]}),e.jsx(I,{className:"p-4 max-h-72 overflow-y-auto",children:je.length===0?e.jsx("p",{className:"font-terminal text-muted-foreground text-center py-8",children:"No deadlines yet. Add assignments, quizzes, and exams to track."}):e.jsx(bs,{className:"h-full",children:e.jsx("div",{className:"space-y-2",children:es.map(t=>{const o=Yt(t.dueDate),T=new Date(t.dueDate);return e.jsxs("div",{className:h("flex items-center gap-3 p-3 border transition-all",t.completed?"border-secondary/20 opacity-50":Zt(o)),children:[e.jsx("button",{onClick:()=>$t.mutate(t.id),className:"flex-shrink-0 p-0.5",children:t.completed?e.jsx(_e,{className:"w-6 h-6 text-green-500"}):e.jsx(Ae,{className:"w-6 h-6 text-primary/70 hover:text-primary transition-colors"})}),e.jsx("span",{className:"text-lg flex-shrink-0",children:Xt(t.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:h("font-terminal text-sm",t.completed&&"line-through"),children:t.title}),oe(t.course)&&e.jsx("div",{className:"font-terminal text-xs text-muted-foreground",children:oe(t.course)})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:h("px-2 py-1 font-terminal text-xs font-bold text-white",t.completed?"bg-secondary/50":o==="overdue"?"bg-red-600":o==="today"?"bg-orange-600":o==="tomorrow"?"bg-yellow-600":o==="soon"?"bg-red-800":"bg-red-900"),children:xe(T)?Ee(T,"MMM d"):"No date"}),e.jsx("button",{onClick:()=>Ut.mutate(t.id),className:"p-1 text-muted-foreground hover:text-red-500 transition-colors",children:e.jsx(le,{className:"w-4 h-4"})})]})]},t.id)})})})})]}),Re.length>0?e.jsxs(_,{className:"bg-black/40 border-2 border-primary rounded-none md:col-span-2",children:[e.jsx(P,{className:"border-b border-primary/50 p-4",children:e.jsxs(R,{className:"font-arcade text-sm flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4 text-orange-500"}),"WEAKNESS_QUEUE"]})}),e.jsx(I,{className:"p-4",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:Re.map(t=>e.jsxs("div",{className:"px-3 py-1 border border-orange-500/50 bg-orange-500/10 font-terminal text-sm text-orange-300","data-testid":`weakness-${t.id}`,children:[t.topic,t.reason&&e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:["(",t.reason,")"]})]},t.id))})})]}):e.jsx(_,{className:"bg-black/40 border border-secondary/30 rounded-none md:col-span-2",children:e.jsxs(I,{className:"p-3 flex items-center justify-center gap-2",children:[e.jsx(Ye,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"font-terminal text-xs text-muted-foreground",children:"No flagged weaknesses â€” topics you struggle with will appear here."})]})})]})]})})}export{ya as default};
